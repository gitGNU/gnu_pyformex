/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 *  - the JSXCompressor library (http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/JXG/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function j(a){throw a;}var l=void 0,p=!0,s=null,t=!1;function aa(){return function(){}}function ea(a){return function(b){this[a]=b}}function u(a){return function(){return this[a]}}var v,fa=this;function ha(){}
function ia(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ja(a){return a!==l}function A(a){return"array"==ia(a)}function ka(a){var b=ia(a);return"array"==b||"object"==b&&"number"==typeof a.length}function la(a){return"string"==typeof a}function D(a){return"number"==typeof a}function ma(a){return"function"==ia(a)}function na(a){a=ia(a);return"object"==a||"array"==a||"function"==a}function oa(a){return a[qa]||(a[qa]=++ra)}
var qa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ra=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}function ta(a,b,c){a||j(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ua(a,b,c){ua=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ta;return ua.apply(s,arguments)}function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var xa=Date.now||function(){return+new Date};
function E(a,b){var c=a.split("."),d=fa;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ja(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function G(a,b){function c(){}c.prototype=b.prototype;a.j=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ya(a,b,c){this.Ha=this.Ga=this.Fa=0;3==arguments.length?(this.Fa=Number(a),this.Ga=Number(b),this.Ha=Number(c)):a instanceof ya?(this.Fa=Number(a.x()),this.Ga=Number(a.y()),this.Ha=Number(a.b())):(this.Fa=Number(a[0]),this.Ga=Number(a[1]),this.Ha=Number(a[2]))}ya.prototype={f:function(){return new ya(this.Fa,this.Ga,this.Ha)},length:function(){return Math.sqrt(za(this,this))},x:u("Fa"),y:u("Ga"),b:u("Ha")};
function Aa(a,b){return new ya(a.Ga*b.b()-a.Ha*b.y(),a.Ha*b.x()-a.Fa*b.b(),a.Fa*b.y()-a.Ga*b.x())}function Ba(a){var b=a.length();return new ya(a.Fa/b,a.Ga/b,a.Ha/b)}function za(a,b){return a.Fa*b.x()+a.Ga*b.y()+a.Ha*b.b()}function Ca(a,b){return new ya(a.Fa*b,a.Ga*b,a.Ha*b)}function Da(a,b){return new ya(a.Fa-b.x(),a.Ga-b.y(),a.Ha-b.b())}function Ea(a,b){return new ya(a.Fa+b.x(),a.Ga+b.y(),a.Ha+b.b())}function Ga(a){return new ya(-a.Fa,-a.Ga,-a.Ha)};var I=I||{};I.yj=p;I.va=function(a){eval("X.DEV === undefined")||window.console.time(a)};I.pa=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.eh=0;this.rj=function(){return this.eh++}};function Ha(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c]}}var Ia=window.Vg;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&j(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
for(var Ja=0,Ka=["ms","moz","webkit","o"],La=0;La<Ka.length&&!window.requestAnimationFrame;++La)window.requestAnimationFrame=window[Ka[La]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Ka[La]+"CancelAnimationFrame"]||window[Ka[La]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(0,16-(b-Ja)),d=window.setTimeout(function(){a(b+c)},c);Ja=b+c;return d});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});
"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){a===l&&j(Error("Not enough arguments."));var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),f=new Uint8Array(d),g=a,h=0;g<c;++g,++h)f[h]=e[g];return d});E("$",Ia);E("Function.prototype.bind",Function.prototype.bind);
E("window.requestAnimationFrame",window.requestAnimationFrame);E("window.cancelAnimationFrame",window.cancelAnimationFrame);function Ma(a){if(!Oa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Pa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Qa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ra,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Sa,"&quot;"));return a}var Pa=/&/g,Qa=/</g,Ra=/>/g,Sa=/\"/g,Oa=/[&<>\"]/;var Ta,Ua,Va,Wa,Ya,Za,$a;function ab(){return fa.navigator?fa.navigator.userAgent:s}function bb(){return fa.navigator}Ya=Wa=Va=Ua=Ta=t;var cb;if(cb=ab()){var db=bb();Ta=0==cb.indexOf("Opera");Ua=!Ta&&-1!=cb.indexOf("MSIE");Wa=(Va=!Ta&&-1!=cb.indexOf("WebKit"))&&-1!=cb.indexOf("Mobile");Ya=!Ta&&!Va&&"Gecko"==db.product}var eb=Ta,J=Ua,fb=Ya,hb=Va,ib=Wa,jb,kb=bb();jb=kb&&kb.platform||"";Za=-1!=jb.indexOf("Mac");$a=-1!=jb.indexOf("Win");var lb=!!bb()&&-1!=(bb().appVersion||"").indexOf("X11"),mb;
a:{var nb="",ob;if(eb&&fa.opera)var pb=fa.opera.version,nb="function"==typeof pb?pb():pb;else if(fb?ob=/rv\:([^\);]+)(\)|;)/:J?ob=/MSIE\s+([^\);]+)(\)|;)/:hb&&(ob=/WebKit\/(\S+)/),ob)var qb=ob.exec(ab()),nb=qb?qb[1]:"";if(J){var rb,sb=fa.document;rb=sb?sb.documentMode:l;if(rb>parseFloat(nb)){mb=String(rb);break a}}mb=nb}var tb={};
function ub(a){var b;if(!(b=tb[a])){b=0;for(var c=String(mb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var n=m.exec(g)||["","",""],q=k.exec(h)||["","",""];if(0==n[0].length&&0==q[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==n[1].length?0:parseInt(n[1],
10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==n[2].length)<(0==q[2].length)?-1:(0==n[2].length)>(0==q[2].length)?1:0)||(n[2]<q[2]?-1:n[2]>q[2]?1:0)}while(0==b)}b=tb[a]=0<=b}return b}var vb={};function wb(a){return vb[a]||(vb[a]=J&&document.documentMode&&document.documentMode>=a)};function xb(a,b){for(var c in a)b.call(l,a[c],c,a)}function yb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function zb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Ab="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ab.length;f++)c=Ab[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Db=Array.prototype,Eb=Db.indexOf?function(a,b,c){return Db.indexOf.call(a,b,c)}:function(a,b,c){c=c==s?0:0>c?Math.max(0,a.length+c):c;if(la(a))return!la(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Fb=Db.forEach?function(a,b,c){Db.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=la(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Gb=Db.map?function(a,b,c){return Db.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
la(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Hb=Db.some?function(a,b,c){return Db.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=la(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return p;return t},Ib=Db.every?function(a,b,c){return Db.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=la(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return t;return p};function Jb(a,b){var c=Eb(a,b);0<=c&&Db.splice.call(a,c,1)}
function Kb(a){return Db.concat.apply(Db,arguments)}function Lb(a){if(A(a))return Kb(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Mb(a,b,c){return 2>=arguments.length?Db.slice.call(a,b):Db.slice.call(a,b,c)};function Nb(a){if("function"==typeof a.ab)a=a.ab();else if(ka(a)||la(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function Ob(a){if("function"==typeof a.Ta)return a.Ta();if(la(a))return a.split("");if(ka(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return yb(a)}
function Pb(a,b){if("function"==typeof a.every)return a.every(b,l);if(ka(a)||la(a))return Ib(a,b,l);var c;if("function"==typeof a.ad)c=a.ad();else if("function"!=typeof a.Ta)if(ka(a)||la(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=zb(a);else c=l;for(var d=Ob(a),e=d.length,f=0;f<e;f++)if(!b.call(l,d[f],c&&c[f],a))return t;return p};var Qb="StopIteration"in fa?fa.StopIteration:Error("StopIteration");function Rb(){}Rb.prototype.next=function(){j(Qb)};Rb.prototype.Ac=function(){return this};function Sb(a){if(a instanceof Rb)return a;if("function"==typeof a.Ac)return a.Ac(t);if(ka(a)){var b=0,c=new Rb;c.next=function(){for(;;){b>=a.length&&j(Qb);if(b in a)return a[b++];b++}};return c}j(Error("Not implemented"))};function Tb(a,b){this.F={};this.z=[];var c=arguments.length;if(1<c){c%2&&j(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.Ae(a)}v=Tb.prototype;v.O=0;v.ld=0;v.ab=u("O");v.Ta=function(){Ub(this);for(var a=[],b=0;b<this.z.length;b++)a.push(this.F[this.z[b]]);return a};v.ad=function(){Ub(this);return this.z.concat()};v.Ie=function(a){for(var b=0;b<this.z.length;b++){var c=this.z[b];if(Vb(this.F,c)&&this.F[c]==a)return p}return t};
v.Xc=function(a,b){if(this===a)return p;if(this.O!=a.ab())return t;var c=b||Wb;Ub(this);for(var d,e=0;d=this.z[e];e++)if(!c(this.get(d),a.get(d)))return t;return p};function Wb(a,b){return a===b}v.clear=function(){this.F={};this.ld=this.O=this.z.length=0};v.remove=function(a){return Vb(this.F,a)?(delete this.F[a],this.O--,this.ld++,this.z.length>2*this.O&&Ub(this),p):t};
function Ub(a){if(a.O!=a.z.length){for(var b=0,c=0;b<a.z.length;){var d=a.z[b];Vb(a.F,d)&&(a.z[c++]=d);b++}a.z.length=c}if(a.O!=a.z.length){for(var e={},c=b=0;b<a.z.length;)d=a.z[b],Vb(e,d)||(a.z[c++]=d,e[d]=1),b++;a.z.length=c}}v.get=function(a,b){return Vb(this.F,a)?this.F[a]:b};v.set=function(a,b){Vb(this.F,a)||(this.O++,this.z.push(a),this.ld++);this.F[a]=b};v.Ae=function(a){var b;a instanceof Tb?(b=a.ad(),a=a.Ta()):(b=zb(a),a=yb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};v.f=function(){return new Tb(this)};
v.Ac=function(a){Ub(this);var b=0,c=this.z,d=this.F,e=this.ld,f=this,g=new Rb;g.next=function(){for(;;){e!=f.ld&&j(Error("The map has changed since the iterator was created"));b>=c.length&&j(Qb);var g=c[b++];return a?g:d[g]}};return g};function Vb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Xb(a){this.F=new Tb;a&&this.Ae(a)}function Zb(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+oa(a):b.substr(0,1)+a}v=Xb.prototype;v.ab=function(){return this.F.ab()};v.add=function(a){this.F.set(Zb(a),a)};v.Ae=function(a){a=Ob(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};v.Wd=function(a){a=Ob(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};v.remove=function(a){return this.F.remove(Zb(a))};v.clear=function(){this.F.clear()};
v.contains=function(a){a=Zb(a);return Vb(this.F.F,a)};v.ng=function(a){var b=new Xb;a=Ob(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};v.Ta=function(){return this.F.Ta()};v.f=function(){return new Xb(this)};
v.Xc=function(a){var b;if(b=this.ab()==Nb(a)){var c=a;a=Nb(c);this.ab()>a?b=t:(!(c instanceof Xb)&&5<a&&(c=new Xb(c)),b=Pb(this,function(a){if("function"==typeof c.contains)a=c.contains(a);else if("function"==typeof c.Ie)a=c.Ie(a);else if(ka(c)||la(c))a=0<=Eb(c,a);else a:{for(var b in c)if(c[b]==a){a=p;break a}a=t}return a}))}return b};v.Ac=function(){return this.F.Ac(t)};function $b(){}$b.prototype.Zf=t;$b.prototype.Sa=function(){this.Zf||(this.Zf=p,this.P())};$b.prototype.P=function(){this.yh&&ac.apply(s,this.yh)};function bc(a){a&&"function"==typeof a.Sa&&a.Sa()}function ac(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ka(d)?ac.apply(s,d):bc(d)}};function cc(a,b){this.tg=b;this.$c=[];a>this.tg&&j(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.$c.push(this.Gd())}G(cc,$b);v=cc.prototype;v.Vf=s;v.Yf=s;function dc(a,b){a.$c.length<a.tg?a.$c.push(b):a.Ne(b)}v.Gd=function(){return this.Vf?this.Vf():{}};v.Ne=function(a){if(this.Yf)this.Yf(a);else if(na(a))if(ma(a.Sa))a.Sa();else for(var b in a)delete a[b]};v.P=function(){cc.j.P.call(this);for(var a=this.$c;a.length;)this.Ne(a.pop());delete this.$c};function ec(){this.Yc=[];this.df=new Tb;this.Og=this.Pg=this.Qg=this.Lg=0;this.kd=new Tb;this.Rf=this.Ng=0;this.Ze=1;this.Oe=new cc(0,4E3);this.Oe.Gd=function(){return new fc};this.Mg=new cc(0,50);this.Mg.Gd=function(){return new gc};var a=this;this.Re=new cc(0,2E3);this.Re.Gd=function(){return String(a.Ze++)};this.Re.Ne=aa();this.xh=3}function gc(){this.rf=this.time=this.count=0}
gc.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.rf&&a.push(" [VarAlloc = ",this.rf,"]");return a.join("")};function fc(){}function hc(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(ic(a.$f-c));e.push(" ",jc(a.$f-b));0==a.Pe?e.push(" Start        "):1==a.Pe?(e.push(" Done "),e.push(ic(a.Fk-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.nj&&e.push("[VarAlloc ",a.nj,"] ");return e.join("")}
fc.prototype.toString=function(){return this.type==s?this.comment:"["+this.type+"] "+this.comment};ec.prototype.reset=function(a){this.xh=a;for(a=0;a<this.Yc.length;a++){var b=this.Oe.id;b&&dc(this.Re,b);dc(this.Oe,this.Yc[a])}this.Yc.length=0;this.df.clear();this.Lg=xa();this.Rf=this.Ng=this.Og=this.Pg=this.Qg=0;b=this.kd.ad();for(a=0;a<b.length;a++){var c=this.kd.get(b[a]);c.count=0;c.time=0;c.rf=0;dc(this.Mg,c)}this.kd.clear()};
ec.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Yc.length;d++){var e=this.Yc[d];1==e.Pe&&c.pop();a.push(" ",hc(e,this.Lg,b,c.join("")));b=e.$f;a.push("\n");0==e.Pe&&c.push("|  ")}if(0!=this.df.ab()){var f=xa();a.push(" Unstopped timers:\n");d=this.df;b=function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",jc(b.startTime),")\n")};if(ka(d))try{Fb(d,b,l)}catch(g){g!==Qb&&j(g)}else{d=Sb(d);try{for(;;)b.call(l,d.next())}catch(h){h!==Qb&&j(h)}}}b=this.kd.ad();for(d=0;d<b.length;d++)c=
this.kd.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Ng,"\n","Total comments created ",this.Rf,"\n","Overhead start: ",this.Qg," ms\n","Overhead end: ",this.Pg," ms\n","Overhead comment: ",this.Og," ms\n");return a.join("")};function ic(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function jc(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new ec;function kc(){}var lc=0;v=kc.prototype;v.key=0;v.xc=t;v.Ge=t;v.ja=function(a,b,c,d,e,f){ma(a)?this.og=p:a&&a.handleEvent&&ma(a.handleEvent)?this.og=t:j(Error("Invalid listener argument"));this.dd=a;this.Ig=b;this.src=c;this.type=d;this.capture=!!e;this.Qe=f;this.Ge=t;this.key=++lc;this.xc=t};v.handleEvent=function(a){return this.og?this.dd.call(this.Qe||this.src,a):this.dd.handleEvent.call(this.dd,a)};!J||wb(9);var mc=!J||wb(9),nc=J&&!ub("8");!hb||ub("528");fb&&ub("1.9b")||J&&ub("8")||eb&&ub("9.5")||hb&&ub("528");!fb||ub("8");function oc(a,b){this.type=a;this.currentTarget=this.target=b}G(oc,$b);v=oc.prototype;v.P=function(){delete this.type;delete this.target;delete this.currentTarget};v.gc=t;v.hd=p;v.stopPropagation=function(){this.gc=p};v.preventDefault=function(){this.hd=t};function pc(a){pc[" "](a);return a}pc[" "]=ha;function qc(a,b){a&&this.ja(a,b)}G(qc,oc);v=qc.prototype;v.target=s;v.relatedTarget=s;v.offsetX=0;v.offsetY=0;v.clientX=0;v.clientY=0;v.screenX=0;v.screenY=0;v.button=0;v.keyCode=0;v.charCode=0;v.ctrlKey=t;v.altKey=t;v.shiftKey=t;v.metaKey=t;v.Hi=t;v.Ja=s;
v.ja=function(a,b){var c=this.type=a.type;oc.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(fb){var e;a:{try{pc(d.nodeName);e=p;break a}catch(f){}e=t}e||(d=s)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=hb||a.offsetX!==l?a.offsetX:a.layerX;this.offsetY=hb||a.offsetY!==l?a.offsetY:a.layerY;this.clientX=a.clientX!==l?a.clientX:a.pageX;this.clientY=a.clientY!==l?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Hi=Za?a.metaKey:a.ctrlKey;this.state=a.state;this.Ja=a;delete this.hd;delete this.gc};v.stopPropagation=function(){qc.j.stopPropagation.call(this);this.Ja.stopPropagation?this.Ja.stopPropagation():this.Ja.cancelBubble=p};
v.preventDefault=function(){qc.j.preventDefault.call(this);var a=this.Ja;if(a.preventDefault)a.preventDefault();else if(a.returnValue=t,nc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};v.Kh=u("Ja");v.P=function(){qc.j.P.call(this);this.relatedTarget=this.currentTarget=this.target=this.Ja=s};var rc={},sc={},tc={},uc={};
function K(a,b,c,d,e){if(b){if(A(b)){for(var f=0;f<b.length;f++)K(a,b[f],c,d,e);return s}d=!!d;var g=sc;b in g||(g[b]={O:0,La:0});g=g[b];d in g||(g[d]={O:0,La:0},g.O++);var g=g[d],h=oa(a),m;g.La++;if(g[h]){m=g[h];for(f=0;f<m.length;f++)if(g=m[f],g.dd==c&&g.Qe==e){if(g.xc)break;return m[f].key}}else m=g[h]=[],g.O++;var k=vc,n=mc?function(a){return k.call(n.src,n.key,a)}:function(a){a=k.call(n.src,n.key,a);if(!a)return a},f=n;f.src=a;g=new kc;g.ja(c,f,a,b,d,e);c=g.key;f.key=c;m.push(g);rc[c]=g;tc[h]||
(tc[h]=[]);tc[h].push(g);a.addEventListener?(a==fa||!a.Xf)&&a.addEventListener(b,f,d):a.attachEvent(b in uc?uc[b]:uc[b]="on"+b,f);return c}j(Error("Invalid event type"))}function wc(a,b,c,d,e){if(A(b))for(var f=0;f<b.length;f++)wc(a,b[f],c,d,e);else a=K(a,b,c,d,e),rc[a].Ge=p}
function xc(a,b,c,d,e){if(A(b))for(var f=0;f<b.length;f++)xc(a,b[f],c,d,e);else{d=!!d;a:{f=sc;if(b in f&&(f=f[b],d in f&&(f=f[d],a=oa(a),f[a]))){a=f[a];break a}a=s}if(a)for(f=0;f<a.length;f++)if(a[f].dd==c&&a[f].capture==d&&a[f].Qe==e){yc(a[f].key);break}}}
function yc(a){if(!rc[a])return t;var b=rc[a];if(b.xc)return t;var c=b.src,d=b.type,e=b.Ig,f=b.capture;c.removeEventListener?(c==fa||!c.Xf)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in uc?uc[d]:uc[d]="on"+d,e);c=oa(c);e=sc[d][f][c];if(tc[c]){var g=tc[c];Jb(g,b);0==g.length&&delete tc[c]}b.xc=p;e.xg=p;zc(d,f,c,e);delete rc[a];return p}
function zc(a,b,c,d){if(!d.Sd&&d.xg){for(var e=0,f=0;e<d.length;e++)d[e].xc?d[e].Ig.src=s:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.xg=t;0==f&&(delete sc[a][b][c],sc[a][b].O--,0==sc[a][b].O&&(delete sc[a][b],sc[a].O--),0==sc[a].O&&delete sc[a])}}function Ac(a,b,c,d,e){var f=1;b=oa(b);if(a[b]){a.La--;a=a[b];a.Sd?a.Sd++:a.Sd=1;try{for(var g=a.length,h=0;h<g;h++){var m=a[h];m&&!m.xc&&(f&=Bc(m,e)!==t)}}finally{a.Sd--,zc(c,d,b,a)}}return Boolean(f)}
function Bc(a,b){var c=a.handleEvent(b);a.Ge&&yc(a.key);return c}
function vc(a,b){if(!rc[a])return p;var c=rc[a],d=c.type,e=sc;if(!(d in e))return p;var e=e[d],f,g;if(!mc){var h;if(!(h=b))a:{h=["window","event"];for(var m=fa;f=h.shift();)if(m[f]!=s)m=m[f];else{h=s;break a}h=m}f=h;h=p in e;m=t in e;if(h){if(0>f.keyCode||f.returnValue!=l)return p;a:{var k=t;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(n){k=p}if(k||f.returnValue==l)f.returnValue=p}}k=new qc;k.ja(f,this);f=p;try{if(h){for(var q=[],r=k.currentTarget;r;r=r.parentNode)q.push(r);g=e[p];g.La=g.O;for(var w=
q.length-1;!k.gc&&0<=w&&g.La;w--)k.currentTarget=q[w],f&=Ac(g,q[w],d,p,k);if(m){g=e[t];g.La=g.O;for(w=0;!k.gc&&w<q.length&&g.La;w++)k.currentTarget=q[w],f&=Ac(g,q[w],d,t,k)}}else f=Bc(c,k)}finally{q&&(q.length=0),k.Sa()}return f}d=new qc(b,this);try{f=Bc(c,d)}finally{d.Sa()}return f}var Cc=0;function Dc(a){return a+"_"+Cc++};function Ec(){}G(Ec,$b);v=Ec.prototype;v.Xf=p;v.Ud=s;v.gf=ea("Ud");v.addEventListener=function(a,b,c,d){K(this,a,b,c,d)};v.removeEventListener=function(a,b,c,d){xc(this,a,b,c,d)};
v.dispatchEvent=function(a){var b=a.type||a,c=sc;if(b in c){if(la(a))a=new oc(a,this);else if(a instanceof oc)a.target=a.target||this;else{var d=a;a=new oc(b,this);Cb(a,d)}var d=1,e,c=c[b],b=p in c,f;if(b){e=[];for(f=this;f;f=f.Ud)e.push(f);f=c[p];f.La=f.O;for(var g=e.length-1;!a.gc&&0<=g&&f.La;g--)a.currentTarget=e[g],d&=Ac(f,e[g],a.type,p,a)&&a.hd!=t}if(t in c)if(f=c[t],f.La=f.O,b)for(g=0;!a.gc&&g<e.length&&f.La;g++)a.currentTarget=e[g],d&=Ac(f,e[g],a.type,t,a)&&a.hd!=t;else for(e=this;!a.gc&&e&&
f.La;e=e.Ud)a.currentTarget=e,d&=Ac(f,e,a.type,t,a)&&a.hd!=t;a=Boolean(d)}else a=p;return a};v.P=function(){Ec.j.P.call(this);var a,b=0,c=a==s;a=!!a;if(this==s)xb(tc,function(d){for(var e=d.length-1;0<=e;e--){var f=d[e];if(c||a==f.capture)yc(f.key),b++}});else{var d=oa(this);if(tc[d])for(var d=tc[d],e=d.length-1;0<=e;e--){var f=d[e];if(c||a==f.capture)yc(f.key),b++}}this.Ud=s};function L(){this.c="base";this.xa=window["X.counter"].rj();this.e=t}G(L,Ec);L.prototype.__defineGetter__("classname",u("c"));L.prototype.__defineGetter__("id",u("xa"));E("X.base",L);function Fc(a,b){this.ua=new ya(a);this.ea=new ya(b)}Fc.prototype={f:function(){return new Fc(this.ua.f(),this.ea.f())},dc:function(){this.ea=Ga(this.ea)}};function Gc(a,b){this.ea=a;this.md=b}Gc.prototype={f:function(){return new Gc(this.ea.f(),this.md)},dc:function(){this.ea=Ga(this.ea);this.md=-this.md}};function Hc(a,b){this.ob=a;this.$d=b;var c=a[0].ua,d=a[2].ua,d=Ba(Aa(Da(a[1].ua,c),Da(d,c)));this.Ea=new Gc(d,za(d,c))}Hc.prototype={f:function(){var a=this.ob.map(function(a){return a.f()});return new Hc(a,this.$d)},dc:function(){this.ob.reverse().map(function(a){a.dc()});this.Ea.dc()}};
function Ic(a,b,c,d,e,f){for(var g=0,h=[],m=0;m<a.ob.length;m++){var k=za(b.ea,a.ob[m].ua)-b.md,k=-1E-5>k?2:1E-5<k?1:0,g=g|k;h.push(k)}switch(g){case 0:(0<za(b.ea,a.Ea.ea)?c:d).push(a);break;case 1:e.push(a);break;case 2:f.push(a);break;case 3:c=[];d=[];for(m=0;m<a.ob.length;m++){var n=(m+1)%a.ob.length,k=h[m],q=h[n],g=a.ob[m],n=a.ob[n];2!=k&&c.push(g);1!=k&&d.push(2!=k?g.f():g);3==(k|q)&&(k=(b.md-za(b.ea,g.ua))/za(b.ea,Da(n.ua,g.ua)),k=new Fc(Ea(g.ua,Ca(Da(n.ua,g.ua),k)),Ea(g.ea,Ca(Da(n.ea,g.ea),
k))),c.push(k),d.push(k.f()))}3<=c.length&&e.push(new Hc(c,a.$d));3<=d.length&&f.push(new Hc(d,a.$d))}};function Jc(a){this.ha=this.ia=this.Ea=s;this.B=[];a&&Kc(this,a)}Jc.prototype={f:function(){var a=new Jc,b=this.Ea&&this.Ea.f();a.Ea=b;b=this.ia&&this.ia.f();a.ia=b;b=this.ha&&this.ha.f();a.ha=b;a.Yd(this.B.map(function(a){return a.f()}));return a},da:function(){for(var a=0;a<this.B.length;a++)this.B[a].dc();this.Ea.dc();this.ia&&this.ia.da();this.ha&&this.ha.da();a=this.ia;this.ia=this.ha;this.ha=a},Yd:ea("B")};
function Kc(a,b){if(b.length){a.Ea||(a.Ea=b[0].Ea.f());for(var c=[],d=[],e=0;e<b.length;e++)Ic(b[e],a.Ea,a.B,a.B,c,d);c.length&&(a.ia||(a.ia=new Jc),Kc(a.ia,c));d.length&&(a.ha||(a.ha=new Jc),Kc(a.ha,d))}}function Lc(a){var b=a.B.slice();a.ia&&(b=b.concat(Lc(a.ia)));a.ha&&(b=b.concat(Lc(a.ha)));return b}function Mc(a,b){a.B=Nc(b,a.B);a.ia&&Mc(a.ia,b);a.ha&&Mc(a.ha,b)}
function Nc(a,b){if(!a.Ea)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)Ic(b[e],a.Ea,c,d,c,d);a.ia&&(c=Nc(a.ia,c));d=a.ha?Nc(a.ha,d):[];return c.concat(d)};function Oc(){this.B=[]}function Pc(a){var b=new Oc;b.Yd(a);return b}
Oc.prototype={f:function(){var a=new Oc;a.Yd(this.B.map(function(a){return a.f()}));return a},pf:function(a){var b=new Jc(this.f().B);a=new Jc(a.f().B);Mc(b,a);Mc(a,b);a.da();Mc(a,b);a.da();Kc(b,Lc(a));return Pc(Lc(b))},oa:function(a){var b=new Jc(this.f().B);a=new Jc(a.f().B);b.da();Mc(b,a);Mc(a,b);a.da();Mc(a,b);a.da();Kc(b,Lc(a));b.da();return Pc(Lc(b))},Te:function(a){var b=new Jc(this.f().B);a=new Jc(a.f().B);b.da();Mc(a,b);a.da();Mc(b,a);Mc(a,b);Kc(b,Lc(a));b.da();return Pc(Lc(b))},inverse:function(){var a=
this.f();a.B.map(function(a){a.dc()});return a},Yd:ea("B")};function Qc(){L.call(this);this.c="indexer";this.xe=[];this.tk=[];this.xb={}}G(Qc,L);Qc.prototype.add=function(a){a==s&&j(Error("Invalid object."));var b=window.JSON.stringify(a);b in this.xb||(this.xb[b]=this.xe.length,this.xe.push(a));return this.xb[b]};Qc.prototype.unique=u("xe");function Rc(a){L.call(this);this.c="file";this.vd=a;this.e=p}G(Rc,L);function Sc(){this.Lb=this.r=s}Sc.prototype.__defineSetter__("file",function(a){this.r=a==s||A(a)&&0==a.length?s:A(a)?1==a.length?new Rc(a[0]):Gb(a,function(a){var c=new M;c.r=new Rc(a);return c}):new Rc(a)});Sc.prototype.__defineGetter__("file",function(){return!this.r?"":A(this.r)?this.r.map(function(a){return a.r.vd}):this.r.vd});Sc.prototype.__defineGetter__("filedata",u("Lb"));
Sc.prototype.__defineSetter__("filedata",function(a){if(a==s||A(a)&&0==a.length)this.Lb=s;if(A(a))if(1==a.length)this.Lb=a[0];else{var b=this.r.length,c;for(c=0;c<b;c++)this.r[c].Lb=a[c]}else this.Lb=a});function Tc(){L.call(this);this.c="colortable";this.xb=new Tb;Ha(this,new Sc)}G(Tc,L);Tc.prototype.add=function(a,b,c,d,e,f){(!D(a)||!D(c)||!D(d)||!D(e)||!D(f))&&j(Error("Invalid color table entry."));this.xb.set(a,[b,c,d,e,f]);this.e=p};function Uc(a,b,c){this.x=ja(a)?a:0;this.y=ja(b)?b:0;this.b=ja(c)?c:0}Uc.prototype.f=function(){return new Uc(this.x,this.y,this.b)};Uc.prototype.nf=function(){return[this.x,this.y,this.b]};function N(a,b,c){this.x=a;this.y=b;this.b=c}G(N,Uc);v=N.prototype;v.f=function(){return new N(this.x,this.y,this.b)};v.fc=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};v.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};v.da=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};v.normalize=function(){return this.scale(1/this.fc())};v.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
v.oa=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};v.Xc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Vc(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return Math.sqrt(c*c+d*d+e*e)}function Wc(a,b){return new N(a.x+b.x,a.y+b.y,a.b+b.b)}function Xc(a,b){return new N(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function Yc(a,b){this.x=ja(a)?a:0;this.y=ja(b)?b:0}Yc.prototype.f=function(){return new Yc(this.x,this.y)};function Zc(a,b){return new Yc(a.x-b.x,a.y-b.y)};function $c(a,b){this.x=a;this.y=b}G($c,Yc);v=$c.prototype;v.f=function(){return new $c(this.x,this.y)};v.fc=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};v.scale=function(a){this.x*=a;this.y*=a;return this};v.da=function(){this.x=-this.x;this.y=-this.y;return this};v.normalize=function(){return this.scale(1/this.fc())};v.add=function(a){this.x+=a.x;this.y+=a.y;return this};v.oa=function(a){this.x-=a.x;this.y-=a.y;return this};
v.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};v.Xc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function ad(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d};function bd(a,b){this.width=a;this.height=b}function cd(a,b){return a==b?p:!a||!b?t:a.width==b.width&&a.height==b.height}bd.prototype.f=function(){return new bd(this.width,this.height)};bd.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};bd.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};bd.prototype.scale=function(a){this.width*=a;this.height*=a;return this};function dd(a,b){if(a instanceof dd)this.aa=a.nf();else{var c;if(c=ka(a))a:{for(var d=c=0;d<a.length;d++){if(!ka(a[d])||0<c&&a[d].length!=c){c=t;break a}for(var e=0;e<a[d].length;e++)if(!D(a[d][e])){c=t;break a}0==c&&(c=a[d].length)}c=0!=c}c?this.aa=Lb(a):a instanceof bd?this.aa=ed(a.height,a.width):D(a)&&D(b)&&0<a&&0<b?this.aa=ed(a,b):j(Error("Invalid argument(s) for Matrix contructor"))}this.G=new bd(this.aa[0].length,this.aa.length)}
function fd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new dd(b)}function gd(a,b,c){for(var d=0;d<a.Ca().height;d++)for(var e=0;e<a.Ca().width;e++)b.call(c,a.aa[d][e],d,e,a)}function hd(a,b){var c=new dd(a.Ca());gd(a,function(d,e,f){c.aa[e][f]=b.call(l,d,e,f,a)});return c}function ed(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}v=dd.prototype;
v.add=function(a){cd(this.G,a.Ca())||j(Error("Matrix summation is only supported on arrays of equal size"));return hd(this,function(b,c,d){return b+a.aa[c][d]})};v.Xc=function(a,b){if(this.G.width!=a.G.width||this.G.height!=a.G.height)return t;for(var c=b||0,d=0;d<this.G.height;d++)for(var e=0;e<this.G.width;e++)if(!(Math.abs(this.aa[d][e]-a.aa[d][e])<=(c||1E-6)))return t;return p};v.Ca=u("G");v.ba=function(a,b){return!(0<=a&&a<this.G.height&&0<=b&&b<this.G.width)?s:this.aa[a][b]};
v.l=function(a,b,c){0<=a&&a<this.G.height&&0<=b&&b<this.G.width||j(Error("Index out of bounds when setting matrix value, ("+a+","+b+") in size ("+this.G.height+","+this.G.width+")"));this.aa[a][b]=c};
v.multiply=function(a){if(a instanceof dd){this.G.width!=a.Ca().height&&j(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns."));var b=new dd(this.G.height,a.Ca().width);gd(b,function(c,d,e){for(var f=c=0;f<this.G.width;f++)c+=this.ba(d,f)*a.ba(f,e);b.l(d,e,c)},this);return b}if(D(a))return hd(this,function(b){return b*a});j(Error("A matrix can only be multiplied by a number or another matrix."))};
v.oa=function(a){cd(this.G,a.Ca())||j(Error("Matrix subtraction is only supported on arrays of equal size."));return hd(this,function(b,c,d){return b-a.aa[c][d]})};v.nf=u("aa");function id(a,b){dd.call(this,a,b);this.c="matrix"}G(id,dd);function jd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new id(b)}v=id.prototype;v.Ka=function(){var a=[],b=this.Ca(),c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(this.ba(c,d));return a};
v.translate=function(a){this.G.width!=this.G.height&&j(Error("Can not translate non-square matrix."));var b=this.Ca(),c=fd(b.height);a instanceof $c&&3==b.height?(c.l(0,2,a.x),c.l(1,2,a.y)):a instanceof N&&4==b.height?(c.l(0,3,a.x),c.l(1,3,a.y),c.l(2,3,a.b)):j(Error("Translation failed."));return new id(this.multiply(c))};
v.rotate=function(a,b){(4!=this.Ca().height||this.G.width!=this.G.height)&&j(Error("Only 4x4 matrices can be rotated."));(b==s||!(b instanceof N))&&j(Error("Invalid axis vector."));D(a)||j(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=fd(4);f.l(0,0,d+c.x*c.x*(1-d));f.l(0,1,c.x*c.y*(1-d)-c.b*e);f.l(0,2,c.x*c.b*(1-d)+c.y*e);f.l(1,0,c.y*c.x*(1-d)+c.b*e);f.l(1,1,d+c.y*c.y*(1-d));f.l(1,2,c.y*c.b*(1-d)-c.x*e);f.l(2,0,c.b*c.x*(1-d)-c.y*e);f.l(2,1,c.b*c.y*(1-d)+c.x*e);f.l(2,2,
d+c.b*c.b*(1-d));return new id(this.multiply(f))};v.Va=function(a){var b=this.Ca(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof N&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):j(Error("Multiplication by vector failed."));a=new dd(c);a=this.multiply(a);return new N(parseFloat(a.ba(0,0)),parseFloat(a.ba(1,0)),parseFloat(a.ba(2,0)))};v.lj=function(a,b){var c=this.aa[a];this.aa[a]=this.aa[b];this.aa[b]=c};
v.kj=function(a,b){for(var c=this.Ca(),d=0,d=0;d<c.height;d++){var e=this.ba(d,a);e||(e=0);var f=this.ba(d,b);f||(f=0);this.l(d,a,f);this.l(d,b,e)}};E("X.matrix",id);E("X.matrix.createIdentityMatrix",jd);E("X.matrix.prototype.flatten",id.prototype.Ka);E("X.matrix.prototype.translate",id.prototype.translate);E("X.matrix.prototype.rotate",id.prototype.rotate);E("X.matrix.prototype.toArray",id.prototype.nf);E("X.matrix.prototype.getValueAt",id.prototype.ba);E("X.matrix.prototype.setValueAt",id.prototype.l);
E("X.matrix.prototype.multiplyByVector",id.prototype.Va);E("X.matrix.prototype.swapRows",id.prototype.lj);E("X.matrix.prototype.swapCols",id.prototype.kj);function kd(){L.call(this);this.c="transform";this.D=jd(4);this.zf=new Float32Array(this.D.Ka())}G(kd,L);kd.prototype.__defineGetter__("matrix",u("D"));kd.prototype.__defineSetter__("matrix",function(a){(a==s||!(a instanceof id))&&j(Error("Invalid matrix."));this.D=a;this.q()});v=kd.prototype;v.Ui=function(a){(!D(a)||-360>a||360<a)&&j(Error("Invalid angle."));this.D=this.D.rotate(a*Math.PI/180,new N(0,1,0));this.q()};
v.Vi=function(a){(!D(a)||-360>a||360<a)&&j(Error("Invalid angle."));this.D=this.D.rotate(a*Math.PI/180,new N(1,0,0));this.q()};v.Wi=function(a){(!D(a)||-360>a||360<a)&&j(Error("Invalid angle."));this.D=this.D.rotate(a*Math.PI/180,new N(0,0,1));this.q()};v.oj=function(a){D(a)||j(Error("Invalid distance."));this.D=this.D.translate(new N(a,0,0));this.q()};v.pj=function(a){D(a)||j(Error("Invalid distance."));this.D=this.D.translate(new N(0,a,0));this.q()};
v.qj=function(a){D(a)||j(Error("Invalid distance."));this.D=this.D.translate(new N(0,0,a));this.q()};function ld(a,b,c){var d=a.D.ba(b,c);d||(d=0);a.D.l(b,c,-1*d);a.q()}v.Gh=function(){ld(this,0,0)};v.Hh=function(){ld(this,1,1)};v.Ih=function(){ld(this,2,2)};v.q=function(){this.zf=new Float32Array(this.D.Ka());this.e=p};E("X.transform",kd);E("X.transform.prototype.rotateX",kd.prototype.Ui);E("X.transform.prototype.rotateY",kd.prototype.Vi);E("X.transform.prototype.rotateZ",kd.prototype.Wi);
E("X.transform.prototype.translateX",kd.prototype.oj);E("X.transform.prototype.translateY",kd.prototype.pj);E("X.transform.prototype.translateZ",kd.prototype.qj);E("X.transform.prototype.flipX",kd.prototype.Gh);E("X.transform.prototype.flipY",kd.prototype.Hh);E("X.transform.prototype.flipZ",kd.prototype.Ih);E("X.transform.prototype.modified",kd.prototype.q);function md(){L.call(this);this.c="texture";this.Aa=this.rb=this.r=s;this.Eb=this.Fb=0;Ha(this,new Sc)}G(md,L);E("X.texture",md);function P(a,b){L.call(this);this.c="triplets";this.Sb=Infinity;this.Pb=-Infinity;this.Tb=Infinity;this.Qb=-Infinity;this.Ub=Infinity;this.Rb=-Infinity;this.nd=[0,0,0];this.yf=p;this.k=0;this.M=new Float32Array(a);b!=s&&(this.M=b.M.subarray(0,b.M.length),this.k=this.M.length,this.Sb=b.Sb,this.Pb=b.Pb,this.Tb=b.Tb,this.Qb=b.Qb,this.Ub=b.Ub,this.Rb=b.Rb,this.nd=b.nd.slice(),this.yf=t)}G(P,L);v=P.prototype;
v.add=function(a,b,c){this.Sb=Math.min(this.Sb,a);this.Pb=Math.max(this.Pb,a);this.Tb=Math.min(this.Tb,b);this.Qb=Math.max(this.Qb,b);this.Ub=Math.min(this.Ub,c);this.Rb=Math.max(this.Rb,c);this.nd=[(this.Sb+this.Pb)/2,(this.Tb+this.Qb)/2,(this.Ub+this.Rb)/2];this.yf=t;this.e=p;this.M[this.k++]=a;this.M[this.k++]=b;this.M[this.k++]=c;return this.k/3};v.mb=function(){if(this.k!=this.M.length){var a=new Float32Array(this.k);a.set(this.M.subarray(0,this.k));this.M=a}};
v.get=function(a){a*=3;return[this.M[a],this.M[a+1],this.M[a+2]]};v.remove=function(){j(Error("Not implemented."))};v.clear=function(){this.M=new Float32Array(this.M.length);this.e=p};P.prototype.__defineGetter__("count",function(){this.mb();return this.M.length/3});P.prototype.__defineGetter__("length",function(){this.mb();return this.M.length});E("X.triplets",P);E("X.triplets.prototype.add",P.prototype.add);E("X.triplets.prototype.resize",P.prototype.mb);E("X.triplets.prototype.get",P.prototype.get);
E("X.triplets.prototype.remove",P.prototype.remove);E("X.triplets.prototype.clear",P.prototype.clear);function R(){this.ca=nd;this.$b=new kd;this.pb=[0.5,0.5,0.5];this.Zb=this.A=this.K=this.h=this.g=s;this.qc=[];this.Pa=p;this.pc=this.Oc=1;this.kc=s;this.Hc=t;this.V=1;this.L=0;this.Gc=p;this.lc=s}var nd="TRIANGLES";R.prototype.__defineSetter__("type",function(a){return this.ca=a});R.prototype.__defineGetter__("type",u("ca"));R.prototype.__defineGetter__("texture",function(){this.A||(this.A=new md);return this.A});R.prototype.__defineGetter__("transform",u("$b"));
R.prototype.__defineGetter__("points",u("g"));R.prototype.__defineSetter__("points",ea("g"));R.prototype.__defineGetter__("normals",u("h"));R.prototype.__defineSetter__("normals",ea("h"));R.prototype.__defineGetter__("colors",u("K"));R.prototype.__defineSetter__("colors",ea("K"));R.prototype.__defineGetter__("color",u("pb"));
R.prototype.__defineSetter__("color",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid color."));for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.pb=a;this.e=p});R.prototype.__defineGetter__("opacity",u("V"));R.prototype.__defineSetter__("opacity",function(a){(!D(a)||1<a||0>a)&&j(Error("Invalid opacity."));for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].opacity=a;this.V=a;this.e=p});R.prototype.__defineGetter__("caption",u("kc"));
R.prototype.__defineSetter__("caption",function(a){this.kc=a;this.e=p});R.prototype.__defineGetter__("visible",u("Pa"));R.prototype.__defineSetter__("visible",function(a){for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.Pa=a;this.e=p});R.prototype.__defineGetter__("pointsize",u("Oc"));R.prototype.__defineSetter__("pointsize",function(a){D(a)||j(Error("Invalid point size."));this.Oc=a;this.e=p});R.prototype.__defineGetter__("magicmode",u("Hc"));
R.prototype.__defineSetter__("magicmode",function(a){"boolean"!=typeof a&&j(Error("Invalid magic mode setting."));this.Hc=a;this.e=p});R.prototype.__defineGetter__("linewidth",u("pc"));R.prototype.__defineSetter__("linewidth",function(a){D(a)||j(Error("Invalid line width."));this.pc=a;this.e=p});R.prototype.__defineGetter__("lighting",u("Gc"));R.prototype.__defineSetter__("lighting",function(a){this.Gc=a;this.e=p});R.prototype.__defineGetter__("cullface",u("lc"));
R.prototype.__defineSetter__("cullface",function(a){this.lc=a;this.e=p});function od(){this.Oa=Infinity;this.T=this.Ia=-Infinity;this.Y=Infinity;this.Ab=[0,0,0];this.yb=[1,1,1]}od.prototype.__defineGetter__("lowerThreshold",u("T"));od.prototype.__defineSetter__("lowerThreshold",ea("T"));od.prototype.__defineGetter__("upperThreshold",u("Y"));od.prototype.__defineSetter__("upperThreshold",ea("Y"));od.prototype.__defineGetter__("min",u("Oa"));od.prototype.__defineGetter__("max",u("Ia"));od.prototype.__defineGetter__("minColor",u("Ab"));
od.prototype.__defineSetter__("minColor",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid min. color."));this.Ab=a});od.prototype.__defineGetter__("maxColor",u("yb"));od.prototype.__defineSetter__("maxColor",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid max. color."));this.yb=a});function pd(){L.call(this);this.c="scalars";this.Bc=this.v=s;this.Kf=p;this.fe=0;Ha(this,new Sc);Ha(this,new od);this.Ab=[0,1,0];this.yb=[1,0,0]}G(pd,L);pd.prototype.__defineGetter__("array",u("v"));pd.prototype.__defineSetter__("array",function(a){this.Bc=this.v=a;this.e=p});pd.prototype.__defineGetter__("interpolation",u("fe"));pd.prototype.__defineSetter__("interpolation",ea("fe"));E("X.scalars",pd);function S(a){L.call(this);this.c="object";this.d=[];this.u=this.fa=s;Ha(this,new R);a!=s&&this.ac(a)}G(S,L);
S.prototype.ac=function(a){this.ca=a.ca;this.$b=new kd;this.$b.D=new id(a.$b.D.aa);this.pb=a.pb.slice();a.g&&(this.g=new P(a.g.length,a.g));a.h&&(this.h=new P(a.h.length,a.h));a.K&&(this.K=new P(a.K.length,a.K));this.A=a.A;this.Zb=a.Zb;a.r&&(this.r=new Rc((new String(a.r.vd)).toString()));this.V=a.V;this.d.length=0;var b=a.d;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.d.push(new I[b[d].c](b[d]));this.Pa=a.Pa;this.Oc=a.Oc;this.pc=a.pc;a.kc&&(this.kc=(new String(a.kc)).toString());this.Hc=a.Hc;this.qc=
a.qc.slice();this.Gc=a.Gc;this.lc=a.lc;this.e=p};S.prototype.__defineGetter__("colortable",function(){this.fa||(this.fa=new Tc);return this.fa});S.prototype.__defineGetter__("scalars",function(){this.u||(this.u=new pd);return this.u});S.prototype.__defineGetter__("children",u("d"));S.prototype.q=function(){var a=new qd;a.U=this;this.dispatchEvent(a)};
function rd(a,b){(a==s||b==s||!(a instanceof S)||!(b instanceof S))&&j(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.V?-1:1==b.V?1:a.L!=s&&b.L!=s&&a.L>b.L?-1:1}E("X.object",S);E("X.object.prototype.modified",S.prototype.q);function sd(){}function td(a){for(var b=a.g.count,c=[],d=0,d=0;d<b;d+=3){var e=a.g.get(d),f=a.g.get(d+1),g=a.g.get(d+2),h=a.h.get(d),m=a.h.get(d+1),k=a.h.get(d+2),n=a.pb;a.K&&0<a.K.length&&(n=a.K.get(d));var q=[];q.push(new Fc(e,h));q.push(new Fc(f,m));q.push(new Fc(g,k));c.push(new Hc(q,n))}return Pc(c)}
function ud(a,b){(b==s||!(b instanceof Oc))&&j(Error("Invalid CSG object."));var c=new Qc,d=[];Gb(b.B,function(a){var b=[],g=a.$d,b=Gb(a.ob,function(a){a.color=g;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.dh=Gb(c.unique(),function(a){return[a.ua.x(),a.ua.y(),a.ua.b()]});a.bh=Gb(c.unique(),function(a){return[a.ea.x(),a.ea.y(),a.ea.b()]});a.ah=Gb(c.unique(),function(a){return!a.color?s:[a.color[0],a.color[1],a.color[2]]});a.g=new P(9*d.length);a.h=new P(9*d.length);
a.K=new P(9*d.length);Gb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.dh,m=this.bh,k=this.ah;this.g.add(d[b][0],d[b][1],d[b][2]);this.g.add(d[c][0],d[c][1],d[c][2]);this.g.add(d[a][0],d[a][1],d[a][2]);this.h.add(m[b][0],m[b][1],m[b][2]);this.h.add(m[c][0],m[c][1],m[c][2]);this.h.add(m[a][0],m[a][1],m[a][2]);k[b]&&this.K.add(k[b][0],k[b][1],k[b][2]);k[c]&&this.K.add(k[c][0],k[c][1],k[c][2]);k[a]&&this.K.add(k[a][0],k[a][1],k[a][2])}.bind(a));0==a.K.k&&(a.K=s);a.ca=nd}
sd.prototype.pf=function(a){(a==s||!(a instanceof Oc)&&!(a instanceof S))&&j(Error("Invalid object."));var b=a;a instanceof S&&(b=td(b));a=new S;Ha(a,new sd);ud(a,td(this).pf(b));return a};sd.prototype.oa=function(a){(a==s||!(a instanceof Oc)&&!(a instanceof S))&&j(Error("Invalid object."));var b=a;a instanceof S&&(b=td(b));a=new S;Ha(a,new sd);ud(a,td(this).oa(b));return a};
sd.prototype.Te=function(a){(a==s||!(a instanceof Oc)&&!(a instanceof S))&&j(Error("Invalid object."));var b=a;a instanceof S&&(b=td(b));a=new S;Ha(a,new sd);ud(a,td(this).Te(b));return a};sd.prototype.inverse=function(){var a=new S;Ha(a,new sd);ud(a,td(this).inverse());return a};E("X.constructable",sd);E("X.constructable.prototype.intersect",sd.prototype.Te);E("X.constructable.prototype.inverse",sd.prototype.inverse);E("X.constructable.prototype.subtract",sd.prototype.oa);
E("X.constructable.prototype.union",sd.prototype.pf);function vd(a){oc.call(this,a);this.c="event"}G(vd,oc);var wd=Dc("pan"),xd=Dc("rotate"),yd=Dc("zoom"),zd=Dc("scroll");Dc("render");var Ad=Dc("resetview"),Bd=Dc("windowlevel"),Cd=Dc("modified"),Dd=Dc("progress"),Ed=Dc("hover"),Fd=Dc("hover_end");function Gd(){vd.call(this,Bd);this.le=this.ze=0}G(Gd,vd);function Hd(){vd.call(this,wd);this.L=new $c(0,0)}G(Hd,vd);function Id(){vd.call(this,xd);this.L=new $c(0,0)}G(Id,vd);function Jd(){vd.call(this,yd);this.Na=this.Za=t}G(Jd,vd);
function Kd(){vd.call(this,zd);this.J=t}G(Kd,vd);function Ld(){vd.call(this,Ed);this.Dd=this.Cd=0}G(Ld,vd);function Md(){vd.call(this,Fd)}G(Md,vd);function Nd(){vd.call(this,Ad)}G(Nd,vd);function qd(){vd.call(this,Cd);this.n=this.U=s}G(qd,vd);function Od(){vd.call(this,Dd);this.Mf=0}G(Od,vd);function Pd(a,b,c){a==s&&j(Error("Invalid GL Buffer."));b==s&&j(Error("Invalid number of items."));c==s&&j(Error("Invalid item size."));L.call(this);this.c="buffer";this.ma=a;this.vb=b;this.wb=c}G(Pd,L);function Qd(a){this.s=a;this.sg=K(this.s,fb?"DOMMouseScroll":"mousewheel",this)}G(Qd,Ec);
Qd.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Ja;if("mousewheel"==a.type){c=1;if(J||hb&&($a||ub("532.0")))c=40;d=hb&&Za&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;ja(a.wheelDeltaX)?(b=hb&&Za&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=hb&&Za&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ja(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;D(this.ug)&&(b=Math.min(Math.max(b,-this.ug),this.ug));D(this.vg)&&(c=Math.min(Math.max(c,
-this.vg),this.vg));b=new Rd(d,a,b,c);try{this.dispatchEvent(b)}finally{b.Sa()}};Qd.prototype.P=function(){Qd.j.P.call(this);yc(this.sg);delete this.sg};function Rd(a,b,c,d){b&&this.ja(b,l);this.type="mousewheel";this.detail=a;this.xk=c;this.tc=d}G(Rd,qc);J||hb&&ub("525");var Sd;function Td(a,b){var c;c=(c=a.className)&&"function"==typeof c.split?c.split(/\s+/):[];var d=Mb(arguments,1),e;e=c;for(var f=0,g=0;g<d.length;g++)0<=Eb(e,d[g])||(e.push(d[g]),f++);e=f==d.length;a.className=c.join(" ");return e};var Ud=!J||wb(9);!fb&&!J||J&&wb(9)||fb&&ub("1.9.1");J&&ub("9");function Vd(a){return a?new Wd(Xd(a)):Sd||(Sd=new Wd)}function Yd(a){return la(a)?document.getElementById(a):a}var Zd={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};function $d(a,b,c){return ae(document,arguments)}
function ae(a,b){var c=b[0],d=b[1];if(!Ud&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ma(d.name),'"');if(d.type){c.push(' type="',Ma(d.type),'"');var e={};Cb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}var f=a.createElement(c);d&&(la(d)?f.className=d:A(d)?Td.apply(s,[f].concat(d)):xb(d,function(a,b){"style"==b?f.style.cssText=a:"class"==b?f.className=a:"for"==b?f.htmlFor=a:b in Zd?f.setAttribute(Zd[b],a):0==b.lastIndexOf("aria-",0)?f.setAttribute(b,a):f[b]=a}));if(2<b.length){d=function(b){b&&
f.appendChild(la(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(e=b[c],ka(e)&&!(na(e)&&0<e.nodeType)){var g=Fb,h;a:{if((h=e)&&"number"==typeof h.length){if(na(h)){h="function"==typeof h.item||"string"==typeof h.item;break a}if(ma(h)){h="function"==typeof h.item;break a}}h=t}g(h?Lb(e):e,d)}else d(e)}return f}function be(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function ce(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function de(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Xd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Wd(a){this.Q=a||fa.document||document}v=Wd.prototype;v.Kd=Vd;v.i=function(a){return la(a)?this.Q.getElementById(a):a};v.Vg=Wd.prototype.i;v.rc=function(a,b,c){return ae(this.Q,arguments)};v.createElement=function(a){return this.Q.createElement(a)};
v.createTextNode=function(a){return this.Q.createTextNode(a)};function ee(a){return"CSS1Compat"==a.Q.compatMode}function fe(a){var b=a.Q;a=!hb&&"CSS1Compat"==b.compatMode?b.documentElement:b.body;b=b.parentWindow||b.defaultView;return new Yc(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}v.appendChild=function(a,b){a.appendChild(b)};v.contains=de;function T(a){(a==s||!(a instanceof Element))&&j(Error("Could not add interactor to the given element."));L.call(this);this.c="interactor";this.wa=a;this.ne=this.Df=this.Cf=this.Ef=this.Bf=this.Ff=s;this.me=p;this.Gb=this.zb=this.gb=t;this.ud=[0,0];this.he=new $c(0,0);this.Fc=new $c(0,0);this.pg=0;this.Lf=this.qd=s;this.w={MOUSEWHEEL_ENABLED:p,MOUSECLICKS_ENABLED:p,LEFTMOUSECLICK_ENABLED:p,MIDDLEMOUSECLICK_ENABLED:p,RIGHTMOUSECLICK_ENABLED:p,KEYBOARD_ENABLED:p,HOVERING_ENABLED:p,CONTEXTMENU_ENABLED:t,
TOUCH_ENABLED:p,TOUCH_BOUNCING_ENABLED:t}}G(T,L);T.prototype.__defineGetter__("config",u("w"));T.prototype.__defineGetter__("leftButtonDown",u("gb"));T.prototype.__defineGetter__("middleButtonDown",u("zb"));T.prototype.__defineGetter__("rightButtonDown",u("Gb"));
T.prototype.ja=function(){this.w.MOUSEWHEEL_ENABLED?(this.ne=new Qd(this.wa),this.Ff=K(this.ne,"mousewheel",this.fd.bind(this))):(yc(this.Ff),this.ne=s);this.w.MOUSECLICKS_ENABLED?(this.Bf=K(this.wa,"mousedown",this.ji.bind(this)),this.Ef=K(this.wa,"mouseup",this.oi.bind(this))):(yc(this.Bf),yc(this.Ef));this.wa.oncontextmenu=this.w.CONTEXTMENU_ENABLED?s:function(){return t};window.onkeydown=this.w.KEYBOARD_ENABLED?this.Ag.bind(this):s;this.w.TOUCH_ENABLED?(this.w.TOUCH_BOUNCING_ENABLED||document.body.addEventListener("touchmove",
function(a){a.preventDefault()},t),this.kh=K(this.wa,"touchstart",this.Ci.bind(this)),this.jh=K(this.wa,"touchmove",this.Ai.bind(this)),this.ih=K(this.wa,"touchend",this.wi.bind(this))):(yc(this.kh),yc(this.jh),yc(this.ih));yc(this.Cf);yc(this.Df);this.Cf=K(this.wa,"mousemove",this.li.bind(this));this.Df=K(this.wa,"mouseout",this.mi.bind(this))};
T.prototype.ji=function(a){this.w.LEFTMOUSECLICK_ENABLED&&0==a.button?this.gb=p:this.w.MIDDLEMOUSECLICK_ENABLED&&1==a.button?this.zb=p:this.w.RIGHTMOUSECLICK_ENABLED&&2==a.button&&(this.Gb=p);eval("this.onMouseDown("+this.gb+","+this.zb+","+this.Gb+")");ge(this);a.preventDefault()};T.prototype.ii=aa();T.prototype.oi=function(a){0==a.button?this.gb=t:1==a.button?this.zb=t:2==a.button&&(this.Gb=t);eval("this.onMouseUp("+this.gb+","+this.zb+","+this.Gb+")");ge(this);a.preventDefault()};
T.prototype.__defineGetter__("mousePosition",u("ud"));v=T.prototype;v.ni=aa();v.mi=function(a){this.me=t;this.w.KEYBOARD_ENABLED&&(window.onkeydown=s);this.Gb=this.zb=this.gb=t;ge(this);this.he=new $c(0,0);a.preventDefault()};v.ki=aa();v.Ci=function(a){a.preventDefault();a.ja(a.Ja.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Fc=new $c(a.clientX,a.clientY);this.Lf=setTimeout(this.yi.bind(this,a),500)};v.Bi=aa();
v.yi=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new Jd;a.Za=p;a.Na=this instanceof he;this.dispatchEvent(a);this.Ad=p};v.xi=aa();function ie(a){clearTimeout(a.Lf);if(a.Ad){var b=new Jd;b.Za=t;b.Na=a instanceof he;a.dispatchEvent(b)}a.Ad=t}v.wi=function(a){a.preventDefault();eval("this.onTouchEnd()");ie(this)};v.vi=aa();
v.Ai=function(a){a.preventDefault();this.Ad||ie(this);this.touchmoveEvent=a=a.Ja;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new $c(c[0],c[1]);var b=c[0]>3*this.wa.clientWidth/4,d=c[0]<this.wa.clientWidth/4,e=c[1]<this.wa.clientHeight/4,c=c[1]>3*this.wa.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Fc.oa(a);this.Fc=a.f();if(this.Ad)a=new Hd,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.L=e,this.dispatchEvent(a);
else if(this instanceof je&&(b||d))a=new Kd,a.J=0>e.y,this.dispatchEvent(a);else if(this instanceof he||c)e.scale(3),a=new Id,a.L=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new $c(a[0],a[1]),e=ad(a,new $c(b[0],b[1])),b=e-this.pg,this.pg=e,this.Fc.oa(a),this.Fc=a.f(),10<Math.abs(b)&&(a=new Jd,a.Za=0<b,a.Na=this instanceof he,this.dispatchEvent(a)))};v.zi=aa();
v.li=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.me=p;this.w.KEYBOARD_ENABLED&&window.onkeydown==s&&(window.onkeydown=this.Ag.bind(this));a.preventDefault();var b=a.shiftKey;this.ud=[a.offsetX,a.offsetY];var c=new $c(this.ud[0],this.ud[1]);a=this.he.oa(c);this.he=c.f();this.w.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.zb||this.gb||this.Gb)&&ge(this),this.qd=setTimeout(function(){ge(this);var a=new Ld;a.Cd=c.x;a.Dd=c.y;this.dispatchEvent(a);
this.qd=s}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.fc()&&(this.gb&&!b?(b=new Id,a.scale(3),b.L=a,this.dispatchEvent(b)):this.zb||this.gb&&b?(b=new Hd,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.L=a,this.dispatchEvent(b)):this.Gb&&(b=new Jd,b.Za=0<a.y,b.Na=t,this.dispatchEvent(b)))};function ge(a){a.qd&&clearTimeout(a.qd);var b=new Md;a.dispatchEvent(b)}v.pi=aa();
v.fd=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");ge(this);a.preventDefault()};v.gi=aa();
v.Ag=function(a){if(this.me){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");ge(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82==f&&!b&&!c&&!d&&!e?(a.preventDefault(),a=new Nd,this.dispatchEvent(a)):37<=f&&40>=f&&(a.preventDefault(),e?a=new Hd:b?a=new Jd:(a=new Id,this instanceof je&&(a=new Kd)),a&&(c=new $c(0,0),37==f?(c.x=5,a.J=t,b&&(a.J=p,a.Za=p,a.Na=t)):39==f?(c.x=-5,a.J=p,b&&(a.Za=t,a.Na=t)):38==f?(c.y=5,a.J=p,b&&(a.Za=p,a.Na=p)):40==f&&(c.y=-5,a.J=t,b&&(a.Za=t,
a.Na=p)),a.L=c,this.dispatchEvent(a)))}};E("X.interactor",T);E("X.interactor.prototype.init",T.prototype.ja);E("X.interactor.prototype.onMouseDown",T.prototype.ii);E("X.interactor.prototype.onMouseUp",T.prototype.ni);E("X.interactor.prototype.onMouseMove",T.prototype.ki);E("X.interactor.prototype.onMouseWheel",T.prototype.pi);E("X.interactor.prototype.onKey",T.prototype.gi);E("X.interactor.prototype.onTouchStart",T.prototype.Bi);E("X.interactor.prototype.onTouchMove",T.prototype.zi);
E("X.interactor.prototype.onTouchEnd",T.prototype.vi);E("X.interactor.prototype.onTouchHover",T.prototype.xi);function je(a){T.call(this,a);this.c="interactor2D"}G(je,T);je.prototype.fd=function(a){je.j.fd.call(this,a);var b=new Kd;a.tc==s&&(a.tc=0);b.J=0>a.tc;this.dispatchEvent(b)};function ke(a,b){(!D(a)||!D(b))&&j(Error("A camera needs valid width and height values."));L.call(this);this.c="camera";this.za=new N(0,0,100);this.mc=new N(0,0,0);this.J=new N(0,1,0);this.o=this.Td(this.za,this.mc);this.Nb=new Float32Array(this.o.Ka())}G(ke,L);ke.prototype.observe=function(a){(a==s||!(a instanceof T))&&j(Error("Could not observe the interactor."));K(a,xd,this.ti.bind(this));K(a,wd,this.qi.bind(this));K(a,yd,this.Fi.bind(this))};
ke.prototype.ti=function(a){a instanceof Id||j(Error("Received no valid rotate event."));this.rotate(a.L)};ke.prototype.Fi=function(a){a instanceof Jd||j(Error("Received no valid zoom event."));a.Za?this.Tg(a.Na):this.Ug(a.Na)};ke.prototype.qi=function(a){a instanceof Hd||j(Error("Received no valid pan event."));this.Fg(a.L)};ke.prototype.__defineGetter__("view",u("o"));ke.prototype.__defineSetter__("view",function(a){(a==s||!(a instanceof id))&&j(Error("Invalid view matrix."));this.o=a;this.Nb=new Float32Array(this.o.Ka())});
ke.prototype.__defineGetter__("position",function(){return[this.za.x,this.za.y,this.za.b]});ke.prototype.__defineSetter__("position",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid position."));this.za=new N(a[0],a[1],a[2]);this.reset()});ke.prototype.__defineGetter__("focus",function(){return[this.mc.x,this.mc.y,this.mc.b]});ke.prototype.__defineSetter__("focus",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid focus"));this.mc=new N(a[0],a[1],a[2]);this.reset()});
ke.prototype.__defineGetter__("up",function(){return[this.J.x,this.J.y,this.J.b]});ke.prototype.__defineSetter__("up",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid up vector."));this.J=new N(a[0],a[1],a[2]);this.reset()});v=ke.prototype;v.reset=function(){this.o=this.Td(this.za,this.mc);this.Nb=new Float32Array(this.o.Ka())};v.rotate=function(a){A(a)&&2==a.length?a=new $c(a[0],a[1]):a instanceof $c||j(Error("Invalid distance vector for rotate operation."));return a};
v.Fg=function(a){A(a)&&2==a.length?a=new $c(a[0],a[1]):a instanceof $c||j(Error("Invalid distance vector for pan operation."));a=new N(-a.x,a.y,0);a=jd(4).translate(a);this.o=new id(a.multiply(this.o));this.Nb=new Float32Array(this.o.Ka())};v.Tg=function(a){var b=20;a!=s&&!a&&(b=1);a=new N(0,0,b);a=jd(4).translate(a);this.o=new id(a.multiply(this.o));this.Nb=new Float32Array(this.o.Ka())};
v.Ug=function(a){var b=30;a!=s&&!a&&(b=1);a=new N(0,0,-b);a=jd(4).translate(a);this.o=new id(a.multiply(this.o));this.Nb=new Float32Array(this.o.Ka())};v.Td=function(a,b){(!(a instanceof N)||!(b instanceof N))&&j(Error("3D vectors required for calculating the view."));return jd(4)};E("X.camera",ke);E("X.camera.prototype.pan",ke.prototype.Fg);E("X.camera.prototype.rotate",ke.prototype.rotate);E("X.camera.prototype.zoomIn",ke.prototype.Tg);E("X.camera.prototype.zoomOut",ke.prototype.Ug);function le(a,b){ke.call(this,a,b);this.c="camera3D";this.wf=45;this.Hf=new Float32Array(me(this.wf,a/b).Ka())}G(le,ke);function me(a,b){var c=1*Math.tan(a*Math.PI/360),d=-c;return new id([[2/(c*b-d*b),0,(c*b+d*b)/(c*b-d*b),0],[0,2/(c-d),(c+d)/(c-d),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]])}
le.prototype.rotate=function(a){a=le.j.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=jd(4),d=new N(parseFloat(this.o.ba(0,0)),parseFloat(this.o.ba(0,1)),parseFloat(this.o.ba(0,2))),b=c.rotate(b,new N(parseFloat(this.o.ba(1,0)),parseFloat(this.o.ba(1,1)),parseFloat(this.o.ba(1,2))));a=c.rotate(a,d);this.o=new id(this.o.multiply(a.multiply(b)));this.Nb=new Float32Array(this.o.Ka())};
le.prototype.Td=function(a,b){le.j.Td.call(this,a,b);var c=jd(4),d=new N(a.x-b.x,a.y-b.y,a.b-b.b),d=d.normalize(),e=this.J.f();e.Xc(d)&&(e.b+=1E-6);var f=Xc(e,d),e=Xc(d,f),f=f.normalize(),e=e.normalize();c.l(0,0,f.x);c.l(0,1,f.y);c.l(0,2,f.b);c.l(0,3,0);c.l(1,0,e.x);c.l(1,1,e.y);c.l(1,2,e.b);c.l(1,3,0);c.l(2,0,d.x);c.l(2,1,d.y);c.l(2,2,d.b);c.l(2,3,0);c.l(3,0,0);c.l(3,1,0);c.l(3,2,0);c.l(3,3,1);d=a.f();return c.translate(d.da())};E("X.camera3D",le);function W(){L.call(this);this.c="parser";this.S=s;this.k=0;this.gh=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.rd=p;this.vk=-Infinity;this.uk=Infinity}G(W,L);W.prototype.parse=function(){j(Error("The function parse() should be overloaded."))};function ne(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)var f=a[e],b=Math.min(b,f),c=Math.max(c,f);return[b,c]}
function oe(a,b,c){b===l&&(b=0);c===l&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
function Z(a,b,c){c!=s||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array,d=4}b=new e(a.S.slice(a.k,a.k+=c*d));if(a.gh!=a.rd){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(e=0;e<a.byteLength;e+=d)for(var f=e+d-1,g=e;f>g;f--,g++){var h=b[g];b[g]=b[f];b[f]=h}b=a}return 1==c?b[0]:b}
function pe(a,b,c){I.va(a.c+".reslice");var d=b.ga,e=c.max,f=c.data,g=d[2],h=d[1],d=d[0],m=b.p!=s,k=h*d,n=Array(g),q=Array(g),r=0,w=s;b.fa&&(w=b.fa.xb);for(var x=0,y=0,C=0,F=0,z=4*k,x=0;x<g;x++){n[x]=Array(h);q[x]=Array(h);for(var B=f.subarray(x*k,(x+1)*k),H=new Uint8Array(z),y=F=0;y<h;y++){n[x][y]=new c.data.constructor(d);q[x][y]=new c.data.constructor(d);for(C=0;C<d;C++){var r=B[F],O=0,ba=0,U=0,V=0;w?(V=w.get(Math.floor(r)),V||(O=w.Ta(),V=O[O.length-1]),O=255*V[1],ba=255*V[2],U=255*V[3],V=255*
V[4]):(O=ba=U=255*(r/e),V=255);var ga=4*F;H[ga]=O;H[++ga]=ba;H[++ga]=U;H[++ga]=V;n[x][y][C]=255*(r/e);q[x][y][C]=r;F++}}r=new md;r.Aa=H;r.Fb=d;r.Eb=h;B=b.ib.d[x];B.A=r;m&&(B.p=b.p.ib.d[x].A)}b.re&&(d!=h?m?b.fa?(qe(g,d,h,q,b.fa,b.X,b.p.X,p),qe(g,h,d,q,b.fa,b.W,b.p.W,t)):(re(g,d,h,n,b.X,b.p.X,p),re(g,h,d,n,b.W,b.p.W,t)):b.fa?(qe(g,d,h,q,b.fa,b.X,s,p),qe(g,h,d,q,b.fa,b.W,s,t)):(re(g,d,h,n,b.X,s,p),re(g,h,d,n,b.W,s,t)):m?b.fa?se(g,d,h,n,b.fa,b.W,b.p.W,b.X,b.p.X):te(g,d,h,n,b.W,b.p.W,b.X,b.p.X):b.fa?se(g,
d,h,q,b.fa,b.W,s,b.X,s):te(g,d,h,n,b.W,s,b.X,s));I.pa(a.c+".reslice");return q}function re(a,b,c,d,e,f,g){for(var h=4*a*b,m=0,m=0;m<c;m++){for(var k=new Uint8Array(h),n=0,q=0,n=0;n<a;n++)for(var r=0,w=d[n],r=0;r<b;r++){var x,y=x=g?w[m][r]:w[r][m],C=x,F=4*q;k[F]=x;k[++F]=y;k[++F]=C;k[++F]=255;q++}n=new md;n.Aa=k;n.Fb=b;n.Eb=a;k=e.d[m];k.A=n;f&&(k.p=f.d[m].A)}}
function qe(a,b,c,d,e,f,g,h){e=e.xb;for(var m=4*a*b,k=0,k=0;k<c;k++){for(var n=new Uint8Array(m),q=0,r=0,q=0;q<a;q++)for(var w=d[q],x=0,x=0;x<b;x++){var y=e.get(Math.floor(h?w[k][x]:w[x][k]));y||(y=e.Ta(),y=y[y.length-1]);var C=255*y[2],F=255*y[3],z=255*y[4],B=4*r;n[B]=255*y[1];n[++B]=C;n[++B]=F;n[++B]=z;r++}q=new md;q.Aa=n;q.Fb=b;q.Eb=a;n=f.d[k];n.A=q;g&&(n.p=g.d[k].A)}}
function te(a,b,c,d,e,f,g,h){for(var m=4*a*b,k=0,k=0;k<c;k++){for(var n=new Uint8Array(m),q=new Uint8Array(m),r=0,w=0,w=0;w<a;w++)for(var x=d[w],y=0,y=0;y<b;y++){var C=x[y][k],F=C,z=C,B=4*r;n[B]=C;n[++B]=F;n[++B]=z;n[++B]=255;z=F=C=B=x[k][y];B=4*r;q[B]=C;q[++B]=F;q[++B]=z;q[++B]=255;r++}r=new md;r.Aa=n;r.Fb=b;r.Eb=a;n=e.d[k];n.A=r;f&&(n.p=f.d[k].A);n=new md;n.Aa=q;n.Fb=b;n.Eb=a;q=g.d[k];q.A=n;h&&(q.p=h.d[k].A)}}
function se(a,b,c,d,e,f,g,h,m){e=e.xb;for(var k=4*a*b,n=0,n=0;n<c;n++){for(var q=new Uint8Array(k),r=new Uint8Array(k),w=0,x=0,x=0;x<a;x++)for(var y=d[x],C=0,C=0;C<b;C++){var F=e.get(Math.floor(y[C][n]));if(!F)var z=e.Ta(),F=z[z.length-1];var B=255*F[2],H=255*F[3],O=255*F[4],z=4*w;q[z]=255*F[1];q[++z]=B;q[++z]=H;q[++z]=O;z=e.get(Math.floor(y[n][C]));z||(z=e.Ta(),z=z[z.length-1]);F=255*z[1];B=255*z[2];H=255*z[3];O=255*z[4];z=4*w;r[z]=F;r[++z]=B;r[++z]=H;r[++z]=O;w++}w=new md;w.Aa=q;w.Fb=b;w.Eb=a;q=
f.d[n];q.A=w;g&&(q.p=g.d[n].A);q=new md;q.Aa=r;q.Fb=b;q.Eb=a;r=h.d[n];r.A=q;m&&(r.p=m.d[n].A)}};function ue(){W.call(this);this.c="parserIMAGE"}G(ue,W);ue.prototype.parse=function(a,b,c,d){c instanceof ArrayBuffer||j(Error());for(var e=new Uint8Array(c),f=e.length,g=Array(f);f--;)g[f]=String.fromCharCode(e[f]);e=window.btoa(g.join(""));f=new Image;wc(f,"load",this.Gi.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};ue.prototype.Gi=function(a,b,c){b.rb=a;b.Aa=s;a=new qd;a.U=c;a.n=b;this.dispatchEvent(a)};E("X.parserIMAGE",ue);E("X.parserIMAGE.prototype.parse",ue.prototype.parse);function ve(a){function b(a,b,d){b=2*b*Math.PI;b=Ea(Ca(m,Math.cos(b)),Ca(k,Math.sin(b)));a=Ea(Ea(c,Ca(e,a)),Ca(b,f));d=Ea(Ca(b,1-Math.abs(d)),Ca(g,d));return new Fc(a,d)}this.B=[];a=a||{};var c=new ya(a.start||[0,-1,0]),d=new ya(a.end||[0,1,0]),e=Da(d,c),f=a.cb||1;a=a.jf||16;for(var g=Ba(e),h=0.5<Math.abs(g.y()),m=Ba(Aa(new ya(h,!h,0),g)),k=Ba(Aa(m,g)),h=new Fc(c,Ga(g)),d=new Fc(d,Ba(g)),n=[],q=0;q<a;q++){var r=q/a,w=(q+1)/a;n.push(new Hc([h,b(0,r,-1),b(0,w,-1)]));n.push(new Hc([b(0,w,0),b(0,r,0),
b(1,r,0),b(1,w,0)]));n.push(new Hc([d,b(1,w,1),b(1,r,1)]))}return Pc(n)}G(ve,Oc);function we(){S.call(this);this.c="cylinder";this.we=[-10,-10,-10];this.ce=[10,10,10];this.Vb=10;this.Yb=32;Ha(this,new sd)}G(we,S);we.prototype.__defineGetter__("start",u("we"));we.prototype.__defineSetter__("start",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid start"));this.we=a});we.prototype.__defineGetter__("end",u("ce"));we.prototype.__defineSetter__("end",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid end"));this.ce=a});we.prototype.__defineGetter__("radius",u("Vb"));
we.prototype.__defineSetter__("radius",function(a){D(a)||j(Error("Invalid radius."));this.Vb=a});we.prototype.q=function(){ud(this,new ve({start:this.we,end:this.ce,cb:this.Vb,jf:this.Yb}));we.j.q.call(this)};E("X.cylinder",we);E("X.cylinder.prototype.modified",we.prototype.q);var xe={Fe:function(a,b,c){return xe.update(a,0,b,c)},update:function(a,b,c,d){var e=xe.Xg,f="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(f=d&7;f--;++c)b=b>>>8^e[(b^a[c])&255];for(f=d>>3;f--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}};
xe.Xg=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function ye(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,f,g,h,m,k,n,q,r;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;f=new Uint32Array(e);g=1;h=0;for(m=2;g<=c;){for(q=0;q<b;++q)if(a[q]===g){k=0;n=h;for(r=0;r<g;++r)k=k<<1|n&1,n>>=1;for(r=k;r<e;r+=m)f[r]=g<<16|q;++h}++g;h<<=1;m<<=1}return[f,c,d]};function ze(a,b){this.Ce=[];this.De=32768;this.Ra=this.Uc=this.ka=this.of=0;this.input=new Uint8Array(a);this.Of=t;this.Ee=Ae;this.mb=t;if(b||!(b={}))b.index&&(this.ka=b.index),b.bufferSize&&(this.De=b.bufferSize),b.bufferType&&(this.Ee=b.bufferType),b.resize&&(this.mb=b.resize);switch(this.Ee){case Be:this.R=32768;this.Da=new Uint8Array(32768+this.De+258);break;case Ae:this.R=0;this.Da=new Uint8Array(this.De);this.cc=this.Dh;this.Sf=this.sh;this.Me=this.wh;break;default:j(Error("invalid inflate mode"))}}
var Be=0,Ae=1;
ze.prototype.Wc=function(){for(;!this.Of;){var a=Ce(this,3);a&1&&(this.Of=p);a>>>=1;switch(a){case 0:var a=this.input,b=this.ka,c=this.Da,d=this.R,e=l,f=l,g=l,h=c.length,e=l;this.Ra=this.Uc=0;e=a[b++];e===l&&j(Error("invalid uncompressed block header: LEN (first byte)"));f=e;e=a[b++];e===l&&j(Error("invalid uncompressed block header: LEN (second byte)"));f|=e<<8;e=a[b++];e===l&&j(Error("invalid uncompressed block header: NLEN (first byte)"));g=e;e=a[b++];e===l&&j(Error("invalid uncompressed block header: NLEN (second byte)"));g|=
e<<8;f===~g&&j(Error("invalid uncompressed block header: length verify"));b+f>a.length&&j(Error("input buffer is broken"));switch(this.Ee){case Be:for(;d+f>c.length;)e=h-d,f-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.R=d,c=this.cc(),d=this.R;break;case Ae:for(;d+f>c.length;)c=this.cc({cg:2});break;default:j(Error("invalid inflate mode"))}c.set(a.subarray(b,b+f),d);d+=f;this.ka=b+=f;this.R=d;this.Da=c;break;case 1:this.Me(De,Ee);break;case 2:Fe(this);break;default:j(Error("unknown BTYPE: "+a))}}return this.Sf()};
var Ge=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),He=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),Ie=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Je=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Ke=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ne=new Uint8Array(288),
Oe,Pe;Oe=0;for(Pe=Ne.length;Oe<Pe;++Oe)Ne[Oe]=143>=Oe?8:255>=Oe?9:279>=Oe?7:8;var De=ye(Ne),Qe=new Uint8Array(30),Re,Se;Re=0;for(Se=Qe.length;Re<Se;++Re)Qe[Re]=5;var Ee=ye(Qe);function Ce(a,b){for(var c=a.Uc,d=a.Ra,e=a.input,f=a.ka,g;d<b;)g=e[f++],g===l&&j(Error("input buffer is broken")),c|=g<<d,d+=8;g=c&(1<<b)-1;a.Uc=c>>>b;a.Ra=d-b;a.ka=f;return g}
function Te(a,b){for(var c=a.Uc,d=a.Ra,e=a.input,f=a.ka,g=b[0],h=b[1],m;d<h;)m=e[f++],m===l&&j(Error("input buffer is broken")),c|=m<<d,d+=8;e=g[c&(1<<h)-1];g=e>>>16;a.Uc=c>>g;a.Ra=d-g;a.ka=f;return e&65535}
function Fe(a){function b(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=Te(this,b),d){case 16:for(d=3+Ce(this,2);d--;)c[f++]=e;break;case 17:for(d=3+Ce(this,3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+Ce(this,7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var c=Ce(a,5)+257,d=Ce(a,5)+1,e=Ce(a,4)+4,f=new Uint8Array(Ge.length),g;for(g=0;g<e;++g)f[Ge[g]]=Ce(a,3);e=ye(f);f=new Uint8Array(c);g=new Uint8Array(d);a.Me(ye(b.call(a,c,e,f)),ye(b.call(a,d,e,g)))}v=ze.prototype;
v.Me=function(a,b){var c=this.Da,d=this.R;this.Wf=a;for(var e=c.length-258,f,g,h;256!==(f=Te(this,a));)if(256>f)d>=e&&(this.R=d,c=this.cc(),d=this.R),c[d++]=f;else{f-=257;h=He[f];0<Ie[f]&&(h+=Ce(this,Ie[f]));f=Te(this,b);g=Je[f];0<Ke[f]&&(g+=Ce(this,Ke[f]));d>=e&&(this.R=d,c=this.cc(),d=this.R);for(;h--;)c[d]=c[d++-g]}for(;8<=this.Ra;)this.Ra-=8,this.ka--;this.R=d};
v.wh=function(a,b){var c=this.Da,d=this.R;this.Wf=a;for(var e=c.length,f,g,h;256!==(f=Te(this,a));)if(256>f)d>=e&&(c=this.cc(),e=c.length),c[d++]=f;else{f-=257;h=He[f];0<Ie[f]&&(h+=Ce(this,Ie[f]));f=Te(this,b);g=Je[f];0<Ke[f]&&(g+=Ce(this,Ke[f]));d+h>e&&(c=this.cc(),e=c.length);for(;h--;)c[d]=c[d++-g]}for(;8<=this.Ra;)this.Ra-=8,this.ka--;this.R=d};
v.cc=function(){var a=new Uint8Array(this.R-32768),b=this.R-32768,c=this.Da;a.set(c.subarray(32768,a.length));this.Ce.push(a);this.of+=a.length;c.set(c.subarray(b,b+32768));this.R=32768;return c};v.Dh=function(a){var b=this.input.length/this.ka+1|0,c=this.input,d=this.Da;a&&("number"===typeof a.cg&&(b=a.cg),"number"===typeof a.lh&&(b+=a.lh));2>b?(a=(c.length-this.ka)/this.Wf[2],a=258*(a/2)|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.Da=a};
v.Sf=function(){var a=0,b=this.Da,c=this.Ce,d,e=new Uint8Array(this.of+(this.R-32768)),f,g,h,m;if(0===c.length)return this.Da.subarray(32768,this.R);f=0;for(g=c.length;f<g;++f){d=c[f];h=0;for(m=d.length;h<m;++h)e[a++]=d[h]}f=32768;for(g=this.R;f<g;++f)e[a++]=b[f];this.Ce=[];return this.buffer=e};v.sh=function(){var a,b=this.R;this.mb?(a=new Uint8Array(b),a.set(this.Da.subarray(0,b))):a=this.Da.subarray(0,b);return this.buffer=a};new Uint8Array(256);var Ue;for(Ue=0;256>Ue;++Ue)for(var Ve=Ue,We=7,Ve=Ve>>>1;Ve;Ve>>>=1)--We;var Xe=[],Ye;for(Ye=0;288>Ye;Ye++)switch(p){case 143>=Ye:Xe.push([Ye+48,8]);break;case 255>=Ye:Xe.push([Ye-144+400,9]);break;case 279>=Ye:Xe.push([Ye-256+0,7]);break;case 287>=Ye:Xe.push([Ye-280+192,8]);break;default:j("invalid literal: "+Ye)}
function Ze(){var a=$e;switch(p){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,a-
31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:j("invalid length: "+a)}}var af=[],$e,bf;
for($e=3;258>=$e;$e++)bf=Ze(),af[$e]=bf[2]<<24|bf[1]<<16|bf[0];new Uint32Array(af);function cf(){};function df(a){this.input=a;this.ka=0;this.member=[]}
df.prototype.Wc=function(){for(var a=this.input.length;this.ka<a;){var b=new cf,c=l,d=l,e=l,f=c=e=l,g=l,c=c=l,h=this.input,d=this.ka;b.kg=h[d++];b.lg=h[d++];(31!==b.kg||139!==b.lg)&&j(Error("invalid file signature:",b.kg,b.lg));b.Qf=h[d++];switch(b.Qf){case 8:break;default:j(Error("unknown compression method: "+b.Qf))}b.Jd=h[d++];c=h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24;b.Bk=new Date(1E3*c);b.Gk=h[d++];b.Ck=h[d++];0<(b.Jd&4)&&(b.tj=h[d++]|h[d++]<<8,d+=b.tj);if(0<(b.Jd&8)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=
String.fromCharCode(c);b.name=g.join("")}if(0<(b.Jd&16)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.comment=g.join("")}0<(b.Jd&2)&&(b.th=xe.Fe(h,0,d)&65535,b.th!==(h[d++]|h[d++]<<8)&&j(Error("invalid header crc16")));c=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-d-4-4<512*c&&(e=c);d=new ze(h,{index:d,bufferSize:e});b.data=e=d.Wc();d=d.ka;b.wk=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;xe.Fe(e)!==c&&j(Error("invalid CRC-32 checksum: 0x"+xe.Fe(e).toString(16)+
" / 0x"+c.toString(16)));b.zk=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;(e.length&4294967295)!==c&&j(Error("invalid input size: "+(e.length&4294967295)+" / "+c));this.member.push(b);this.ka=d}a=this.member;b=e=d=0;for(h=a.length;b<h;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<h;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function ef(){W.call(this);this.c="parserNII"}G(ef,W);ef.prototype.parse=function(a,b,c){I.va(this.c+".parse");var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,p);348!=e&&(d=(new df(new Uint8Array(d))).Wc(),d=d.buffer);c=this.gd(d);b.ga=[c.Ba[1],c.Ba[2],c.Ba[3]];b.I=[c.na[1],c.na[2],c.na[3]];d=c.min;e=c.max;b.Oa=b.$=d;b.Ia=b.Z=e;-Infinity==b.T&&(b.T=d);Infinity==b.Y&&(b.Y=e);b.sc();I.pa(this.c+".parse");b.rb=pe(this,b,c);c=new qd;c.U=b;c.n=a;this.dispatchEvent(c)};
ef.prototype.gd=function(a){this.S=a;a={bj:0,uh:s,vh:s,Eh:0,Zi:0,Qi:0,Ah:s,Ba:s,Vh:0,Wh:0,Xh:0,Th:0,Le:0,oh:0,fj:0,na:s,Sg:0,Yi:0,Xi:0,ej:0,cj:s,uj:s,qh:0,rh:0,dj:0,mj:0,Lh:0,Mh:0,zh:s,nh:s,Ji:0,$i:0,Ni:0,Oi:0,Pi:0,Ki:0,Li:0,Mi:0,gj:s,hj:s,ij:s,Uh:s,$h:s,data:s,min:Infinity,max:-Infinity};a.bj=Z(this,"uint");a.uh=Z(this,"uchar",10);a.vh=Z(this,"uchar",18);a.Eh=Z(this,"uint");a.Zi=Z(this,"ushort");a.Qi=Z(this,"uchar");a.Ah=Z(this,"uchar");a.Ba=Z(this,"ushort",8);a.Vh=Z(this,"float");a.Wh=Z(this,"float");
a.Xh=Z(this,"float");a.Th=Z(this,"ushort");a.Le=Z(this,"ushort");a.oh=Z(this,"ushort");a.fj=Z(this,"ushort");a.na=Z(this,"float",8);a.Sg=Z(this,"float");a.Yi=Z(this,"float");a.Xi=Z(this,"float");a.ej=Z(this,"ushort");a.cj=Z(this,"uchar");a.uj=Z(this,"uchar");a.qh=Z(this,"float");a.rh=Z(this,"float");a.dj=Z(this,"float");a.mj=Z(this,"float");a.Lh=Z(this,"uint",1);a.Mh=Z(this,"uint",1);a.zh=Z(this,"uchar",80);a.nh=Z(this,"uchar",24);a.Ji=Z(this,"ushort");a.$i=Z(this,"ushort");a.Ni=Z(this,"float");a.Oi=
Z(this,"float");a.Pi=Z(this,"float");a.Ki=Z(this,"float");a.Li=Z(this,"float");a.Mi=Z(this,"float");a.gj=Z(this,"float",4);a.hj=Z(this,"float",4);a.ij=Z(this,"float",4);a.Uh=Z(this,"uchar",16);a.$h=Z(this,"uchar",4);this.k=parseInt(a.Sg,10);var b=a.Ba[1]*a.Ba[2]*a.Ba[3];switch(a.Le){case 2:a.data=Z(this,"uchar",b);break;case 4:a.data=Z(this,"sshort",b);break;case 8:a.data=Z(this,"sint",b);break;case 16:a.data=Z(this,"float",b);break;case 256:a.data=Z(this,"schar",b);break;case 512:a.data=Z(this,"ushort",
b);break;case 768:a.data=Z(this,"uint",b);break;default:j(Error("Unsupported NII data type: "+a.Le))}b=ne(a.data);a.min=b[0];a.max=b[1];return a};E("X.parserNII",ef);E("X.parserNII.prototype.parse",ef.prototype.parse);function ff(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}ff.prototype.f=function(){return new ff(this.top,this.right,this.bottom,this.left)};ff.prototype.contains=function(a){return!this||!a?t:a instanceof ff?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function gf(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}gf.prototype.f=function(){return new gf(this.left,this.top,this.width,this.height)};gf.prototype.ng=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,p}return t};
gf.prototype.contains=function(a){return a instanceof gf?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};gf.prototype.Ca=function(){return new bd(this.width,this.height)};function hf(a,b){var c=Xd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,s))?c[b]||c.getPropertyValue(b):""}function jf(a,b){return a.currentStyle?a.currentStyle[b]:s}function kf(a,b){return hf(a,b)||jf(a,b)||a.style&&a.style[b]}function lf(a){a=a?9==a.nodeType?a:Xd(a):document;return J&&!wb(9)&&!ee(Vd(a))?a.body:a.documentElement}
function mf(a){var b=a.getBoundingClientRect();J&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function nf(a){if(J&&!wb(8))return a.offsetParent;var b=Xd(a),c=kf(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=kf(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return s}
function of(a){for(var b=new ff(0,Infinity,Infinity,0),c=Vd(a),d=c.Q.body,e=c.Q.documentElement,f=!hb&&"CSS1Compat"==c.Q.compatMode?c.Q.documentElement:c.Q.body;a=nf(a);)if((!J||0!=a.clientWidth)&&(!hb||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=kf(a,"overflow")){var g=pf(a),h;h=a;if(fb&&!ub("1.9")){var m=parseFloat(hf(h,"borderLeftWidth"));if(qf(h))var k=h.offsetWidth-h.clientWidth-m-parseFloat(hf(h,"borderRightWidth")),m=m+k;h=new Yc(m,parseFloat(hf(h,"borderTopWidth")))}else h=new Yc(h.clientLeft,
h.clientTop);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.Q.parentWindow||c.Q.defaultView||window;e=c.document;hb&&!ub("500")&&!ib?("undefined"==typeof c.innerHeight&&(c=window),e=c.innerHeight,a=c.document.documentElement.scrollHeight,c==c.top&&a<e&&(e-=15),c=new bd(c.innerWidth,e)):(c="CSS1Compat"==
e.compatMode?e.documentElement:e.body,c=new bd(c.clientWidth,c.clientHeight));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:s}
function pf(a){var b,c=Xd(a),d=kf(a,"position"),e=fb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Yc(0,0),g=lf(c);if(a==g)return f;if(a.getBoundingClientRect)b=mf(a),a=fe(Vd(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(hb&&"fixed"==kf(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(eb||hb&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=nf(b))&&b!=c.body&&b!=g;)if(f.x-=b.scrollLeft,!eb||"TR"!=b.tagName)f.y-=b.scrollTop}return f}function rf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function sf(a){if("none"!=kf(a,"display"))return tf(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=tf(a);b.display=c;b.position=e;b.visibility=d;return a}function tf(a){var b=a.offsetWidth,c=a.offsetHeight,d=hb&&!b&&!c;return(!ja(b)||d)&&a.getBoundingClientRect?(a=mf(a),new bd(a.right-a.left,a.bottom-a.top)):new bd(b,c)}function uf(a,b){a.style.display=b?"":"none"}function qf(a){return"rtl"==kf(a,"direction")}
function vf(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}var wf={thin:2,medium:4,thick:6};function xf(a,b){if("none"==jf(a,b+"Style"))return 0;var c=jf(a,b+"Width");return c in wf?wf[c]:vf(a,c)};function yf(a,b,c,d,e,f,g,h){var m,k=c.offsetParent;if(k){var n="HTML"==k.tagName||"BODY"==k.tagName;if(!n||"static"!=kf(k,"position"))m=pf(k),n||(m=Zc(m,new Yc(k.scrollLeft,k.scrollTop)))}k=pf(a);n=sf(a);k=new gf(k.x,k.y,n.width,n.height);(n=of(a))&&k.ng(new gf(n.left,n.top,n.right-n.left,n.bottom-n.top));var n=Vd(a),q=Vd(c);if(n.Q!=q.Q){var r=n.Q.body,q=q.Q.parentWindow||q.Q.defaultView,w=new Yc(0,0),x=Xd(r)?Xd(r).parentWindow||Xd(r).defaultView:window,y=r;do{var C;if(x==q)C=pf(y);else{var F=y;
C=new Yc;if(1==F.nodeType)if(F.getBoundingClientRect)F=mf(F),C.x=F.left,C.y=F.top;else{var z=fe(Vd(F)),F=pf(F);C.x=F.x-z.x;C.y=F.y-z.y}else{var z=ma(F.Kh),B=F;F.targetTouches?B=F.targetTouches[0]:z&&F.Ja.targetTouches&&(B=F.Ja.targetTouches[0]);C.x=B.clientX;C.y=B.clientY}}w.x+=C.x;w.y+=C.y}while(x&&x!=q&&(y=x.frameElement)&&(x=x.parent));r=Zc(w,pf(r));J&&!ee(n)&&(r=Zc(r,fe(n)));k.left+=r.x;k.top+=r.y}a=(b&4&&qf(a)?b^2:b)&-5;b=new Yc(a&2?k.left+k.width:k.left,a&1?k.top+k.height:k.top);m&&(b=Zc(b,
m));e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var H;if(g&&(H=of(c))&&m)H.top-=m.y,H.right-=m.x,H.bottom-=m.y,H.left-=m.x;return zf(b,c,d,f,H,g,h)}
function zf(a,b,c,d,e,f,g){a=a.f();var h=0,m=(c&4&&qf(b)?c^2:c)&-5;c=sf(b);g=g?g.f():c.f();if(d||0!=m)m&2?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),m&1?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){h=a;d=0;if(65==(f&65)&&(h.x<e.left||h.x>=e.right))f&=-2;if(132==(f&132)&&(h.y<e.top||h.y>=e.bottom))f&=-5;h.x<e.left&&f&1&&(h.x=e.left,d|=1);h.x<e.left&&(h.x+g.width>e.right&&f&16)&&(g.width=Math.max(g.width-(h.x+g.width-e.right),0),d|=4);h.x+g.width>e.right&&f&1&&(h.x=Math.max(e.right-g.width,
e.left),d|=1);f&2&&(d|=(h.x<e.left?16:0)|(h.x+g.width>e.right?32:0));h.y<e.top&&f&4&&(h.y=e.top,d|=2);h.y>=e.top&&(h.y+g.height>e.bottom&&f&32)&&(g.height=Math.max(g.height-(h.y+g.height-e.bottom),0),d|=8);h.y+g.height>e.bottom&&f&4&&(h.y=Math.max(e.bottom-g.height,e.top),d|=2);f&8&&(d|=(h.y<e.top?64:0)|(h.y+g.height>e.bottom?128:0));h=d}else h=256;if(h&496)return h}f=a;e=fb&&(Za||lb)&&ub("1.9");f instanceof Yc?(a=f.x,f=f.y):(a=f,f=l);b.style.left=rf(a,e);b.style.top=rf(f,e);cd(c,g)||(a=ee(Vd(Xd(b))),
J&&(!a||!ub("8"))?(c=b.style,a?(J?(a=vf(b,jf(b,"paddingLeft")),e=vf(b,jf(b,"paddingRight")),f=vf(b,jf(b,"paddingTop")),d=vf(b,jf(b,"paddingBottom")),a=new ff(f,e,d,a)):(a=hf(b,"paddingLeft"),e=hf(b,"paddingRight"),f=hf(b,"paddingTop"),d=hf(b,"paddingBottom"),a=new ff(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),J?(e=xf(b,"borderLeft"),f=xf(b,"borderRight"),d=xf(b,"borderTop"),b=xf(b,"borderBottom"),b=new ff(d,f,b,e)):(e=hf(b,"borderLeftWidth"),f=hf(b,"borderRightWidth"),d=hf(b,"borderTopWidth"),
b=hf(b,"borderBottomWidth"),b=new ff(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=g.width-b.left-a.left-a.right-b.right,c.pixelHeight=g.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=g.width,c.pixelHeight=g.height)):(b=b.style,fb?b.MozBoxSizing="border-box":hb?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(g.width,0)+"px",b.height=Math.max(g.height,0)+"px"));return h};var Af=fa.window;function Bf(a,b,c){ma(a)?c&&(a=ua(a,c)):a&&"function"==typeof a.handleEvent?a=ua(a.handleEvent,a):j(Error("Invalid listener argument"));return 2147483647<b?-1:Af.setTimeout(a,b||0)};function Cf(){}Cf.prototype.Wa=aa();function Df(a,b){this.element=a;this.Uf=b}G(Df,Cf);Df.prototype.Wa=function(a,b,c){yf(this.element,this.Uf,a,b,l,c)};function Ef(a){this.Ua=a;this.z=[]}G(Ef,$b);var Ff=[];function Gf(a,b,c,d,e){A(c)||(Ff[0]=c,c=Ff);for(var f=0;f<c.length;f++){var g=K(b,c[f],d||a,e||t,a.Ua||a);a.z.push(g)}}Ef.prototype.Wd=function(){Fb(this.z,yc);this.z.length=0};Ef.prototype.P=function(){Ef.j.P.call(this);this.Wd()};Ef.prototype.handleEvent=function(){j(Error("EventHandler.handleEvent not implemented"))};function Hf(a,b){this.Ua=new Ef(this);this.ff(a||s);b&&(this.zc=b)}G(Hf,Ec);v=Hf.prototype;v.s=s;v.mh=p;v.Nf=s;v.ta=t;v.aj=t;v.Ue=-1;v.qg=-1;v.Ph=t;v.Ch=p;v.zc="toggle_display";v.i=u("s");v.ff=function(a){this.ta&&j(Error("Can not change this state of the popup while showing."));this.s=a};
function If(a,b){a.jd&&a.jd.stop();a.cd&&a.cd.stop();if(b){if(!a.ta&&a.$e()){a.s||j(Error("Caller must call setElement before trying to show the popup"));a.Wa();var c=Xd(a.s);a.Ph&&Gf(a.Ua,c,"keydown",a.fi,p);if(a.mh)if(Gf(a.Ua,c,"mousedown",a.zg,p),J){var d;try{d=c.activeElement}catch(e){}for(;d&&"IFRAME"==d.nodeName;){try{var f=d.contentDocument||d.contentWindow.document}catch(g){break}c=f;d=c.activeElement}Gf(a.Ua,c,"mousedown",a.zg,p);Gf(a.Ua,c,"deactivate",a.yg)}else Gf(a.Ua,c,"blur",a.yg);"toggle_display"==
a.zc?(a.s.style.visibility="visible",uf(a.s,p)):"move_offscreen"==a.zc&&a.Wa();a.ta=p;a.jd?(wc(a.jd,"end",a.Cg,t,a),a.jd.play()):a.Cg()}}else Jf(a)}v.Wa=ha;function Jf(a,b){if(!a.ta||!a.dispatchEvent({type:"beforehide",target:b}))return t;a.Ua&&a.Ua.Wd();a.cd?(wc(a.cd,"end",va(a.Tf,b),t,a),a.cd.play()):a.Tf(b);return p}v.Tf=function(a){"toggle_display"==this.zc?this.aj?Bf(this.jg,0,this):this.jg():"move_offscreen"==this.zc&&(this.s.style.left="-200px",this.s.style.top="-200px");this.ta=t;this.af(a)};
v.jg=function(){this.s.style.visibility="hidden";uf(this.s,t)};v.$e=function(){return this.dispatchEvent("beforeshow")};v.Cg=function(){this.Ue=xa();this.qg=-1;this.dispatchEvent("show")};v.af=function(a){this.qg=xa();this.dispatchEvent({type:"hide",target:a})};v.zg=function(a){a=a.target;!de(this.s,a)&&((!this.Nf||de(this.Nf,a))&&!(150>xa()-this.Ue))&&Jf(this,a)};v.fi=function(a){27==a.keyCode&&Jf(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
v.yg=function(a){if(this.Ch){var b=Xd(this.s);if(J||eb){if(a=b.activeElement,!a||de(this.s,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>xa()-this.Ue||Jf(this)}};v.P=function(){Hf.j.P.call(this);this.Ua.Sa();bc(this.jd);bc(this.cd);delete this.s;delete this.Ua};function Kf(a,b){this.Je=a instanceof Yc?a:new Yc(a,b)}G(Kf,Cf);Kf.prototype.Wa=function(a,b,c,d){yf(lf(a),0,a,b,this.Je,c,s,d)};function Lf(a,b){this.Ii=4;this.Vd=b||l;Hf.call(this,a)}G(Lf,Hf);Lf.prototype.Wa=function(){if(this.Vd){var a=!this.ta&&"move_offscreen"!=this.zc,b=this.i();a&&(b.style.visibility="hidden",uf(b,p));this.Vd.Wa(b,this.Ii,this.Ak);a&&uf(b,t)}};function Mf(a,b,c){this.lb=c||(a?Vd(Yd(a)):Vd());Lf.call(this,this.lb.rc("div",{style:"position:absolute;display:none;"}));this.Ke=new Yc(1,1);this.bc=new Xb;a&&Nf(this,a);if(b!=s)if(a=this.i(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(Xd(a).createTextNode(b))}}G(Mf,Lf);var Of=[];v=Mf.prototype;v.sa=s;v.className="goog-tooltip";
v.Kg=500;v.Oh=0;v.Kd=u("lb");function Nf(a,b){b=Yd(b);a.bc.add(b);K(b,"mouseover",a.gg,t,a);K(b,"mouseout",a.Pd,t,a);K(b,"mousemove",a.fg,t,a);K(b,"focus",a.eg,t,a);K(b,"blur",a.Pd,t,a)}v.detach=function(a){if(a)a=Yd(a),Pf(this,a),this.bc.remove(a);else{for(var b=this.bc.Ta(),c=0;a=b[c];c++)Pf(this,a);this.bc.clear()}};function Pf(a,b){xc(b,"mouseover",a.gg,t,a);xc(b,"mouseout",a.Pd,t,a);xc(b,"mousemove",a.fg,t,a);xc(b,"focus",a.eg,t,a);xc(b,"blur",a.Pd,t,a)}
v.ff=function(a){var b=this.i();b&&be(b);Mf.j.ff.call(this,a);a&&(b=this.lb.Q.body,b.insertBefore(a,b.lastChild))};v.$e=function(){if(!Hf.prototype.$e.call(this))return t;if(this.anchor)for(var a,b=0;a=Of[b];b++)de(a.i(),this.anchor)||If(a,t);0<=Eb(Of,this)||Of.push(this);a=this.i();a.className=this.className;Qf(this);K(a,"mouseover",this.ig,t,this);K(a,"mouseout",this.hg,t,this);Rf(this);return p};
v.af=function(){Jb(Of,this);for(var a=this.i(),b,c=0;b=Of[c];c++)b.anchor&&de(a,b.anchor)&&If(b,t);this.Gg&&Sf(this.Gg);xc(a,"mouseover",this.ig,t,this);xc(a,"mouseout",this.hg,t,this);this.anchor=l;if(0==(this.nb?this.ta?4:1:this.uc?3:this.ta?2:0))this.Xd=t;Hf.prototype.af.call(this)};v.wg=function(a,b){this.anchor==a&&this.bc.contains(this.anchor)&&(this.Xd||!this.Dk?(If(this,t),this.ta||(this.anchor=a,this.Vd=b||Tf(this,0)||l,this.ta&&this.Wa(),If(this,p))):this.anchor=l);this.nb=l};
v.ai=function(a){this.uc=l;a==this.anchor&&(this.sa==s||this.sa!=this.i()&&!this.bc.contains(this.sa))&&(!this.Pf||!this.Pf.sa)&&If(this,t)};function Uf(a,b){var c=fe(a.lb);a.Ke.x=b.clientX+c.x;a.Ke.y=b.clientY+c.y}v.gg=function(a){var b=Vf(this,a.target);this.sa=b;Qf(this);b!=this.anchor&&(this.anchor=b,this.nb||(this.nb=Bf(ua(this.wg,this,b,l),this.Kg)),Wf(this),Uf(this,a))};function Vf(a,b){try{for(;b&&!a.bc.contains(b);)b=b.parentNode;return b}catch(c){return s}}
v.fg=function(a){Uf(this,a);this.Xd=p};v.eg=function(a){this.sa=a=Vf(this,a.target);this.Xd=p;if(this.anchor!=a){this.anchor=a;var b=Tf(this,1);Qf(this);this.nb||(this.nb=Bf(ua(this.wg,this,a,b),this.Kg));Wf(this)}};function Tf(a,b){if(0==b){var c=a.Ke.f();return new Xf(c)}return new Yf(a.sa)}function Wf(a){if(a.anchor)for(var b,c=0;b=Of[c];c++)de(b.i(),a.anchor)&&(b.Pf=a,a.Gg=b)}
v.Pd=function(a){var b=Vf(this,a.target),c=Vf(this,a.relatedTarget);b!=c&&(b==this.sa&&(this.sa=s),Rf(this),this.Xd=t,this.ta&&(!a.relatedTarget||!de(this.i(),a.relatedTarget))?Sf(this):this.anchor=l)};v.ig=function(){var a=this.i();this.sa!=a&&(Qf(this),this.sa=a)};v.hg=function(a){var b=this.i();if(this.sa==b&&(!a.relatedTarget||!de(b,a.relatedTarget)))this.sa=s,Sf(this)};function Rf(a){a.nb&&(Af.clearTimeout(a.nb),a.nb=l)}
function Sf(a){if(2==(a.nb?a.ta?4:1:a.uc?3:a.ta?2:0))a.uc=Bf(ua(a.ai,a,a.anchor),a.Oh)}function Qf(a){a.uc&&(Af.clearTimeout(a.uc),a.uc=l)}v.P=function(){If(this,t);Rf(this);this.detach();this.i()&&be(this.i());this.sa=s;delete this.lb;Mf.j.P.call(this)};function Xf(a,b){Kf.call(this,a,b)}G(Xf,Kf);Xf.prototype.Wa=function(a,b,c){b=lf(a);b=of(b);c=c?new ff(c.top+10,c.right,c.bottom,c.left+10):new ff(10,0,0,10);zf(this.Je,a,4,c,b,9)&496&&zf(this.Je,a,4,c,b,5)};function Yf(a){Df.call(this,a,3)}
G(Yf,Df);Yf.prototype.Wa=function(a,b,c){var d=new Yc(10,0);yf(this.element,this.Uf,a,b,d,c,9)&496&&yf(this.element,2,a,1,d,c,5)};function Zf(a,b,c,d){a==s&&j(Error("No valid parent element."));(!D(b)||!D(c))&&j(Error("Invalid coordinates."));(d==s||!(d instanceof T))&&j(Error("Invalid interactor."));Mf.call(this);this.c="caption";this.qa=a;this.Cd=b;this.Dd=c;this.Ob=d;this.jb=s;this.Kb=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Kb=[a];wc(d,Fd,this.Qd.bind(this));this.Se()}G(Zf,Mf);
Zf.prototype.Se=function(){if("static"==this.qa.style.position||""==this.qa.style.position)this.qa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=$d("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Kb[0]);a.appendChild(b);b.appendChild(c);this.jb=b;this.Vd=new Kf(this.Cd,this.Dd)||l;this.ta&&this.Wa();If(this,p);Nf(this,this.qa);this.i().classList.add("x-tooltip")};
Zf.prototype.Qd=function(){If(this,t);this.jb&&be(this.jb);this.i()&&be(this.i());this.jb=s};function $f(){L.call(this);this.c="shaders";this.ye="precision mediump float;attribute vec3 vertexPosition;attribute vec3 vertexNormal;attribute vec3 vertexColor;attribute vec2 vertexTexturePos;attribute float vertexScalar;uniform mat4 modelview;uniform mat4 projection;uniform mat4 pickmat;uniform bool useObjectColor;uniform bool highlight;uniform mat4 objectTransform;uniform bool useScalars;uniform bool scalarsReplaceMode;uniform float scalarsMin;uniform float scalarsMax;uniform vec3 scalarsMinColor;uniform vec3 scalarsMaxColor;uniform float scalarsMinThreshold;uniform float scalarsMaxThreshold;uniform int scalarsInterpolation;uniform vec3 objectColor;uniform float pointsize;uniform bool builtin;uniform bool picking;uniform bool lighting;uniform float ambient;uniform float diffuse;uniform float specular;uniform float shininess;uniform vec3 speccolor;uniform float alpha;uniform vec3 light;varying float fDiscardNow;varying vec4 fvertexPosition;varying vec3 fvertexNormal;varying vec4 fragColor;varying vec3 fragmentColor;varying vec2 fragmentTexturePos;varying vec3 fTransformedVertexNormal;void main(){  if (picking) {    fragmentColor = vec3(0.,0.,0.);  } else {    if (highlight) {      fragmentColor = vec3(1.,1.,0.);    } else if (useObjectColor) {      fragmentColor = objectColor;    } else {      if (builtin) {      } else {\tfragmentColor = vertexColor;      }    }    if (highlight) {    } else {      if (lighting) {\tif (builtin) {\t} else {\t  fvertexNormal = vertexNormal;\t}\tfTransformedVertexNormal = mat3(modelview[0].xyz,modelview[1].xyz,modelview[2].xyz) * fvertexNormal;\tvec3 nNormal = normalize(fTransformedVertexNormal);\tvec3 nlight = normalize(light);\tvec3 eyeDirection = normalize(vec3(0.,0.,1.));\tvec3 reflectionDirection = reflect(-nlight, nNormal);\tfloat nspecular = specular*pow(max(dot(reflectionDirection,eyeDirection), 0.0), shininess);\tfloat ndiffuse = diffuse * max(dot(nNormal,nlight),0.0);\tvec3 fcolor = fragmentColor;\tfragmentColor = vec3(fcolor * ambient +\t\t\t     fcolor * ndiffuse +\t\t\t     speccolor * nspecular);      }    }    fragColor = vec4(fragmentColor,alpha);    gl_PointSize = pointsize;  }  if (builtin) {  } else {    fvertexPosition = vec4(vertexPosition,1.0);  }  if (picking) {    gl_Position = pickmat * projection * modelview * fvertexPosition;  } else {    gl_Position = projection * modelview * fvertexPosition;  }}";
this.de="precision mediump float;varying vec3 fragmentColor;varying vec4 fragColor;uniform float alpha;void main(void) {  gl_FragColor = fragColor;}"}G($f,L);
var ag={fk:"vertexPosition",ek:"vertexNormal",dk:"vertexColor",hk:"vertexTexturePos",gk:"vertexScalar"},bg={ik:"modelview",Ij:"projection",Kj:"pickmat",$j:"useObjectColor",Aj:"highlight",Hj:"objectTransform",bk:"useScalars",Tj:"scalarsReplaceMode",Qj:"scalarsMin",Nj:"scalarsMax",Rj:"scalarsMinColor",Oj:"scalarsMaxColor",Sj:"scalarsMinThreshold",Pj:"scalarsMaxThreshold",Mj:"scalarsInterpolation",Fj:"objectColor",Lj:"pointsize",wj:"builtin",Jj:"picking",Dj:"lighting",vj:"ambient",zj:"diffuse",Wj:"specular",
Uj:"shininess",Vj:"speccolor",Gj:"alpha",Cj:"light"};function cg(){W.call(this);this.c="parserDCM"}G(cg,W);cg.prototype.parse=function(a,b,c){c=this.gd(c,b);if(c.Rd==c.bb){var d=c.kf.length,e,f=0;for(e=0;e<d;e++){var g=c.kf[e];g!==l&&(g*=c.fb,c.data.set(c.Vc.subarray(g,g+c.fb),f*c.fb),f++)}b.ga=[c.Ba[0],c.Ba[1],c.Ba[2]];Infinity==c.na[2]&&(c.na[2]=1);b.I=[c.na[0],c.na[1],c.na[2]];e=ne(c.data);d=e[0];e=e[1];c.min=b.Oa=b.$=d;c.max=b.Ia=b.Z=e;-Infinity==b.T&&(b.T=d);Infinity==b.Y&&(b.Y=e);b.sc();b.rb=pe(this,b,c)}c=new qd;c.U=b;c.n=a;this.dispatchEvent(c)};
cg.prototype.gd=function(a,b){this.S=a;var c=0;if(b.ic!=s){g=b.ic;h=Z(this,"ushort",this.S.byteLength-2*g.fb);m=0;for(k=2;0<k;)if(d=h[m++],32==d)if(f=h[m++],19==f){m++;d=h[m++];for(f=0;f<d/2;f++)n=h[m++],q=n&255,n=(n&65280)>>8,c+=String.fromCharCode(q),c+=String.fromCharCode(n),c=parseInt(c,10);k--}else if(4161==f){m++;for(var d=h[m++],e="",f=0;f<d/2;f++)n=h[m++],q=n&255,n=(n&65280)>>8,e+=String.fromCharCode(q),e+=String.fromCharCode(n);g.na=[g.na[0],g.na[1],Math.min(Math.abs(g.rg-e),g.na[2])];g.rg=
e;k--}g.Ba[2]++}else{var g={rows:0,cols:0,na:s,Be:0,ph:0,bb:1,ei:1,rg:s,Rd:0,fb:0,Vc:s,ef:0,kf:[],data:s,min:Infinity,max:-Infinity};g.bb=b.r.length;g.bb==s&&(g.bb=1);for(var h=Z(this,"ushort",this.S.byteLength),m=66,d=s,f=s,d=s,k=7;0<k;)if(d=h[m++],40==d)switch(f=h[m++],m++,d=h[m++],f){case 16:g.rows=h[m++];k--;break;case 17:g.cols=h[m++];k--;break;case 256:g.Be=h[m++];k--;break;case 257:g.ph=h[m++];k--;break;case 2:g.ei=h[m++];k--;break;case 48:e="";for(f=f=0;f<d/2;f++)var n=h[m++],q=n&255,n=(n&
65280)>>8,e=e+String.fromCharCode(q),e=e+String.fromCharCode(n);e=e.split("\\");g.na=[+e[0],+e[1],Infinity];k--}else if(32==d&&(f=h[m++],19==f)){m++;d=h[m++];for(f=0;f<d/2;f++)n=h[m++],q=n&255,n=(n&65280)>>8,c+=String.fromCharCode(q),c+=String.fromCharCode(n),c=parseInt(c,10);k--}b.ic=g;g.Ba=[g.cols,g.rows,1];g.fb=g.rows*g.cols;switch(g.Be){case 8:g.Vc=new Uint8Array(g.cols*g.rows*g.bb);g.data=new Uint8Array(g.cols*g.rows*g.bb);break;case 16:g.Vc=new Uint16Array(g.cols*g.rows*g.bb);g.data=new Uint16Array(g.cols*
g.rows*g.bb);break;case 32:g.Vc=new Uint32Array(g.cols*g.rows*g.bb),g.data=new Uint32Array(g.cols*g.rows*g.bb)}}this.k=this.S.byteLength-2*g.fb;h=s;switch(g.Be){case 8:h=Z(this,"uchar",g.fb);break;case 16:h=Z(this,"ushort",g.fb);break;case 32:h=Z(this,"uint",g.fb)}g.kf[c]=g.ef;g.Vc.set(h,g.ef*g.fb);g.ef++;++g.Rd;return g};E("X.parserDCM",cg);E("X.parserDCM.prototype.parse",cg.prototype.parse);function dg(){W.call(this);this.c="parserLBL"}G(dg,W);
dg.prototype.parse=function(a,b,c){I.va(this.c+".parse");var d=b.qc,e=d.length;0==e&&j(Error("No _pointIndices defined on the X.object."));this.S=c;var f=[],g=Z(this,"uchar",c.byteLength),h=g.length,m=t,k=0;for(c=1;c<h;c++)10==g[c-1]?(k=c,m=p):m&&32==g[c]&&(f.push(parseInt(oe(g,k,c),10)),m=t);g=b.u.v?b.u.v:new Float32Array(e);h=f.length;for(c=0;c<h;c++)g[f[c]]=1;f=new Float32Array(3*e);for(c=h=0;c<e;c++)m=d[c],m>e&&j(Error("Could not find scalar for vertex.")),m=g[m],f[h++]=m,f[h++]=m,f[h++]=m;b.u.v=
g;b.u.Bc=f;b.u.e=p;I.pa(this.c+".parse");d=new qd;d.U=b;d.n=a;this.dispatchEvent(d)};E("X.parserLBL",dg);E("X.parserLBL.prototype.parse",dg.prototype.parse);function eg(a){S.call(this);this.c="slice";this.m=[0,0,0];this.nc=[0,0,1];this.J=[0,1,0];this.H=this.N=10;this.Zb=[0,1,0,0,1,1,1,1,1,0,0,0];this.p=this.kb=s;this.Ya=p;this.jc=[1,1,1];a!=s&&this.ac(a)}G(eg,S);eg.prototype.ac=function(a){this.m=a.m.slice();this.nc=a.nc.slice();this.J=a.J.slice();this.N=a.N;this.H=a.H;this.kb=a.kb;this.p=a.p;this.Ya=a.Ya;this.jc=a.jc;this.fh=a.fh;eg.j.ac.call(this,a)};
eg.prototype.sc=function(){var a=new N(this.nc[0],this.nc[1],this.nc[2]),b=new N(this.J[0],this.J[1],this.J[2]),c=Xc(b,a),d=new N(this.m[0],this.m[1],this.m[2]),e=new N(1,1,1);1==a.x?(e=new N(this.m[0],this.H/2,this.N/2),this.Zb=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new N(this.N/2,this.m[1],this.H/2),this.Zb=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.b&&(e=new N(this.N/2,this.H/2,this.m[2]));var f=Wc(c.f().da(),b.f().da()),f=new N(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var g=Wc(c.f().da(),b),g=new N(g.x*e.x,g.y*e.y,
g.b*e.b);g.add(d);var h=Wc(c,b.f().da()),h=new N(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var m=h,b=Wc(c,b),b=new N(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=g;this.g=new P(18);this.h=new P(18);this.g.add(f.x,f.y,f.b);this.g.add(g.x,g.y,g.b);this.g.add(h.x,h.y,h.b);this.g.add(m.x,m.y,m.b);this.g.add(b.x,b.y,b.b);this.g.add(d.x,d.y,d.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.Ya&&(a=new S,a.g=new P(24),
a.h=new P(24),a.g.add(f.x,f.y,f.b),a.g.add(g.x,g.y,g.b),a.g.add(g.x,g.y,g.b),a.g.add(b.x,b.y,b.b),a.g.add(b.x,b.y,b.b),a.g.add(h.x,h.y,h.b),a.g.add(h.x,h.y,h.b),a.g.add(f.x,f.y,f.b),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.pb=[this.jc[0],this.jc[1],this.jc[2]],a.ca="LINES",a.pc=2,this.d.push(a))};E("X.slice",eg);function M(a){S.call(this);this.c="volume";this.m=[0,0,0];this.ga=[10,10,10];this.I=[1,1,1];this.rb=[];this.Ec=this.ub=this.Dc=this.tb=this.Cc=this.sb=0;this.W=new S;this.X=new S;this.ib=new S;this.Bd=this.Qa=t;this.Hb=0;this.p=s;this.Ya=p;this.$=Infinity;this.Z=-Infinity;this.re=p;Ha(this,new Sc);Ha(this,new od);a!=s&&this.ac(a)}G(M,S);
M.prototype.ac=function(a){window.console.log(a);this.m=a.m.slice();this.ga=a.ga.slice();this.I=a.I.slice();this.sb=a.sb;this.Cc=a.Cc;this.tb=a.tb;this.Dc=a.Dc;this.ub=a.ub;this.Ec=a.Ec;this.W=new S(a.W);this.X=new S(a.X);this.ib=new S(a.ib);this.Qa=a.Qa;this.Bd=a.Bd;this.Hb=a.Hb;this.p=a.p;this.Ya=a.Ya;M.j.ac.call(this,a)};
M.prototype.sc=function(){this.d.length=0;this.W.d.length=0;this.X.d.length=0;this.ib.d.length=0;this.d.push(this.W);this.d.push(this.X);this.d.push(this.ib);for(var a=0,a=0;3>a;a++){for(var b=(this.ga[a]-1)/2,c=b,d=0,d=0;d<this.ga[a];d++){var e=-b*this.I[a]+d*this.I[a],f=[[this.m[0]+e,this.m[1],this.m[2]],[this.m[0],this.m[1]+e,this.m[2]],[this.m[0],this.m[1],this.m[2]+e]],e=this.d[a].d,g=0,h=0,m=[1,1,1],k=this.Ya;0==a?(g=this.ga[2]*this.I[2]-this.I[2],h=this.ga[1]*this.I[1]-this.I[1],m=[1,1,0]):
1==a?(g=this.ga[0]*this.I[0]-this.I[0],h=this.ga[2]*this.I[2]-this.I[2],m=[1,0,0]):2==a&&(g=this.ga[0]*this.I[0]-this.I[0],h=this.ga[1]*this.I[1]-this.I[1],m=[0,1,0]);this.kb!=s&&(k=t);var n=new eg,q=n,f=f[a],r=[[1,0,0],[0,1,0],[0,0,1]][a],w=[[0,1,0],[0,0,-1],[0,1,0]][a];(f==s||!A(f)||3!=f.length)&&j(Error("Invalid center."));(r==s||!A(r)||3!=r.length)&&j(Error("Invalid front direction."));(w==s||!A(w)||3!=w.length)&&j(Error("Invalid up direction."));D(g)||j(Error("Invalid width."));D(h)||j(Error("Invalid height."));
var x=t;k!=s&&(x=k);k=[1,1,1];m!=s&&(k=m);q.m=f;q.nc=r;q.J=w;q.N=g;q.H=h;q.Ya=x;q.jc=k;q.sc();n.kb=this;n.visible=d==Math.floor(c);e.push(n)}0==a?this.Cc=this.sb=c:1==a?this.Dc=this.tb=c:2==a&&(this.Ec=this.ub=c)}this.e=p};
M.prototype.q=function(a){a="undefined"!==typeof a?a:p;if(0<this.d.length)if(this.Qa!=this.Bd&&(this.Qa?(this.d[0].d[parseInt(this.sb,10)].visible=t,this.d[1].d[parseInt(this.tb,10)].visible=t,this.d[2].d[parseInt(this.ub,10)].visible=t):this.d[this.Hb].visible=t,this.e=p,this.Bd=this.Qa),this.Qa)fg(this,this.Hb);else for(var b=0,b=0;3>b;b++){var c=this.d[b],d=0,e=0;0==b?(d=this.sb,e=this.Cc,this.Cc=this.sb):1==b?(d=this.tb,e=this.Dc,this.Dc=this.tb):2==b&&(d=this.ub,e=this.Ec,this.Ec=this.ub);c.d[parseInt(e,
10)].visible=t;c=c.d[parseInt(d,10)];c.visible=p;c.V=1}a&&M.j.q.call(this)};M.prototype.__defineGetter__("dimensions",u("ga"));M.prototype.__defineGetter__("volumeRendering",u("Qa"));M.prototype.__defineSetter__("volumeRendering",function(a){this.Qa=a;this.q(t)});M.prototype.__defineSetter__("visible",ea("Pa"));M.prototype.__defineGetter__("center",u("m"));M.prototype.__defineSetter__("center",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid center."));this.m=a});
M.prototype.__defineGetter__("image",u("rb"));M.prototype.__defineGetter__("labelmap",function(){this.p||(this.p=new gg(this));return this.p});M.prototype.__defineGetter__("indexX",u("sb"));M.prototype.__defineSetter__("indexX",function(a){D(a)&&(0<=a&&a<this.W.d.length)&&(this.sb=a,this.q(t))});M.prototype.__defineGetter__("indexY",u("tb"));M.prototype.__defineSetter__("indexY",function(a){D(a)&&(0<=a&&a<this.X.d.length)&&(this.tb=a,this.q(t))});M.prototype.__defineGetter__("indexZ",u("ub"));
M.prototype.__defineSetter__("indexZ",function(a){D(a)&&(0<=a&&a<this.ib.d.length)&&(this.ub=a,this.q(t))});M.prototype.__defineGetter__("windowLow",u("$"));M.prototype.__defineSetter__("windowLow",ea("$"));M.prototype.__defineGetter__("windowHigh",u("Z"));M.prototype.__defineSetter__("windowHigh",ea("Z"));M.prototype.__defineGetter__("borders",u("Ya"));M.prototype.__defineSetter__("borders",ea("Ya"));M.prototype.__defineGetter__("reslicing",u("re"));M.prototype.__defineSetter__("reslicing",ea("re"));
function fg(a,b){if(a.Qa&&(a.e||b!=a.Hb)){var c=a.d[a.Hb];c.visible=t;var c=a.d[b],d=c.d.length,e;for(e=0;e<d;e++)c.d[e].Pa=p;a.Hb=b;a.e=t}}E("X.volume",M);E("X.volume.prototype.modified",M.prototype.q);function hg(){W.call(this);this.c="parserPGF"}G(hg,W);
hg.prototype.parse=function(a,b,c){I.va(this.c+".parse");this.S=c;var d=Z(this,"uchar",c.byteLength),e=d.length;for(c=0;c<e;c++)if(10==d[c]&&35!=d[c+1]){for(var d=oe(d,0,c),d=d.replace("\n",";").replace(/#/g,""),d=d.split(";"),f=0;f<d.length;f++)if(e=d[f].trim().split("="),"ncoords"==e[0])var g=parseInt(e[1]);else if("nelems"==e[0])var h=parseInt(e[1]);else if("nplex"==e[0])var m=parseInt(e[1]);else if("normals"==e[0])var k="True"==e[1];else if("color"==e[0])var n=e[1];this.k=c+1;break}1==m?b.ca=
"POINTS":2==m?b.ca="LINES":3==m&&(b.ca=nd);b.g=new P(3*h*m);b.h=new P(3*h*m);d=b.g;e=b.h;g=Z(this,"float",3*g);this.k+=1;var q=Z(this,"uint",h*m);this.k+=1;for(c=0;c<h*m;c++)f=3*q[c],d.add(g[f],g[f+1],g[f+2]);if(k){g=Z(this,"float",3*h*m);this.k+=1;for(c=0;c<3*h*m;c+=3)e.add(g[c],g[c+1],g[c+2])}else if(!k&&3==m)for(c=0;c<h*m;c+=3)k=new N(d.get(c)[0],d.get(c)[1],d.get(c)[2]),g=new N(d.get(c+1)[0],d.get(c+1)[1],d.get(c+1)[2]),f=new N(d.get(c+2)[0],d.get(c+2)[1],d.get(c+2)[2]),k=Xc(g.oa(k),f.oa(k)),
k.normalize(),e.add(k.x,k.y,k.b),e.add(k.x,k.y,k.b),e.add(k.x,k.y,k.b);if("'vertex'"==n){n=Z(this,"float",3*h*m);this.k+=1;b.K=new P(3*h*m);k=b.K;for(c=0;c<3*h*m;c+=3)k.add(n[c],n[c+1],n[c+2])}I.pa(this.c+".parse");h=new qd;h.U=b;h.n=a;this.dispatchEvent(h)};E("X.parserPGF",hg);E("X.parserPGF.prototype.parse",hg.prototype.parse);function ig(){W.call(this);this.c="parserVTK"}G(ig,W);
ig.prototype.parse=function(a,b,c){I.va(this.c+".parse");var d=b.g,e=b.h,f=new Uint8Array(c),g="";b.g=d=new P(c.byteLength);b.h=e=new P(c.byteLength);c=0;for(var h=f.length;c<h;c+=32768)g+=oe(f,c,Math.min(c+32768,h));f=g.split("\n");g=f.length;this.Rc=this.Sc=s;this.Mb=[];this.ya=nd;this.pe=this.Cb=this.qb=this.Db=t;c=0;for(h=g%8;h--;)jg(this,f[c]),c++;for(h=0.125*g^0;h--;)jg(this,f[c]),c++,jg(this,f[c]),c++,jg(this,f[c]),c++,jg(this,f[c]),c++,jg(this,f[c]),c++,jg(this,f[c]),c++,jg(this,f[c]),c++,
jg(this,f[c]),c++;c=this.Sc;var f=this.Rc,g=f.length,m=h=this.Mb.length;do{var k=this.Mb[h-m],n=k.length,q;for(q=0;q<n&&!("LINES"==this.ya&&q+1>=n);q++){var r=parseInt(k[q],10),w=c.get(r);d.add(w[0],w[1],w[2]);var x=r,y=w;"LINES"==this.ya?(x=parseInt(k[q+1],10),y=c.get(x),d.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.ya&&(0==q||q==n-1)&&d.add(w[0],w[1],w[2]);r<g?(y=f.get(r),e.add(y[0],y[1],y[2]),"LINES"==this.ya?(x=f.get(x),e.add(x[0],x[1],x[2])):"TRIANGLE_STRIPS"==this.ya&&(0==q||q==n-1)&&e.add(y[0],
y[1],y[2])):(x=new N(w[0],w[1],w[2]),x.normalize(),e.add(x.x,x.y,x.b),"LINES"==this.ya?(x=new N(y[0],y[1],y[2]),x.normalize(),e.add(x.x,x.y,x.b)):"TRIANGLE_STRIPS"==this.ya&&(0==q||q==n-1)&&e.add(x.x,x.y,x.b))}m--}while(0<m);b.ca=this.ya;I.pa(this.c+".parse");d=new qd;d.U=b;d.n=a;this.dispatchEvent(d)};
function jg(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.Db=p;a.qb=t;a.Cb=t;c=parseInt(c[1],10);a.Sc=new P(3*c);a.Rc=new P(3*c);return;case "VERTICES":a.qb=p;a.Db=t;a.Cb=t;c=parseInt(c[1],10);3<=c?a.ya=nd:1==c?a.ya="POINTS":j(Error("This VTK file is not supported!"));a.Mb=[];return;case "TRIANGLE_STRIPS":a.qb=p;a.Db=t;a.Cb=t;a.ya="TRIANGLE_STRIPS";a.Mb=[];return;case "LINES":a.qb=p;a.Db=t;a.Cb=t;a.ya="LINES";a.Mb=[];return;case "POLYGONS":a.qb=p;
a.Db=t;a.Cb=t;a.ya="POLYGONS";a.Mb=[];return;case "POINT_DATA":a.Cb=p;a.Db=t;a.qb=t;return}if(a.Db)if(1==d||isNaN(parseFloat(e)))a.Db=t;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]);a.Sc.add(e,f,g)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Sc.add(e,f,g));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Sc.add(d,e,c))}else a.qb?1==d||isNaN(parseFloat(e))?a.qb=t:(c=c.slice(1),a.Mb.push(c)):a.Cb&&("NORMALS"==e?a.pe=p:1==d||isNaN(parseFloat(e))?
(a.Cb=t,a.pe=t):a.pe&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]),a.Rc.add(e,f,g)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Rc.add(e,f,g)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Rc.add(d,e,c))))}E("X.parserVTK",ig);E("X.parserVTK.prototype.parse",ig.prototype.parse);function kg(){W.call(this);this.c="parserFSM";this.rd=t}G(kg,W);
kg.prototype.parse=function(a,b,c){I.va(this.c+".parse");this.S=c;var d=b.g,e=b.h;b.qc=[];var f=b.qc;c=0;var g;do g=Z(this,"uchar"),c++;while(200>c&&10!=g);Z(this,"uchar");e=Z(this,"uint");c=Z(this,"uint");var h=Z(this,"float",3*e);g=Z(this,"uint",3*c);var m=new Uint32Array(e),k=new Float32Array(9*c);b.g=d=new P(9*c);b.h=e=new P(9*c);var n;for(n=0;n<c;n++){var q=3*n,r=g[q],w=g[q+1],x=g[q+2];f.push(r);f.push(w);f.push(x);m[r]+=1;m[w]+=1;m[x]+=1;var q=3*r,y=3*w,C=3*x,F=h[q],z=h[q+1],B=h[q+2],w=h[y],
x=h[y+1],r=h[y+2],H=h[C],O=h[C+1],ba=h[C+2];d.add(F,z,B);d.add(w,x,r);d.add(H,O,ba);F=new N(F,z,B);H=new N(H,O,ba);w=(new N(w,x,r)).f().oa(F);x=H.f().oa(F);w=Xc(w,x).normalize();k[q]+=w.x;k[q+1]+=w.y;k[q+2]+=w.b;k[y]+=w.x;k[y+1]+=w.y;k[y+2]+=w.b;k[C]+=w.x;k[C+1]+=w.y;k[C+2]+=w.b}for(n=0;n<c;n++)q=3*n,r=g[q],w=g[q+1],x=g[q+2],q=3*r,y=3*w,C=3*x,f=new N(k[y],k[y+1],k[y+2]),h=new N(k[C],k[C+1],k[C+2]),q=(new N(k[q],k[q+1],k[q+2])).scale(1/m[r]).normalize(),f=f.scale(1/m[w]).normalize(),h=h.scale(1/m[x]).normalize(),
e.add(q.x,q.y,q.b),e.add(f.x,f.y,f.b),e.add(h.x,h.y,h.b);b.ca=nd;I.pa(this.c+".parse");c=new qd;c.U=b;c.n=a;this.dispatchEvent(c)};E("X.parserFSM",kg);E("X.parserFSM.prototype.parse",kg.prototype.parse);function lg(){W.call(this);this.c="parserMGZ";this.rd=t}G(lg,W);lg.prototype.parse=function(a,b,c,d){I.va(this.c+".parse");d&&(c=(new df(new Uint8Array(c))).Wc(),c=c.buffer);d=this.gd(c);b.ga=[d.We,d.Xe,d.Ye];b.I=d.Rg;c=d.min;var e=d.max;b.Oa=b.$=c;b.Ia=b.Z=e;-Infinity==b.T&&(b.T=c);Infinity==b.Y&&(b.Y=e);b.sc();I.pa(this.c+".parse");b.rb=pe(this,b,d);d=new qd;d.U=b;d.n=a;this.dispatchEvent(d)};
lg.prototype.gd=function(a){this.S=a;a={version:0,$g:0,Yg:0,Jh:0,Zg:0,We:0,Xe:0,Ye:0,di:0,type:0,Bh:0,Jg:0,Ej:s,Wg:s,Rg:s,data:s,min:Infinity,max:-Infinity};a.version=Z(this,"uint");a.We=Z(this,"uint");a.Xe=Z(this,"uint");a.Ye=Z(this,"uint");a.di=Z(this,"uint");a.type=Z(this,"uint");a.Bh=Z(this,"uint");a.Jg=Z(this,"ushort");if(0<a.Jg){a.Rg=Z(this,"float",3);var b=[];b.push(Z(this,"float",3));b.push(Z(this,"float",3));b.push(Z(this,"float",3));b.push(Z(this,"float",3));a.Wg=b}this.k=284;b=a.We*a.Xe*
a.Ye;switch(a.type){case 0:a.data=Z(this,"uchar",b);break;case 1:a.data=Z(this,"uint",b);break;case 3:a.data=Z(this,"float",b);break;case 4:a.data=Z(this,"ushort",b);break;default:j(Error("Unsupported MGH/MGZ data type: "+a.type))}b=ne(a.data);a.min=b[0];a.max=b[1];this.k+16<this.S.byteLength&&(a.$g=Z(this,"float"),a.Jh=Z(this,"float"),a.Yg=Z(this,"float"),a.Zg=Z(this,"float"));return a};E("X.parserMGZ",lg);E("X.parserMGZ.prototype.parse",lg.prototype.parse);function og(){W.call(this);this.c="parserCRV";this.rd=t}G(og,W);
og.prototype.parse=function(a,b,c){I.va(this.c+".parse");var d=b.qc;0==d.length&&j(Error("No _pointIndices defined on the X.object."));this.S=c;this.k=3;var e=Z(this,"uint");Z(this,"uint");Z(this,"uint");var f=0,g=0,h=0,m=0,k=0,n=0,q=0,r=0,w=0,x=0,y=0;c=Array(2);var C=Array(2),F=Z(this,"float",e),z;for(z=0;z<e;z++){var B=F[z];0==z&&(c[0]=C[0]=B);0<=B?(f++,m+=B):(g++,h+=B);w+=B;y++;C[0]=Math.max(B,C[0]);c[0]=Math.min(B,c[0]);F[z]=B}0!=f&&(k=m/f);0!=g&&(n=h/g);0!=y&&(x=w/y);for(y=w=h=m=0;y<e;y++)B=
F[y],z=0,0<=B?(z=Math.pow(B-k,2),m+=z):(z=Math.pow(B-n,2),h+=z),z=Math.pow(B-x,2),w+=z;1<f&&(q=Math.sqrt(m/(f-1)));1<g&&(r=Math.sqrt(h/(g-1)));c[1]=n-2.5*r;C[1]=k+2.5*q;e=d.length;f=new Float32Array(3*e);for(y=0;y<e;y++)g=F[d[y]],h=3*y,f[h]=g,f[h+1]=g,f[h+2]=g;b.u.Oa=c[1];b.u.Ia=C[1];-Infinity==b.u.T&&(b.u.T=c[1]);Infinity==b.u.Y&&(b.u.Y=C[1]);b.u.v=F;b.u.Bc=f;b.u.e=p;I.pa(this.c+".parse");d=new qd;d.U=b;d.n=a;this.dispatchEvent(d)};E("X.parserCRV",og);E("X.parserCRV.prototype.parse",og.prototype.parse);function pg(){W.call(this);this.c="parserTRK"}G(pg,W);
pg.prototype.parse=function(a,b,c){I.va(this.c+".parse");var d=b.g,e=b.h,f=b.K;this.S=c;Z(this,"uchar",6);Z(this,"ushort",3);var g=Z(this,"float",3);Z(this,"float",3);var h=Z(this,"ushort");Z(this,"uchar",200);Z(this,"ushort");Z(this,"uchar",200);Z(this,"float",16);Z(this,"uchar",444);Z(this,"uchar",4);Z(this,"uchar",4);Z(this,"float",6);Z(this,"uchar",2);Z(this,"uchar");Z(this,"uchar");Z(this,"uchar");Z(this,"uchar");Z(this,"uchar");Z(this,"uchar");var m=Z(this,"uint");Z(this,"uint");var k=Z(this,
"uint"),n=[],q=[];c=Infinity;var r=-Infinity,w=s,x=s,y=s,C=s,e=d=s,F=Z(this,"uint",(this.S.byteLength-1E3)/4);this.k=k;for(var z=Z(this,"float",(this.S.byteLength-1E3)/4),B=0,k=f=0;k<m;k++){for(var H=F[B],O=new P(3*H),ba=0,U=0;U<H;U++){var V=z[B+3*U+U*h+1],ga=z[B+3*U+U*h+2],ca=z[B+3*U+U*h+3],V=V/g[0],ga=ga/g[1],ca=ca/g[2];O.add(V,ga,ca);if(0<U)var da=O.get(U-1),ba=ba+Math.sqrt(Math.pow(V-da[0],2)+Math.pow(ga-da[1],2)+Math.pow(ca-da[2],2));U<H-1&&(f+=6)}B+=3*H+H*h+1;U=O.Sb;H=O.Pb;V=O.Tb;ga=O.Qb;ca=
O.Ub;da=O.Rb;if(!w||U<w)w=U;if(!x||H>x)x=H;if(!y||V<y)y=V;if(!C||ga>C)C=ga;if(!d||ca<d)d=ca;if(!e||da>e)e=da;n.push(O);q.push(ba)}g=(w+x)/2;y=(y+C)/2;h=(d+e)/2;C=new Float32Array(f);b.g=d=new P(f);b.h=e=new P(f);b.K=f=new P(f);for(k=w=0;k<m;k++){x=n[k];F=x.count;ba=q[k];c=Math.min(c,ba);r=Math.max(r,ba);for(U=0;U<F-1;U++){B=x.get(U);z=x.get(U+1);d.add(B[0],B[1],B[2]);d.add(z[0],z[1],z[2]);var O=B[0]-g,H=B[1]-y,V=B[2]-h,ga=Math.sqrt(O*O+H*H+V*V),ca=z[0]-g,da=z[1]-y,Na=z[2]-h,Bb=Math.sqrt(ca*ca+da*
da+Na*Na);e.add(O/ga,H/ga,V/ga);e.add(ca/Bb,da/Bb,Na/Bb);z=[Math.abs(z[0]-B[0]),Math.abs(z[1]-B[1]),Math.abs(z[2]-B[2])];B=Math.sqrt(z[0]*z[0]+z[1]*z[1]+z[2]*z[2]);z[0]/=B;z[1]/=B;z[2]/=B;f.add(z[0],z[1],z[2]);f.add(z[0],z[1],z[2]);C[w++]=ba;C[w++]=ba;C[w++]=ba;C[w++]=ba;C[w++]=ba;C[w++]=ba}}b.ca="LINES";m=new pd;m.Oa=c;m.Ia=r;m.T=c;m.Y=r;m.Bc=C;m.Kf=t;m.e=p;b.u=m;I.pa(this.c+".parse");c=new qd;c.U=b;c.n=a;this.dispatchEvent(c)};E("X.parserTRK",pg);E("X.parserTRK.prototype.parse",pg.prototype.parse);function qg(){W.call(this);this.c="parserLUT"}G(qg,W);
qg.prototype.parse=function(a,b,c){I.va(this.c+".parse");this.S=c;c=Z(this,"uchar",c.byteLength);var d=c.length,e=0,f;for(f=0;f<d;f++)if(10==c[f]){var g=oe(c,e,f),e=f+1,g=g.replace(/^\s+|\s+$/g,"");"#"!=g[0]&&(g=g.split(" "),g=g.filter(function(a){return""!=a}),6==g.length&&(g[2]=parseInt(g[2],10)/255,g[3]=parseInt(g[3],10)/255,g[4]=parseInt(g[4],10)/255,g[5]=parseInt(g[5],10)/255,a.add(parseInt(g[0],10),g[1],g[2],g[3],g[4],g[5],10)))}I.pa(this.c+".parse");c=new qd;c.U=b;c.n=a;this.dispatchEvent(c)};
E("X.parserLUT",qg);E("X.parserLUT.prototype.parse",qg.prototype.parse);function rg(){W.call(this);this.c="parserNRRD"}G(rg,W);
rg.prototype.parse=function(a,b,c){I.va(this.c+".parse");this.S=c;c=Z(this,"uchar",c.byteLength);var d=c.length,e=s,f=0,g;for(g=1;g<d;g++)if(10==c[g-1]&&10==c[g]){e=oe(c,0,g-2);f=g+1;break}var h,m,k,n,d=e.split(/\r?\n/),e=0;for(g=d.length;e<g;e++)if(h=d[e],h.match(/NRRD\d+/))this.Zh=p;else if(!h.match(/^#/)&&(n=h.match(/(.*):(.*)/)))m=n[1].trim(),h=n[2].trim(),(k=this.Fh[m])?k.call(this,h):this[m]=h;this.Zh||j(Error("Not an NRRD file"));"raw"!==this.encoding&&("gzip"!==this.encoding&&"gz"!==this.encoding)&&
j(Error("Only raw or gz/gzip encoding is allowed"));if(!this.Ma&&(this.Ma=[new N(1,0,0),new N(0,1,0),new N(0,0,1)],this.lf)){d=[];for(n=0;2>=n;n++)d.push(!isNaN(this.lf[n])?this.Ma[n].scale(this.lf[n]):l)}f=c.subarray(f);if("gzip"==this.encoding||"gz"==this.encoding)f=(new df(new Uint8Array(f))).Wc();f=f.buffer;c={data:s,min:Infinity,max:-Infinity};c.data=new this.Jb(f);n=ne(c.data);f=c.min=n[0];n=c.max=n[1];b.ga=[this.hf[0],this.hf[1],this.hf[2]];b.I=[(new N(this.Ma[0][0],this.Ma[0][1],this.Ma[0][2])).fc(),
(new N(this.Ma[1][0],this.Ma[1][1],this.Ma[1][2])).fc(),(new N(this.Ma[2][0],this.Ma[2][1],this.Ma[2][2])).fc()];b.Oa=b.$=f;b.Ia=b.Z=n;-Infinity==b.T&&(b.T=f);Infinity==b.Y&&(b.Y=n);b.sc();I.pa(this.c+".parse");b.rb=pe(this,b,c);c=new qd;c.U=b;c.n=a;this.dispatchEvent(c)};
rg.prototype.Fh={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Jb=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Jb=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Jb=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Jb=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Jb=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Jb=Uint32Array;break;case "float":this.Jb=Float32Array;break;default:j(Error("Unsupported NRRD data type: "+a))}return this.type=a},endian:function(a){return this.yk=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.Ba=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.hf=e},"space directions":function(a){var b,
c;a=a.match(/\(.*?\)/g);var d,e,f;f=[];d=0;for(e=a.length;d<e;d++)c=a[d],f.push(function(){var a,d,e,f;e=c.slice(1,-1).split(/,/);f=[];a=0;for(d=e.length;a<d;a++)b=e[a],f.push(parseFloat(b));return f}());return this.Ma=f},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.lf=e}};E("X.parserNRRD",rg);E("X.parserNRRD.prototype.parse",rg.prototype.parse);function sg(){W.call(this);this.c="parserSTL"}G(sg,W);
sg.prototype.parse=function(a,b,c){I.va(this.c+".parse");this.S=c;var d=b.g,e=b.h;if("solid"==oe(Z(this,"uchar",5))){b.g=d=new P(c.byteLength);b.h=e=new P(c.byteLength);var f=d,d=e,e=Z(this,"uchar",c.byteLength-5);c=e.length;var g=t,h=t,m=0,k;for(k=0;k<c;k++)if(10==e[k]){if(g||h){var n=oe(e,m,k).split(" "),h=parseFloat(n[0]),q=parseFloat(n[1]),n=parseFloat(n[2]);g?(d.add(h,q,n),d.add(h,q,n),d.add(h,q,n)):f.add(h,q,n);h=g=t}}else 32==e[k-1]&&(102==e[k]?(m=k+=13,g=p):118==e[k]&&(m=k+=7,h=p))}else{this.k=
0;c=oe(Z(this,"uchar",80)).search("COLOR=");0<=c&&(this.k=c+6,f=Z(this,"uint8")/255,this.k=c+7,d=Z(this,"uint8")/255,this.k=c+8,e=Z(this,"uint8")/255,this.k=c+9,c=Z(this,"uint8")/255,b.pb=[f,d,e],b.V=c);this.k=80;f=Z(this,"uint");b.g=d=new P(9*f);b.h=e=new P(9*f);for(c=c=0;c<f;c++)g=Z(this,"float",12),m=g[0],k=g[1],h=g[2],e.add(m,k,h),e.add(m,k,h),e.add(m,k,h),d.add(g[3],g[4],g[5]),d.add(g[6],g[7],g[8]),d.add(g[9],g[10],g[11]),this.k+=2}I.pa(this.c+".parse");f=new qd;f.U=b;f.n=a;this.dispatchEvent(f)};
E("X.parserSTL",sg);E("X.parserSTL.prototype.parse",sg.prototype.parse);function tg(){W.call(this);this.c="parserOBJ"}G(tg,W);
tg.prototype.parse=function(a,b,c){I.va(this.c+".parse");this.S=c;c=c.byteLength;var d=Z(this,"uchar",c),e=[];b.g=new P(c);b.h=new P(c);var f=b.g,g=b.h,h=0,m;for(m=0;m<c;++m)if(10==d[m]){var k=oe(d,h,m).replace(/\s{2,}/g," ").split(" ");if("v"==k[0])e.push([parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])]);else if("f"==k[0]){var n=e[parseInt(k[1],10)-1],h=e[parseInt(k[2],10)-1],k=e[parseInt(k[3],10)-1];f.add(n[0],n[1],n[2]);f.add(h[0],h[1],h[2]);f.add(k[0],k[1],k[2]);n=new N(n[0],n[1],n[2]);k=
new N(k[0],k[1],k[2]);h=Xc((new N(h[0],h[1],h[2])).oa(n),k.oa(n));h.normalize();g.add(h.x,h.y,h.b);g.add(h.x,h.y,h.b);g.add(h.x,h.y,h.b)}h=m+1}I.pa(this.c+".parse");c=new qd;c.U=b;c.n=a;this.dispatchEvent(c)};E("X.parserOBJ",tg);E("X.parserOBJ.prototype.parse",tg.prototype.parse);function ug(){L.call(this);this.c="loader";this.oc=new Tb;this.Pc=0}G(ug,L);function vg(a,b){a.Pc+=b/a.oc.ab()/3;a.Pc=Math.min(1,a.Pc);var c=new Od;c.Mf=a.Pc;a.dispatchEvent(c)}function wg(a){a=a.r.vd;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");b in xg||j(Error("The "+b+" file format is not supported."));return[a,b,xg[b][0],xg[b][1],xg[b][2]]}
ug.prototype.load=function(a,b){(!a||!b)&&j(Error("No container or object to load."));if(!Vb(this.oc.F,a.xa)||this.oc.get(a.xa)){this.oc.set(a.xa,t);var c=wg(a)[0];if(a.Lb!=s)this.parse(s,a,b);else{var d=new XMLHttpRequest;K(d,"abort",this.bg.bind(this,d,a,b));K(d,"error",this.bg.bind(this,d,a,b));K(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,p);d.responseType="arraybuffer";d.send(s)}}};
ug.prototype.parse=function(a,b,c){vg(this,1);setTimeout(function(){var d=wg(b),e=d[3],d=new d[2];wc(d,Cd,this.complete.bind(this));var f=b.Lb;f==s&&(f=a.response);d.parse(b,c,f,e)}.bind(this),100)};ug.prototype.complete=function(a){vg(this,1);setTimeout(function(){var b=a.n,c=a.U;b.r.e=t;b.e=p;c.q();this.oc.set(b.xa,p)}.bind(this),100)};ug.prototype.bg=function(a,b,c){j(Error("Loading failed: ",b,c))};
var xg={PGF:[hg,s],OBJ:[tg,s],STL:[sg,s],VTK:[ig,s],TRK:[pg,s],FSM:[kg,s],INFLATED:[kg,s],SMOOTHWM:[kg,s],SPHERE:[kg,s],PIAL:[kg,s],ORIG:[kg,s],NRRD:[rg,s],NII:[ef,s],GZ:[ef,s],DCM:[cg,s],DICOM:[cg,s],"":[cg,s],CRV:[og,s],LABEL:[dg,s],MGH:[lg,t],MGZ:[lg,p],TXT:[qg,s],LUT:[qg,s],PNG:[ue,"png"],JPG:[ue,"jpeg"],JPEG:[ue,"jpeg"],GIF:[ue,"gif"]};function yg(a){function b(a,b){a*=2*Math.PI;b*=Math.PI;var e=new ya(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new Fc(Ea(c,Ca(e,d)),e))}this.B=[];a=a||{};var c=new ya(a.He||[0,0,0]),d=a.cb||1,e=a.jf||16;a=a.jj||8;for(var f=[],g=[],h=0;h<e;h++)for(var m=0;m<a;m++)g=[],b(h/e,m/a),0<m&&b((h+1)/e,m/a),m<a-1&&b((h+1)/e,(m+1)/a),b(h/e,(m+1)/a),f.push(new Hc(g));return Pc(f)}G(yg,Oc);function zg(){S.call(this);this.c="sphere";this.m=[0,0,0];this.Vb=5;this.Yb=32;this.hh=16;Ha(this,new sd)}G(zg,S);zg.prototype.__defineGetter__("center",u("m"));zg.prototype.__defineSetter__("center",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid center"));this.m=a});zg.prototype.__defineGetter__("radius",u("Vb"));zg.prototype.__defineSetter__("radius",function(a){D(a)||j(Error("Invalid radius."));this.Vb=a});
zg.prototype.q=function(){ud(this,new yg({He:this.m,cb:this.Vb,jf:this.Yb,jj:this.hh}));zg.j.q.call(this)};E("X.sphere",zg);E("X.sphere.prototype.modified",zg.prototype.q);function gg(a){M.call(this);this.c="labelmap";this.kb=a}G(gg,M);gg.prototype.q=function(){var a=new qd;a.U=this;this.dispatchEvent(a);this.kb.q()};E("X.labelmap",gg);function Ag(a){this.B=[];a=a||{};var b=new ya(a.He||[0,0,0]),c=!a.cb?[1,1,1]:a.cb.length?a.cb:[a.cb,a.cb,a.cb];return Pc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Hc(a[0].map(function(e){e=new ya(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new Fc(e,new ya(a[1]))}))}))}G(Ag,Oc);function Bg(){S.call(this);this.c="cube";this.m=[0,0,0];this.ke=this.je=this.ie=20;this.Zb=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Ha(this,new sd)}G(Bg,S);Bg.prototype.__defineGetter__("center",u("m"));Bg.prototype.__defineSetter__("center",function(a){(a==s||!A(a)||3!=a.length)&&j(Error("Invalid center"));this.m=a});Bg.prototype.__defineGetter__("lengthX",u("ie"));
Bg.prototype.__defineSetter__("lengthX",function(a){D(a)||j(Error("Invalid lengthX."));this.ie=a});Bg.prototype.__defineGetter__("lengthY",u("je"));Bg.prototype.__defineSetter__("lengthY",function(a){D(a)||j(Error("Invalid lengthY."));this.je=a});Bg.prototype.__defineGetter__("lengthZ",u("ke"));Bg.prototype.__defineSetter__("lengthZ",function(a){D(a)||j(Error("Invalid lengthZ."));this.ke=a});Bg.prototype.q=function(){ud(this,new Ag({He:this.m,cb:[this.ie/2,this.je/2,this.ke/2]}));Bg.j.q.call(this)};
E("X.cube",Bg);E("X.cube.prototype.modified",Bg.prototype.q);function he(a){T.call(this,a);this.c="interactor3D";this.sk=t}G(he,T);he.prototype.fd=function(a){he.j.fd.call(this,a);var b=new Jd;a.tc==s&&(a.tc=0);b.Za=0<a.tc;b.Na=p;this.dispatchEvent(b)};function Cg(a){L.call(this);this.c="array";this.v=[];this.uf=a}G(Cg,L);Cg.prototype.add=function(a){this.v.push(a);return p};Cg.prototype.clear=function(){this.v.length=0};function Dg(a,b,c){var d=c-b;if(!(2>d)){d=b+Math.floor(d/2);Dg(a,b,d);for(Dg(a,d,c);b<d;++b)if(0<a.uf(a.v[b],a.v[d])){var e=a.v[b];a.v[b]=a.v[d];for(var f=a,g=d,h=c;g+1<h&&0>f.uf(f.v[g+1],e);){var m=f,k=g+1,n=m.v[g];m.v[g]=m.v[k];m.v[k]=n;++g}f.v[g]=e}}}Cg.prototype.sort=function(){Dg(this,0,this.v.length)};function Eg(a,b){ke.call(this,a,b);this.c="camera2D"}G(Eg,ke);Eg.prototype.rotate=function(a){a=Eg.j.rotate.call(this,a);var b=new Gd;0<a.x?b.ze--:0>a.x&&b.ze++;0<a.y?b.le++:0>a.y&&b.le--;this.dispatchEvent(b)};function Fg(){}Fg.dg=function(){return Fg.Sh||(Fg.Sh=new Fg)};Fg.prototype.Ze=0;Fg.dg();function Gg(a){this.lb=a||Vd();this.Si=Hg}G(Gg,Ec);Gg.prototype.Qh=Fg.dg();var Hg=s;v=Gg.prototype;v.mg=s;v.ec=t;v.s=s;v.Si=s;v.bi=s;v.vc=s;v.Fd=s;v.Ed=s;v.sj=t;v.i=u("s");v.gf=function(a){this.vc&&this.vc!=a&&j(Error("Method not supported"));Gg.j.gf.call(this,a)};v.Kd=u("lb");v.rc=function(){this.s=this.lb.createElement("div")};v.hc=function(a){this.Ib(a)};
v.Ib=function(a,b){this.ec&&j(Error("Component already rendered"));this.s||this.rc();a?a.insertBefore(this.s,b||s):this.lb.Q.body.appendChild(this.s);(!this.vc||this.vc.ec)&&this.Id()};v.Id=function(){this.ec=p;Ig(this,function(a){!a.ec&&a.i()&&a.Id()})};v.Zc=function(){Ig(this,function(a){a.ec&&a.Zc()});this.Od&&this.Od.Wd();this.ec=t};
v.P=function(){Gg.j.P.call(this);this.ec&&this.Zc();this.Od&&(this.Od.Sa(),delete this.Od);Ig(this,function(a){a.Sa()});!this.sj&&this.s&&be(this.s);this.vc=this.bi=this.s=this.Ed=this.Fd=s};function Ig(a,b){a.Fd&&Fb(a.Fd,b,l)}
v.removeChild=function(a,b){if(a){var c=la(a)?a:a.mg||(a.mg=":"+(a.Qh.Ze++).toString(36)),d;this.Ed&&c?(d=this.Ed,d=(c in d?d[c]:l)||s):d=s;a=d;c&&a&&(d=this.Ed,c in d&&delete d[c],Jb(this.Fd,a),b&&(a.Zc(),a.s&&be(a.s)),c=a,c==s&&j(Error("Unable to set parent component")),c.vc=s,Gg.j.gf.call(c,s))}a||j(Error("Child is not in parent component"));return a};function Jg(){}G(Jg,Ec);v=Jg.prototype;v.qf=0;v.ed=0;v.Ve=100;v.ag=0;v.mf=1;v.Yh=t;v.ci=t;v.Zd=function(a){a=Kg(this,a);this.qf!=a&&(this.qf=a+this.ag>this.Ve?this.Ve-this.ag:a<this.ed?this.ed:a,!this.Yh&&!this.ci&&this.dispatchEvent("change"))};v.Nd=function(){return Kg(this,this.qf)};v.Md=function(){return Kg(this,this.ed)};v.Ld=function(){return Kg(this,this.Ve)};function Kg(a,b){return a.mf==s?b:a.ed+Math.round((b-a.ed)/a.mf)*a.mf};function Lg(a){Gg.call(this,a);this.wc=new Jg;K(this.wc,"change",this.Nh,t,this)}G(Lg,Gg);var Mg={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};v=Lg.prototype;v.rc=function(){this.Xa=this.Kd().rc("div","progress-bar-thumb");var a=Mg[this.Eg];this.s=this.Kd().rc("div",a,this.Xa);Ng(this);a=this.Md();this.i().setAttribute("aria-valuemin",a);a=this.Ld();this.i().setAttribute("aria-valuemax",a)};
v.Id=function(){Lg.j.Id.call(this);J&&7>mb&&K(this.i(),"resize",this.ae,t,this);this.ae();var a=this.i();a.setAttribute("role","progressbar");a.Ek="progressbar";this.i().setAttribute("aria-live","polite")};v.Zc=function(){Lg.j.Zc.call(this);Og(this)};function Og(a){J&&7>mb&&xc(a.i(),"resize",a.ae,t,a)}v.Nd=function(){return this.wc.Nd()};v.Zd=function(a){this.wc.Zd(a);this.i()&&Ng(this)};function Ng(a){var b=a.Nd();a.i().setAttribute("aria-valuenow",b)}v.Md=function(){return this.wc.Md()};v.Ld=function(){return this.wc.Ld()};
v.Eg="horizontal";v.Nh=function(){this.ae();this.dispatchEvent("change")};v.ae=function(){if(this.Xa){var a=this.Md(),b=this.Ld(),a=(this.Nd()-a)/(b-a),b=Math.round(100*a);"vertical"==this.Eg?J&&7>mb?(this.Xa.style.top=0,this.Xa.style.height="100%",b=this.Xa.offsetHeight,a=Math.round(a*b),this.Xa.style.top=b-a+"px",this.Xa.style.height=a+"px"):(this.Xa.style.top=100-b+"%",this.Xa.style.height=b+"%"):this.Xa.style.width=b+"%"}};v.P=function(){Og(this);Lg.j.P.call(this);this.Xa=s;this.wc.Sa()};function Pg(a,b){a==s&&j(Error("No valid parent element."));b==s&&j(Error("Invalid initial value."));Lg.call(this);this.c="progressbar";this.qa=a;this.Gf="";this.pd=this.jb=s;this.Kb=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Kb=[c,d,e];this.Zd(b);this.Se()}G(Pg,Lg);
Pg.prototype.Se=function(){if("static"==this.qa.style.position||""==this.qa.style.position)this.Gf=this.qa.style.position,this.qa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=$d("style");b.type="text/css";b.media="screen";var c=document.createTextNode(this.Kb[0]),d=document.createTextNode(this.Kb[1]),e=document.createTextNode(this.Kb[2]);a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.jb=b;this.hc(this.qa);a=this.i();a.style.position="absolute";
a.style.top=(this.qa.clientHeight-5)/2+"px";a.style.left=(this.qa.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};function Qg(a){var b=a.i().style.top,c=a.i().style.left;be(a.i());var d=new Pg(a.qa,100),e=d.i();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");(e.firstElementChild!=l?e.firstElementChild:ce(e.firstChild)).classList.add("progress-bar-thumb-done");a.pd=d}
Pg.prototype.Qd=function(){this.jb&&be(this.jb);this.i()&&be(this.i());this.pd&&be(this.pd.i());this.pd=this.jb=s;this.qa.style.position=this.Gf};function Rg(){L.call(this);this.c="renderer";this.n=window.document.body;this.N=this.n.clientWidth;this.H=this.n.clientHeight;this.Ob=this.t=this.la=s;this.hb=new Cg(rd);this.$a=[];this.C=s;this.qe=this.sd=this.td=t;this.a=this.ra=s;this.w={PROGRESSBAR_ENABLED:p,INTERMEDIATE_RENDERING:t};this.sf=-1;window.console.log("XTK release 9 -- 2013-09-06 11:59:40 -- http://www.goXTK.com -- @goXTK")}G(Rg,L);v=Rg.prototype;v.ri=function(a){this.ra&&this.ra.Zd(100*a.Mf)};
v.hi=function(a){a!=s&&a instanceof qd&&a.U&&this.eb(a.U)};v.bf=function(a){(a==s||!(a instanceof Ld))&&j(Error("Invalid hover event."))};v.si=function(){var a=Yd(this.n);this.N=a.clientWidth;this.H=a.clientHeight;a=Yd(this.la);a.width=this.N;a.height=this.H;"renderer3D"==this.c&&(this.a.viewport(0,0,this.N,this.H),this.t.Hf=new Float32Array(me(this.t.wf,this.la.width/this.la.height).Ka()));this.yc()};v.cf=function(a){(a==s||!(a instanceof Kd))&&j(Error("Invalid scroll event."))};
Rg.prototype.__defineGetter__("config",u("w"));Rg.prototype.__defineGetter__("interactor",u("Ob"));Rg.prototype.__defineGetter__("camera",u("t"));Rg.prototype.__defineGetter__("loadingCompleted",u("sd"));Rg.prototype.__defineGetter__("container",u("n"));Rg.prototype.__defineSetter__("container",function(a){a==s&&j(Error("An ID to a valid container (<div>..) is required."));var b=a;la(b)&&(b=Yd(a));na(b)&&1==b.nodeType||j(Error("Could not find the given container."));this.n=b});v=Rg.prototype;
v.yc=function(){this.t.reset()};
v.ja=function(a){var b=$d("canvas");this.n.appendChild(b);this.N=this.n.clientWidth;this.H=this.n.clientHeight;b.width=this.N;b.height=this.H;try{var c=b.getContext(a,{alpha:t});c||j(Error())}catch(d){var e="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..';this.n.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+e+
"</p>";j(Error(e))}this.C=new ug;K(this.C,Dd,this.ri.bind(this));this.la=b;this.a=c;b=new he(this.la);"2d"==a&&(b=new je(this.la));b.ja();K(b,Ad,this.yc.bind(this));K(b,Ed,this.bf.bind(this));K(b,zd,this.cf.bind(this));this.Ob=b;b=new le(this.N,this.H);"2d"==a&&(b=new Eg(this.N,this.H));b.observe(this.Ob);this.t=b;K(window,"resize",this.si,t,this)};v.add=function(a){(a instanceof Bg||a instanceof zg||a instanceof we)&&a.q();this.$a.push(a);this.eb(a)};
v.eb=function(a){(!this.la||!this.a)&&j(Error("The renderer was not initialized properly."));a==s&&(window.console.log(a),j(Error("Illegal object.")));var b;b=oa(a);var c=tc[b];if(c){var d=ja(Cd),e=ja(l);d&&e?(c=sc[Cd],b=!!c&&!!c[l]&&b in c[l]):b=!d&&!e?p:Hb(c,function(a){return d&&a.type==Cd||e&&a.capture==l})}else b=t;b||K(a,Cd,this.hi.bind(this))};v.get=function(a){a==s&&j(Error("Invalid object id."));for(var b=this.hb.v,c=b.length,d=0,d=0;d<c;d++)if(b[d].xa==a)return b[d];return s};
v.hc=function(){(!this.la||!this.a)&&j(Error("The renderer was not initialized properly."));if(this.Jf==s){if(this.C.oc.Ie(t)){if(this.w.PROGRESSBAR_ENABLED&&!this.ra&&(this.ra=new Pg(this.n,3)),this.qe=this.sd=t,this.Jf=Bf(function(){this.Jf=s;this.hc()}.bind(this),100),!this.w.INTERMEDIATE_RENDERING)return}else if(!this.sd&&!this.qe&&(this.qe=p,eval("this.onShowtime()"),this.sd=p),this.ra){this.w.PROGRESSBAR_ENABLED&&(this.ra&&!this.tf)&&(Qg(this.ra),this.tf=Bf(function(){this.tf=s;this.ra&&(this.ra.Qd(),
this.ra=s);this.hc()}.bind(this),700));return}this.sf=window.requestAnimationFrame(this.hc.bind(this),this.la);eval("this.onRender()");this.Ib(t,p)}};v.Dg=aa();v.Bg=aa();v.Ib=aa();
v.Hd=function(){window.cancelAnimationFrame(this.sf);this.C&&(delete this.C,this.C=s);this.ra&&(this.ra.Qd(),delete this.ra,this.ra=s);this.hb.clear();delete this.hb;this.$a.length=0;delete this.$a;delete this.C;this.C=s;delete this.t;this.t=s;delete this.Ob;this.Ob=s;delete this.a;this.a=s;be(this.la);delete this.la;this.la=s};var Sg={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Tg(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Ug.test(c))return b.bd=Wg(c),b.type="hex",b;a:{var d=a.match(Xg);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return e=c[0],a=c[1],c=c[2],e=Number(e),a=Number(a),c=Number(c),(isNaN(e)||0>e||255<e||isNaN(a)||0>a||255<a||isNaN(c)||0>c||255<c)&&j(Error('"('+e+","+a+","+c+'") is not a valid RGB color')),e=Yg(e.toString(16)),a=Yg(a.toString(16)),
c=Yg(c.toString(16)),b.bd="#"+e+a+c,b.type="rgb",b;if(Sg&&(c=Sg[a.toLowerCase()]))return b.bd=c,b.type="named",b;j(Error(a+" is not a valid color string"))}var Zg=/#(.)(.)(.)/;function Wg(a){Ug.test(a)||j(Error("'"+a+"' is not a valid hex color"));4==a.length&&(a=a.replace(Zg,"#$1$1$2$2$3$3"));return a.toLowerCase()}function $g(a){a=Wg(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}var Ug=/^#(?:[0-9a-f]{3}){1,2}$/i,Xg=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;
function Yg(a){return 1==a.length?"0"+a:a};function ah(){Rg.call(this);this.c="renderer3D";this.Kc=this.Nc=this.Jc=this.Mc=this.Ic=this.Lc=this.se=this.te=s;this.m=[0,0,0];this.If=s;this.be=new Tb;this.Qc=new Tb;this.Tc=new Tb;this.oe=new Tb;this.od=new Tb;this.xd=new Tb;this.yd=new Tb;this.zd=new Tb;this.w={PROGRESSBAR_ENABLED:p,PICKING_ENABLED:p,ORDERING_ENABLED:p,STATISTICS_ENABLED:t,INTERMEDIATE_RENDERING:t}}G(ah,Rg);ah.prototype.__defineGetter__("config",u("w"));v=ah.prototype;
v.Ri=function(){this.Kc=this.Nc=this.Jc=this.Mc=this.Ic=this.Lc=s;this.m=[0,0,0]};v.bf=function(a){ah.j.bf.call(this,a);var b=a.Cd;a=a.Dd;var c=this.Hg(b,a);if(c=this.get(c))if(c=c.kc)(new Zf(this.n,this.n.offsetLeft+b+10,this.n.offsetTop+a+10,this.Ob)).i().innerHTML=c};
v.ja=function(){ah.j.ja.call(this,"experimental-webgl");try{this.a.viewport(0,0,this.N,this.H);var a=this.n.style.backgroundColor?$g(Tg(this.n.style.backgroundColor).bd):this.n.bgColor?$g(Tg(this.n.bgColor).bd):$g(Tg("white").bd);this.a.clearColor(a[0]/255,a[1]/255,a[2]/255,1);this.a.enable(this.a.BLEND);this.a.blendEquation(this.a.FUNC_ADD);this.a.blendFunc(this.a.SRC_ALPHA,this.a.ONE_MINUS_SRC_ALPHA);this.a.enable(this.a.DEPTH_TEST);this.a.depthFunc(this.a.LEQUAL);this.a.clear(this.a.COLOR_BUFFER_BIT|
this.a.DEPTH_BUFFER_BIT);if(this.w.PICKING_ENABLED){var b=this.a.createFramebuffer(),c=this.a.createRenderbuffer(),d=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,d);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.N,this.H,0,this.a.RGB,this.a.UNSIGNED_BYTE,s);this.a.bindFramebuffer(this.a.FRAMEBUFFER,b);this.a.bindRenderbuffer(this.a.RENDERBUFFER,c);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.N,this.H);this.a.bindRenderbuffer(this.a.RENDERBUFFER,
s);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,d,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,c);this.a.bindFramebuffer(this.a.FRAMEBUFFER,s);this.If=b}}catch(e){j(Error("Exception while accessing GL Context!\n"+e))}a=new $f;(this.la==s||this.a==s||this.t==s)&&j(Error("Renderer was not initialized properly."));(a==s||!(a instanceof $f))&&j(Error("Could not add shaders."));b=Object.keys(bg);Object.keys(ag).every(function(a){a=
ag[a];return-1!=this.ye.search(a)||-1!=this.de.search(a)}.bind(a))||j(Error("Could not find all attributes in the shader sources."));b.every(function(a){a=bg[a];return-1!=this.ye.search(a)||-1!=this.de.search(a)}.bind(a))||j(Error("Could not find all uniforms in the shader sources."));b=this.a.createShader(this.a.FRAGMENT_SHADER);c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,a.de);this.a.shaderSource(c,a.ye);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,
this.a.COMPILE_STATUS)||j(Error("Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));this.a.getShaderParameter(c,this.a.COMPILE_STATUS)||j(Error("Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));d=this.a.createProgram();this.a.attachShader(d,c);this.a.attachShader(d,b);this.a.linkProgram(d);this.a.getProgramParameter(d,this.a.LINK_STATUS)||j(Error("Could not create shader program!\n"+this.a.getShaderInfoLog(b)+"\n"+this.a.getShaderInfoLog(c)+"\n"+this.a.getProgramInfoLog(d)));
this.a.useProgram(d);this.se=d;Object.keys(ag).forEach(function(a){a=ag[a];this.be.set(a,this.a.getAttribLocation(this.se,a));this.a.enableVertexAttribArray(this.be.get(a))}.bind(this));Object.keys(bg).forEach(function(a){a=bg[a];this.Qc.set(a,this.a.getUniformLocation(this.se,a))}.bind(this));this.te=a};
v.eb=function(a){ah.j.eb.call(this,a);var b=t;this.get(a.xa)&&(b=p);var c=a.xa,d=a.g,e=a.h,f=a.K,g=a.A,h=a.r,m=a.$b,k=a.fa,n=a.p,q=a.u;if(n!=s&&n.r!=s&&n.r.e)this.eb(n);else if(n!=s&&n.e&&this.eb(n),k!=s&&k.r!=s&&k.r.e)this.C.load(k,a);else if(g!=s&&g.r!=s&&g.r.e)this.C.load(g,a);else{if(h!=s&&A(h))if(a.ic!=s){if(a.ic.Rd!=h.length||!a.e)return}else{b=0;c=h.length;for(b=0;b<c;b++)this.C.load(h[b],a);return}else{if(h!=s&&h.e){this.C.load(a,a);return}if(q!=s&&q.r!=s&&q.r.e){this.C.load(q,a);return}}if(0<
a.d.length){h=a.d;k=h.length;for(n=n=0;n<k;n++)this.eb(h[n])}if(d){for(h=0;this.td;)h++,window.console.log("Possible thread lock avoided: "+h);this.td=p;k=a instanceof eg&&a.kb instanceof gg;b&&(g!=s&&g.e)&&(h=this.yd.get(c),h!=s&&this.a.isBuffer(h.ma)&&this.a.deleteBuffer(h.ma));h=s;g!=s&&(!b||g.e?(h=a.Zb,h==s&&j(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),n=t,g.Aa&&(n=p),this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,n),n=this.a.createTexture(),
n.Rh=g.rb,this.zd.set(g.xa,n),this.a.bindTexture(this.a.TEXTURE_2D,n),g.Aa?this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,g.Fb,g.Eb,0,this.a.RGBA,this.a.UNSIGNED_BYTE,g.Aa):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,n.Rh),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),k?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),
this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR)),this.a.bindTexture(this.a.TEXTURE_2D,s),n=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,n),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(h),this.a.STATIC_DRAW),h=new Pd(n,h.length,2),g.e=t):h=this.yd.get(c));vg(this.C,0.1);if(k)this.td=
t,I.pa(this.c+".update"),vg(this.C,0.9);else{if(!b||d.e||m.e){k=m.D;g=k.Va(new N(d.Sb,d.Tb,d.Ub));k=k.Va(new N(d.Pb,d.Qb,d.Rb));if(this.Lc===s||g.x<this.Lc)this.Lc=g.x;if(this.Ic===s||k.x>this.Ic)this.Ic=k.x;if(this.Mc===s||g.y<this.Mc)this.Mc=g.y;if(this.Jc===s||k.y>this.Jc)this.Jc=k.y;if(this.Nc===s||g.b<this.Nc)this.Nc=g.b;if(this.Kc===s||k.b>this.Kc)this.Kc=k.b;this.m=[(this.Lc+this.Ic)/2,(this.Mc+this.Jc)/2,(this.Nc+this.Kc)/2];m.e=t}b&&d.e&&(m=this.Tc.get(c),m!=s&&this.a.isBuffer(m.ma)&&this.a.deleteBuffer(m.ma));
m=s;!b||d.e?(m=this.a.createBuffer(),d.mb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,m),this.a.bufferData(this.a.ARRAY_BUFFER,d.M,this.a.STATIC_DRAW),m=new Pd(m,d.count,3),d.e=t):m=this.Tc.get(c);vg(this.C,0.3);b&&e.e&&(g=this.Tc.get(c),g!=s&&this.a.isBuffer(g.ma)&&this.a.deleteBuffer(g.ma));g=s;!b||e.e?(g=this.a.createBuffer(),e.mb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,g),this.a.bufferData(this.a.ARRAY_BUFFER,e.M,this.a.STATIC_DRAW),g=new Pd(g,e.count,3),e.e=t):g=this.oe.get(c);vg(this.C,0.3);b&&
(f&&f.e)&&(e=this.od.get(c),e!=s&&this.a.isBuffer(e.ma)&&this.a.deleteBuffer(e.ma));e=s;f&&(!b||f.e?(f.length!=d.length&&j(Error("Mismatch between points and point colors.")),e=this.a.createBuffer(),f.mb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,e),this.a.bufferData(this.a.ARRAY_BUFFER,f.M,this.a.STATIC_DRAW),e=new Pd(e,f.count,3),f.e=t):e=this.od.get(c));vg(this.C,0.2);b&&(q&&q.e)&&(f=this.xd.get(c),f!=s&&this.a.isBuffer(f.ma)&&this.a.deleteBuffer(f.ma));f=s;q&&(f=q.Bc,!b||q.e?(f.length!=d.length&&
j(Error("Mismatch between points and scalars.")),d=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,d),this.a.bufferData(this.a.ARRAY_BUFFER,f,this.a.STATIC_DRAW),f=new Pd(d,f.length,3),q.e=t):f=this.xd.get(c));vg(this.C,0.1);b||this.hb.add(a);this.Tc.set(c,m);this.oe.set(c,g);this.od.set(c,e);this.yd.set(c,h);this.xd.set(c,f);this.td=a.e=t}}else a.e=t}};function bh(a,b){var c=b.g.nd,c=b.$b.D.Va(new N(c[0],c[1],c[2])),c=a.t.o.Va(c),c=Vc(a.t.za,c);return Math.round(1E3*c)/1E3}
v.Hg=function(a,b){if(this.w.PICKING_ENABLED){this.Ib(p,t);var c=new Uint8Array(4);this.a.readPixels(a,this.H-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
v.Ib=function(a,b){ah.j.Ib.call(this,a,b);var c=this.hb.v,d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.If):this.a.bindFramebuffer(this.a.FRAMEBUFFER,s);this.a.viewport(0,0,this.N,this.H);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var e=this.t.Hf,f=this.t.Nb;this.a.uniformMatrix4fv(this.Qc.get("projection"),t,e);this.a.uniformMatrix4fv(this.Qc.get("modelview"),t,f);e=this.m;this.a.uniform3f(this.Qc.get(bg.xj),parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));
f=this.$a.length;for(e=0;e<f;++e){var g=this.$a[e];if(g instanceof M){var h=new N(1,0,0),h=this.t.o.Va(h),m=Vc(this.t.za,h),h=new N(-1,0,0),h=this.t.o.Va(h),k=Vc(this.t.za,h),h=new N(0,1,0),h=this.t.o.Va(h),n=Vc(this.t.za,h),h=new N(0,-1,0),h=this.t.o.Va(h),q=Vc(this.t.za,h),h=new N(0,0,1),h=this.t.o.Va(h),r=Vc(this.t.za,h),h=new N(0,0,-1),h=this.t.o.Va(h),h=Vc(this.t.za,h),w=Math.max(m,n,r,k,q,h);w==m||w==k?fg(g,0):w==n||w==q?fg(g,1):(w==r||w==h)&&fg(g,2)}}if(this.w.ORDERING_ENABLED){m=t;f=this.$a;
g=f.length-1;do if(e=f[g],e instanceof M&&e.Qa){k=e.Hb;m=e.W.d;1==k?m=e.X.d:2==k&&(m=e.ib.d);k=m.length;n=m[0];n.L=bh(this,n);n.V=e.V;q=m[k-1];q.L=bh(this,q);q.V=e.V;q=Math.round(1E3*((q.L-n.L)/k))/1E3;for(r=r=1;r<k-1;r++)h=Math.round(1E3*(n.L+r*q))/1E3,m[r].L=h,m[r].V=e.V;m=p}while(g--);f=this.hb.v;g=f.length-1;do if(e=f[g],e.Pa&&!(1==e.V||e instanceof eg))e.L=bh(this,e),m=p;while(g--);m&&this.hb.sort()}if(f=!a&&b!=s&&b&&this.w.STATISTICS_ENABLED)var x=0,y=0,C=0,F=0;var e=this.be,g=e.get("vertexPosition"),
m=e.get("vertexNormal"),k=e.get("vertexColor"),n=e.get("vertexTexturePos"),q=e.get("vertexScalar"),r=this.Qc,h=r.get(bg.ak),w=r.get("useObjectColor"),z=r.get("objectColor"),B=r.get("useScalars"),H=r.get("scalarsReplaceMode"),O=r.get("scalarsMin"),ba=r.get("scalarsMax"),U=r.get("scalarsMinColor"),V=r.get("scalarsMaxColor"),ga=r.get("scalarsInterpolation"),ca=r.get("scalarsMinThreshold"),da=r.get("scalarsMaxThreshold"),Na=r.get("alpha"),Bb=r.get(bg.Bj),pa=r.get(bg.ck),mg=r.get(bg.Zj),gh=r.get(bg.Xj),
hh=r.get(bg.Yj),ih=r.get(bg.jk),jh=r.get(bg.pk),kh=r.get(bg.mk),lh=r.get(bg.kk),mh=r.get(bg.rk),nh=r.get(bg.qk),oh=r.get(bg.nk),ph=r.get(bg.lk),ng=r.get(bg.ok),qh=r.get("objectTransform"),rh=r.get("pointsize"),sh=r.get("lighting"),e=d;do{var Q=c[d-e];if(Q){var Y=s;Q instanceof eg&&Q.kb&&(Y=Q.kb);if(Q.Pa&&(!Y||Y.Pa)){var wa=Q.xa,Xa=Q.Hc,Fa=this.Tc.get(wa),gb=this.oe.get(wa),Le=this.od.get(wa),Yb=this.xd.get(wa),Me=this.yd.get(wa);this.a.bindBuffer(this.a.ARRAY_BUFFER,Fa.ma);this.a.vertexAttribPointer(g,
Fa.wb,this.a.FLOAT,t,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,gb.ma);this.a.vertexAttribPointer(m,gb.wb,this.a.FLOAT,t,0,0);a?this.a.uniform1i(h,p):this.a.uniform1i(h,t);Le&&!a&&!Xa?(this.a.uniform1i(w,t),this.a.bindBuffer(this.a.ARRAY_BUFFER,Le.ma),this.a.vertexAttribPointer(k,Le.wb,this.a.FLOAT,t,0,0)):(gb=1,Xa&&!a&&(gb=0),this.a.uniform1i(w,gb),gb=Q.pb,a&&(gb=[Math.floor(wa%65025%255)/255,Math.floor(wa%65025/255)/255,Math.floor(wa/65025)/255]),this.a.uniform3f(z,parseFloat(gb[0]),parseFloat(gb[1]),
parseFloat(gb[2])),this.a.vertexAttribPointer(k,Fa.wb,this.a.FLOAT,t,0,0));Yb&&!a&&!Xa?(this.a.uniform1i(B,p),this.a.uniform1i(H,Q.u.Kf),wa=Q.u.Ab,Xa=Q.u.yb,this.a.uniform3f(U,parseFloat(wa[0]),parseFloat(wa[1]),parseFloat(wa[2])),this.a.uniform3f(V,parseFloat(Xa[0]),parseFloat(Xa[1]),parseFloat(Xa[2])),this.a.uniform1f(ca,parseFloat(Q.u.T)),this.a.uniform1f(da,parseFloat(Q.u.Y)),this.a.uniform1f(O,parseFloat(Q.u.Oa)),this.a.uniform1f(ba,parseFloat(Q.u.Ia)),this.a.uniform1i(ga,parseInt(Q.u.fe,10)),
this.a.bindBuffer(this.a.ARRAY_BUFFER,Yb.ma),this.a.vertexAttribPointer(q,Yb.wb,this.a.FLOAT,t,0,0)):(this.a.uniform1i(B,t),this.a.vertexAttribPointer(q,Fa.wb,this.a.FLOAT,t,0,0));this.a.uniform1f(Na,parseFloat(Q.V));Q.A&&Me&&!a?(this.a.uniform1i(pa,p),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.zd.get(Q.A.xa)),this.a.uniform1i(gh,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,Me.ma),this.a.vertexAttribPointer(n,Me.wb,this.a.FLOAT,t,0,0),this.a.uniform1i(ng,t)):(this.a.uniform1i(pa,
t),this.a.vertexAttribPointer(n,Fa.wb,this.a.FLOAT,t,0,0));Y&&(this.a.uniform1i(ng,p),this.a.uniform1f(ih,Y.T),this.a.uniform1f(jh,Y.Y),this.a.uniform1f(kh,Y.Oa),this.a.uniform1f(lh,Y.Ia),wa=Y.Ab,Xa=Y.yb,this.a.uniform3f(oh,parseFloat(wa[0]),parseFloat(wa[1]),parseFloat(wa[2])),this.a.uniform3f(ph,parseFloat(Xa[0]),parseFloat(Xa[1]),parseFloat(Xa[2])),this.a.uniform1f(mh,Y.$),this.a.uniform1f(nh,Y.Z),Yb=Y.p,this.a.uniform1i(mg,t),Y.Qa?this.a.uniform1f(Na,parseFloat(Y.V)):Yb&&Yb.Pa&&(Y=Q.p.xa,this.a.uniform1i(mg,
p),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.zd.get(Y)),this.a.uniform1i(hh,1),this.a.uniform1f(Bb,Yb.V)));this.a.uniformMatrix4fv(qh,t,Q.$b.zf);Y=1;"POINTS"==Q.ca&&(Y=Q.Oc);this.a.uniform1f(rh,Y);this.a.uniform1i(sh,Q.Gc);this.a.uniform1i(r.get("highlight"),t);this.a.uniform1i(r.get("builtin"),t);this.a.uniform1i(r.get("picking"),t);this.a.uniform1f(r.get("ambient"),0.3);this.a.uniform1f(r.get("diffuse"),0.8);this.a.uniform1f(r.get("specular"),0.3);this.a.uniform1f(r.get("shininess"),
10);this.a.uniform3f(r.get("speccolor"),1,1,0.8);this.a.uniform3f(r.get("light"),0,1,2);Y=-1;Q.ca==nd?(Y=this.a.TRIANGLES,f&&(y+=Fa.vb/3)):"LINES"==Q.ca?(this.a.lineWidth(Q.pc),Y=this.a.LINES,f&&(C+=Fa.vb/2)):"POINTS"==Q.ca?(Y=this.a.POINTS,f&&(F+=Fa.vb)):"TRIANGLE_STRIPS"==Q.ca?(Y=this.a.TRIANGLE_STRIP,f&&(y+=Fa.vb/3)):"POLYGONS"==Q.ca&&(Y=0==Fa.vb%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,f&&(y+=Fa.vb/3));f&&(x+=Fa.vb);"front"==Q.lc?(this.a.enable(this.a.CULL_FACE),this.a.cullFace(this.a.FRONT)):"back"==
Q.lc?(this.a.enable(this.a.CULL_FACE),this.a.cullFace(this.a.BACK)):this.a.disable(this.a.CULL_FACE);this.a.drawArrays(Y,0,Fa.vb)}}}while(--e);f&&(c="Objects: "+d+" | "+("Vertices: "+x+" | "),c+="Triangles: "+Math.round(y)+" | ",c+="Lines: "+C+" | ",c+="Points: "+F+" | ",c+="Textures: "+this.zd.ab(),window.console.log(c))}};v.Hd=function(){this.te=s;delete this.te;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);ah.j.Hd.call(this)};E("X.renderer3D",ah);
E("X.renderer3D.prototype.init",ah.prototype.ja);E("X.renderer3D.prototype.add",ah.prototype.add);E("X.renderer3D.prototype.onShowtime",ah.prototype.Dg);E("X.renderer3D.prototype.onRender",ah.prototype.Bg);E("X.renderer3D.prototype.get",ah.prototype.get);E("X.renderer3D.prototype.render",ah.prototype.hc);E("X.renderer3D.prototype.destroy",ah.prototype.Hd);E("X.renderer3D.prototype.resetBoundingBox",ah.prototype.Ri);E("X.renderer3D.prototype.resetViewAndRender",ah.prototype.yc);
E("X.renderer3D.prototype.pick",ah.prototype.Hg);function ch(){Rg.call(this);this.c="renderer2D";this.Af=this.ge=this.xf=this.ee=this.Bb=s;this.wd=this.Wb=this.Xb=this.ue=this.ve=0;this.Z=this.$=this.Y=this.T=this.vf=-1}G(ch,Rg);ch.prototype.ui=aa();ch.prototype.Di=aa();ch.prototype.cf=function(a){ch.j.cf.call(this,a);var b=this.$a[0];if(b){var c=this.Bb;b["index"+c]=a.J?b["index"+c]+1:b["index"+c]-1;eval("this.onScroll();")}};
ch.prototype.Ei=function(a){var b=this.$a[0];if(b){var c=b.Z-b.$,d=c/2,e=parseInt(c+c/15*-a.ze,10);a=parseInt(d+d/15*a.le,10);c==e&&e++;d==a&&a++;b.$-=parseInt(d-a,10);b.$-=parseInt(c-e,10);b.$=Math.max(b.$,b.Oa);b.Z-=parseInt(d-a,10);b.Z+=parseInt(c-e,10);b.Z=Math.min(b.Z,b.Ia);eval("this.onWindowLevel();")}};ch.prototype.__defineGetter__("orientation",u("Bb"));
ch.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"X"!=a&&("Y"!=a&&"Z"!=a)&&j(Error("Invalid orientation."));this.Bb=a});v=ch.prototype;v.ja=function(){this.Bb||j(Error("No 2D orientation set."));ch.j.ja.call(this,"2d");this.a.fillStyle="rgba(0,0,0,0)";this.a.fillRect(0,0,this.la.width,this.la.height);this.ee=$d("canvas");this.ge=$d("canvas");K(this.t,Bd,this.Ei.bind(this))};v.rotate=function(){this.wd++};v.Ti=function(){this.wd--};
v.yc=function(){ch.j.yc.call(this);dh(this);var a=this.$a[0];a&&(a.Z=a.Ia,a.$=a.Oa)};
v.eb=function(a){ch.j.eb.call(this,a);var b=t;this.get(a.xa)&&(b=p);if(a instanceof M){var c=a.r,d=a.p,e=a.fa;if(d!=s&&d.r!=s&&d.r.e)this.eb(d);else if(e!=s&&e.r!=s&&e.r.e)this.C.load(e,a);else{if(c!=s&&A(c))if(a.ic!=s){if(a.ic.Rd!=c.length||b&&!a.e)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.C.load(c[b],a);return}else if(c!=s&&c.e){this.C.load(a,a);return}var d=c=0,e=a.ga,f=a.I;"X"==this.Bb?(this.Yb=a.W.d,c=e[1],d=e[2],this.Xb=f[1],this.Wb=f[2]):"Y"==this.Bb?(this.Yb=a.X.d,c=e[0],d=e[2],this.Xb=
f[0],this.Wb=f[2]):"Z"==this.Bb&&(this.Yb=a.ib.d,c=e[0],d=e[1],this.Xb=f[0],this.Wb=f[1]);this.ve=c;this.ue=d;e=this.ee;e.width=c;e.height=d;f=this.ge;f.width=c;f.height=d;this.xf=e.getContext("2d");this.Af=f.getContext("2d");b||(this.hb.add(a),dh(this))}}};function dh(a){var b=Math.min(a.N/(a.ve*a.Xb),a.H/(a.ue*a.Wb));a.t.o.l(2,3,b)}
v.Ib=function(a,b){ch.j.Ib.call(this,a,b);if(0!=this.hb.v.length){var c=this.N,d=this.H,e=this.t.o;this.a.save();this.a.clearRect(-c,-d,2*c,2*d);this.a.restore();var f=1*e.ba(0,3),g=-1*e.ba(1,3),h=Math.max(e.ba(2,3),0.6);this.a.setTransform(h,0,0,h,f,g);var e=this.$a[0],m=e["index"+this.Bb],k=this.Yb[parseInt(m,10)],n=k.A.Aa,k=k.p,q=s;k&&(q=k.Aa);var r=this.ve,w=this.ue,x=this.xf,y=this.Af,C=x.getImageData(0,0,r,w),F=y.getImageData(0,0,r,w),z=C.data,B=F.data,H=z.length,O=e.Ia,ba=e.T,U=e.Y,V=e.$/O,
ga=e.Z/O;if(this.vf!=m||this.T!=ba||this.Y!=U||this.$!=V||this.Z!=ga){var ca=0;do{var da=[0,0,0,0],Na=[0,0,0,0],Bb=n[ca]/255*O,pa=n[ca],pa=(pa/255-V)/(ga-V),pa=255*pa;Bb>=ba&&Bb<=U&&(da=new N(e.Ab[0],e.Ab[1],e.Ab[2]),da=(new N(e.yb[0],e.yb[1],e.yb[2])).scale(pa).add(da.scale(255-pa)),da=[Math.floor(da.x),Math.floor(da.y),Math.floor(da.b),255],k&&(Na=[q[ca],q[ca+1],q[ca+2],q[ca+3]]));pa=H-1-ca;z[pa-3]=da[0];z[pa-2]=da[1];z[pa-1]=da[2];z[pa]=da[3];B[pa-3]=Na[0];B[pa-2]=Na[1];B[pa-1]=Na[2];B[pa]=Na[3];
ca+=4}while(ca<H);x.putImageData(C,0,0);y.putImageData(F,0,0);this.vf=m;this.T=ba;this.Y=U;this.$=V;this.Z=ga}this.a.globalAlpha=1;this.a.translate(c/2/h,d/2/h);this.a.rotate(0.5*Math.PI*this.wd);switch(this.wd%4){case 1:c=f;f=g;g=-c;break;case 2:f*=-1;g*=-1;break;case 3:c=f,f=-g,g=c}f=-r*this.Xb/2+f;g=-w*this.Wb/2+g;this.a.drawImage(this.ee,f,g,r*this.Xb,w*this.Wb);k&&e.p.Pa&&(this.a.globalAlpha=e.p.V,this.a.drawImage(this.ge,f,g,r*this.Xb,w*this.Wb))}};E("X.renderer2D",ch);
E("X.renderer2D.prototype.init",ch.prototype.ja);E("X.renderer2D.prototype.add",ch.prototype.add);E("X.renderer2D.prototype.onShowtime",ch.prototype.Dg);E("X.renderer2D.prototype.onRender",ch.prototype.Bg);E("X.renderer2D.prototype.onScroll",ch.prototype.ui);E("X.renderer2D.prototype.onWindowLevel",ch.prototype.Di);E("X.renderer2D.prototype.get",ch.prototype.get);E("X.renderer2D.prototype.rotate",ch.prototype.rotate);E("X.renderer2D.prototype.rotateCounter",ch.prototype.Ti);
E("X.renderer2D.prototype.resetViewAndRender",ch.prototype.yc);E("X.renderer2D.prototype.render",ch.prototype.hc);E("X.renderer2D.prototype.destroy",ch.prototype.Hd);function eh(){S.call(this);this.c="mesh";Ha(this,new Sc)}G(eh,S);E("X.mesh",eh);function fh(){S.call(this);this.c="fibers";Ha(this,new Sc)}G(fh,S);E("X.fibers",fh);
