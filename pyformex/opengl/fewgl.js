/*
 * 
 *                  xxxxxxx      xxxxxxx
 *                   x:::::x    x:::::x 
 *                    x:::::x  x:::::x  
 *                     x:::::xx:::::x   
 *                      x::::::::::x    
 *                       x::::::::x     
 *                       x::::::::x     
 *                      x::::::::::x    
 *                     x:::::xx:::::x   
 *                    x:::::x  x:::::x  
 *                   x:::::x    x:::::x 
 *              THE xxxxxxx      xxxxxxx TOOLKIT
 *                    
 *                  http://www.goXTK.com
 *                   
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *                   
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 * 
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 * 
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 * 
 *  - the JSXCompressor library (http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/JXG/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function k(a){return function(){return this[a]}}var q,ea=this;function fa(){}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ha(a){return void 0!==a}function r(a){return"array"==ga(a)}function ia(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ja(a){return"string"==typeof a}function z(a){return"number"==typeof a}function ka(a){return"function"==ga(a)}function ma(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function na(a){return a[oa]||(a[oa]=++pa)}
var oa="closure_uid_"+(1E9*Math.random()>>>0),pa=0;function qa(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function ta(a,b,c){ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qa:sa;return ta.apply(null,arguments)}function ua(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}var va=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=ea;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&ha(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function B(a,b){function c(){}c.prototype=b.prototype;a.r=b.prototype;a.prototype=new c;a.prototype.constructor=a};function wa(a,b,c){this.Ha=this.Ga=this.Fa=0;3==arguments.length?(this.Fa=Number(a),this.Ga=Number(b),this.Ha=Number(c)):a instanceof wa?(this.Fa=Number(a.x()),this.Ga=Number(a.y()),this.Ha=Number(a.z())):(this.Fa=Number(a[0]),this.Ga=Number(a[1]),this.Ha=Number(a[2]))}wa.prototype={e:function(){return new wa(this.Fa,this.Ga,this.Ha)},length:function(){return Math.sqrt(xa(this,this))},x:k("Fa"),y:k("Ga"),z:k("Ha")};
function ya(a,b){return new wa(a.Ga*b.z()-a.Ha*b.y(),a.Ha*b.x()-a.Fa*b.z(),a.Fa*b.y()-a.Ga*b.x())}function za(a){var b=a.length();return new wa(a.Fa/b,a.Ga/b,a.Ha/b)}function xa(a,b){return a.Fa*b.x()+a.Ga*b.y()+a.Ha*b.z()}function Aa(a,b){return new wa(a.Fa*b,a.Ga*b,a.Ha*b)}function Ca(a,b){return new wa(a.Fa-b.x(),a.Ga-b.y(),a.Ha-b.z())}function Da(a,b){return new wa(a.Fa+b.x(),a.Ga+b.y(),a.Ha+b.z())}function Ea(a){return new wa(-a.Fa,-a.Ga,-a.Ha)};var D=D||{};D.Qi=!0;D.va=function(a){eval("X.DEV === undefined")||window.console.time(a)};D.pa=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.vg=0;this.Ki=function(){return this.vg++}};function Fa(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c]}}var Ga=window.mg;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),g=window.setTimeout(function(){b(c+f)},f);a=c+f;return g});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(a){clearTimeout(a)})})();"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){if(void 0===a)throw Error("Not enough arguments.");var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),f=new Uint8Array(d),g=a,h=0;g<c;++g,++h)f[h]=e[g];return d});A("$",Ga);
A("Function.prototype.bind",Function.prototype.bind);A("window.requestAnimationFrame",window.requestAnimationFrame);A("window.cancelAnimationFrame",window.cancelAnimationFrame);function Ia(a){if(!Ja.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ka,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(La,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ma,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Na,"&quot;"));return a}var Ka=/&/g,La=/</g,Ma=/>/g,Na=/\"/g,Ja=/[&<>\"]/;var Oa,Pa,Qa,Sa,Ta,Ua,Va;function Wa(){return ea.navigator?ea.navigator.userAgent:null}function Xa(){return ea.navigator}Sa=Qa=Pa=Oa=!1;var Ya;if(Ya=Wa()){var Za=Xa();Oa=0==Ya.indexOf("Opera");Pa=!Oa&&-1!=Ya.indexOf("MSIE");Qa=!Oa&&-1!=Ya.indexOf("WebKit");Sa=!Oa&&!Qa&&"Gecko"==Za.product}var ab=Oa,F=Pa,bb=Sa,cb=Qa,db,eb=Xa();db=eb&&eb.platform||"";Ta=-1!=db.indexOf("Mac");Ua=-1!=db.indexOf("Win");Va=-1!=db.indexOf("Linux");var fb=!!Xa()&&-1!=(Xa().appVersion||"").indexOf("X11");
function gb(){var a=ea.document;return a?a.documentMode:void 0}var hb;a:{var ib="",jb;if(ab&&ea.opera)var kb=ea.opera.version,ib="function"==typeof kb?kb():kb;else if(bb?jb=/rv\:([^\);]+)(\)|;)/:F?jb=/MSIE\s+([^\);]+)(\)|;)/:cb&&(jb=/WebKit\/(\S+)/),jb)var lb=jb.exec(Wa()),ib=lb?lb[1]:"";if(F){var mb=gb();if(mb>parseFloat(ib)){hb=String(mb);break a}}hb=ib}var nb={};
function ob(a){var b;if(!(b=nb[a])){b=0;for(var c=String(hb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var n=l.exec(g)||["","",""],p=m.exec(h)||["","",""];if(0==n[0].length&&0==p[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==n[1].length?0:parseInt(n[1],
10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==n[2].length)<(0==p[2].length)?-1:(0==n[2].length)>(0==p[2].length)?1:0)||(n[2]<p[2]?-1:n[2]>p[2]?1:0)}while(0==b)}b=nb[a]=0<=b}return b}var pb=ea.document,qb=pb&&F?gb()||("CSS1Compat"==pb.compatMode?parseInt(hb,10):5):void 0;function rb(){0!=tb&&na(this)}var tb=0;function ub(a,b){this.type=a;this.currentTarget=this.target=b}q=ub.prototype;q.dc=!1;q.defaultPrevented=!1;q.Fd=!0;q.stopPropagation=function(){this.dc=!0};q.preventDefault=function(){this.defaultPrevented=!0;this.Fd=!1};var vb=0;function wb(){}q=wb.prototype;q.key=0;q.ec=!1;q.qd=!1;q.ia=function(a,b,c,d,e,f){if(ka(a))this.Of=!0;else if(a&&a.handleEvent&&ka(a.handleEvent))this.Of=!1;else throw Error("Invalid listener argument");this.Gb=a;this.eg=b;this.src=c;this.type=d;this.capture=!!e;this.Be=f;this.qd=!1;this.key=++vb;this.ec=!1};q.handleEvent=function(a){return this.Of?this.Gb.call(this.Be||this.src,a):this.Gb.handleEvent.call(this.Gb,a)};function xb(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function yb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function zb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Ab="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ab.length;f++)c=Ab[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var Cb=!F||F&&9<=qb,Db=F&&!ob("9");!cb||ob("528");bb&&ob("1.9b")||F&&ob("8")||ab&&ob("9.5")||cb&&ob("528");bb&&!ob("8")||F&&ob("9");var Eb=Array.prototype,Fb=Eb.indexOf?function(a,b,c){return Eb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ja(a))return ja(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Gb=Eb.forEach?function(a,b,c){Eb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Hb=Eb.map?function(a,b,c){return Eb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),
f=ja(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ib=Eb.some?function(a,b,c){return Eb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},Jb=Eb.every?function(a,b,c){return Eb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ja(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Kb(a,b){var c=Fb(a,b);0<=c&&Eb.splice.call(a,c,1)}
function Lb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Mb(a,b,c){return 2>=arguments.length?Eb.slice.call(a,b):Eb.slice.call(a,b,c)};function Nb(a){Nb[" "](a);return a}Nb[" "]=fa;function Pb(a,b){a&&this.ia(a,b)}B(Pb,ub);q=Pb.prototype;q.target=null;q.relatedTarget=null;q.offsetX=0;q.offsetY=0;q.clientX=0;q.clientY=0;q.screenX=0;q.screenY=0;q.button=0;q.keyCode=0;q.charCode=0;q.ctrlKey=!1;q.altKey=!1;q.shiftKey=!1;q.metaKey=!1;q.Ra=null;
q.ia=function(a,b){var c=this.type=a.type;ub.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(bb){var e;a:{try{Nb(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=cb||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=cb||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:
a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Ra=a;a.defaultPrevented&&this.preventDefault();delete this.dc};q.stopPropagation=function(){Pb.r.stopPropagation.call(this);this.Ra.stopPropagation?this.Ra.stopPropagation():this.Ra.cancelBubble=!0};
q.preventDefault=function(){Pb.r.preventDefault.call(this);var a=this.Ra;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Db)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};q.Yg=k("Ra");var Qb={},Rb={},Sb={},Tb={};function G(a,b,c,d,e){if(r(b)){for(var f=0;f<b.length;f++)G(a,b[f],c,d,e);return null}a=Ub(a,b,c,!1,d,e);b=a.key;Qb[b]=a;return b}
function Ub(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");e=!!e;var g=Rb;b in g||(g[b]={N:0,ua:0});g=g[b];e in g||(g[e]={N:0,ua:0},g.N++);var g=g[e],h=na(a),l;g.ua++;if(g[h]){l=g[h];for(var m=0;m<l.length;m++)if(g=l[m],g.Gb==c&&g.Be==f){if(g.ec)break;d||(l[m].qd=!1);return l[m]}}else l=g[h]=[],g.N++;m=Vb();g=new wb;g.ia(c,m,a,b,e,f);g.qd=d;m.src=a;m.Gb=g;l.push(g);Sb[h]||(Sb[h]=[]);Sb[h].push(g);a.addEventListener?a!=ea&&a.Cf||a.addEventListener(b,m,e):a.attachEvent(b in Tb?Tb[b]:Tb[b]="on"+
b,m);return g}function Vb(){var a=Wb,b=Cb?function(c){return a.call(b.src,b.Gb,c)}:function(c){c=a.call(b.src,b.Gb,c);if(!c)return c};return b}function Xb(a,b,c,d,e){if(r(b))for(var f=0;f<b.length;f++)Xb(a,b[f],c,d,e);else a=Ub(a,b,c,!0,d,e),Qb[a.key]=a}
function Yb(a,b,c,d,e){if(r(b))for(var f=0;f<b.length;f++)Yb(a,b[f],c,d,e);else{d=!!d;a:{f=Rb;if(b in f&&(f=f[b],d in f&&(f=f[d],a=na(a),f[a]))){a=f[a];break a}a=null}if(a)for(f=0;f<a.length;f++)if(a[f].Gb==c&&a[f].capture==d&&a[f].Be==e){Zb(a[f].key);break}}}
function Zb(a){var b=Qb[a];if(!b||b.ec)return!1;var c=b.src,d=b.type,e=b.eg,f=b.capture;c.removeEventListener?c!=ea&&c.Cf||c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Tb?Tb[d]:Tb[d]="on"+d,e);c=na(c);Sb[c]&&(e=Sb[c],Kb(e,b),0==e.length&&delete Sb[c]);b.ec=!0;if(b=Rb[d][f][c])b.Uf=!0,$b(d,f,c,b);delete Qb[a];return!0}
function $b(a,b,c,d){if(!d.Cd&&d.Uf){for(var e=0,f=0;e<d.length;e++)d[e].ec?d[e].eg.src=null:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Uf=!1;0==f&&(delete Rb[a][b][c],Rb[a][b].N--,0==Rb[a][b].N&&(delete Rb[a][b],Rb[a].N--),0==Rb[a].N&&delete Rb[a])}}function ac(a){var b=bc;a=na(a);var c=Sb[a];if(c){var d=ha(b),e=ha(void 0);return d&&e?(c=Rb[b],!!c&&!!c[void 0]&&a in c[void 0]):d||e?Ib(c,function(a){return d&&a.type==b||e&&void 0==a.capture}):!0}return!1}
function cc(a,b,c,d,e){var f=1;b=na(b);if(a[b]){var g=--a.ua,h=a[b];h.Cd?h.Cd++:h.Cd=1;try{for(var l=h.length,m=0;m<l;m++){var n=h[m];n&&!n.ec&&(f&=!1!==dc(n,e))}}finally{a.ua=Math.max(g,a.ua),h.Cd--,$b(c,d,b,h)}}return Boolean(f)}function dc(a,b){a.qd&&Zb(a.key);return a.handleEvent(b)}
function Wb(a,b){if(a.ec)return!0;var c=a.type,d=Rb;if(!(c in d))return!0;var d=d[c],e,f;if(!Cb){var g;if(!(g=b))a:{g=["window","event"];for(var h=ea;e=g.shift();)if(null!=h[e])h=h[e];else{g=null;break a}g=h}e=g;g=!0 in d;h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var l=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(m){l=!0}if(l||void 0==e.returnValue)e.returnValue=!0}}l=new Pb;l.ia(e,this);e=!0;try{if(g){for(var n=[],p=l.currentTarget;p;p=p.parentNode)n.push(p);f=d[!0];
f.ua=f.N;for(var s=n.length-1;!l.dc&&0<=s&&f.ua;s--)l.currentTarget=n[s],e&=cc(f,n[s],c,!0,l);if(h)for(f=d[!1],f.ua=f.N,s=0;!l.dc&&s<n.length&&f.ua;s++)l.currentTarget=n[s],e&=cc(f,n[s],c,!1,l)}else e=dc(a,l)}finally{n&&(n.length=0)}return e}c=new Pb(b,this);return e=dc(a,c)}var ec=0;function fc(a){return a+"_"+ec++};function gc(){rb.call(this)}B(gc,rb);q=gc.prototype;q.Cf=!0;q.Ne=null;q.Re=ca("Ne");q.addEventListener=function(a,b,c,d){G(this,a,b,c,d)};q.removeEventListener=function(a,b,c,d){Yb(this,a,b,c,d)};
q.dispatchEvent=function(a){var b=a.type||a,c=Rb;if(b in c){if(ja(a))a=new ub(a,this);else if(a instanceof ub)a.target=a.target||this;else{var d=a;a=new ub(b,this);Bb(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.Ne)e.push(f);f=c[!0];f.ua=f.N;for(var g=e.length-1;!a.dc&&0<=g&&f.ua;g--)a.currentTarget=e[g],d&=cc(f,e[g],a.type,!0,a)&&!1!=a.Fd}if(!1 in c)if(f=c[!1],f.ua=f.N,b)for(g=0;!a.dc&&g<e.length&&f.ua;g++)a.currentTarget=e[g],d&=cc(f,e[g],a.type,!1,a)&&!1!=a.Fd;else for(e=this;!a.dc&&
e&&f.ua;e=e.Ne)a.currentTarget=e,d&=cc(f,e,a.type,!1,a)&&!1!=a.Fd;a=Boolean(d)}else a=!0;return a};function H(){rb.call(this);this.b="base";this.ma=window["X.counter"].Ki();this.d=!1}B(H,gc);H.prototype.__defineGetter__("classname",k("b"));H.prototype.__defineGetter__("id",k("ma"));A("X.base",H);function hc(a,b){this.ta=new wa(a);this.da=new wa(b)}hc.prototype={e:function(){return new hc(this.ta.e(),this.da.e())},bc:function(){this.da=Ea(this.da)}};function ic(a,b){this.da=a;this.Yc=b}ic.prototype={e:function(){return new ic(this.da.e(),this.Yc)},bc:function(){this.da=Ea(this.da);this.Yc=-this.Yc}};function jc(a,b){this.lb=a;this.Jd=b;var c=a[0].ta,d=a[2].ta,d=za(ya(Ca(a[1].ta,c),Ca(d,c)));this.Ea=new ic(d,xa(d,c))}jc.prototype={e:function(){var a=this.lb.map(function(a){return a.e()});return new jc(a,this.Jd)},bc:function(){this.lb.reverse().map(function(a){a.bc()});this.Ea.bc()}};
function kc(a,b,c,d,e,f){for(var g=0,h=[],l=0;l<a.lb.length;l++){var m=xa(b.da,a.lb[l].ta)-b.Yc,m=-1E-5>m?2:1E-5<m?1:0,g=g|m;h.push(m)}switch(g){case 0:(0<xa(b.da,a.Ea.da)?c:d).push(a);break;case 1:e.push(a);break;case 2:f.push(a);break;case 3:c=[];d=[];for(l=0;l<a.lb.length;l++){var n=(l+1)%a.lb.length,m=h[l],p=h[n],g=a.lb[l],n=a.lb[n];2!=m&&c.push(g);1!=m&&d.push(2!=m?g.e():g);3==(m|p)&&(m=(b.Yc-xa(b.da,g.ta))/xa(b.da,Ca(n.ta,g.ta)),m=new hc(Da(g.ta,Aa(Ca(n.ta,g.ta),m)),Da(g.da,Aa(Ca(n.da,g.da),
m))),c.push(m),d.push(m.e()))}3<=c.length&&e.push(new jc(c,a.Jd));3<=d.length&&f.push(new jc(d,a.Jd))}};function lc(a){this.ga=this.ha=this.Ea=null;this.B=[];a&&mc(this,a)}lc.prototype={e:function(){var a=new lc;nc(a,this.Ea&&this.Ea.e());oc(a,this.ha&&this.ha.e());pc(a,this.ga&&this.ga.e());a.Hd(this.B.map(function(a){return a.e()}));return a},ca:function(){for(var a=0;a<this.B.length;a++)this.B[a].bc();this.Ea.bc();this.ha&&this.ha.ca();this.ga&&this.ga.ca();a=this.ha;this.ha=this.ga;this.ga=a},Hd:ca("B")};function pc(a,b){a.ga=b}function oc(a,b){a.ha=b}function nc(a,b){a.Ea=b}
function mc(a,b){if(b.length){a.Ea||(a.Ea=b[0].Ea.e());for(var c=[],d=[],e=0;e<b.length;e++)kc(b[e],a.Ea,a.B,a.B,c,d);c.length&&(a.ha||(a.ha=new lc),mc(a.ha,c));d.length&&(a.ga||(a.ga=new lc),mc(a.ga,d))}}function qc(a){var b=a.B.slice();a.ha&&(b=b.concat(qc(a.ha)));a.ga&&(b=b.concat(qc(a.ga)));return b}function rc(a,b){a.B=sc(b,a.B);a.ha&&rc(a.ha,b);a.ga&&rc(a.ga,b)}
function sc(a,b){if(!a.Ea)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)kc(b[e],a.Ea,c,d,c,d);a.ha&&(c=sc(a.ha,c));d=a.ga?sc(a.ga,d):[];return c.concat(d)};function tc(){this.B=[]}function uc(a){var b=new tc;b.Hd(a);return b}
tc.prototype={e:function(){var a=new tc;a.Hd(this.B.map(function(a){return a.e()}));return a},Ze:function(a){var b=new lc(this.e().B);a=new lc(a.e().B);rc(b,a);rc(a,b);a.ca();rc(a,b);a.ca();mc(b,qc(a));return uc(qc(b))},oa:function(a){var b=new lc(this.e().B);a=new lc(a.e().B);b.ca();rc(b,a);rc(a,b);a.ca();rc(a,b);a.ca();mc(b,qc(a));b.ca();return uc(qc(b))},De:function(a){var b=new lc(this.e().B);a=new lc(a.e().B);b.ca();rc(a,b);a.ca();rc(b,a);rc(a,b);mc(b,qc(a));b.ca();return uc(qc(b))},inverse:function(){var a=
this.e();a.B.map(function(a){a.bc()});return a},Hd:ca("B")};function vc(){H.call(this);this.b="indexer";this.je=[];this.ub={}}B(vc,H);vc.prototype.add=function(a){if(null==a)throw Error("Invalid object.");var b=window.JSON.stringify(a);b in this.ub||(this.ub[b]=this.je.length,this.je.push(a));return this.ub[b]};vc.prototype.unique=k("je");function wc(a){H.call(this);this.b="file";this.gd=a;this.d=!0}B(wc,H);function xc(){this.Kb=this.n=null}xc.prototype.__defineSetter__("file",function(a){null==a||r(a)&&0==a.length?this.n=null:r(a)?this.n=1==a.length?new wc(a[0]):Hb(a,function(a){var c=new I;c.n=new wc(a);return c}):this.n=new wc(a)});xc.prototype.__defineGetter__("file",function(){return this.n?r(this.n)?this.n.map(function(a){return a.n.gd}):this.n.gd:""});xc.prototype.__defineGetter__("filedata",k("Kb"));
xc.prototype.__defineSetter__("filedata",function(a){if(null==a||r(a)&&0==a.length)this.Kb=null;if(r(a))if(1==a.length)this.Kb=a[0];else{var b=this.n.length,c;for(c=0;c<b;c++)this.n[c].Kb=a[c]}else this.Kb=a});function yc(a){if("function"==typeof a.hb)a=a.hb();else if(ia(a)||ja(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function zc(a){if("function"==typeof a.Xa)return a.Xa();if(ja(a))return a.split("");if(ia(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return yb(a)}
function Ac(a,b){if("function"==typeof a.every)return a.every(b,void 0);if(ia(a)||ja(a))return Jb(a,b,void 0);var c;if("function"==typeof a.Ae)c=a.Ae();else if("function"!=typeof a.Xa)if(ia(a)||ja(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=zb(a);else c=void 0;for(var d=zc(a),e=d.length,f=0;f<e;f++)if(!b.call(void 0,d[f],c&&c[f],a))return!1;return!0};function Bc(a,b){this.P={};this.A=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.me(a)}q=Bc.prototype;q.N=0;q.hb=k("N");q.Xa=function(){Cc(this);for(var a=[],b=0;b<this.A.length;b++)a.push(this.P[this.A[b]]);return a};q.Ae=function(){Cc(this);return this.A.concat()};q.ve=function(a){for(var b=0;b<this.A.length;b++){var c=this.A[b];if(Dc(this.P,c)&&this.P[c]==a)return!0}return!1};
q.Rc=function(a,b){if(this===a)return!0;if(this.N!=a.hb())return!1;var c=b||Ec;Cc(this);for(var d,e=0;d=this.A[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Ec(a,b){return a===b}q.clear=function(){this.P={};this.N=this.A.length=0};q.remove=function(a){return Dc(this.P,a)?(delete this.P[a],this.N--,this.A.length>2*this.N&&Cc(this),!0):!1};
function Cc(a){if(a.N!=a.A.length){for(var b=0,c=0;b<a.A.length;){var d=a.A[b];Dc(a.P,d)&&(a.A[c++]=d);b++}a.A.length=c}if(a.N!=a.A.length){for(var e={},c=b=0;b<a.A.length;)d=a.A[b],Dc(e,d)||(a.A[c++]=d,e[d]=1),b++;a.A.length=c}}q.get=function(a,b){return Dc(this.P,a)?this.P[a]:b};q.set=function(a,b){Dc(this.P,a)||(this.N++,this.A.push(a));this.P[a]=b};q.me=function(a){var b;a instanceof Bc?(b=a.Ae(),a=a.Xa()):(b=zb(a),a=yb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};q.e=function(){return new Bc(this)};
function Dc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fc(){H.call(this);this.b="colortable";this.ub=new Bc;Fa(this,new xc)}B(Fc,H);Fc.prototype.add=function(a,b,c,d,e,f){if(!(z(a)&&z(c)&&z(d)&&z(e)&&z(f)))throw Error("Invalid color table entry.");this.ub.set(a,[b,c,d,e,f]);this.d=!0};function Gc(a,b,c){this.x=ha(a)?a:0;this.y=ha(b)?b:0;this.z=ha(c)?c:0}Gc.prototype.e=function(){return new Gc(this.x,this.y,this.z)};Gc.prototype.Xe=function(){return[this.x,this.y,this.z]};function J(a,b,c){this.x=a;this.y=b;this.z=c}B(J,Gc);q=J.prototype;q.e=function(){return new J(this.x,this.y,this.z)};q.cc=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};q.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};q.ca=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};q.normalize=function(){return this.scale(1/this.cc())};q.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};
q.oa=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};q.Rc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.z==a.z};function Hc(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)}function Ic(a,b){return new J(a.x+b.x,a.y+b.y,a.z+b.z)}function Jc(a,b){return new J(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)};function K(a,b){this.x=ha(a)?a:0;this.y=ha(b)?b:0}q=K.prototype;q.e=function(){return new K(this.x,this.y)};function Kc(a,b){return new K(a.x-b.x,a.y-b.y)}q.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};q.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};q.translate=function(a,b){a instanceof K?(this.x+=a.x,this.y+=a.y):(this.x+=a,z(b)&&(this.y+=b));return this};q.scale=function(a,b){var c=z(b)?b:a;this.x*=a;this.y*=c;return this};function Lc(a,b){this.x=a;this.y=b}B(Lc,K);q=Lc.prototype;q.e=function(){return new Lc(this.x,this.y)};q.cc=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};q.scale=K.prototype.scale;q.ca=function(){this.x=-this.x;this.y=-this.y;return this};q.normalize=function(){return this.scale(1/this.cc())};q.add=function(a){this.x+=a.x;this.y+=a.y;return this};q.oa=function(a){this.x-=a.x;this.y-=a.y;return this};
q.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};q.Rc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function Mc(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d};function Nc(a,b){this.width=a;this.height=b}function Oc(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}Nc.prototype.e=function(){return new Nc(this.width,this.height)};Nc.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Nc.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};Nc.prototype.scale=function(a,b){var c=z(b)?b:a;this.width*=a;this.height*=c;return this};function Pc(a,b){if(a instanceof Pc)this.$=a.Xe();else{var c;if(c=ia(a))a:{for(var d=c=0;d<a.length;d++){if(!ia(a[d])||0<c&&a[d].length!=c){c=!1;break a}for(var e=0;e<a[d].length;e++)if(!z(a[d][e])){c=!1;break a}0==c&&(c=a[d].length)}c=0!=c}if(c)this.$=Lb(a);else if(a instanceof Nc)this.$=Qc(a.height,a.width);else if(z(a)&&z(b)&&0<a&&0<b)this.$=Qc(a,b);else throw Error("Invalid argument(s) for Matrix contructor");}this.F=new Nc(this.$[0].length,this.$.length)}
function Rc(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new Pc(b)}function Sc(a,b,c){for(var d=0;d<a.Ca().height;d++)for(var e=0;e<a.Ca().width;e++)b.call(c,a.$[d][e],d,e,a)}function Tc(a,b){var c=new Pc(a.Ca());Sc(a,function(d,e,f){c.$[e][f]=b.call(void 0,d,e,f,a)});return c}function Qc(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}q=Pc.prototype;
q.add=function(a){if(!Oc(this.F,a.Ca()))throw Error("Matrix summation is only supported on arrays of equal size");return Tc(this,function(b,c,d){return b+a.$[c][d]})};q.Rc=function(a,b){if(this.F.width!=a.F.width||this.F.height!=a.F.height)return!1;for(var c=b||0,d=0;d<this.F.height;d++)for(var e=0;e<this.F.width;e++)if(!(Math.abs(this.$[d][e]-a.$[d][e])<=(c||1E-6)))return!1;return!0};q.Ca=k("F");q.aa=function(a,b){return 0<=a&&a<this.F.height&&0<=b&&b<this.F.width?this.$[a][b]:null};
q.i=function(a,b,c){if(!(0<=a&&a<this.F.height&&0<=b&&b<this.F.width))throw Error("Index out of bounds when setting matrix value, ("+a+","+b+") in size ("+this.F.height+","+this.F.width+")");this.$[a][b]=c};
q.multiply=function(a){if(a instanceof Pc){if(this.F.width!=a.Ca().height)throw Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns.");return Uc(this,a)}if(z(a))return Vc(this,a);throw Error("A matrix can only be multiplied by a number or another matrix.");};q.oa=function(a){if(!Oc(this.F,a.Ca()))throw Error("Matrix subtraction is only supported on arrays of equal size.");return Tc(this,function(b,c,d){return b-a.$[c][d]})};q.Xe=k("$");
function Uc(a,b){var c=new Pc(a.F.height,b.Ca().width);Sc(c,function(a,e,f){for(var g=a=0;g<this.F.width;g++)a+=this.aa(e,g)*b.aa(g,f);c.i(e,f,a)},a);return c}function Vc(a,b){return Tc(a,function(a){return a*b})};function Wc(a,b){Pc.call(this,a,b);this.b="matrix"}B(Wc,Pc);function Xc(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new Wc(b)}q=Wc.prototype;q.Ja=function(){var a=[],b=this.Ca(),c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(this.aa(c,d));return a};
q.translate=function(a){if(this.F.width!=this.F.height)throw Error("Can not translate non-square matrix.");var b=this.Ca(),c=Rc(b.height);if(a instanceof Lc&&3==b.height)c.i(0,2,a.x),c.i(1,2,a.y);else if(a instanceof J&&4==b.height)c.i(0,3,a.x),c.i(1,3,a.y),c.i(2,3,a.z);else throw Error("Translation failed.");return new Wc(this.multiply(c))};
q.rotate=function(a,b){if(4!=this.Ca().height||this.F.width!=this.F.height)throw Error("Only 4x4 matrices can be rotated.");if(!(null!=b&&b instanceof J))throw Error("Invalid axis vector.");if(!z(a))throw Error("Invalid angle.");var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=Rc(4);f.i(0,0,d+c.x*c.x*(1-d));f.i(0,1,c.x*c.y*(1-d)-c.z*e);f.i(0,2,c.x*c.z*(1-d)+c.y*e);f.i(1,0,c.y*c.x*(1-d)+c.z*e);f.i(1,1,d+c.y*c.y*(1-d));f.i(1,2,c.y*c.z*(1-d)-c.x*e);f.i(2,0,c.z*c.x*(1-d)-c.y*e);f.i(2,1,c.z*c.y*(1-d)+
c.x*e);f.i(2,2,d+c.z*c.z*(1-d));return new Wc(this.multiply(f))};q.Sa=function(a){var b=this.Ca(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;if(a instanceof J&&3<=b.width)c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.z;else throw Error("Multiplication by vector failed.");a=new Pc(c);a=this.multiply(a);return new J(parseFloat(a.aa(0,0)),parseFloat(a.aa(1,0)),parseFloat(a.aa(2,0)))};q.Ei=function(a,b){var c=this.$[a];this.$[a]=this.$[b];this.$[b]=c};
q.Di=function(a,b){for(var c=this.Ca(),d=0,d=0;d<c.height;d++){var e=this.aa(d,a);e||(e=0);var f=this.aa(d,b);f||(f=0);this.i(d,a,f);this.i(d,b,e)}};A("X.matrix",Wc);A("X.matrix.createIdentityMatrix",Xc);A("X.matrix.prototype.flatten",Wc.prototype.Ja);A("X.matrix.prototype.translate",Wc.prototype.translate);A("X.matrix.prototype.rotate",Wc.prototype.rotate);A("X.matrix.prototype.toArray",Wc.prototype.Xe);A("X.matrix.prototype.getValueAt",Wc.prototype.aa);A("X.matrix.prototype.setValueAt",Wc.prototype.i);
A("X.matrix.prototype.multiplyByVector",Wc.prototype.Sa);A("X.matrix.prototype.swapRows",Wc.prototype.Ei);A("X.matrix.prototype.swapCols",Wc.prototype.Di);function Yc(){H.call(this);this.b="transform";this.D=Xc(4);this.ff=new Float32Array(this.D.Ja())}B(Yc,H);Yc.prototype.__defineGetter__("matrix",k("D"));Yc.prototype.__defineSetter__("matrix",function(a){if(!(null!=a&&a instanceof Wc))throw Error("Invalid matrix.");this.D=a;this.p()});q=Yc.prototype;q.mi=function(a){if(!z(a)||-360>a||360<a)throw Error("Invalid angle.");this.D=this.D.rotate(a*Math.PI/180,new J(0,1,0));this.p()};
q.ni=function(a){if(!z(a)||-360>a||360<a)throw Error("Invalid angle.");this.D=this.D.rotate(a*Math.PI/180,new J(1,0,0));this.p()};q.oi=function(a){if(!z(a)||-360>a||360<a)throw Error("Invalid angle.");this.D=this.D.rotate(a*Math.PI/180,new J(0,0,1));this.p()};q.Hi=function(a){if(!z(a))throw Error("Invalid distance.");this.D=this.D.translate(new J(a,0,0));this.p()};q.Ii=function(a){if(!z(a))throw Error("Invalid distance.");this.D=this.D.translate(new J(0,a,0));this.p()};
q.Ji=function(a){if(!z(a))throw Error("Invalid distance.");this.D=this.D.translate(new J(0,0,a));this.p()};function Zc(a,b,c){var d=a.D.aa(b,c);d||(d=0);a.D.i(b,c,-1*d);a.p()}q.Ug=function(){Zc(this,0,0)};q.Vg=function(){Zc(this,1,1)};q.Wg=function(){Zc(this,2,2)};q.p=function(){this.ff=new Float32Array(this.D.Ja());this.d=!0};A("X.transform",Yc);A("X.transform.prototype.rotateX",Yc.prototype.mi);A("X.transform.prototype.rotateY",Yc.prototype.ni);A("X.transform.prototype.rotateZ",Yc.prototype.oi);
A("X.transform.prototype.translateX",Yc.prototype.Hi);A("X.transform.prototype.translateY",Yc.prototype.Ii);A("X.transform.prototype.translateZ",Yc.prototype.Ji);A("X.transform.prototype.flipX",Yc.prototype.Ug);A("X.transform.prototype.flipY",Yc.prototype.Vg);A("X.transform.prototype.flipZ",Yc.prototype.Wg);A("X.transform.prototype.modified",Yc.prototype.p);function $c(){H.call(this);this.b="texture";this.za=this.ob=this.n=null;this.Bb=this.Cb=0;Fa(this,new xc)}B($c,H);A("X.texture",$c);function M(a,b){H.call(this);this.b="triplets";this.Rb=Infinity;this.Ob=-Infinity;this.Sb=Infinity;this.Pb=-Infinity;this.Tb=Infinity;this.Qb=-Infinity;this.Zc=[0,0,0];this.h=0;this.L=new Float32Array(a);null!=b&&(this.L=b.L.subarray(0,b.L.length),this.h=this.L.length,this.Rb=b.Rb,this.Ob=b.Ob,this.Sb=b.Sb,this.Pb=b.Pb,this.Tb=b.Tb,this.Qb=b.Qb,this.Zc=b.Zc.slice())}B(M,H);q=M.prototype;
q.add=function(a,b,c){this.Rb=Math.min(this.Rb,a);this.Ob=Math.max(this.Ob,a);this.Sb=Math.min(this.Sb,b);this.Pb=Math.max(this.Pb,b);this.Tb=Math.min(this.Tb,c);this.Qb=Math.max(this.Qb,c);this.Zc=[(this.Rb+this.Ob)/2,(this.Sb+this.Pb)/2,(this.Tb+this.Qb)/2];this.d=!0;this.L[this.h++]=a;this.L[this.h++]=b;this.L[this.h++]=c;return this.h/3};q.jb=function(){if(this.h!=this.L.length){var a=new Float32Array(this.h);a.set(this.L.subarray(0,this.h));this.L=a}};
q.get=function(a){a*=3;return[this.L[a],this.L[a+1],this.L[a+2]]};q.remove=function(){throw Error("Not implemented.");};q.clear=function(){this.L=new Float32Array(this.L.length);this.d=!0};M.prototype.__defineGetter__("count",function(){this.jb();return this.L.length/3});M.prototype.__defineGetter__("length",function(){this.jb();return this.L.length});A("X.triplets",M);A("X.triplets.prototype.add",M.prototype.add);A("X.triplets.prototype.resize",M.prototype.jb);A("X.triplets.prototype.get",M.prototype.get);
A("X.triplets.prototype.remove",M.prototype.remove);A("X.triplets.prototype.clear",M.prototype.clear);function O(){this.ba=ad;this.Zb=new Yc;this.mb=[0.5,0.5,0.5];this.Yb=this.w=this.J=this.g=this.f=null;this.oc=[];this.Oa=!0;this.nc=this.Jc=1;this.ic=null;this.Cc=!1;this.U=1;this.K=0;this.Bc=!0;this.jc=null}var ad="TRIANGLES";O.prototype.__defineSetter__("type",function(a){return this.ba=a});O.prototype.__defineGetter__("type",k("ba"));O.prototype.__defineGetter__("texture",function(){this.w||(this.w=new $c);return this.w});O.prototype.__defineGetter__("transform",k("Zb"));
O.prototype.__defineGetter__("points",k("f"));O.prototype.__defineSetter__("points",ca("f"));O.prototype.__defineGetter__("normals",k("g"));O.prototype.__defineSetter__("normals",ca("g"));O.prototype.__defineGetter__("colors",k("J"));O.prototype.__defineSetter__("colors",ca("J"));O.prototype.__defineGetter__("color",k("mb"));
O.prototype.__defineSetter__("color",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid color.");for(var b=this.c,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.mb=a;this.d=!0});O.prototype.__defineGetter__("opacity",k("U"));O.prototype.__defineSetter__("opacity",function(a){if(!z(a)||1<a||0>a)throw Error("Invalid opacity.");for(var b=this.c,c=b.length,d=0,d=0;d<c;d++)b[d].opacity=a;this.U=a;this.d=!0});O.prototype.__defineGetter__("caption",k("ic"));
O.prototype.__defineSetter__("caption",function(a){this.ic=a;this.d=!0});O.prototype.__defineGetter__("visible",k("Oa"));O.prototype.__defineSetter__("visible",function(a){for(var b=this.c,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.Oa=a;this.d=!0});O.prototype.__defineGetter__("pointsize",k("Jc"));O.prototype.__defineSetter__("pointsize",function(a){if(!z(a))throw Error("Invalid point size.");this.Jc=a;this.d=!0});O.prototype.__defineGetter__("magicmode",k("Cc"));
O.prototype.__defineSetter__("magicmode",function(a){if("boolean"!=typeof a)throw Error("Invalid magic mode setting.");this.Cc=a;this.d=!0});O.prototype.__defineGetter__("linewidth",k("nc"));O.prototype.__defineSetter__("linewidth",function(a){if(!z(a))throw Error("Invalid line width.");this.nc=a;this.d=!0});O.prototype.__defineGetter__("lighting",k("Bc"));O.prototype.__defineSetter__("lighting",function(a){this.Bc=a;this.d=!0});O.prototype.__defineGetter__("cullface",k("jc"));
O.prototype.__defineSetter__("cullface",function(a){this.jc=a;this.d=!0});function bd(){this.Ma=Infinity;this.S=this.Ia=-Infinity;this.X=Infinity;this.xb=[0,0,0];this.vb=[1,1,1]}bd.prototype.__defineGetter__("lowerThreshold",k("S"));bd.prototype.__defineSetter__("lowerThreshold",ca("S"));bd.prototype.__defineGetter__("upperThreshold",k("X"));bd.prototype.__defineSetter__("upperThreshold",ca("X"));bd.prototype.__defineGetter__("min",k("Ma"));bd.prototype.__defineGetter__("max",k("Ia"));bd.prototype.__defineGetter__("minColor",k("xb"));
bd.prototype.__defineSetter__("minColor",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid min. color.");this.xb=a});bd.prototype.__defineGetter__("maxColor",k("vb"));bd.prototype.__defineSetter__("maxColor",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid max. color.");this.vb=a});function cd(){H.call(this);this.b="scalars";this.wc=this.v=null;this.rf=!0;this.Sd=0;Fa(this,new xc);Fa(this,new bd);this.xb=[0,1,0];this.vb=[1,0,0]}B(cd,H);cd.prototype.__defineGetter__("array",k("v"));cd.prototype.__defineSetter__("array",function(a){this.wc=this.v=a;this.d=!0});cd.prototype.__defineGetter__("interpolation",k("Sd"));cd.prototype.__defineSetter__("interpolation",ca("Sd"));A("X.scalars",cd);function P(a){H.call(this);this.b="object";this.c=[];this.t=this.ea=null;Fa(this,new O);null!=a&&this.$b(a)}B(P,H);
P.prototype.$b=function(a){this.ba=a.ba;this.Zb=new Yc;this.Zb.D=new Wc(a.Zb.D.$);this.mb=a.mb.slice();a.f&&(this.f=new M(a.f.length,a.f));a.g&&(this.g=new M(a.g.length,a.g));a.J&&(this.J=new M(a.J.length,a.J));this.w=a.w;this.Yb=a.Yb;a.n&&(this.n=new wc((new String(a.n.gd)).toString()));this.U=a.U;this.c.length=0;var b=a.c;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.c.push(new D[b[d].b](b[d]));this.Oa=a.Oa;this.Jc=a.Jc;this.nc=a.nc;a.ic&&(this.ic=(new String(a.ic)).toString());this.Cc=a.Cc;this.oc=
a.oc.slice();this.Bc=a.Bc;this.jc=a.jc;this.d=!0};P.prototype.__defineGetter__("colortable",function(){this.ea||(this.ea=new Fc);return this.ea});P.prototype.__defineGetter__("scalars",function(){this.t||(this.t=new cd);return this.t});P.prototype.__defineGetter__("children",k("c"));P.prototype.p=function(){var a=new dd;a.T=this;this.dispatchEvent(a)};
function ed(a,b){if(!(null!=a&&null!=b&&a instanceof P&&b instanceof P))throw Error("Fatal: Two valid X.objects are required for comparison.");return 1==a.U?-1:1==b.U?1:null!=a.K&&null!=b.K&&a.K>b.K?-1:1}function fd(a,b){if(!(null!=a&&null!=b&&a instanceof P&&b instanceof P))throw Error("Fatal: Two valid X.objects are required for comparison.");return a.ma<b.ma?-1:1}A("X.object",P);A("X.object.prototype.modified",P.prototype.p);function gd(){}function hd(a){for(var b=a.f.count,c=[],d=0,d=0;d<b;d+=3){var e=a.f.get(d),f=a.f.get(d+1),g=a.f.get(d+2),h=a.g.get(d),l=a.g.get(d+1),m=a.g.get(d+2),n=a.mb;a.J&&0<a.J.length&&(n=a.J.get(d));var p=[];p.push(new hc(e,h));p.push(new hc(f,l));p.push(new hc(g,m));c.push(new jc(p,n))}return uc(c)}
function id(a,b){if(!(null!=b&&b instanceof tc))throw Error("Invalid CSG object.");var c=new vc,d=[];Hb(b.B,function(a){var b=[],g=a.Jd,b=Hb(a.lb,function(a){a.color=g;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.ug=Hb(c.unique(),function(a){return[a.ta.x(),a.ta.y(),a.ta.z()]});a.tg=Hb(c.unique(),function(a){return[a.da.x(),a.da.y(),a.da.z()]});a.sg=Hb(c.unique(),function(a){return a.color?[a.color[0],a.color[1],a.color[2]]:null});a.f=new M(9*d.length);a.g=new M(9*
d.length);a.J=new M(9*d.length);Hb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.ug,l=this.tg,m=this.sg;this.f.add(d[b][0],d[b][1],d[b][2]);this.f.add(d[c][0],d[c][1],d[c][2]);this.f.add(d[a][0],d[a][1],d[a][2]);this.g.add(l[b][0],l[b][1],l[b][2]);this.g.add(l[c][0],l[c][1],l[c][2]);this.g.add(l[a][0],l[a][1],l[a][2]);m[b]&&this.J.add(m[b][0],m[b][1],m[b][2]);m[c]&&this.J.add(m[c][0],m[c][1],m[c][2]);m[a]&&this.J.add(m[a][0],m[a][1],m[a][2])}.bind(a));0==a.J.h&&(a.J=null);a.ba=ad}
gd.prototype.Ze=function(a){if(null==a||!(a instanceof tc||a instanceof P))throw Error("Invalid object.");var b=a;a instanceof P&&(b=hd(b));a=new P;Fa(a,new gd);id(a,hd(this).Ze(b));return a};gd.prototype.oa=function(a){if(null==a||!(a instanceof tc||a instanceof P))throw Error("Invalid object.");var b=a;a instanceof P&&(b=hd(b));a=new P;Fa(a,new gd);id(a,hd(this).oa(b));return a};
gd.prototype.De=function(a){if(null==a||!(a instanceof tc||a instanceof P))throw Error("Invalid object.");var b=a;a instanceof P&&(b=hd(b));a=new P;Fa(a,new gd);id(a,hd(this).De(b));return a};gd.prototype.inverse=function(){var a=new P;Fa(a,new gd);id(a,hd(this).inverse());return a};A("X.constructable",gd);A("X.constructable.prototype.intersect",gd.prototype.De);A("X.constructable.prototype.inverse",gd.prototype.inverse);A("X.constructable.prototype.subtract",gd.prototype.oa);
A("X.constructable.prototype.union",gd.prototype.Ze);function jd(a){ub.call(this,a);this.b="event"}B(jd,ub);var kd=fc("pan"),ld=fc("rotate"),md=fc("zoom"),nd=fc("scroll");fc("render");var od=fc("resetview"),pd=fc("windowlevel"),bc=fc("modified"),qd=fc("progress"),rd=fc("hover"),sd=fc("hover_end");function td(){jd.call(this,pd);this.Yd=this.le=0}B(td,jd);function ud(){jd.call(this,kd);this.K=new Lc(0,0)}B(ud,jd);function vd(){jd.call(this,ld);this.K=new Lc(0,0)}B(vd,jd);function wd(){jd.call(this,md);this.La=this.Va=!1}B(wd,jd);
function xd(){jd.call(this,nd);this.I=!1}B(xd,jd);function yd(){jd.call(this,rd);this.pd=this.od=0}B(yd,jd);function zd(){jd.call(this,sd)}B(zd,jd);function Ad(){jd.call(this,od)}B(Ad,jd);function dd(){jd.call(this,bc);this.l=this.T=null}B(dd,jd);function Bd(){jd.call(this,qd);this.uf=0}B(Bd,jd);function Cd(a,b,c){if(null==a)throw Error("Invalid GL Buffer.");if(null==b)throw Error("Invalid number of items.");if(null==c)throw Error("Invalid item size.");H.call(this);this.b="buffer";this.la=a;this.sb=b;this.tb=c}B(Cd,H);function Dd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}q=Dd.prototype;q.e=function(){return new Dd(this.top,this.right,this.bottom,this.left)};q.contains=function(a){return this&&a?a instanceof Dd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
q.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};q.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};q.translate=function(a,b){a instanceof K?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,z(b)&&(this.top+=b,this.bottom+=b));return this};
q.scale=function(a,b){var c=z(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function Ed(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}q=Ed.prototype;q.e=function(){return new Ed(this.left,this.top,this.width,this.height)};q.Nf=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};
q.contains=function(a){return a instanceof Ed?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};q.Ca=function(){return new Nc(this.width,this.height)};q.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
q.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};q.translate=function(a,b){a instanceof K?(this.left+=a.x,this.top+=a.y):(this.left+=a,z(b)&&(this.top+=b));return this};q.scale=function(a,b){var c=z(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};var Fd;function Gd(a,b){var c;c=a.className;c=ja(c)&&c.match(/\S+/g)||[];for(var d=Mb(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Fb(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var Hd=!F||F&&9<=qb;!bb&&!F||F&&F&&9<=qb||bb&&ob("1.9.1");F&&ob("9");function Id(a){return a?new Jd(Kd(a)):Fd||(Fd=new Jd)}function Ld(a){return ja(a)?document.getElementById(a):a}function Md(a,b){xb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Nd?a.setAttribute(Nd[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}
var Nd={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Od(a,b,c){return Pd(document,arguments)}
function Pd(a,b){var c=b[0],d=b[1];if(!Hd&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ia(d.name),'"');if(d.type){c.push(' type="',Ia(d.type),'"');var e={};Bb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(ja(d)?c.className=d:r(d)?Gd.apply(null,[c].concat(d)):Md(c,d));2<b.length&&Qd(a,c,b);return c}
function Qd(a,b,c){function d(c){c&&b.appendChild(ja(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!ia(f)||ma(f)&&0<f.nodeType?d(f):Gb(Rd(f)?Lb(f):f,d)}}function Sd(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Td(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function Ud(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Kd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Rd(a){if(a&&"number"==typeof a.length){if(ma(a))return"function"==typeof a.item||"string"==typeof a.item;if(ka(a))return"function"==typeof a.item}return!1}function Jd(a){this.O=a||ea.document||document}q=Jd.prototype;
q.vd=Id;q.k=function(a){return ja(a)?this.O.getElementById(a):a};q.mg=Jd.prototype.k;q.pc=function(a,b,c){return Pd(this.O,arguments)};q.createElement=function(a){return this.O.createElement(a)};q.createTextNode=function(a){return this.O.createTextNode(String(a))};function Vd(a){return"CSS1Compat"==a.O.compatMode}function Wd(a){var b=a.O;a=cb||"CSS1Compat"!=b.compatMode?b.body:b.documentElement;b=b.parentWindow||b.defaultView;return new K(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}
q.appendChild=function(a,b){a.appendChild(b)};q.contains=Ud;function Xd(a,b){var c=Kd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function Yd(a,b){return Xd(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function Zd(a){a=a?Kd(a):document;return!F||F&&9<=qb||Vd(Id(a))?a.documentElement:a.body}
function $d(a){var b=a.getBoundingClientRect();F&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function ae(a){if(F&&!(F&&8<=qb))return a.offsetParent;var b=Kd(a),c=Yd(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Yd(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function be(a){for(var b=new Dd(0,Infinity,Infinity,0),c=Id(a),d=c.O.body,e=c.O.documentElement,f=cb||"CSS1Compat"!=c.O.compatMode?c.O.body:c.O.documentElement;a=ae(a);)if(!(F&&0==a.clientWidth||cb&&0==a.clientHeight&&a==d||a==d||a==e||"visible"==Yd(a,"overflow"))){var g=ce(a),h;h=a;if(bb&&!ob("1.9")){var l=parseFloat(Xd(h,"borderLeftWidth"));if(de(h))var m=h.offsetWidth-h.clientWidth-l-parseFloat(Xd(h,"borderRightWidth")),l=l+m;h=new K(l,parseFloat(Xd(h,"borderTopWidth")))}else h=new K(h.clientLeft,
h.clientTop);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=(c.O.parentWindow||c.O.defaultView||window).document;c="CSS1Compat"==c.compatMode?c.documentElement:c.body;c=new Nc(c.clientWidth,c.clientHeight);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&
b.bottom>b.top&&b.right>b.left?b:null}
function ce(a){var b,c=Kd(a),d=Yd(a,"position"),e=bb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new K(0,0),g=Zd(c);if(a==g)return f;if(a.getBoundingClientRect)b=$d(a),a=Wd(Id(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);
if(cb&&"fixed"==Yd(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(ab||cb&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=ae(b))&&b!=c.body&&b!=g;)f.x-=b.scrollLeft,ab&&"TR"==b.tagName||(f.y-=b.scrollTop)}return f}function ee(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function fe(a){if("none"!=Yd(a,"display"))return ge(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=ge(a);b.display=c;b.position=e;b.visibility=d;return a}function ge(a){var b=a.offsetWidth,c=a.offsetHeight,d=cb&&!b&&!c;return ha(b)&&!d||!a.getBoundingClientRect?new Nc(b,c):(a=$d(a),new Nc(a.right-a.left,a.bottom-a.top))}function he(a,b){a.style.display=b?"":"none"}function de(a){return"rtl"==Yd(a,"direction")}
function ie(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}function je(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?ie(a,c):0}var ke={thin:2,medium:4,thick:6};
function le(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in ke?ke[c]:ie(a,c)}var me=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function ne(a,b){rb.call(this);this.q=a;var c=ma(this.q)&&1==this.q.nodeType?this.q:this.q?this.q.body:null;c&&de(c);G(this.q,bb?"DOMMouseScroll":"mousewheel",this,b)}B(ne,gc);
ne.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Ra;if("mousewheel"==a.type){c=1;if(F||cb&&(Ua||ob("532.0")))c=40;d=oe(-a.wheelDelta,c);ha(a.wheelDeltaX)?(b=oe(-a.wheelDeltaX,c),c=oe(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),ha(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;z(this.Rf)&&Math.min(Math.max(b,-this.Rf),this.Rf);z(this.Sf)&&(c=Math.min(Math.max(c,-this.Sf),this.Sf));b=new pe(d,a,0,c);this.dispatchEvent(b)};function oe(a,b){return cb&&(Ta||Va)&&0!=a%b?a:a/b}
function pe(a,b,c,d){b&&this.ia(b,void 0);this.type="mousewheel";this.detail=a;this.rc=d}B(pe,Pb);F||cb&&ob("525");function S(a){if(!(null!=a&&a instanceof Element))throw Error("Could not add interactor to the given element.");H.call(this);this.b="interactor";this.wa=a;this.$d=this.kf=this.jf=this.lf=this.hf=this.mf=null;this.Zd=!0;this.Db=this.wb=this.cb=!1;this.fd=[0,0];this.Ud=new Lc(0,0);this.Ac=new Lc(0,0);this.Pf=0;this.sf=this.bd=null;this.u={MOUSEWHEEL_ENABLED:!0,MOUSECLICKS_ENABLED:!0,LEFTMOUSECLICK_ENABLED:!0,MIDDLEMOUSECLICK_ENABLED:!0,RIGHTMOUSECLICK_ENABLED:!0,KEYBOARD_ENABLED:!0,HOVERING_ENABLED:!0,
CONTEXTMENU_ENABLED:!1,TOUCH_ENABLED:!0,TOUCH_BOUNCING_ENABLED:!1}}B(S,H);S.prototype.__defineGetter__("config",k("u"));S.prototype.__defineGetter__("leftButtonDown",k("cb"));S.prototype.__defineGetter__("middleButtonDown",k("wb"));S.prototype.__defineGetter__("rightButtonDown",k("Db"));
S.prototype.ia=function(){this.u.MOUSEWHEEL_ENABLED?(this.$d=new ne(this.wa),this.mf=G(this.$d,"mousewheel",this.Uc.bind(this))):(Zb(this.mf),this.$d=null);this.u.MOUSECLICKS_ENABLED?(this.hf=G(this.wa,"mousedown",this.Dh.bind(this)),this.lf=G(this.wa,"mouseup",this.Ih.bind(this))):(Zb(this.hf),Zb(this.lf));this.wa.oncontextmenu=this.u.CONTEXTMENU_ENABLED?null:function(){return!1};window.onkeydown=this.u.KEYBOARD_ENABLED?this.Xf.bind(this):null;this.u.TOUCH_ENABLED?(this.u.TOUCH_BOUNCING_ENABLED||
document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1),this.Bg=G(this.wa,"touchstart",this.Wh.bind(this)),this.Ag=G(this.wa,"touchmove",this.Uh.bind(this)),this.zg=G(this.wa,"touchend",this.Qh.bind(this))):(Zb(this.Bg),Zb(this.Ag),Zb(this.zg));Zb(this.jf);Zb(this.kf);this.jf=G(this.wa,"mousemove",this.Fh.bind(this));this.kf=G(this.wa,"mouseout",this.Gh.bind(this))};
S.prototype.Dh=function(a){this.u.LEFTMOUSECLICK_ENABLED&&0==a.button?this.cb=!0:this.u.MIDDLEMOUSECLICK_ENABLED&&1==a.button?this.wb=!0:this.u.RIGHTMOUSECLICK_ENABLED&&2==a.button&&(this.Db=!0);eval("this.onMouseDown("+this.cb+","+this.wb+","+this.Db+")");qe(this);a.preventDefault()};S.prototype.Ch=ba();S.prototype.Ih=function(a){0==a.button?this.cb=!1:1==a.button?this.wb=!1:2==a.button&&(this.Db=!1);eval("this.onMouseUp("+this.cb+","+this.wb+","+this.Db+")");qe(this);a.preventDefault()};
S.prototype.__defineGetter__("mousePosition",k("fd"));q=S.prototype;q.Hh=ba();q.Gh=function(a){this.Zd=!1;this.u.KEYBOARD_ENABLED&&(window.onkeydown=null);this.Db=this.wb=this.cb=!1;qe(this);this.Ud=new Lc(0,0);a.preventDefault()};q.Eh=ba();q.Wh=function(a){a.preventDefault();a.ia(a.Ra.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Ac=new Lc(a.clientX,a.clientY);this.sf=setTimeout(this.Sh.bind(this,a),500)};q.Vh=ba();
q.Sh=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new wd;a.Va=!0;a.La=this instanceof re;this.dispatchEvent(a);this.md=!0};q.Rh=ba();function ue(a){clearTimeout(a.sf);if(a.md){var b=new wd;b.Va=!1;b.La=a instanceof re;a.dispatchEvent(b)}a.md=!1}q.Qh=function(a){a.preventDefault();eval("this.onTouchEnd()");ue(this)};q.Ph=ba();
q.Uh=function(a){a.preventDefault();this.md||ue(this);this.touchmoveEvent=a=a.Ra;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new Lc(c[0],c[1]);var b=c[0]>3*this.wa.clientWidth/4,d=c[0]<this.wa.clientWidth/4,e=c[1]<this.wa.clientHeight/4,c=c[1]>3*this.wa.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Ac.oa(a);this.Ac=a.e();if(this.md)a=new ud,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.K=e,this.dispatchEvent(a);
else if(this instanceof ve&&(b||d))a=new xd,a.I=0>e.y,this.dispatchEvent(a);else if(this instanceof re||c)e.scale(0.1*this.Qj),a=new vd,a.K=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new Lc(a[0],a[1]),e=Mc(a,new Lc(b[0],b[1])),b=e-this.Pf,this.Pf=e,this.Ac.oa(a),this.Ac=a.e(),10<Math.abs(b)&&(a=new wd,a.Va=0<b,a.La=this instanceof re,this.dispatchEvent(a)))};q.Th=ba();
q.Fh=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.Zd=!0;this.u.KEYBOARD_ENABLED&&null==window.onkeydown&&(window.onkeydown=this.Xf.bind(this));a.preventDefault();var b=a.shiftKey;this.fd=[a.offsetX,a.offsetY];var c=new Lc(this.fd[0],this.fd[1]);a=this.Ud.oa(c);this.Ud=c.e();this.u.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.wb||this.cb||this.Db)&&qe(this),this.bd=setTimeout(function(){qe(this);var a=new yd;a.od=c.x;a.pd=c.y;this.dispatchEvent(a);
this.bd=null}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.cc()&&(this.cb&&!b?(b=new vd,a.scale(1),b.K=a,this.dispatchEvent(b)):this.wb||this.cb&&b?(b=new ud,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.K=a,this.dispatchEvent(b)):this.Db&&(b=new wd,b.Va=0<a.y,b.La=!1,this.dispatchEvent(b)))};function qe(a){a.bd&&clearTimeout(a.bd);a.dispatchEvent(new zd)}q.Jh=ba();
q.Uc=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");qe(this);a.preventDefault()};q.Ah=ba();
q.Xf=function(a){if(this.Zd){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");qe(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82!=f||b||c||d||e?37<=f&&40>=f&&(a.preventDefault(),e?a=new ud:b?a=new wd:(a=new vd,this instanceof ve&&(a=new xd)),a&&(c=new Lc(0,0),37==f?(c.x=5,a.I=!1,b&&(a.I=!0,a.Va=!0,a.La=!1)):39==f?(c.x=-5,a.I=!0,b&&(a.Va=!1,a.La=!1)):38==f?(c.y=5,a.I=!0,b&&(a.Va=!0,a.La=!0)):40==f&&(c.y=-5,a.I=!1,b&&(a.Va=!1,a.La=!0)),a.K=c,this.dispatchEvent(a))):(a.preventDefault(),
a=new Ad,this.dispatchEvent(a))}};A("X.interactor",S);A("X.interactor.prototype.init",S.prototype.ia);A("X.interactor.prototype.onMouseDown",S.prototype.Ch);A("X.interactor.prototype.onMouseUp",S.prototype.Hh);A("X.interactor.prototype.onMouseMove",S.prototype.Eh);A("X.interactor.prototype.onMouseWheel",S.prototype.Jh);A("X.interactor.prototype.onKey",S.prototype.Ah);A("X.interactor.prototype.onTouchStart",S.prototype.Vh);A("X.interactor.prototype.onTouchMove",S.prototype.Th);
A("X.interactor.prototype.onTouchEnd",S.prototype.Ph);A("X.interactor.prototype.onTouchHover",S.prototype.Rh);function ve(a){S.call(this,a);this.b="interactor2D"}B(ve,S);ve.prototype.Uc=function(a){ve.r.Uc.call(this,a);var b=new xd;null==a.rc&&(a.rc=0);b.I=0>a.rc;this.dispatchEvent(b)};function we(a){P.call(this);this.b="slice";this.j=[0,0,0];this.lc=[0,0,1];this.I=[0,1,0];this.G=this.M=10;this.Yb=[0,1,0,0,1,1,1,1,1,0,0,0];this.o=this.gb=null;this.Ua=!0;this.hc=[1,1,1];null!=a&&this.$b(a)}B(we,P);we.prototype.$b=function(a){this.j=a.j.slice();this.lc=a.lc.slice();this.I=a.I.slice();this.M=a.M;this.G=a.G;this.gb=a.gb;this.o=a.o;this.Ua=a.Ua;this.hc=a.hc;this.wg=a.wg;we.r.$b.call(this,a)};
we.prototype.qc=function(){var a=new J(this.lc[0],this.lc[1],this.lc[2]),b=new J(this.I[0],this.I[1],this.I[2]),c=Jc(b,a),d=new J(this.j[0],this.j[1],this.j[2]),e=new J(1,1,1);1==a.x?(e=new J(this.j[0],this.G/2,this.M/2),this.Yb=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new J(this.M/2,this.j[1],this.G/2),this.Yb=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.z&&(e=new J(this.M/2,this.G/2,this.j[2]));var f=Ic(c.e().ca(),b.e().ca()),f=new J(f.x*e.x,f.y*e.y,f.z*e.z);f.add(d);var g=Ic(c.e().ca(),b),g=new J(g.x*e.x,g.y*e.y,
g.z*e.z);g.add(d);var h=Ic(c,b.e().ca()),h=new J(h.x*e.x,h.y*e.y,h.z*e.z);h.add(d);var l=h,b=Ic(c,b),b=new J(b.x*e.x,b.y*e.y,b.z*e.z);b.add(d);d=g;this.f=new M(18);this.g=new M(18);this.f.add(f.x,f.y,f.z);this.f.add(g.x,g.y,g.z);this.f.add(h.x,h.y,h.z);this.f.add(l.x,l.y,l.z);this.f.add(b.x,b.y,b.z);this.f.add(d.x,d.y,d.z);this.g.add(a.x,a.y,a.z);this.g.add(a.x,a.y,a.z);this.g.add(a.x,a.y,a.z);this.g.add(a.x,a.y,a.z);this.g.add(a.x,a.y,a.z);this.g.add(a.x,a.y,a.z);this.Ua&&(a=new P,a.f=new M(24),
a.g=new M(24),a.f.add(f.x,f.y,f.z),a.f.add(g.x,g.y,g.z),a.f.add(g.x,g.y,g.z),a.f.add(b.x,b.y,b.z),a.f.add(b.x,b.y,b.z),a.f.add(h.x,h.y,h.z),a.f.add(h.x,h.y,h.z),a.f.add(f.x,f.y,f.z),a.g.add(0,0,0),a.g.add(0,0,0),a.g.add(0,0,0),a.g.add(0,0,0),a.g.add(0,0,0),a.g.add(0,0,0),a.g.add(0,0,0),a.g.add(0,0,0),a.mb=[this.hc[0],this.hc[1],this.hc[2]],a.ba="LINES",a.nc=2,this.c.push(a))};A("X.slice",we);function I(a){P.call(this);this.b="volume";this.j=[0,0,0];this.fa=[10,10,10];this.H=[1,1,1];this.ob=[];this.zc=this.rb=this.yc=this.qb=this.xc=this.pb=0;this.V=new P;this.W=new P;this.eb=new P;this.nd=this.Pa=!1;this.Eb=0;this.o=null;this.Ua=!0;this.Z=Infinity;this.Y=-Infinity;this.de=!0;Fa(this,new xc);Fa(this,new bd);null!=a&&this.$b(a)}B(I,P);
I.prototype.$b=function(a){window.console.log(a);this.j=a.j.slice();this.fa=a.fa.slice();this.H=a.H.slice();this.pb=a.pb;this.xc=a.xc;this.qb=a.qb;this.yc=a.yc;this.rb=a.rb;this.zc=a.zc;this.V=new P(a.V);this.W=new P(a.W);this.eb=new P(a.eb);this.Pa=a.Pa;this.nd=a.nd;this.Eb=a.Eb;this.o=a.o;this.Ua=a.Ua;I.r.$b.call(this,a)};
I.prototype.qc=function(){this.c.length=0;this.V.c.length=0;this.W.c.length=0;this.eb.c.length=0;this.c.push(this.V);this.c.push(this.W);this.c.push(this.eb);for(var a=0,a=0;3>a;a++){for(var b=(this.fa[a]-1)/2,c=b,d=0,d=0;d<this.fa[a];d++){var e=-b*this.H[a]+d*this.H[a],f=[[this.j[0]+e,this.j[1],this.j[2]],[this.j[0],this.j[1]+e,this.j[2]],[this.j[0],this.j[1],this.j[2]+e]],e=this.c[a].c,g=0,h=0,l=[1,1,1],m=this.Ua;0==a?(g=this.fa[2]*this.H[2]-this.H[2],h=this.fa[1]*this.H[1]-this.H[1],l=[1,1,0]):
1==a?(g=this.fa[0]*this.H[0]-this.H[0],h=this.fa[2]*this.H[2]-this.H[2],l=[1,0,0]):2==a&&(g=this.fa[0]*this.H[0]-this.H[0],h=this.fa[1]*this.H[1]-this.H[1],l=[0,1,0]);null!=this.gb&&(m=!1);var n=new we,p=n,f=f[a],s=[[1,0,0],[0,1,0],[0,0,1]][a],t=[[0,1,0],[0,0,-1],[0,1,0]][a];if(null==f||!r(f)||3!=f.length)throw Error("Invalid center.");if(null==s||!r(s)||3!=s.length)throw Error("Invalid front direction.");if(null==t||!r(t)||3!=t.length)throw Error("Invalid up direction.");if(!z(g))throw Error("Invalid width.");
if(!z(h))throw Error("Invalid height.");var v=!1;null!=m&&(v=m);m=[1,1,1];null!=l&&(m=l);p.j=f;p.lc=s;p.I=t;p.M=g;p.G=h;p.Ua=v;p.hc=m;p.qc();n.gb=this;n.visible=d==Math.floor(c);e.push(n)}0==a?this.xc=this.pb=c:1==a?this.yc=this.qb=c:2==a&&(this.zc=this.rb=c)}this.d=!0};
I.prototype.p=function(a){a="undefined"!==typeof a?a:!0;if(0<this.c.length)if(this.Pa!=this.nd&&(this.Pa?(this.c[0].c[parseInt(this.pb,10)].visible=!1,this.c[1].c[parseInt(this.qb,10)].visible=!1,this.c[2].c[parseInt(this.rb,10)].visible=!1):this.c[this.Eb].visible=!1,this.d=!0,this.nd=this.Pa),this.Pa)xe(this,this.Eb);else for(var b=0,b=0;3>b;b++){var c=this.c[b],d=0,e=0;0==b?(d=this.pb,e=this.xc,this.xc=this.pb):1==b?(d=this.qb,e=this.yc,this.yc=this.qb):2==b&&(d=this.rb,e=this.zc,this.zc=this.rb);
c.c[parseInt(e,10)].visible=!1;c=c.c[parseInt(d,10)];c.visible=!0;c.U=1}a&&I.r.p.call(this)};I.prototype.__defineGetter__("dimensions",k("fa"));I.prototype.__defineGetter__("volumeRendering",k("Pa"));I.prototype.__defineSetter__("volumeRendering",function(a){this.Pa=a;this.p(!1)});I.prototype.__defineSetter__("visible",ca("Oa"));I.prototype.__defineGetter__("center",k("j"));I.prototype.__defineSetter__("center",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid center.");this.j=a});
I.prototype.__defineGetter__("image",k("ob"));I.prototype.__defineGetter__("labelmap",function(){this.o||(this.o=new ye(this));return this.o});I.prototype.__defineGetter__("indexX",k("pb"));I.prototype.__defineSetter__("indexX",function(a){z(a)&&0<=a&&a<this.V.c.length&&(this.pb=a,this.p(!1))});I.prototype.__defineGetter__("indexY",k("qb"));I.prototype.__defineSetter__("indexY",function(a){z(a)&&0<=a&&a<this.W.c.length&&(this.qb=a,this.p(!1))});I.prototype.__defineGetter__("indexZ",k("rb"));
I.prototype.__defineSetter__("indexZ",function(a){z(a)&&0<=a&&a<this.eb.c.length&&(this.rb=a,this.p(!1))});I.prototype.__defineGetter__("windowLow",k("Z"));I.prototype.__defineSetter__("windowLow",ca("Z"));I.prototype.__defineGetter__("windowHigh",k("Y"));I.prototype.__defineSetter__("windowHigh",ca("Y"));I.prototype.__defineGetter__("borders",k("Ua"));I.prototype.__defineSetter__("borders",ca("Ua"));I.prototype.__defineGetter__("reslicing",k("de"));I.prototype.__defineSetter__("reslicing",ca("de"));
function xe(a,b){if(a.Pa&&(a.d||b!=a.Eb)){var c=a.c[a.Eb];c.visible=!1;var c=a.c[b],d=c.c.length,e;for(e=0;e<d;e++)c.c[e].Oa=!0;a.Eb=b;a.d=!1}}A("X.volume",I);A("X.volume.prototype.modified",I.prototype.p);function T(){H.call(this);this.b="parser";this.R=null;this.h=0;this.xg=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.cd=!0}B(T,H);T.prototype.parse=function(){throw Error("The function parse() should be overloaded.");};function ze(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)var f=a[e],b=Math.min(b,f),c=Math.max(c,f);return[b,c]}function Ae(a,b,c){void 0===b&&(b=0);void 0===c&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
function V(a,b,c){null!=c||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array,d=4}b=new e(a.R.slice(a.h,a.h+=c*d));if(a.xg!=a.cd){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(e=0;e<a.byteLength;e+=d)for(var f=e+d-1,g=e;f>g;f--,g++){var h=b[g];b[g]=b[f];b[f]=h}b=a}return 1==c?b[0]:b}
function Be(a,b,c){D.va(a.b+".reslice");var d=b.fa,e=c.max,f=c.data,g=d[2],h=d[1],d=d[0],l=null!=b.o,m=h*d,n=Array(g),p=Array(g),s=0,t=null;b.ea&&(t=b.ea.ub);for(var v=0,w=0,x=0,C=0,u=4*m,v=0;v<g;v++){n[v]=Array(h);p[v]=Array(h);for(var y=f.subarray(v*m,(v+1)*m),E=new Uint8Array(u),w=C=0;w<h;w++)for(n[v][w]=new c.data.constructor(d),p[v][w]=new c.data.constructor(d),x=0;x<d;x++){var s=y[C],L=0,Y=0,Q=0,R=0;t?(R=t.get(Math.floor(s)),R||(L=t.Xa(),R=L[L.length-1]),L=255*R[1],Y=255*R[2],Q=255*R[3],R=255*
R[4]):(L=Y=Q=255*(s/e),R=255);var da=4*C;E[da]=L;E[++da]=Y;E[++da]=Q;E[++da]=R;n[v][w][x]=255*(s/e);p[v][w][x]=s;C++}s=new $c;s.za=E;s.Cb=d;s.Bb=h;y=b.eb.c[v];y.w=s;l&&(y.o=b.o.eb.c[v].w)}b.de&&(d!=h?l?b.ea?(Ce(g,d,h,p,b.ea,b.W,b.o.W,!0),Ce(g,h,d,p,b.ea,b.V,b.o.V,!1)):(De(g,d,h,n,b.W,b.o.W,!0),De(g,h,d,n,b.V,b.o.V,!1)):b.ea?(Ce(g,d,h,p,b.ea,b.W,null,!0),Ce(g,h,d,p,b.ea,b.V,null,!1)):(De(g,d,h,n,b.W,null,!0),De(g,h,d,n,b.V,null,!1)):l?b.ea?Ee(g,d,h,n,b.ea,b.V,b.o.V,b.W,b.o.W):Fe(g,d,h,n,b.V,b.o.V,
b.W,b.o.W):b.ea?Ee(g,d,h,p,b.ea,b.V,null,b.W,null):Fe(g,d,h,n,b.V,null,b.W,null));D.pa(a.b+".reslice");return p}function De(a,b,c,d,e,f,g){for(var h=4*a*b,l=0,l=0;l<c;l++){for(var m=new Uint8Array(h),n=0,p=0,n=0;n<a;n++)for(var s=0,t=d[n],s=0;s<b;s++){var v,w=v=g?t[l][s]:t[s][l],x=v,C=4*p;m[C]=v;m[++C]=w;m[++C]=x;m[++C]=255;p++}n=new $c;n.za=m;n.Cb=b;n.Bb=a;m=e.c[l];m.w=n;f&&(m.o=f.c[l].w)}}
function Ce(a,b,c,d,e,f,g,h){e=e.ub;for(var l=4*a*b,m=0,m=0;m<c;m++){for(var n=new Uint8Array(l),p=0,s=0,p=0;p<a;p++)for(var t=d[p],v=0,v=0;v<b;v++){var w=e.get(Math.floor(h?t[m][v]:t[v][m]));w||(w=e.Xa(),w=w[w.length-1]);var x=255*w[2],C=255*w[3],u=255*w[4],y=4*s;n[y]=255*w[1];n[++y]=x;n[++y]=C;n[++y]=u;s++}p=new $c;p.za=n;p.Cb=b;p.Bb=a;n=f.c[m];n.w=p;g&&(n.o=g.c[m].w)}}
function Fe(a,b,c,d,e,f,g,h){for(var l=4*a*b,m=0,m=0;m<c;m++){for(var n=new Uint8Array(l),p=new Uint8Array(l),s=0,t=0,t=0;t<a;t++)for(var v=d[t],w=0,w=0;w<b;w++){var x=v[w][m],C=x,u=x,y=4*s;n[y]=x;n[++y]=C;n[++y]=u;n[++y]=255;u=C=x=y=v[m][w];y=4*s;p[y]=x;p[++y]=C;p[++y]=u;p[++y]=255;s++}s=new $c;s.za=n;s.Cb=b;s.Bb=a;n=e.c[m];n.w=s;f&&(n.o=f.c[m].w);n=new $c;n.za=p;n.Cb=b;n.Bb=a;p=g.c[m];p.w=n;h&&(p.o=h.c[m].w)}}
function Ee(a,b,c,d,e,f,g,h,l){e=e.ub;for(var m=4*a*b,n=0,n=0;n<c;n++){for(var p=new Uint8Array(m),s=new Uint8Array(m),t=0,v=0,v=0;v<a;v++)for(var w=d[v],x=0,x=0;x<b;x++){var C=e.get(Math.floor(w[x][n]));if(!C)var u=e.Xa(),C=u[u.length-1];var y=255*C[2],E=255*C[3],L=255*C[4],u=4*t;p[u]=255*C[1];p[++u]=y;p[++u]=E;p[++u]=L;u=e.get(Math.floor(w[n][x]));u||(u=e.Xa(),u=u[u.length-1]);C=255*u[1];y=255*u[2];E=255*u[3];L=255*u[4];u=4*t;s[u]=C;s[++u]=y;s[++u]=E;s[++u]=L;t++}t=new $c;t.za=p;t.Cb=b;t.Bb=a;p=
f.c[n];p.w=t;g&&(p.o=g.c[n].w);p=new $c;p.za=s;p.Cb=b;p.Bb=a;s=h.c[n];s.w=p;l&&(s.o=l.c[n].w)}};function Ge(){T.call(this);this.b="parserPGF"}B(Ge,T);
Ge.prototype.parse=function(a,b,c){D.va(this.b+".parse");this.R=c;var d=V(this,"uchar",c.byteLength),e=d.length;for(c=0;c<e;c++)if(10==d[c]&&35!=d[c+1]){for(var d=Ae(d,0,c),d=d.replace("\n",";").replace(/#/g,""),d=d.split(";"),f=0;f<d.length;f++)if(e=d[f].trim().split("="),"ncoords"==e[0])var g=parseInt(e[1]);else if("nelems"==e[0])var h=parseInt(e[1]);else if("nplex"==e[0])var l=parseInt(e[1]);else if("normals"==e[0])var m="True"==e[1];else if("color"==e[0])var n=e[1];this.h=c+1;break}1==l?b.ba=
"POINTS":2==l?b.ba="LINES":3==l&&(b.ba=ad);b.f=new M(3*h*l);b.g=new M(3*h*l);d=b.f;e=b.g;g=V(this,"float",3*g);this.h+=1;var p=V(this,"uint",h*l);this.h+=1;for(c=0;c<h*l;c++)f=3*p[c],d.add(g[f],g[f+1],g[f+2]);if(m)for(g=V(this,"float",3*h*l),this.h+=1,c=0;c<3*h*l;c+=3)e.add(g[c],g[c+1],g[c+2]);else if(!m&&3==l)for(c=0;c<h*l;c+=3)m=new J(d.get(c)[0],d.get(c)[1],d.get(c)[2]),g=new J(d.get(c+1)[0],d.get(c+1)[1],d.get(c+1)[2]),f=new J(d.get(c+2)[0],d.get(c+2)[1],d.get(c+2)[2]),m=Jc(g.oa(m),f.oa(m)),m.normalize(),
e.add(m.x,m.y,m.z),e.add(m.x,m.y,m.z),e.add(m.x,m.y,m.z);if("'vertex'"==n)for(n=V(this,"float",3*h*l),this.h+=1,b.J=new M(3*h*l),m=b.J,c=0;c<3*h*l;c+=3)m.add(n[c],n[c+1],n[c+2]);D.pa(this.b+".parse");h=new dd;h.T=b;h.l=a;this.dispatchEvent(h)};A("X.parserPGF",Ge);A("X.parserPGF.prototype.parse",Ge.prototype.parse);function He(){T.call(this);this.b="parserDCM"}B(He,T);He.prototype.parse=function(a,b,c){c=this.Wc(c,b);if(c.Bd==c.Ya){var d=c.Ue.length,e,f=0;for(e=0;e<d;e++){var g=c.Ue[e];void 0!==g&&(g*=c.bb,c.data.set(c.Pc.subarray(g,g+c.bb),f*c.bb),f++)}b.fa=[c.Ba[0],c.Ba[1],c.Ba[2]];Infinity==c.na[2]&&(c.na[2]=1);b.H=[c.na[0],c.na[1],c.na[2]];e=ze(c.data);d=e[0];e=e[1];c.min=b.Ma=b.Z=d;c.max=b.Ia=b.Y=e;-Infinity==b.S&&(b.S=d);Infinity==b.X&&(b.X=e);b.qc();b.ob=Be(this,b,c)}c=new dd;c.T=b;c.l=a;this.dispatchEvent(c)};
He.prototype.Wc=function(a,b){this.R=a;var c=0;if(null!=b.gc){g=b.gc;h=V(this,"ushort",this.R.byteLength-2*g.bb);l=0;for(m=2;0<m;)if(d=h[l++],32==d)if(f=h[l++],19==f){l++;d=h[l++];for(f=0;f<d/2;f++)n=h[l++],p=n&255,n=(n&65280)>>8,c+=String.fromCharCode(p),c+=String.fromCharCode(n),c=parseInt(c,10);m--}else if(4161==f){l++;for(var d=h[l++],e="",f=0;f<d/2;f++)n=h[l++],p=n&255,n=(n&65280)>>8,e+=String.fromCharCode(p),e+=String.fromCharCode(n);g.na=[g.na[0],g.na[1],Math.min(Math.abs(g.Qf-e),g.na[2])];
g.Qf=e;m--}g.Ba[2]++}else{var g={rows:0,cols:0,na:null,ne:0,Gg:0,Ya:1,yh:1,Qf:null,Bd:0,bb:0,Pc:null,Oe:0,Ue:[],data:null,min:Infinity,max:-Infinity};g.Ya=b.n.length;null==g.Ya&&(g.Ya=1);for(var h=V(this,"ushort",this.R.byteLength),l=66,d=null,f=null,d=null,m=7;0<m;)if(d=h[l++],40==d)switch(f=h[l++],l++,d=h[l++],f){case 16:g.rows=h[l++];m--;break;case 17:g.cols=h[l++];m--;break;case 256:g.ne=h[l++];m--;break;case 257:g.Gg=h[l++];m--;break;case 2:g.yh=h[l++];m--;break;case 48:e="";for(f=f=0;f<d/2;f++)var n=
h[l++],p=n&255,n=(n&65280)>>8,e=e+String.fromCharCode(p),e=e+String.fromCharCode(n);e=e.split("\\");g.na=[+e[0],+e[1],Infinity];m--}else if(32==d&&(f=h[l++],19==f)){l++;d=h[l++];for(f=0;f<d/2;f++)n=h[l++],p=n&255,n=(n&65280)>>8,c+=String.fromCharCode(p),c+=String.fromCharCode(n),c=parseInt(c,10);m--}b.gc=g;g.Ba=[g.cols,g.rows,1];g.bb=g.rows*g.cols;switch(g.ne){case 8:g.Pc=new Uint8Array(g.cols*g.rows*g.Ya);g.data=new Uint8Array(g.cols*g.rows*g.Ya);break;case 16:g.Pc=new Uint16Array(g.cols*g.rows*
g.Ya);g.data=new Uint16Array(g.cols*g.rows*g.Ya);break;case 32:g.Pc=new Uint32Array(g.cols*g.rows*g.Ya),g.data=new Uint32Array(g.cols*g.rows*g.Ya)}}this.h=this.R.byteLength-2*g.bb;h=null;switch(g.ne){case 8:h=V(this,"uchar",g.bb);break;case 16:h=V(this,"ushort",g.bb);break;case 32:h=V(this,"uint",g.bb)}g.Ue[c]=g.Oe;g.Pc.set(h,g.Oe*g.bb);g.Oe++;++g.Bd;return g};A("X.parserDCM",He);A("X.parserDCM.prototype.parse",He.prototype.parse);function Ie(){T.call(this);this.b="parserVTK"}B(Ie,T);
Ie.prototype.parse=function(a,b,c){D.va(this.b+".parse");var d=b.f,e=b.g,f=new Uint8Array(c),g="";b.f=d=new M(c.byteLength);b.g=e=new M(c.byteLength);c=0;for(var h=f.length;c<h;c+=32768)g+=Ae(f,c,Math.min(c+32768,h));f=g.split("\n");g=f.length;this.Lc=this.Mc=null;this.Lb=[];this.xa=ad;this.be=this.zb=this.nb=this.Ab=!1;c=0;for(h=g%8;h--;)Je(this,f[c]),c++;for(h=0.125*g^0;h--;)Je(this,f[c]),c++,Je(this,f[c]),c++,Je(this,f[c]),c++,Je(this,f[c]),c++,Je(this,f[c]),c++,Je(this,f[c]),c++,Je(this,f[c]),
c++,Je(this,f[c]),c++;c=this.Mc;var f=this.Lc,g=f.length,l=h=this.Lb.length;do{var m=this.Lb[h-l],n=m.length,p;for(p=0;p<n&&!("LINES"==this.xa&&p+1>=n);p++){var s=parseInt(m[p],10),t=c.get(s);d.add(t[0],t[1],t[2]);var v=s,w=t;"LINES"==this.xa?(v=parseInt(m[p+1],10),w=c.get(v),d.add(w[0],w[1],w[2])):"TRIANGLE_STRIPS"==this.xa&&(0!=p&&p!=n-1||d.add(t[0],t[1],t[2]));s<g?(w=f.get(s),e.add(w[0],w[1],w[2]),"LINES"==this.xa?(v=f.get(v),e.add(v[0],v[1],v[2])):"TRIANGLE_STRIPS"==this.xa&&(0!=p&&p!=n-1||e.add(w[0],
w[1],w[2]))):(v=new J(t[0],t[1],t[2]),v.normalize(),e.add(v.x,v.y,v.z),"LINES"==this.xa?(v=new J(w[0],w[1],w[2]),v.normalize(),e.add(v.x,v.y,v.z)):"TRIANGLE_STRIPS"==this.xa&&(0!=p&&p!=n-1||e.add(v.x,v.y,v.z)))}l--}while(0<l);b.ba=this.xa;D.pa(this.b+".parse");d=new dd;d.T=b;d.l=a;this.dispatchEvent(d)};
function Je(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.Ab=!0;a.nb=!1;a.zb=!1;c=parseInt(c[1],10);a.Mc=new M(3*c);a.Lc=new M(3*c);return;case "VERTICES":a.nb=!0;a.Ab=!1;a.zb=!1;c=parseInt(c[1],10);if(3<=c)a.xa=ad;else if(1==c)a.xa="POINTS";else throw Error("This VTK file is not supported!");a.Lb=[];return;case "TRIANGLE_STRIPS":a.nb=!0;a.Ab=!1;a.zb=!1;a.xa="TRIANGLE_STRIPS";a.Lb=[];return;case "LINES":a.nb=!0;a.Ab=!1;a.zb=!1;a.xa="LINES";a.Lb=[];
return;case "POLYGONS":a.nb=!0;a.Ab=!1;a.zb=!1;a.xa="POLYGONS";a.Lb=[];return;case "POINT_DATA":a.zb=!0;a.Ab=!1;a.nb=!1;return}if(a.Ab)if(1==d||isNaN(parseFloat(e)))a.Ab=!1;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]);a.Mc.add(e,f,g)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Mc.add(e,f,g));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Mc.add(d,e,c))}else a.nb?1==d||isNaN(parseFloat(e))?a.nb=!1:(c=c.slice(1),a.Lb.push(c)):a.zb&&
("NORMALS"==e?a.be=!0:1==d||isNaN(parseFloat(e))?(a.zb=!1,a.be=!1):a.be&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]),a.Lc.add(e,f,g)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Lc.add(e,f,g)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Lc.add(d,e,c))))}A("X.parserVTK",Ie);A("X.parserVTK.prototype.parse",Ie.prototype.parse);function Ke(){T.call(this);this.b="parserFSM";this.cd=!1}B(Ke,T);
Ke.prototype.parse=function(a,b,c){D.va(this.b+".parse");this.R=c;var d=b.f,e=b.g;b.oc=[];var f=b.oc;c=0;var g;do g=V(this,"uchar"),c++;while(200>c&&10!=g);V(this,"uchar");e=V(this,"uint");c=V(this,"uint");var h=V(this,"float",3*e);g=V(this,"uint",3*c);var l=new Uint32Array(e),m=new Float32Array(9*c);b.f=d=new M(9*c);b.g=e=new M(9*c);var n;for(n=0;n<c;n++){var p=3*n,s=g[p],t=g[p+1],v=g[p+2];f.push(s);f.push(t);f.push(v);l[s]+=1;l[t]+=1;l[v]+=1;var p=3*s,w=3*t,x=3*v,C=h[p],u=h[p+1],y=h[p+2],t=h[w],
v=h[w+1],s=h[w+2],E=h[x],L=h[x+1],Y=h[x+2];d.add(C,u,y);d.add(t,v,s);d.add(E,L,Y);C=new J(C,u,y);E=new J(E,L,Y);t=(new J(t,v,s)).e().oa(C);v=E.e().oa(C);t=Jc(t,v).normalize();m[p]+=t.x;m[p+1]+=t.y;m[p+2]+=t.z;m[w]+=t.x;m[w+1]+=t.y;m[w+2]+=t.z;m[x]+=t.x;m[x+1]+=t.y;m[x+2]+=t.z}for(n=0;n<c;n++)p=3*n,s=g[p],t=g[p+1],v=g[p+2],p=3*s,w=3*t,x=3*v,f=new J(m[w],m[w+1],m[w+2]),h=new J(m[x],m[x+1],m[x+2]),p=(new J(m[p],m[p+1],m[p+2])).scale(1/l[s]).normalize(),f=f.scale(1/l[t]).normalize(),h=h.scale(1/l[v]).normalize(),
e.add(p.x,p.y,p.z),e.add(f.x,f.y,f.z),e.add(h.x,h.y,h.z);b.ba=ad;D.pa(this.b+".parse");c=new dd;c.T=b;c.l=a;this.dispatchEvent(c)};A("X.parserFSM",Ke);A("X.parserFSM.prototype.parse",Ke.prototype.parse);var Le={re:function(a,b,c){return Le.update(a,0,b,c)},update:function(a,b,c,d){var e=Le.og,f="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(f=d&7;f--;++c)b=b>>>8^e[(b^a[c])&255];for(f=d>>3;f--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}};
Le.og=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Me(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,f,g,h,l,m,n,p,s;for(p=0;p<b;++p)a[p]>c&&(c=a[p]),a[p]<d&&(d=a[p]);e=1<<c;f=new Uint32Array(e);g=1;h=0;for(l=2;g<=c;){for(p=0;p<b;++p)if(a[p]===g){m=0;n=h;for(s=0;s<g;++s)m=m<<1|n&1,n>>=1;for(s=m;s<e;s+=l)f[s]=g<<16|p;++h}++g;h<<=1;l<<=1}return[f,c,d]};function Ne(a,b){this.oe=[];this.pe=32768;this.Qa=this.Oc=this.ja=this.Ye=0;this.input=new Uint8Array(a);this.wf=!1;this.qe=Oe;this.jb=!1;if(b||!(b={}))b.index&&(this.ja=b.index),b.bufferSize&&(this.pe=b.bufferSize),b.bufferType&&(this.qe=b.bufferType),b.resize&&(this.jb=b.resize);switch(this.qe){case Pe:this.Q=32768;this.Da=new Uint8Array(32768+this.pe+258);break;case Oe:this.Q=0;this.Da=new Uint8Array(this.pe);this.ac=this.Rg;this.yf=this.Jg;this.ze=this.Mg;break;default:throw Error("invalid inflate mode");
}}var Pe=0,Oe=1;
Ne.prototype.Qc=function(){for(;!this.wf;){var a=Qe(this,3);a&1&&(this.wf=!0);a>>>=1;switch(a){case 0:var a=this.input,b=this.ja,c=this.Da,d=this.Q,e=void 0,f=void 0,g=void 0,h=c.length,e=void 0;this.Qa=this.Oc=0;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (first byte)");f=e;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: LEN (second byte)");f|=e<<8;e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (first byte)");g=e;
e=a[b++];if(void 0===e)throw Error("invalid uncompressed block header: NLEN (second byte)");g|=e<<8;if(f===~g)throw Error("invalid uncompressed block header: length verify");if(b+f>a.length)throw Error("input buffer is broken");switch(this.qe){case Pe:for(;d+f>c.length;)e=h-d,f-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.Q=d,c=this.ac(),d=this.Q;break;case Oe:for(;d+f>c.length;)c=this.ac({Ff:2});break;default:throw Error("invalid inflate mode");}c.set(a.subarray(b,b+f),d);d+=f;this.ja=b+=f;this.Q=
d;this.Da=c;break;case 1:this.ze(Re,Se);break;case 2:Te(this);break;default:throw Error("unknown BTYPE: "+a);}}return this.yf()};
var Ue=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ve=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),We=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Xe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Ye=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ze=new Uint8Array(288),
$e,af;$e=0;for(af=Ze.length;$e<af;++$e)Ze[$e]=143>=$e?8:255>=$e?9:279>=$e?7:8;var Re=Me(Ze),bf=new Uint8Array(30),cf,df;cf=0;for(df=bf.length;cf<df;++cf)bf[cf]=5;var Se=Me(bf);function Qe(a,b){for(var c=a.Oc,d=a.Qa,e=a.input,f=a.ja,g;d<b;){g=e[f++];if(void 0===g)throw Error("input buffer is broken");c|=g<<d;d+=8}g=c&(1<<b)-1;a.Oc=c>>>b;a.Qa=d-b;a.ja=f;return g}
function ef(a,b){for(var c=a.Oc,d=a.Qa,e=a.input,f=a.ja,g=b[0],h=b[1],l;d<h;){l=e[f++];if(void 0===l)throw Error("input buffer is broken");c|=l<<d;d+=8}e=g[c&(1<<h)-1];g=e>>>16;a.Oc=c>>g;a.Qa=d-g;a.ja=f;return e&65535}
function Te(a){function b(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=ef(this,b),d){case 16:for(d=3+Qe(this,2);d--;)c[f++]=e;break;case 17:for(d=3+Qe(this,3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+Qe(this,7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var c=Qe(a,5)+257,d=Qe(a,5)+1,e=Qe(a,4)+4,f=new Uint8Array(Ue.length),g;for(g=0;g<e;++g)f[Ue[g]]=Qe(a,3);e=Me(f);f=new Uint8Array(c);g=new Uint8Array(d);a.ze(Me(b.call(a,c,e,f)),Me(b.call(a,d,e,g)))}q=Ne.prototype;
q.ze=function(a,b){var c=this.Da,d=this.Q;this.Bf=a;for(var e=c.length-258,f,g,h;256!==(f=ef(this,a));)if(256>f)d>=e&&(this.Q=d,c=this.ac(),d=this.Q),c[d++]=f;else for(f-=257,h=Ve[f],0<We[f]&&(h+=Qe(this,We[f])),f=ef(this,b),g=Xe[f],0<Ye[f]&&(g+=Qe(this,Ye[f])),d>=e&&(this.Q=d,c=this.ac(),d=this.Q);h--;)c[d]=c[d++-g];for(;8<=this.Qa;)this.Qa-=8,this.ja--;this.Q=d};
q.Mg=function(a,b){var c=this.Da,d=this.Q;this.Bf=a;for(var e=c.length,f,g,h;256!==(f=ef(this,a));)if(256>f)d>=e&&(c=this.ac(),e=c.length),c[d++]=f;else for(f-=257,h=Ve[f],0<We[f]&&(h+=Qe(this,We[f])),f=ef(this,b),g=Xe[f],0<Ye[f]&&(g+=Qe(this,Ye[f])),d+h>e&&(c=this.ac(),e=c.length);h--;)c[d]=c[d++-g];for(;8<=this.Qa;)this.Qa-=8,this.ja--;this.Q=d};
q.ac=function(){var a=new Uint8Array(this.Q-32768),b=this.Q-32768,c=this.Da;a.set(c.subarray(32768,a.length));this.oe.push(a);this.Ye+=a.length;c.set(c.subarray(b,b+32768));this.Q=32768;return c};q.Rg=function(a){var b=this.input.length/this.ja+1|0,c=this.input,d=this.Da;a&&("number"===typeof a.Ff&&(b=a.Ff),"number"===typeof a.Cg&&(b+=a.Cg));2>b?(a=(c.length-this.ja)/this.Bf[2],a=258*(a/2)|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.Da=a};
q.yf=function(){var a=0,b=this.Da,c=this.oe,d,e=new Uint8Array(this.Ye+(this.Q-32768)),f,g,h,l;if(0===c.length)return this.Da.subarray(32768,this.Q);f=0;for(g=c.length;f<g;++f)for(d=c[f],h=0,l=d.length;h<l;++h)e[a++]=d[h];f=32768;for(g=this.Q;f<g;++f)e[a++]=b[f];this.oe=[];return this.buffer=e};q.Jg=function(){var a,b=this.Q;this.jb?(a=new Uint8Array(b),a.set(this.Da.subarray(0,b))):a=this.Da.subarray(0,b);return this.buffer=a};new Uint8Array(256);var ff;for(ff=0;256>ff;++ff)for(var gf=ff,hf=7,gf=gf>>>1;gf;gf>>>=1)--hf;var jf=[],kf;for(kf=0;288>kf;kf++)switch(!0){case 143>=kf:jf.push([kf+48,8]);break;case 255>=kf:jf.push([kf-144+400,9]);break;case 279>=kf:jf.push([kf-256+0,7]);break;case 287>=kf:jf.push([kf-280+192,8]);break;default:throw"invalid literal: "+kf;}
var lf=function(){function a(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,
a-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:throw"invalid length: "+a;}}var b=[],c,d;for(c=3;258>=c;c++)d=a(c),b[c]=d[2]<<24|
d[1]<<16|d[0];return b}();new Uint32Array(lf);function mf(){};function nf(a){this.input=a;this.ja=0;this.member=[]}
nf.prototype.Qc=function(){for(var a=this.input.length;this.ja<a;){var b=new mf,c=void 0,d=void 0,e=void 0,f=c=e=void 0,g=void 0,c=c=void 0,h=this.input,d=this.ja;b.id1=h[d++];b.id2=h[d++];if(31!==b.id1||139!==b.id2)throw Error("invalid file signature:",b.id1,b.id2);b.cm=h[d++];switch(b.cm){case 8:break;default:throw Error("unknown compression method: "+b.cm);}b.flg=h[d++];c=h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24;b.mtime=new Date(1E3*c);b.xfl=h[d++];b.os=h[d++];0<(b.flg&4)&&(b.xlen=h[d++]|h[d++]<<
8,d+=b.xlen);if(0<(b.flg&8)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.name=g.join("")}if(0<(b.flg&16)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.comment=g.join("")}if(0<(b.flg&2)&&(b.crc16=Le.re(h,0,d)&65535,b.crc16!==(h[d++]|h[d++]<<8)))throw Error("invalid header crc16");c=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-d-4-4<512*c&&(e=c);d=new Ne(h,{index:d,bufferSize:e});b.data=e=d.Qc();d=d.ja;b.crc32=c=(h[d++]|h[d++]<<8|h[d++]<<16|
h[d++]<<24)>>>0;if(Le.re(e)!==c)throw Error("invalid CRC-32 checksum: 0x"+Le.re(e).toString(16)+" / 0x"+c.toString(16));b.isize=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;if((e.length&4294967295)!==c)throw Error("invalid input size: "+(e.length&4294967295)+" / "+c);this.member.push(b);this.ja=d}a=this.member;b=e=d=0;for(h=a.length;b<h;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<h;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function of(){T.call(this);this.b="parserMGZ";this.cd=!1}B(of,T);of.prototype.parse=function(a,b,c,d){D.va(this.b+".parse");d&&(c=(new nf(new Uint8Array(c))).Qc(),c=c.buffer);d=this.Wc(c);b.fa=[d.Ge,d.He,d.Ie];b.H=d.ig;c=d.min;var e=d.max;b.Ma=b.Z=c;b.Ia=b.Y=e;-Infinity==b.S&&(b.S=c);Infinity==b.X&&(b.X=e);b.qc();D.pa(this.b+".parse");b.ob=Be(this,b,d);d=new dd;d.T=b;d.l=a;this.dispatchEvent(d)};
of.prototype.Wc=function(a){this.R=a;a={version:0,rg:0,pg:0,Xg:0,qg:0,Ge:0,He:0,Ie:0,wh:0,type:0,Pg:0,fg:0,Xi:null,ng:null,ig:null,data:null,min:Infinity,max:-Infinity};a.version=V(this,"uint");a.Ge=V(this,"uint");a.He=V(this,"uint");a.Ie=V(this,"uint");a.wh=V(this,"uint");a.type=V(this,"uint");a.Pg=V(this,"uint");a.fg=V(this,"ushort");if(0<a.fg){a.ig=V(this,"float",3);var b=[];b.push(V(this,"float",3));b.push(V(this,"float",3));b.push(V(this,"float",3));b.push(V(this,"float",3));a.ng=b}this.h=284;
b=a.Ge*a.He*a.Ie;switch(a.type){case 0:a.data=V(this,"uchar",b);break;case 1:a.data=V(this,"uint",b);break;case 3:a.data=V(this,"float",b);break;case 4:a.data=V(this,"ushort",b);break;default:throw Error("Unsupported MGH/MGZ data type: "+a.type);}b=ze(a.data);a.min=b[0];a.max=b[1];this.h+16<this.R.byteLength&&(a.rg=V(this,"float"),a.Xg=V(this,"float"),a.pg=V(this,"float"),a.qg=V(this,"float"));return a};A("X.parserMGZ",of);A("X.parserMGZ.prototype.parse",of.prototype.parse);function pf(){T.call(this);this.b="parserLBL"}B(pf,T);
pf.prototype.parse=function(a,b,c){D.va(this.b+".parse");var d=b.oc,e=d.length;if(0==e)throw Error("No _pointIndices defined on the X.object.");this.R=c;var f=[],g=V(this,"uchar",c.byteLength),h=g.length,l=!1,m=0;for(c=1;c<h;c++)10==g[c-1]?(m=c,l=!0):l&&32==g[c]&&(f.push(parseInt(Ae(g,m,c),10)),l=!1);g=b.t.v?b.t.v:new Float32Array(e);h=f.length;for(c=0;c<h;c++)g[f[c]]=1;f=new Float32Array(3*e);for(c=h=0;c<e;c++){l=d[c];if(l>e)throw Error("Could not find scalar for vertex.");l=g[l];f[h++]=l;f[h++]=
l;f[h++]=l}b.t.v=g;b.t.wc=f;b.t.d=!0;D.pa(this.b+".parse");d=new dd;d.T=b;d.l=a;this.dispatchEvent(d)};A("X.parserLBL",pf);A("X.parserLBL.prototype.parse",pf.prototype.parse);function qf(){T.call(this);this.b="parserCRV";this.cd=!1}B(qf,T);
qf.prototype.parse=function(a,b,c){D.va(this.b+".parse");var d=b.oc;if(0==d.length)throw Error("No _pointIndices defined on the X.object.");this.R=c;this.h=3;var e=V(this,"uint");V(this,"uint");V(this,"uint");var f=0,g=0,h=0,l=0,m=0,n=0,p=0,s=0,t=0,v=0,w=0;c=Array(2);var x=Array(2),C=V(this,"float",e),u;for(u=0;u<e;u++){var y=C[u];0==u&&(c[0]=x[0]=y);0<=y?(f++,l+=y):(g++,h+=y);t+=y;w++;x[0]=Math.max(y,x[0]);c[0]=Math.min(y,c[0]);C[u]=y}0!=f&&(m=l/f);0!=g&&(n=h/g);0!=w&&(v=t/w);for(w=t=h=l=0;w<e;w++)y=
C[w],u=0,0<=y?(u=Math.pow(y-m,2),l+=u):(u=Math.pow(y-n,2),h+=u),u=Math.pow(y-v,2),t+=u;1<f&&(p=Math.sqrt(l/(f-1)));1<g&&(s=Math.sqrt(h/(g-1)));c[1]=n-2.5*s;x[1]=m+2.5*p;e=d.length;f=new Float32Array(3*e);for(w=0;w<e;w++)g=C[d[w]],h=3*w,f[h]=g,f[h+1]=g,f[h+2]=g;b.t.Ma=c[1];b.t.Ia=x[1];-Infinity==b.t.S&&(b.t.S=c[1]);Infinity==b.t.X&&(b.t.X=x[1]);b.t.v=C;b.t.wc=f;b.t.d=!0;D.pa(this.b+".parse");d=new dd;d.T=b;d.l=a;this.dispatchEvent(d)};A("X.parserCRV",qf);A("X.parserCRV.prototype.parse",qf.prototype.parse);function rf(){T.call(this);this.b="parserTRK"}B(rf,T);
rf.prototype.parse=function(a,b,c){D.va(this.b+".parse");var d=b.f,e=b.g,f=b.J;this.R=c;V(this,"uchar",6);V(this,"ushort",3);var g=V(this,"float",3);V(this,"float",3);var h=V(this,"ushort");V(this,"uchar",200);V(this,"ushort");V(this,"uchar",200);V(this,"float",16);V(this,"uchar",444);V(this,"uchar",4);V(this,"uchar",4);V(this,"float",6);V(this,"uchar",2);V(this,"uchar");V(this,"uchar");V(this,"uchar");V(this,"uchar");V(this,"uchar");V(this,"uchar");var l=V(this,"uint");V(this,"uint");var m=V(this,
"uint"),n=[],p=[];c=Infinity;var s=-Infinity,t=null,v=null,w=null,x=null,e=d=null,C=V(this,"uint",(this.R.byteLength-1E3)/4);this.h=m;for(var u=V(this,"float",(this.R.byteLength-1E3)/4),y=0,m=f=0;m<l;m++){for(var E=C[y],L=new M(3*E),Y=0,Q=0;Q<E;Q++){var R=u[y+3*Q+Q*h+1],da=u[y+3*Q+Q*h+2],Z=u[y+3*Q+Q*h+3],R=R/g[0],da=da/g[1],Z=Z/g[2];L.add(R,da,Z);if(0<Q)var aa=L.get(Q-1),Y=Y+Math.sqrt(Math.pow(R-aa[0],2)+Math.pow(da-aa[1],2)+Math.pow(Z-aa[2],2));Q<E-1&&(f+=6)}y+=3*E+E*h+1;Q=L.Rb;E=L.Ob;R=L.Sb;da=
L.Pb;Z=L.Tb;aa=L.Qb;if(!t||Q<t)t=Q;if(!v||E>v)v=E;if(!w||R<w)w=R;if(!x||da>x)x=da;if(!d||Z<d)d=Z;if(!e||aa>e)e=aa;n.push(L);p.push(Y)}g=(t+v)/2;w=(w+x)/2;h=(d+e)/2;x=new Float32Array(f);b.f=d=new M(f);b.g=e=new M(f);b.J=f=new M(f);for(m=t=0;m<l;m++)for(v=n[m],C=v.count,Y=p[m],c=Math.min(c,Y),s=Math.max(s,Y),Q=0;Q<C-1;Q++){y=v.get(Q);u=v.get(Q+1);d.add(y[0],y[1],y[2]);d.add(u[0],u[1],u[2]);var L=y[0]-g,E=y[1]-w,R=y[2]-h,da=Math.sqrt(L*L+E*E+R*R),Z=u[0]-g,aa=u[1]-w,Ha=u[2]-h,sb=Math.sqrt(Z*Z+aa*aa+
Ha*Ha);e.add(L/da,E/da,R/da);e.add(Z/sb,aa/sb,Ha/sb);u=[Math.abs(u[0]-y[0]),Math.abs(u[1]-y[1]),Math.abs(u[2]-y[2])];y=Math.sqrt(u[0]*u[0]+u[1]*u[1]+u[2]*u[2]);u[0]/=y;u[1]/=y;u[2]/=y;f.add(u[0],u[1],u[2]);f.add(u[0],u[1],u[2]);x[t++]=Y;x[t++]=Y;x[t++]=Y;x[t++]=Y;x[t++]=Y;x[t++]=Y}b.ba="LINES";l=new cd;l.Ma=c;l.Ia=s;l.S=c;l.X=s;l.wc=x;l.rf=!1;l.d=!0;b.t=l;D.pa(this.b+".parse");c=new dd;c.T=b;c.l=a;this.dispatchEvent(c)};A("X.parserTRK",rf);A("X.parserTRK.prototype.parse",rf.prototype.parse);function sf(){T.call(this);this.b="parserIMAGE"}B(sf,T);sf.prototype.parse=function(a,b,c,d){if(!(c instanceof ArrayBuffer))throw Error();for(var e=new Uint8Array(c),f=e.length,g=Array(f);f--;)g[f]=String.fromCharCode(e[f]);e=window.btoa(g.join(""));f=new Image;Xb(f,"load",this.ai.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};sf.prototype.ai=function(a,b,c){b.ob=a;b.za=null;a=new dd;a.T=c;a.l=b;this.dispatchEvent(a)};A("X.parserIMAGE",sf);A("X.parserIMAGE.prototype.parse",sf.prototype.parse);function tf(){T.call(this);this.b="parserLUT"}B(tf,T);
tf.prototype.parse=function(a,b,c){D.va(this.b+".parse");this.R=c;c=V(this,"uchar",c.byteLength);var d=c.length,e=0,f;for(f=0;f<d;f++)if(10==c[f]){var g=Ae(c,e,f),e=f+1,g=g.replace(/^\s+|\s+$/g,"");"#"!=g[0]&&(g=g.split(" "),g=g.filter(function(a){return""!=a}),6==g.length&&(g[2]=parseInt(g[2],10)/255,g[3]=parseInt(g[3],10)/255,g[4]=parseInt(g[4],10)/255,g[5]=parseInt(g[5],10)/255,a.add(parseInt(g[0],10),g[1],g[2],g[3],g[4],g[5],10)))}D.pa(this.b+".parse");c=new dd;c.T=b;c.l=a;this.dispatchEvent(c)};
A("X.parserLUT",tf);A("X.parserLUT.prototype.parse",tf.prototype.parse);function uf(){T.call(this);this.b="parserNRRD"}B(uf,T);
uf.prototype.parse=function(a,b,c){D.va(this.b+".parse");this.R=c;c=V(this,"uchar",c.byteLength);var d=c.length,e=null,f=0,g;for(g=1;g<d;g++)if(10==c[g-1]&&10==c[g]){e=Ae(c,0,g-2);f=g+1;break}var h,l,m,n,d=e.split(/\r?\n/),e=0;for(g=d.length;e<g;e++)h=d[e],h.match(/NRRD\d+/)?this.qh=!0:!h.match(/^#/)&&(n=h.match(/(.*):(.*)/))&&(l=n[1].trim(),h=n[2].trim(),(m=this.Tg[l])?m.call(this,h):this[l]=h);if(!this.qh)throw Error("Not an NRRD file");if("raw"!==this.encoding&&"gzip"!==this.encoding&&"gz"!==this.encoding)throw Error("Only raw or gz/gzip encoding is allowed");
if(!this.Ka&&(this.Ka=[new J(1,0,0),new J(0,1,0),new J(0,0,1)],this.Ve))for(d=[],n=0;2>=n;n++)d.push(isNaN(this.Ve[n])?void 0:this.Ka[n].scale(this.Ve[n]));f=c.subarray(f);if("gzip"==this.encoding||"gz"==this.encoding)f=(new nf(new Uint8Array(f))).Qc();f=f.buffer;c={data:null,min:Infinity,max:-Infinity};c.data=new this.Ib(f);n=ze(c.data);f=c.min=n[0];n=c.max=n[1];b.fa=[this.Se[0],this.Se[1],this.Se[2]];b.H=[(new J(this.Ka[0][0],this.Ka[0][1],this.Ka[0][2])).cc(),(new J(this.Ka[1][0],this.Ka[1][1],
this.Ka[1][2])).cc(),(new J(this.Ka[2][0],this.Ka[2][1],this.Ka[2][2])).cc()];b.Ma=b.Z=f;b.Ia=b.Y=n;-Infinity==b.S&&(b.S=f);Infinity==b.X&&(b.X=n);b.qc();D.pa(this.b+".parse");b.ob=Be(this,b,c);c=new dd;c.T=b;c.l=a;this.dispatchEvent(c)};
uf.prototype.Tg={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Ib=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Ib=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Ib=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Ib=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Ib=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Ib=Uint32Array;break;case "float":this.Ib=Float32Array;break;default:throw Error("Unsupported NRRD data type: "+a);}return this.type=a},endian:function(a){return this.Nj=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.Ba=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.Se=e},"space directions":function(a){var b,
c,d;c=a.match(/\(.*?\)/g);return this.Ka=function(){var a,f,g;g=[];a=0;for(f=c.length;a<f;a++)d=c[a],g.push(function(){var a,c,e,f;e=d.slice(1,-1).split(/,/);f=[];a=0;for(c=e.length;a<c;a++)b=e[a],f.push(parseFloat(b));return f}());return g}()},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.Ve=e}};A("X.parserNRRD",uf);A("X.parserNRRD.prototype.parse",uf.prototype.parse);function vf(){T.call(this);this.b="parserSTL"}B(vf,T);
vf.prototype.parse=function(a,b,c){D.va(this.b+".parse");this.R=c;var d=b.f,e=b.g;if("solid"==Ae(V(this,"uchar",5))){b.f=d=new M(c.byteLength);b.g=e=new M(c.byteLength);var f=d,d=e,e=V(this,"uchar",c.byteLength-5);c=e.length;var g=!1,h=!1,l=0,m;for(m=0;m<c;m++)if(10==e[m]){if(g||h){var n=Ae(e,l,m).split(" "),h=parseFloat(n[0]),p=parseFloat(n[1]),n=parseFloat(n[2]);g?(d.add(h,p,n),d.add(h,p,n),d.add(h,p,n)):f.add(h,p,n);h=g=!1}}else 32==e[m-1]&&(102==e[m]?(l=m+=13,g=!0):118==e[m]&&(l=m+=7,h=!0))}else for(this.h=
0,c=Ae(V(this,"uchar",80)).search("COLOR="),0<=c&&(this.h=c+6,f=V(this,"uint8")/255,this.h=c+7,d=V(this,"uint8")/255,this.h=c+8,e=V(this,"uint8")/255,this.h=c+9,c=V(this,"uint8")/255,b.mb=[f,d,e],b.U=c),this.h=80,f=V(this,"uint"),b.f=d=new M(9*f),b.g=e=new M(9*f),c=c=0;c<f;c++)g=V(this,"float",12),l=g[0],m=g[1],h=g[2],e.add(l,m,h),e.add(l,m,h),e.add(l,m,h),d.add(g[3],g[4],g[5]),d.add(g[6],g[7],g[8]),d.add(g[9],g[10],g[11]),this.h+=2;D.pa(this.b+".parse");f=new dd;f.T=b;f.l=a;this.dispatchEvent(f)};
A("X.parserSTL",vf);A("X.parserSTL.prototype.parse",vf.prototype.parse);function wf(){T.call(this);this.b="parserNII"}B(wf,T);wf.prototype.parse=function(a,b,c){D.va(this.b+".parse");var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,!0);348!=e&&(d=(new nf(new Uint8Array(d))).Qc(),d=d.buffer);c=this.Wc(d);b.fa=[c.Ba[1],c.Ba[2],c.Ba[3]];b.H=[c.na[1],c.na[2],c.na[3]];d=c.min;e=c.max;b.Ma=b.Z=d;b.Ia=b.Y=e;-Infinity==b.S&&(b.S=d);Infinity==b.X&&(b.X=e);b.qc();D.pa(this.b+".parse");b.ob=Be(this,b,c);c=new dd;c.T=b;c.l=a;this.dispatchEvent(c)};
wf.prototype.Wc=function(a){this.R=a;a={ui:0,Kg:null,Lg:null,Sg:0,ri:0,ji:0,Og:null,Ba:null,mh:0,nh:0,oh:0,kh:0,ye:0,Fg:0,yi:0,na:null,jg:0,qi:0,pi:0,xi:0,vi:null,Li:null,Hg:0,Ig:0,wi:0,Fi:0,Zg:0,$g:0,Ng:null,Eg:null,ci:0,si:0,gi:0,hi:0,ii:0,di:0,ei:0,fi:0,zi:null,Ai:null,Bi:null,lh:null,sh:null,data:null,min:Infinity,max:-Infinity};a.ui=V(this,"uint");a.Kg=V(this,"uchar",10);a.Lg=V(this,"uchar",18);a.Sg=V(this,"uint");a.ri=V(this,"ushort");a.ji=V(this,"uchar");a.Og=V(this,"uchar");a.Ba=V(this,"ushort",
8);a.mh=V(this,"float");a.nh=V(this,"float");a.oh=V(this,"float");a.kh=V(this,"ushort");a.ye=V(this,"ushort");a.Fg=V(this,"ushort");a.yi=V(this,"ushort");a.na=V(this,"float",8);a.jg=V(this,"float");a.qi=V(this,"float");a.pi=V(this,"float");a.xi=V(this,"ushort");a.vi=V(this,"uchar");a.Li=V(this,"uchar");a.Hg=V(this,"float");a.Ig=V(this,"float");a.wi=V(this,"float");a.Fi=V(this,"float");a.Zg=V(this,"uint",1);a.$g=V(this,"uint",1);a.Ng=V(this,"uchar",80);a.Eg=V(this,"uchar",24);a.ci=V(this,"ushort");
a.si=V(this,"ushort");a.gi=V(this,"float");a.hi=V(this,"float");a.ii=V(this,"float");a.di=V(this,"float");a.ei=V(this,"float");a.fi=V(this,"float");a.zi=V(this,"float",4);a.Ai=V(this,"float",4);a.Bi=V(this,"float",4);a.lh=V(this,"uchar",16);a.sh=V(this,"uchar",4);this.h=parseInt(a.jg,10);var b=a.Ba[1]*a.Ba[2]*a.Ba[3];switch(a.ye){case 2:a.data=V(this,"uchar",b);break;case 4:a.data=V(this,"sshort",b);break;case 8:a.data=V(this,"sint",b);break;case 16:a.data=V(this,"float",b);break;case 256:a.data=
V(this,"schar",b);break;case 512:a.data=V(this,"ushort",b);break;case 768:a.data=V(this,"uint",b);break;default:throw Error("Unsupported NII data type: "+a.ye);}b=ze(a.data);a.min=b[0];a.max=b[1];return a};A("X.parserNII",wf);A("X.parserNII.prototype.parse",wf.prototype.parse);function xf(){T.call(this);this.b="parserOBJ"}B(xf,T);
xf.prototype.parse=function(a,b,c){D.va(this.b+".parse");this.R=c;c=c.byteLength;var d=V(this,"uchar",c),e=[];b.f=new M(c);b.g=new M(c);var f=b.f,g=b.g,h=0,l;for(l=0;l<c;++l)if(10==d[l]){var m=Ae(d,h,l).replace(/\s{2,}/g," ").split(" ");if("v"==m[0])e.push([parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])]);else if("f"==m[0]){var n=e[parseInt(m[1],10)-1],h=e[parseInt(m[2],10)-1],m=e[parseInt(m[3],10)-1];f.add(n[0],n[1],n[2]);f.add(h[0],h[1],h[2]);f.add(m[0],m[1],m[2]);n=new J(n[0],n[1],n[2]);m=
new J(m[0],m[1],m[2]);h=Jc((new J(h[0],h[1],h[2])).oa(n),m.oa(n));h.normalize();g.add(h.x,h.y,h.z);g.add(h.x,h.y,h.z);g.add(h.x,h.y,h.z)}h=l+1}D.pa(this.b+".parse");c=new dd;c.T=b;c.l=a;this.dispatchEvent(c)};A("X.parserOBJ",xf);A("X.parserOBJ.prototype.parse",xf.prototype.parse);function yf(){H.call(this);this.b="loader";this.mc=new Bc;this.Kc=0}B(yf,H);function zf(a,b){a.Kc+=b/a.mc.hb()/3;a.Kc=Math.min(1,a.Kc);var c=new Bd;c.uf=a.Kc;a.dispatchEvent(c)}function Af(a){a=a.n.gd;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");if(!(b in Bf))throw Error("The "+b+" file format is not supported.");return[a,b,Bf[b][0],Bf[b][1],Bf[b][2]]}
yf.prototype.load=function(a,b){if(!a||!b)throw Error("No container or object to load.");if(!Dc(this.mc.P,a.ma)||this.mc.get(a.ma)){this.mc.set(a.ma,!1);var c=Af(a)[0];if(null!=a.Kb)this.parse(null,a,b);else{var d=new XMLHttpRequest;G(d,"abort",this.Ef.bind(this,d,a,b));G(d,"error",this.Ef.bind(this,d,a,b));G(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,!0);d.responseType="arraybuffer";d.send(null)}}};
yf.prototype.parse=function(a,b,c){zf(this,1);setTimeout(function(){var d=Af(b),e=d[3],d=new d[2];Xb(d,bc,this.complete.bind(this));var f=b.Kb;null==f&&(f=a.response);d.parse(b,c,f,e)}.bind(this),100)};yf.prototype.complete=function(a){zf(this,1);setTimeout(function(){var b=a.l,c=a.T;b.n.d=!1;b.d=!0;c.p();this.mc.set(b.ma,!0)}.bind(this),100)};yf.prototype.Ef=function(a,b,c){throw Error("Loading failed: ",b,c);};
var Bf={PGF:[Ge,null],OBJ:[xf,null],STL:[vf,null],VTK:[Ie,null],TRK:[rf,null],FSM:[Ke,null],INFLATED:[Ke,null],SMOOTHWM:[Ke,null],SPHERE:[Ke,null],PIAL:[Ke,null],ORIG:[Ke,null],NRRD:[uf,null],NII:[wf,null],GZ:[wf,null],DCM:[He,null],DICOM:[He,null],"":[He,null],CRV:[qf,null],LABEL:[pf,null],MGH:[of,!1],MGZ:[of,!0],TXT:[tf,null],LUT:[tf,null],PNG:[sf,"png"],JPG:[sf,"jpeg"],JPEG:[sf,"jpeg"],GIF:[sf,"gif"]};function Cf(a,b){if(!z(a)||!z(b))throw Error("A camera needs valid width and height values.");H.call(this);this.b="camera";this.ya=new J(0,0,100);this.kc=new J(0,0,0);this.I=new J(0,1,0);this.m=this.Dd(this.ya,this.kc);this.Mb=new Float32Array(this.m.Ja())}B(Cf,H);Cf.prototype.observe=function(a){if(!(null!=a&&a instanceof S))throw Error("Could not observe the interactor.");G(a,ld,this.Nh.bind(this));G(a,kd,this.Kh.bind(this));G(a,md,this.Zh.bind(this))};
Cf.prototype.Nh=function(a){if(!(a instanceof vd))throw Error("Received no valid rotate event.");this.rotate(a.K)};Cf.prototype.Zh=function(a){if(!(a instanceof wd))throw Error("Received no valid zoom event.");a.Va?this.kg(a.La):this.lg(a.La)};Cf.prototype.Kh=function(a){if(!(a instanceof ud))throw Error("Received no valid pan event.");this.bg(a.K)};Cf.prototype.__defineGetter__("view",k("m"));
Cf.prototype.__defineSetter__("view",function(a){if(!(null!=a&&a instanceof Wc))throw Error("Invalid view matrix.");this.m=a;this.Mb=new Float32Array(this.m.Ja())});Cf.prototype.__defineGetter__("position",function(){return[this.ya.x,this.ya.y,this.ya.z]});Cf.prototype.__defineSetter__("position",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid position.");this.ya=new J(a[0],a[1],a[2]);this.reset()});Cf.prototype.__defineGetter__("focus",function(){return[this.kc.x,this.kc.y,this.kc.z]});
Cf.prototype.__defineSetter__("focus",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid focus");this.kc=new J(a[0],a[1],a[2]);this.reset()});Cf.prototype.__defineGetter__("up",function(){return[this.I.x,this.I.y,this.I.z]});Cf.prototype.__defineSetter__("up",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid up vector.");this.I=new J(a[0],a[1],a[2]);this.reset()});q=Cf.prototype;q.reset=function(){this.m=this.Dd(this.ya,this.kc);this.Mb=new Float32Array(this.m.Ja())};
q.rotate=function(a){if(r(a)&&2==a.length)a=new Lc(a[0],a[1]);else if(!(a instanceof Lc))throw Error("Invalid distance vector for rotate operation.");return a};q.bg=function(a){if(r(a)&&2==a.length)a=new Lc(a[0],a[1]);else if(!(a instanceof Lc))throw Error("Invalid distance vector for pan operation.");a=new J(-a.x,a.y,0);a=Xc(4).translate(a);this.m=new Wc(a.multiply(this.m));this.Mb=new Float32Array(this.m.Ja())};
q.kg=function(a){var b=20;null!=a&&!a&&(b=1);a=new J(0,0,b);a=Xc(4).translate(a);this.m=new Wc(a.multiply(this.m));this.Mb=new Float32Array(this.m.Ja())};q.lg=function(a){var b=30;null!=a&&!a&&(b=1);a=new J(0,0,-b);a=Xc(4).translate(a);this.m=new Wc(a.multiply(this.m));this.Mb=new Float32Array(this.m.Ja())};q.Dd=function(a,b){if(!(a instanceof J&&b instanceof J))throw Error("3D vectors required for calculating the view.");return Xc(4)};A("X.camera",Cf);A("X.camera.prototype.pan",Cf.prototype.bg);
A("X.camera.prototype.rotate",Cf.prototype.rotate);A("X.camera.prototype.zoomIn",Cf.prototype.kg);A("X.camera.prototype.zoomOut",Cf.prototype.lg);function Df(a){function b(a,b,d){b=2*b*Math.PI;b=Da(Aa(l,Math.cos(b)),Aa(m,Math.sin(b)));a=Da(Da(c,Aa(e,a)),Aa(b,f));d=Da(Aa(b,1-Math.abs(d)),Aa(g,d));return new hc(a,d)}this.B=[];a=a||{};var c=new wa(a.start||[0,-1,0]),d=new wa(a.end||[0,1,0]),e=Ca(d,c),f=a.Za||1;a=a.Te||16;for(var g=za(e),h=0.5<Math.abs(g.y()),l=za(ya(new wa(h,!h,0),g)),m=za(ya(l,g)),h=new hc(c,Ea(g)),d=new hc(d,za(g)),n=[],p=0;p<a;p++){var s=p/a,t=(p+1)/a;n.push(new jc([h,b(0,s,-1),b(0,t,-1)]));n.push(new jc([b(0,t,0),b(0,s,0),
b(1,s,0),b(1,t,0)]));n.push(new jc([d,b(1,t,1),b(1,s,1)]))}return uc(n)}B(Df,tc);function Ef(){P.call(this);this.b="cylinder";this.ie=[-10,-10,-10];this.Pd=[10,10,10];this.Ub=10;this.Xb=32;Fa(this,new gd)}B(Ef,P);Ef.prototype.__defineGetter__("start",k("ie"));Ef.prototype.__defineSetter__("start",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid start");this.ie=a});Ef.prototype.__defineGetter__("end",k("Pd"));Ef.prototype.__defineSetter__("end",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid end");this.Pd=a});
Ef.prototype.__defineGetter__("radius",k("Ub"));Ef.prototype.__defineSetter__("radius",function(a){if(!z(a))throw Error("Invalid radius.");this.Ub=a});Ef.prototype.p=function(){id(this,new Df({start:this.ie,end:this.Pd,Za:this.Ub,Te:this.Xb}));Ef.r.p.call(this)};A("X.cylinder",Ef);A("X.cylinder.prototype.modified",Ef.prototype.p);function Ff(a){function b(a,b){a=2*a*Math.PI;b*=Math.PI;var e=new wa(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new hc(Da(c,Aa(e,d)),e))}this.B=[];a=a||{};var c=new wa(a.se||[0,0,0]),d=a.Za||1,e=a.Te||16;a=a.Ci||8;for(var f=[],g=[],h=0;h<e;h++)for(var l=0;l<a;l++)g=[],b(h/e,l/a),0<l&&b((h+1)/e,l/a),l<a-1&&b((h+1)/e,(l+1)/a),b(h/e,(l+1)/a),f.push(new jc(g));return uc(f)}B(Ff,tc);function Gf(){P.call(this);this.b="sphere";this.j=[0,0,0];this.Ub=5;this.Xb=32;this.yg=16;Fa(this,new gd)}B(Gf,P);Gf.prototype.__defineGetter__("center",k("j"));Gf.prototype.__defineSetter__("center",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid center");this.j=a});Gf.prototype.__defineGetter__("radius",k("Ub"));Gf.prototype.__defineSetter__("radius",function(a){if(!z(a))throw Error("Invalid radius.");this.Ub=a});
Gf.prototype.p=function(){id(this,new Ff({se:this.j,Za:this.Ub,Te:this.Xb,Ci:this.yg}));Gf.r.p.call(this)};A("X.sphere",Gf);A("X.sphere.prototype.modified",Gf.prototype.p);function ye(a){I.call(this);this.b="labelmap";this.gb=a}B(ye,I);ye.prototype.p=function(){var a=new dd;a.T=this;this.dispatchEvent(a);this.gb.p()};A("X.labelmap",ye);function Hf(a){this.B=[];a=a||{};var b=new wa(a.se||[0,0,0]),c=a.Za?a.Za.length?a.Za:[a.Za,a.Za,a.Za]:[1,1,1];return uc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new jc(a[0].map(function(e){e=new wa(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.z()+c[2]*(2*!!(e&4)-1));return new hc(e,new wa(a[1]))}))}))}B(Hf,tc);function If(){P.call(this);this.b="cube";this.j=[0,0,0];this.Xd=this.Wd=this.Vd=20;this.Yb=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Fa(this,new gd)}B(If,P);If.prototype.__defineGetter__("center",k("j"));If.prototype.__defineSetter__("center",function(a){if(null==a||!r(a)||3!=a.length)throw Error("Invalid center");this.j=a});If.prototype.__defineGetter__("lengthX",k("Vd"));
If.prototype.__defineSetter__("lengthX",function(a){if(!z(a))throw Error("Invalid lengthX.");this.Vd=a});If.prototype.__defineGetter__("lengthY",k("Wd"));If.prototype.__defineSetter__("lengthY",function(a){if(!z(a))throw Error("Invalid lengthY.");this.Wd=a});If.prototype.__defineGetter__("lengthZ",k("Xd"));If.prototype.__defineSetter__("lengthZ",function(a){if(!z(a))throw Error("Invalid lengthZ.");this.Xd=a});
If.prototype.p=function(){id(this,new Hf({se:this.j,Za:[this.Vd/2,this.Wd/2,this.Xd/2]}));If.r.p.call(this)};A("X.cube",If);A("X.cube.prototype.modified",If.prototype.p);function re(a){S.call(this,a);this.b="interactor3D"}B(re,S);re.prototype.Uc=function(a){re.r.Uc.call(this,a);var b=new wd;null==a.rc&&(a.rc=0);b.Va=0<a.rc;b.La=!1;this.dispatchEvent(b)};function Jf(a){H.call(this);this.b="array";this.v=[];this.Od=a}B(Jf,H);Jf.prototype.add=function(a){this.v.push(a);return!0};Jf.prototype.clear=function(){this.v.length=0};function Kf(a,b,c){var d=c-b;if(!(2>d))for(d=b+Math.floor(d/2),Kf(a,b,d),Kf(a,d,c);b<d;++b)if(0<a.Od(a.v[b],a.v[d])){var e=a.v[b];a.v[b]=a.v[d];for(var f=a,g=d,h=c;g+1<h&&0>f.Od(f.v[g+1],e);){var l=f,m=g+1,n=l.v[g];l.v[g]=l.v[m];l.v[m]=n;++g}f.v[g]=e}}Jf.prototype.sort=function(){Kf(this,0,this.v.length)};function Lf(a,b){Cf.call(this,a,b);this.b="camera2D"}B(Lf,Cf);Lf.prototype.rotate=function(a){a=Lf.r.rotate.call(this,a);var b=new td;0<a.x?b.le--:0>a.x&&b.le++;0<a.y?b.Yd++:0>a.y&&b.Yd--;this.dispatchEvent(b)};function Mf(a,b){Cf.call(this,a,b);this.b="camera3D";this.df=45;this.of=new Float32Array(Nf(this.df,a/b).Ja())}B(Mf,Cf);function Nf(a,b){var c=1*Math.tan(a*Math.PI/360),d=-c;return new Wc([[2/(c*b-d*b),0,(c*b+d*b)/(c*b-d*b),0],[0,2/(c-d),(c+d)/(c-d),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]])}
Mf.prototype.rotate=function(a){a=Mf.r.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=Xc(4),d=new J(parseFloat(this.m.aa(0,0)),parseFloat(this.m.aa(0,1)),parseFloat(this.m.aa(0,2))),b=c.rotate(b,new J(parseFloat(this.m.aa(1,0)),parseFloat(this.m.aa(1,1)),parseFloat(this.m.aa(1,2))));a=c.rotate(a,d);this.m=new Wc(this.m.multiply(a.multiply(b)));this.Mb=new Float32Array(this.m.Ja())};
Mf.prototype.Dd=function(a,b){Mf.r.Dd.call(this,a,b);var c=Xc(4),d=new J(a.x-b.x,a.y-b.y,a.z-b.z),d=d.normalize(),e=this.I.e();e.Rc(d)&&(e.z+=1E-6);var f=Jc(e,d),e=Jc(d,f),f=f.normalize(),e=e.normalize();c.i(0,0,f.x);c.i(0,1,f.y);c.i(0,2,f.z);c.i(0,3,0);c.i(1,0,e.x);c.i(1,1,e.y);c.i(1,2,e.z);c.i(1,3,0);c.i(2,0,d.x);c.i(2,1,d.y);c.i(2,2,d.z);c.i(2,3,0);c.i(3,0,0);c.i(3,1,0);c.i(3,2,0);c.i(3,3,1);d=a.e();return c.translate(d.ca())};A("X.camera3D",Mf);function Of(a){rb.call(this);this.ib=a;this.A=[]}B(Of,rb);var Pf=[];function Qf(a,b,c,d,e){r(c)||(Pf[0]=c,c=Pf);for(var f=0;f<c.length;f++){var g=G(b,c[f],d||a,e||!1,a.ib||a);a.A.push(g)}}Of.prototype.Pe=function(){Gb(this.A,Zb);this.A.length=0};Of.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Tf(){}Tf.Gf=function(){return Tf.Mf?Tf.Mf:Tf.Mf=new Tf};Tf.prototype.vh=0;Tf.Gf();function Uf(a){rb.call(this);this.Fb=a||Id()}B(Uf,gc);q=Uf.prototype;q.ih=Tf.Gf();q.Lf=null;q.tc=!1;q.q=null;q.Vc=null;q.ue=null;q.te=null;q.k=k("q");q.Re=function(a){if(this.Vc&&this.Vc!=a)throw Error("Method not supported");Uf.r.Re.call(this,a)};q.vd=k("Fb");q.pc=function(){this.q=this.Fb.createElement("div")};q.fc=function(a){this.Hb(a)};
q.Hb=function(a,b){if(this.tc)throw Error("Component already rendered");this.q||this.pc();a?a.insertBefore(this.q,b||null):this.Fb.O.body.appendChild(this.q);this.Vc&&!this.Vc.tc||this.td()};q.td=function(){this.tc=!0;Vf(this,function(a){!a.tc&&a.k()&&a.td()})};q.ud=function(){Vf(this,function(a){a.tc&&a.ud()});this.ah&&this.ah.Pe();this.tc=!1};function Vf(a,b){a.ue&&Gb(a.ue,b,void 0)}
q.removeChild=function(a,b){if(a){var c=ja(a)?a:a.Lf||(a.Lf=":"+(a.ih.vh++).toString(36)),d;this.te&&c?(d=this.te,d=(c in d?d[c]:void 0)||null):d=null;a=d;if(c&&a){d=this.te;c in d&&delete d[c];Kb(this.ue,a);b&&(a.ud(),a.q&&Sd(a.q));c=a;if(null==c)throw Error("Unable to set parent component");c.Vc=null;Uf.r.Re.call(c,null)}}if(!a)throw Error("Child is not in parent component");return a};function Wf(){rb.call(this)}B(Wf,gc);q=Wf.prototype;q.$e=0;q.Tc=0;q.Fe=100;q.Df=0;q.We=1;q.ph=!1;q.uh=!1;q.Id=function(a){a=Xf(this,a);this.$e!=a&&(this.$e=a+this.Df>this.Fe?this.Fe-this.Df:a<this.Tc?this.Tc:a,this.ph||this.uh||this.dispatchEvent("change"))};q.yd=function(){return Xf(this,this.$e)};q.xd=function(){return Xf(this,this.Tc)};q.wd=function(){return Xf(this,this.Fe)};function Xf(a,b){return null==a.We?b:a.Tc+Math.round((b-a.Tc)/a.We)*a.We};function Yf(a){Uf.call(this,a);this.Xc=new Wf;G(this.Xc,"change",this.bh,!1,this)}B(Yf,Uf);var Zf={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};q=Yf.prototype;q.pc=function(){this.$a=this.vd().pc("div","progress-bar-thumb");var a=Zf[this.ag];this.q=this.vd().pc("div",a,this.$a);$f(this);a=this.xd();this.k().setAttribute("aria-valuemin",a);a=this.wd();this.k().setAttribute("aria-valuemax",a)};
q.td=function(){Yf.r.td.call(this);F&&7>hb&&G(this.k(),"resize",this.Ld,!1,this);this.Ld();var a=this.k();a.setAttribute("role","progressbar");a.setAttribute("aria-live","polite")};q.ud=function(){Yf.r.ud.call(this);F&&7>hb&&Yb(this.k(),"resize",this.Ld,!1,this)};q.yd=function(){return this.Xc.yd()};q.Id=function(a){this.Xc.Id(a);this.k()&&$f(this)};function $f(a){var b=a.yd();a.k().setAttribute("aria-valuenow",b)}q.xd=function(){return this.Xc.xd()};q.wd=function(){return this.Xc.wd()};q.ag="horizontal";
q.bh=function(){this.Ld();this.dispatchEvent("change")};q.Ld=function(){if(this.$a){var a=this.xd(),b=this.wd(),a=(this.yd()-a)/(b-a),b=Math.round(100*a);"vertical"==this.ag?F&&7>hb?(this.$a.style.top=0,this.$a.style.height="100%",b=this.$a.offsetHeight,a=Math.round(a*b),this.$a.style.top=b-a+"px",this.$a.style.height=a+"px"):(this.$a.style.top=100-b+"%",this.$a.style.height=b+"%"):this.$a.style.width=b+"%"}};function ag(a,b){if(null==a)throw Error("No valid parent element.");if(null==b)throw Error("Invalid initial value.");Yf.call(this);this.b="progressbar";this.qa=a;this.nf="";this.ad=this.fb=null;this.Jb=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Jb=[c,d,e];this.Id(b);this.Ce()}B(ag,Yf);
ag.prototype.Ce=function(){if("static"==this.qa.style.position||""==this.qa.style.position)this.nf=this.qa.style.position,this.qa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Od("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Jb[0])),d=document.createTextNode(String(this.Jb[1])),e=document.createTextNode(String(this.Jb[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.fb=b;this.fc(this.qa);a=this.k();a.style.position=
"absolute";a.style.top=(this.qa.clientHeight-5)/2+"px";a.style.left=(this.qa.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};function bg(a){var b=a.k().style.top,c=a.k().style.left;Sd(a.k());var d=new ag(a.qa,100),e=d.k();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");(void 0!=e.firstElementChild?e.firstElementChild:Td(e.firstChild)).classList.add("progress-bar-thumb-done");a.ad=d}
ag.prototype.Ad=function(){this.fb&&Sd(this.fb);this.k()&&Sd(this.k());this.ad&&Sd(this.ad.k());this.ad=this.fb=null;this.qa.style.position=this.nf};function cg(a,b,c){if(ka(a))c&&(a=ta(a,c));else if(a&&"function"==typeof a.handleEvent)a=ta(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:ea.setTimeout(a,b||0)};function dg(){H.call(this);this.b="renderer";this.l=window.document.body;this.M=this.l.clientWidth;this.G=this.l.clientHeight;this.Nb=this.s=this.ka=null;this.Na=new Jf(ed);this.Wa=[];this.C=null;this.ce=this.dd=this.ed=!1;this.a=this.ra=null;this.u={PROGRESSBAR_ENABLED:!0,INTERMEDIATE_RENDERING:!1};this.af=-1;window.console.log("XTK release 9 -- 2013-12-09 22:07:25 -- http://www.goXTK.com -- @goXTK")}B(dg,H);q=dg.prototype;q.Lh=function(a){this.ra&&this.ra.Id(100*a.uf)};
q.Bh=function(a){null!=a&&a instanceof dd&&a.T&&this.ab(a.T)};q.Le=function(a){if(!(null!=a&&a instanceof yd))throw Error("Invalid hover event.");};q.Mh=function(){var a=Ld(this.l);this.M=a.clientWidth;this.G=a.clientHeight;a=Ld(this.ka);a.width=this.M;a.height=this.G;"renderer3D"==this.b&&(this.a.viewport(0,0,this.M,this.G),this.s.of=new Float32Array(Nf(this.s.df,this.ka.width/this.ka.height).Ja()));this.uc()};q.Me=function(a){if(!(null!=a&&a instanceof xd))throw Error("Invalid scroll event.");};
dg.prototype.__defineGetter__("config",k("u"));dg.prototype.__defineGetter__("interactor",k("Nb"));dg.prototype.__defineGetter__("camera",k("s"));dg.prototype.__defineGetter__("loadingCompleted",k("dd"));dg.prototype.__defineGetter__("container",k("l"));dg.prototype.__defineSetter__("container",function(a){if(null==a)throw Error("An ID to a valid container (<div>..) is required.");var b=a;ja(b)&&(b=Ld(a));if(!ma(b)||1!=b.nodeType)throw Error("Could not find the given container.");this.l=b});q=dg.prototype;
q.uc=function(){this.s.reset()};function eg(a){a.u.PROGRESSBAR_ENABLED&&a.ra&&!a.bf&&(bg(a.ra),a.bf=cg(function(){this.bf=null;this.ra&&(this.ra.Ad(),this.ra=null);this.fc()}.bind(a),700))}
q.ia=function(a){var b=Od("canvas");this.l.appendChild(b);this.M=this.l.clientWidth;this.G=this.l.clientHeight;b.width=this.M;b.height=this.G;try{var c=b.getContext(a,{alpha:!1});if(!c)throw Error();}catch(d){throw a="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..',this.l.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+
a+"</p>",Error(a);}this.C=new yf;G(this.C,qd,this.Lh.bind(this));this.ka=b;this.a=c;b=new re(this.ka);"2d"==a&&(b=new ve(this.ka));b.ia();G(b,od,this.uc.bind(this));G(b,rd,this.Le.bind(this));G(b,nd,this.Me.bind(this));this.Nb=b;b=new Mf(this.M,this.G);"2d"==a&&(b=new Lf(this.M,this.G));b.observe(this.Nb);this.s=b;G(window,"resize",this.Mh,!1,this)};q.add=function(a){(a instanceof If||a instanceof Gf||a instanceof Ef)&&a.p();this.Wa.push(a);this.ab(a)};
q.ab=function(a){if(!this.ka||!this.a)throw Error("The renderer was not initialized properly.");if(null==a)throw window.console.log(a),Error("Illegal object.");ac(a)||G(a,bc,this.Bh.bind(this))};q.get=function(a){if(null==a)throw Error("Invalid object id.");for(var b=this.Na.v,c=b.length,d=0,d=0;d<c;d++)if(b[d].ma==a)return b[d];return null};
q.fc=function(){if(!this.ka||!this.a)throw Error("The renderer was not initialized properly.");if(null==this.qf){if(this.C.mc.ve(!1)){if(this.u.PROGRESSBAR_ENABLED&&!this.ra&&(this.ra=new ag(this.l,3)),this.ce=this.dd=!1,this.qf=cg(function(){this.qf=null;this.fc()}.bind(this),100),!this.u.INTERMEDIATE_RENDERING)return}else if(this.dd||this.ce||(this.ce=!0,eval("this.onShowtime()"),this.dd=!0),this.ra){eg(this);return}this.af=window.requestAnimationFrame(this.fc.bind(this),this.ka);eval("this.onRender()");
this.Hb(!1,!0)}};q.$f=ba();q.Yf=ba();q.Hb=ba();q.rd=function(){window.cancelAnimationFrame(this.af);this.C&&(delete this.C,this.C=null);this.ra&&(this.ra.Ad(),delete this.ra,this.ra=null);this.Na.clear();delete this.Na;this.Wa.length=0;delete this.Wa;delete this.C;this.C=null;delete this.s;this.s=null;delete this.Nb;this.Nb=null;delete this.a;this.a=null;Sd(this.ka);delete this.ka;this.ka=null};function fg(a,b,c,d,e,f,g,h){var l,m;if(l=c.offsetParent){var n="HTML"==l.tagName||"BODY"==l.tagName;n&&"static"==Yd(l,"position")||(m=ce(l),n||(n=(n=de(l))&&bb?-l.scrollLeft:!n||F&&ob("8")||"visible"==Yd(l,"overflowX")?l.scrollLeft:l.scrollWidth-l.clientWidth-l.scrollLeft,m=Kc(m,new K(n,l.scrollTop))))}l=m||new K;m=ce(a);n=fe(a);m=new Ed(m.x,m.y,n.width,n.height);(n=be(a))&&m.Nf(new Ed(n.left,n.top,n.right-n.left,n.bottom-n.top));var n=Id(a),p=Id(c);if(n.O!=p.O){var s=n.O.body,p=p.O.parentWindow||
p.O.defaultView,t=new K(0,0),v=Kd(s)?Kd(s).parentWindow||Kd(s).defaultView:window,w=s;do{var x;if(v==p)x=ce(w);else{x=w;var C=new K;if(1==x.nodeType){if(x.getBoundingClientRect){var u=$d(x);C.x=u.left;C.y=u.top}else{var u=Wd(Id(x)),y=ce(x);C.x=y.x-u.x;C.y=y.y-u.y}bb&&!ob(12)&&(u=void 0,u=void 0,F?u="-ms-transform":cb?u="-webkit-transform":ab?u="-o-transform":bb&&(u="-moz-transform"),y=void 0,u&&(y=Yd(x,u)),y||(y=Yd(x,"transform")),u=y?(x=y.match(me))?new K(parseFloat(x[1]),parseFloat(x[2])):new K(0,
0):new K(0,0),C=new K(C.x+u.x,C.y+u.y))}else u=ka(x.Yg),y=x,x.targetTouches?y=x.targetTouches[0]:u&&x.Ra.targetTouches&&(y=x.Ra.targetTouches[0]),C.x=y.clientX,C.y=y.clientY;x=C}t.x+=x.x;t.y+=x.y}while(v&&v!=p&&(w=v.frameElement)&&(v=v.parent));s=Kc(t,ce(s));F&&!Vd(n)&&(s=Kc(s,Wd(n)));m.left+=s.x;m.top+=s.y}a=(b&4&&de(a)?b^2:b)&-5;b=new K(a&2?m.left+m.width:m.left,a&1?m.top+m.height:m.top);b=Kc(b,l);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var E;g&&(E=be(c))&&(E.top-=l.y,E.right-=l.x,E.bottom-=
l.y,E.left-=l.x);return gg(b,c,d,f,E,g,h)}
function gg(a,b,c,d,e,f,g){a=a.e();var h=0,l=(c&4&&de(b)?c^2:c)&-5;c=fe(b);g=g?g.e():c.e();if(d||0!=l)l&2?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),l&1?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f&&(e?(h=a,d=0,65==(f&65)&&(h.x<e.left||h.x>=e.right)&&(f&=-2),132==(f&132)&&(h.y<e.top||h.y>=e.bottom)&&(f&=-5),h.x<e.left&&f&1&&(h.x=e.left,d|=1),h.x<e.left&&h.x+g.width>e.right&&f&16&&(g.width=Math.max(g.width-(h.x+g.width-e.right),0),d|=4),h.x+g.width>e.right&&f&1&&(h.x=Math.max(e.right-g.width,
e.left),d|=1),f&2&&(d=d|(h.x<e.left?16:0)|(h.x+g.width>e.right?32:0)),h.y<e.top&&f&4&&(h.y=e.top,d|=2),h.y<=e.top&&h.y+g.height<e.bottom&&f&32&&(g.height=Math.max(g.height-(e.top-h.y),0),h.y=0,d|=8),h.y>=e.top&&h.y+g.height>e.bottom&&f&32&&(g.height=Math.max(g.height-(h.y+g.height-e.bottom),0),d|=8),h.y+g.height>e.bottom&&f&4&&(h.y=Math.max(e.bottom-g.height,e.top),d|=2),f&8&&(d=d|(h.y<e.top?64:0)|(h.y+g.height>e.bottom?128:0)),h=d):h=256,h&496))return h;f=a;e=bb&&(Ta||fb)&&ob("1.9");f instanceof
K?(a=f.x,f=f.y):(a=f,f=void 0);b.style.left=ee(a,e);b.style.top=ee(f,e);Oc(c,g)||(a=Vd(Id(Kd(b))),!F||a&&ob("8")?(b=b.style,bb?b.MozBoxSizing="border-box":cb?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(g.width,0)+"px",b.height=Math.max(g.height,0)+"px"):(c=b.style,a?(F?(a=je(b,"paddingLeft"),e=je(b,"paddingRight"),f=je(b,"paddingTop"),d=je(b,"paddingBottom"),a=new Dd(f,e,d,a)):(a=Xd(b,"paddingLeft"),e=Xd(b,"paddingRight"),f=Xd(b,"paddingTop"),d=Xd(b,"paddingBottom"),a=
new Dd(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),F?(e=le(b,"borderLeft"),f=le(b,"borderRight"),d=le(b,"borderTop"),b=le(b,"borderBottom"),b=new Dd(d,f,b,e)):(e=Xd(b,"borderLeftWidth"),f=Xd(b,"borderRightWidth"),d=Xd(b,"borderTopWidth"),b=Xd(b,"borderBottomWidth"),b=new Dd(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=g.width-b.left-a.left-a.right-b.right,c.pixelHeight=g.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=g.width,c.pixelHeight=g.height)));return h}
;function hg(){}hg.prototype.Ta=ba();function ig(a,b,c){this.element=a;this.Af=b;this.$h=c}B(ig,hg);ig.prototype.Ta=function(a,b,c){fg(this.element,this.Af,a,b,void 0,c,this.$h)};function jg(a,b){rb.call(this);this.ib=new Of(this);this.Qe(a||null);b&&(this.vc=b)}B(jg,gc);q=jg.prototype;q.q=null;q.Dg=!0;q.vf=null;q.sa=!1;q.ti=!1;q.Ee=-1;q.hh=!1;q.Qg=!0;q.vc="toggle_display";q.k=k("q");q.Qe=function(a){if(this.sa)throw Error("Can not change this state of the popup while showing.");this.q=a};
function kg(a,b){a.Kd&&a.Kd.stop();a.zd&&a.zd.stop();if(b){if(!a.sa&&a.Je()){if(!a.q)throw Error("Caller must call setElement before trying to show the popup");a.Ta();var c=Kd(a.q);a.hh&&Qf(a.ib,c,"keydown",a.zh,!0);if(a.Dg)if(Qf(a.ib,c,"mousedown",a.Wf,!0),F){var d;try{d=c.activeElement}catch(e){}for(;d&&"IFRAME"==d.nodeName;){try{var f=d.contentDocument||d.contentWindow.document}catch(g){break}c=f;d=c.activeElement}Qf(a.ib,c,"mousedown",a.Wf,!0);Qf(a.ib,c,"deactivate",a.Vf)}else Qf(a.ib,c,"blur",
a.Vf);"toggle_display"==a.vc?(a.q.style.visibility="visible",he(a.q,!0)):"move_offscreen"==a.vc&&a.Ta();a.sa=!0;a.Kd?(Xb(a.Kd,"end",a.Zf,!1,a),a.Kd.play()):a.Zf()}}else lg(a)}q.Ta=fa;function lg(a,b){if(!a.sa||!a.dispatchEvent({type:"beforehide",target:b}))return!1;a.ib&&a.ib.Pe();a.sa=!1;va();a.zd?(Xb(a.zd,"end",ua(a.zf,b),!1,a),a.zd.play()):a.zf(b);return!0}q.zf=function(a){"toggle_display"==this.vc?this.ti?cg(this.Kf,0,this):this.Kf():"move_offscreen"==this.vc&&(this.q.style.top="-10000px");this.Ke(a)};
q.Kf=function(){this.q.style.visibility="hidden";he(this.q,!1)};q.Je=function(){return this.dispatchEvent("beforeshow")};q.Zf=function(){this.Ee=va();this.dispatchEvent("show")};q.Ke=function(a){this.dispatchEvent({type:"hide",target:a})};q.Wf=function(a){a=a.target;Ud(this.q,a)||this.vf&&!Ud(this.vf,a)||150>va()-this.Ee||lg(this,a)};q.zh=function(a){27==a.keyCode&&lg(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
q.Vf=function(a){if(this.Qg){var b=Kd(this.q);if(F||ab){if(a=b.activeElement,!a||Ud(this.q,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>va()-this.Ee||lg(this)}};function ng(a,b){this.we=a instanceof K?a:new K(a,b)}B(ng,hg);ng.prototype.Ta=function(a,b,c,d){fg(Zd(a),0,a,b,this.we,c,null,d)};function og(a,b){this.bi=4;this.Ed=b||void 0;jg.call(this,a)}B(og,jg);og.prototype.Ta=function(){if(this.Ed){var a=!this.sa&&"move_offscreen"!=this.vc,b=this.k();a&&(b.style.visibility="hidden",he(b,!0));this.Ed.Ta(b,this.bi,this.Oj);a&&he(b,!1)}};function pg(a){this.P=new Bc;a&&this.me(a)}function qg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+na(a):b.substr(0,1)+a}q=pg.prototype;q.hb=function(){return this.P.hb()};q.add=function(a){this.P.set(qg(a),a)};q.me=function(a){a=zc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};q.Pe=function(a){a=zc(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};q.remove=function(a){return this.P.remove(qg(a))};q.clear=function(){this.P.clear()};
q.contains=function(a){a=qg(a);return Dc(this.P.P,a)};q.Nf=function(a){var b=new pg;a=zc(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};q.Xa=function(){return this.P.Xa()};q.e=function(){return new pg(this)};q.Rc=function(a){return this.hb()==yc(a)&&rg(this,a)};
function rg(a,b){var c=yc(b);if(a.hb()>c)return!1;!(b instanceof pg)&&5<c&&(b=new pg(b));return Ac(a,function(a){if("function"==typeof b.contains)a=b.contains(a);else if("function"==typeof b.ve)a=b.ve(a);else if(ia(b)||ja(b))a=0<=Fb(b,a);else a:{var c=b,f;for(f in c)if(c[f]==a){a=!0;break a}a=!1}return a})};function sg(a,b,c){this.Fb=c||(a?Id(Ld(a)):Id());og.call(this,this.Fb.pc("div",{style:"position:absolute;display:none;"}));this.xe=new K(1,1);this.sd=new pg;a&&tg(this,a);if(null!=b)if(a=this.k(),"textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(Kd(a).createTextNode(String(b)))}}B(sg,og);var ug=[];q=sg.prototype;q.Aa=null;
q.className="goog-tooltip";q.hg=500;q.gh=0;q.vd=k("Fb");function tg(a,b){b=Ld(b);a.sd.add(b);G(b,"mouseover",a.fh,!1,a);G(b,"mouseout",a.Hf,!1,a);G(b,"mousemove",a.eh,!1,a);G(b,"focus",a.dh,!1,a);G(b,"blur",a.Hf,!1,a)}q.Qe=function(a){var b=this.k();b&&Sd(b);sg.r.Qe.call(this,a);a&&(b=this.Fb.O.body,b.insertBefore(a,b.lastChild))};
q.Je=function(){if(!jg.prototype.Je.call(this))return!1;if(this.anchor)for(var a,b=0;a=ug[b];b++)Ud(a.k(),this.anchor)||kg(a,!1);0<=Fb(ug,this)||ug.push(this);a=this.k();a.className=this.className;vg(this);G(a,"mouseover",this.Jf,!1,this);G(a,"mouseout",this.If,!1,this);wg(this);return!0};
q.Ke=function(){Kb(ug,this);for(var a=this.k(),b,c=0;b=ug[c];c++)b.anchor&&Ud(a,b.anchor)&&kg(b,!1);this.cg&&xg(this.cg);Yb(a,"mouseover",this.Jf,!1,this);Yb(a,"mouseout",this.If,!1,this);this.anchor=void 0;0==(this.kb?this.sa?4:1:this.sc?3:this.sa?2:0)&&(this.Gd=!1);jg.prototype.Ke.call(this)};
q.Tf=function(a,b){this.anchor==a&&this.sd.contains(this.anchor)&&(this.Gd||!this.Pj?(kg(this,!1),this.sa||(this.anchor=a,this.Ed=b||yg(this,0)||void 0,this.sa&&this.Ta(),kg(this,!0))):this.anchor=void 0);this.kb=void 0};q.th=function(a){this.sc=void 0;a==this.anchor&&(null!=this.Aa&&(this.Aa==this.k()||this.sd.contains(this.Aa))||this.xf&&this.xf.Aa||kg(this,!1))};function zg(a,b){var c=Wd(a.Fb);a.xe.x=b.clientX+c.x;a.xe.y=b.clientY+c.y}
q.fh=function(a){var b=Ag(this,a.target);this.Aa=b;vg(this);b!=this.anchor&&(this.anchor=b,this.kb||(this.kb=cg(ta(this.Tf,this,b,void 0),this.hg)),Bg(this),zg(this,a))};function Ag(a,b){try{for(;b&&!a.sd.contains(b);)b=b.parentNode;return b}catch(c){return null}}q.eh=function(a){zg(this,a);this.Gd=!0};q.dh=function(a){this.Aa=a=Ag(this,a.target);this.Gd=!0;if(this.anchor!=a){this.anchor=a;var b=yg(this,1);vg(this);this.kb||(this.kb=cg(ta(this.Tf,this,a,b),this.hg));Bg(this)}};
function yg(a,b){if(0==b){var c=a.xe.e();return new Cg(c)}return new Dg(a.Aa)}function Bg(a){if(a.anchor)for(var b,c=0;b=ug[c];c++)Ud(b.k(),a.anchor)&&(b.xf=a,a.cg=b)}q.Hf=function(a){var b=Ag(this,a.target),c=Ag(this,a.relatedTarget);b!=c&&(b==this.Aa&&(this.Aa=null),wg(this),this.Gd=!1,!this.sa||a.relatedTarget&&Ud(this.k(),a.relatedTarget)?this.anchor=void 0:xg(this))};q.Jf=function(){var a=this.k();this.Aa!=a&&(vg(this),this.Aa=a)};
q.If=function(a){var b=this.k();this.Aa!=b||a.relatedTarget&&Ud(b,a.relatedTarget)||(this.Aa=null,xg(this))};function wg(a){a.kb&&(ea.clearTimeout(a.kb),a.kb=void 0)}function xg(a){2==(a.kb?a.sa?4:1:a.sc?3:a.sa?2:0)&&(a.sc=cg(ta(a.th,a,a.anchor),a.gh))}function vg(a){a.sc&&(ea.clearTimeout(a.sc),a.sc=void 0)}function Cg(a,b){ng.call(this,a,b)}B(Cg,ng);
Cg.prototype.Ta=function(a,b,c){b=Zd(a);b=be(b);c=c?new Dd(c.top+10,c.right,c.bottom,c.left+10):new Dd(10,0,0,10);gg(this.we,a,4,c,b,9)&496&&gg(this.we,a,4,c,b,5)};function Dg(a){ig.call(this,a,3)}B(Dg,ig);Dg.prototype.Ta=function(a,b,c){var d=new K(10,0);fg(this.element,this.Af,a,b,d,c,9)&496&&fg(this.element,2,a,1,d,c,5)};function Eg(a,b,c,d){if(null==a)throw Error("No valid parent element.");if(!z(b)||!z(c))throw Error("Invalid coordinates.");if(!(null!=d&&d instanceof S))throw Error("Invalid interactor.");sg.call(this);this.b="caption";this.qa=a;this.od=b;this.pd=c;this.Nb=d;this.fb=null;this.Jb=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Jb=[a];Xb(d,sd,this.Ad.bind(this));this.Ce()}
B(Eg,sg);Eg.prototype.Ce=function(){if("static"==this.qa.style.position||""==this.qa.style.position)this.qa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Od("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Jb[0]));a.appendChild(b);b.appendChild(c);this.fb=b;this.Ed=new ng(this.od,this.pd)||void 0;this.sa&&this.Ta();kg(this,!0);tg(this,this.qa);this.k().classList.add("x-tooltip")};
Eg.prototype.Ad=function(){kg(this,!1);this.fb&&Sd(this.fb);this.k()&&Sd(this.k());this.fb=null};function Fg(){H.call(this);this.b="shaders";this.ke=" precision mediump float;attribute vec3 vertexPosition;attribute vec3 vertexNormal;attribute vec3 vertexColor;attribute vec2 vertexTexturePos;attribute float vertexScalar;uniform bool pyformex;uniform mat4 modelview;uniform mat4 projection;uniform mat4 pickmat;uniform bool useObjectColor;uniform bool highlight;uniform mat4 objectTransform;uniform bool useScalars;uniform bool scalarsReplaceMode;uniform float scalarsMin;uniform float scalarsMax;uniform vec3 scalarsMinColor;uniform vec3 scalarsMaxColor;uniform float scalarsMinThreshold;uniform float scalarsMaxThreshold;uniform int scalarsInterpolation;uniform vec3 objectColor;uniform float pointsize;uniform bool picking;uniform bool alphablend;uniform bool lighting;uniform int nlights;uniform vec3 ambicolor;uniform vec3 diffcolor[4];uniform vec3 speccolor[4];uniform vec3 lightdir[4];uniform float ambient;uniform float diffuse;uniform float specular;uniform float shininess;uniform float alpha;varying float fDiscardNow;varying vec4 fvertexPosition;varying vec3 fvertexNormal;varying vec4 fragColor;varying vec3 fragmentColor;varying vec2 fragmentTexturePos;varying vec3 fTransformedVertexNormal;void main(){  if (picking) {    fragmentColor = vec3(0.,0.,0.);  } else {    if (highlight) {      fragmentColor = vec3(1.,1.,0.);    } else if (useObjectColor) {      fragmentColor = objectColor;    } else { fragmentColor = vertexColor;    }    if (highlight) {      fragColor = vec4(fragmentColor,1.);    } else {      if (lighting) { fvertexNormal = vertexNormal; fTransformedVertexNormal = mat3(modelview[0].xyz,modelview[1].xyz,modelview[2].xyz) * fvertexNormal; vec3 nNormal = normalize(fTransformedVertexNormal); vec3 fcolor = fragmentColor; fragmentColor = fcolor * ambicolor * ambient; for (int i=0; i<4; ++i) {   if (i < nlights) {     vec3 nlight = normalize(lightdir[i]);     vec3 eyeDirection = normalize(vec3(0.,0.,1.));     vec3 reflectionDirection = reflect(-nlight, nNormal);     float nspecular = specular*pow(max(dot(reflectionDirection,eyeDirection), 0.0), shininess);     float ndiffuse = diffuse * max(dot(nNormal,nlight),0.0);     vec3 diffcol = vec3(1.,1.,0.);     fragmentColor += (fcolor + diffcolor[i])/2. * ndiffuse;     fragmentColor += (fcolor + speccolor[i])/2. * nspecular;   } }      }      if (alphablend) {       fragColor = vec4(fragmentColor,alpha);      } else {       fragColor = vec4(fragmentColor,1.);      }    }    gl_PointSize = pointsize;  }  fvertexPosition = vec4(vertexPosition,1.0);  if (picking) {    gl_Position = pickmat * projection * modelview * fvertexPosition;  } else {    gl_Position = projection * modelview * fvertexPosition;  }}";
this.Qd=" precision mediump float;varying vec3 fragmentColor;varying vec4 fragColor;uniform float alpha;void main(void) {  gl_FragColor = fragColor;}"}B(Fg,H);
var Gg={zj:"vertexPosition",yj:"vertexNormal",xj:"vertexColor",Bj:"vertexTexturePos",Aj:"vertexScalar"},Hg={Cj:"modelview",bj:"projection",dj:"pickmat",tj:"useObjectColor",Ti:"highlight",aj:"objectTransform",vj:"useScalars",mj:"scalarsReplaceMode",jj:"scalarsMin",gj:"scalarsMax",kj:"scalarsMinColor",hj:"scalarsMaxColor",lj:"scalarsMinThreshold",ij:"scalarsMaxThreshold",fj:"scalarsInterpolation",Zi:"objectColor",ej:"pointsize",cj:"picking",Mi:"alphablend",Wi:"lighting",Yi:"nlights",Ni:"ambicolor",
Ri:"diffcolor",oj:"speccolor",Vi:"lightdir",Oi:"ambient",Si:"diffuse",pj:"specular",nj:"shininess",$i:"alpha"};function Ig(a){var b=Object.keys(Hg);if(!Object.keys(Gg).every(function(a){a=Gg[a];return-1!=this.ke.search(a)||-1!=this.Qd.search(a)}.bind(a)))throw Error("Could not find all attributes in the shader sources.");if(!b.every(function(a){a=Hg[a];return-1!=this.ke.search(a)||-1!=this.Qd.search(a)}.bind(a)))throw Error("Could not find all uniforms in the shader sources.");};var Jg={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Kg(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Lg.test(c))return b.Sc=Mg(c),b.type="hex",b;a:{var d=a.match(Ng);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length){e=c[0];a=c[1];c=c[2];e=Number(e);a=Number(a);c=Number(c);if(isNaN(e)||0>e||255<e||isNaN(a)||0>a||255<a||isNaN(c)||0>c||255<c)throw Error('"('+e+","+a+","+c+'") is not a valid RGB color');e=Og(e.toString(16));a=Og(a.toString(16));
c=Og(c.toString(16));b.Sc="#"+e+a+c;b.type="rgb";return b}if(Jg&&(c=Jg[a.toLowerCase()]))return b.Sc=c,b.type="named",b;throw Error(a+" is not a valid color string");}var Pg=/#(.)(.)(.)/;function Mg(a){if(!Lg.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Pg,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Qg(a){a=Mg(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}var Lg=/^#(?:[0-9a-f]{3}){1,2}$/i,Ng=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;
function Og(a){return 1==a.length?"0"+a:a};function Rg(){dg.call(this);this.b="renderer3D";this.Fc=this.Ic=this.Ec=this.Hc=this.Dc=this.Gc=this.ee=this.fe=null;this.j=[0,0,0];this.pf=null;this.Nd=new Bc;this.tf=new Bc;this.Nc=new Bc;this.ae=new Bc;this.$c=new Bc;this.jd=new Bc;this.kd=new Bc;this.ld=new Bc;this.u={PROGRESSBAR_ENABLED:!0,PICKING_ENABLED:!0,ORDERING_ENABLED:!0,ORDERING_COMPARATOR:"OPACITY",STATISTICS_ENABLED:!1,INTERMEDIATE_RENDERING:!1};this.Md=0;this.rh=1;this.xh=3}B(Rg,dg);Rg.prototype.__defineGetter__("config",k("u"));
q=Rg.prototype;q.ki=function(){this.Fc=this.Ic=this.Ec=this.Hc=this.Dc=this.Gc=null;this.j=[0,0,0]};q.gg=function(a){this.Md=a;Sg(this)};q.Gi=function(){this.gg(!this.Md)};function Sg(a){a.Md?(window.console.log("Transparency enabled"),a.a.enable(a.a.BLEND),a.a.blendEquation(a.a.FUNC_ADD),a.a.blendFunc(a.a.SRC_ALPHA,a.a.ONE_MINUS_SRC_ALPHA)):(window.console.log("Transparency disabled"),a.a.disable(a.a.BLEND))}
q.Le=function(a){Rg.r.Le.call(this,a);var b=a.od;a=a.pd;var c=this.dg(b,a);if(c=this.get(c))if(c=c.ic)(new Eg(this.l,this.l.offsetLeft+b+10,this.l.offsetTop+a+10,this.Nb)).k().innerHTML=c};
q.ia=function(){Rg.r.ia.call(this,"experimental-webgl");try{this.a.viewport(0,0,this.M,this.G);var a=this.l.style.backgroundColor?Qg(Kg(this.l.style.backgroundColor).Sc):this.l.bgColor?Qg(Kg(this.l.bgColor).Sc):Qg(Kg("white").Sc);this.a.clearColor(a[0]/255,a[1]/255,a[2]/255,1);Sg(this);this.a.enable(this.a.DEPTH_TEST);this.a.depthFunc(this.a.LESS);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);if(this.u.PICKING_ENABLED){var b=this.a.createFramebuffer(),c=this.a.createRenderbuffer(),
d=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,d);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.M,this.G,0,this.a.RGB,this.a.UNSIGNED_BYTE,null);this.a.bindFramebuffer(this.a.FRAMEBUFFER,b);this.a.bindRenderbuffer(this.a.RENDERBUFFER,c);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.M,this.G);this.a.bindRenderbuffer(this.a.RENDERBUFFER,null);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,d,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,
this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,c);this.a.bindFramebuffer(this.a.FRAMEBUFFER,null);this.pf=b}}catch(e){throw Error("Exception while accessing GL Context!\n"+e);}a=new Fg;Tg(this,a)};
function Tg(a,b){if(null==a.ka||null==a.a||null==a.s)throw Error("Renderer was not initialized properly.");if(!(null!=b&&b instanceof Fg))throw Error("Could not add shaders.");Ig(b);var c=a.a.createShader(a.a.FRAGMENT_SHADER),d=a.a.createShader(a.a.VERTEX_SHADER);a.a.shaderSource(c,b.Qd);a.a.shaderSource(d,b.ke);a.a.compileShader(c);a.a.compileShader(d);if(!a.a.getShaderParameter(c,a.a.COMPILE_STATUS))throw Error("Fragement Shader compilation failed!\n"+a.a.getShaderInfoLog(c));if(!a.a.getShaderParameter(d,
a.a.COMPILE_STATUS))throw Error("Vertex Shader compilation failed!\n"+a.a.getShaderInfoLog(d));var e=a.a.createProgram();a.a.attachShader(e,d);a.a.attachShader(e,c);a.a.linkProgram(e);if(!a.a.getProgramParameter(e,a.a.LINK_STATUS))throw Error("Could not create shader program!\n"+a.a.getShaderInfoLog(c)+"\n"+a.a.getShaderInfoLog(d)+"\n"+a.a.getProgramInfoLog(e));a.a.useProgram(e);a.ee=e;Object.keys(Gg).forEach(function(a){a=Gg[a];this.Nd.set(a,this.a.getAttribLocation(this.ee,a));this.a.enableVertexAttribArray(this.Nd.get(a))}.bind(a));
Object.keys(Hg).forEach(function(a){a=Hg[a];this.tf.set(a,this.a.getUniformLocation(this.ee,a))}.bind(a));a.fe=b}
q.ab=function(a){Rg.r.ab.call(this,a);var b=!1;this.get(a.ma)&&(b=!0);var c=a.ma,d=a.f,e=a.g,f=a.J,g=a.w,h=a.n,l=a.Zb,m=a.ea,n=a.o,p=a.t;if(null!=n&&null!=n.n&&n.n.d)this.ab(n);else if(null!=n&&n.d&&this.ab(n),null!=m&&null!=m.n&&m.n.d)this.C.load(m,a);else if(null!=g&&null!=g.n&&g.n.d)this.C.load(g,a);else{if(null!=h&&r(h))if(null!=a.gc){if(a.gc.Bd!=h.length||!a.d)return}else{b=0;c=h.length;for(b=0;b<c;b++)this.C.load(h[b],a);return}else{if(null!=h&&h.d){this.C.load(a,a);return}if(null!=p&&null!=
p.n&&p.n.d){this.C.load(p,a);return}}if(0<a.c.length)for(h=a.c,m=h.length,n=n=0;n<m;n++)this.ab(h[n]);if(d){for(h=0;this.ed;)h++,window.console.log("Possible thread lock avoided: "+h);this.ed=!0;m=a instanceof we&&a.gb instanceof ye;b&&null!=g&&g.d&&(h=this.kd.get(c),null!=h&&this.a.isBuffer(h.la)&&this.a.deleteBuffer(h.la));h=null;if(null!=g)if(!b||g.d){h=a.Yb;if(null==h)throw Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!");n=!1;g.za&&(n=
!0);this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,n);n=this.a.createTexture();n.jh=g.ob;this.ld.set(g.ma,n);this.a.bindTexture(this.a.TEXTURE_2D,n);g.za?this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,g.Cb,g.Bb,0,this.a.RGBA,this.a.UNSIGNED_BYTE,g.za):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,n.jh);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE);this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE);
m?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR));this.a.bindTexture(this.a.TEXTURE_2D,null);n=this.a.createBuffer();this.a.bindBuffer(this.a.ARRAY_BUFFER,n);this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(h),this.a.STATIC_DRAW);
h=new Cd(n,h.length,2);g.d=!1}else h=this.kd.get(c);zf(this.C,0.1);if(m)this.ed=!1,D.pa(this.b+".update"),zf(this.C,0.9);else{if(!b||d.d||l.d){m=l.D;g=m.Sa(new J(d.Rb,d.Sb,d.Tb));m=m.Sa(new J(d.Ob,d.Pb,d.Qb));if(null===this.Gc||g.x<this.Gc)this.Gc=g.x;if(null===this.Dc||m.x>this.Dc)this.Dc=m.x;if(null===this.Hc||g.y<this.Hc)this.Hc=g.y;if(null===this.Ec||m.y>this.Ec)this.Ec=m.y;if(null===this.Ic||g.z<this.Ic)this.Ic=g.z;if(null===this.Fc||m.z>this.Fc)this.Fc=m.z;this.j=[(this.Gc+this.Dc)/2,(this.Hc+
this.Ec)/2,(this.Ic+this.Fc)/2];l.d=!1}b&&d.d&&(l=this.Nc.get(c),null!=l&&this.a.isBuffer(l.la)&&this.a.deleteBuffer(l.la));l=null;!b||d.d?(l=this.a.createBuffer(),d.jb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,l),this.a.bufferData(this.a.ARRAY_BUFFER,d.L,this.a.STATIC_DRAW),l=new Cd(l,d.count,3),d.d=!1):l=this.Nc.get(c);zf(this.C,0.3);b&&e.d&&(g=this.Nc.get(c),null!=g&&this.a.isBuffer(g.la)&&this.a.deleteBuffer(g.la));g=null;!b||e.d?(g=this.a.createBuffer(),e.jb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,
g),this.a.bufferData(this.a.ARRAY_BUFFER,e.L,this.a.STATIC_DRAW),g=new Cd(g,e.count,3),e.d=!1):g=this.ae.get(c);zf(this.C,0.3);b&&f&&f.d&&(e=this.$c.get(c),null!=e&&this.a.isBuffer(e.la)&&this.a.deleteBuffer(e.la));e=null;if(f)if(!b||f.d){if(f.length!=d.length)throw Error("Mismatch between points and point colors.");e=this.a.createBuffer();f.jb();this.a.bindBuffer(this.a.ARRAY_BUFFER,e);this.a.bufferData(this.a.ARRAY_BUFFER,f.L,this.a.STATIC_DRAW);e=new Cd(e,f.count,3);f.d=!1}else e=this.$c.get(c);
zf(this.C,0.2);b&&p&&p.d&&(f=this.jd.get(c),null!=f&&this.a.isBuffer(f.la)&&this.a.deleteBuffer(f.la));f=null;if(p)if(f=p.wc,!b||p.d){if(f.length!=d.length)throw Error("Mismatch between points and scalars.");d=this.a.createBuffer();this.a.bindBuffer(this.a.ARRAY_BUFFER,d);this.a.bufferData(this.a.ARRAY_BUFFER,f,this.a.STATIC_DRAW);f=new Cd(d,f.length,3);p.d=!1}else f=this.jd.get(c);zf(this.C,0.1);b||this.Na.add(a);this.Nc.set(c,l);this.ae.set(c,g);this.$c.set(c,e);this.kd.set(c,h);this.jd.set(c,f);
this.ed=a.d=!1}}else a.d=!1}};function Ug(a,b){var c=b.f.Zc,c=b.Zb.D.Sa(new J(c[0],c[1],c[2])),c=a.s.m.Sa(c),c=Hc(a.s.ya,c);return Math.round(1E3*c)/1E3}q.dg=function(a,b){if(this.u.PICKING_ENABLED){this.Hb(!0,!1);var c=new Uint8Array(4);this.a.readPixels(a,this.G-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
q.Hb=function(a,b){Rg.r.Hb.call(this,a,b);var c=this.Na.v,d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.pf):this.a.bindFramebuffer(this.a.FRAMEBUFFER,null);var e=this.tf;this.a.viewport(0,0,this.M,this.G);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var f=this.s.of,g=this.s.Mb;this.a.uniformMatrix4fv(e.get("projection"),!1,f);this.a.uniformMatrix4fv(e.get("modelview"),!1,g);f=this.j;this.a.uniform3f(e.get(Hg.Pi),parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2]));
this.a.uniform1i(e.get("alphablend"),this.Mj);this.a.uniform1i(e.get("lighting"),this.rh);this.a.uniform1i(e.get("nlights"),this.xh);g=this.Wa.length;for(f=0;f<g;++f){var h=this.Wa[f];if(h instanceof I){var l=new J(1,0,0),l=this.s.m.Sa(l),m=Hc(this.s.ya,l),l=new J(-1,0,0),l=this.s.m.Sa(l),n=Hc(this.s.ya,l),l=new J(0,1,0),l=this.s.m.Sa(l),p=Hc(this.s.ya,l),l=new J(0,-1,0),l=this.s.m.Sa(l),s=Hc(this.s.ya,l),l=new J(0,0,1),l=this.s.m.Sa(l),t=Hc(this.s.ya,l),l=new J(0,0,-1),l=this.s.m.Sa(l),l=Hc(this.s.ya,
l),v=Math.max(m,p,t,n,s,l);v==m||v==n?xe(h,0):v==p||v==s?xe(h,1):v!=t&&v!=l||xe(h,2)}}if(this.u.ORDERING_ENABLED)if("OPACITY"==this.u.ORDERING_COMPARATOR){m=!1;g=this.Wa;h=g.length-1;do if(f=g[h],f instanceof I&&f.Pa){n=f.Eb;m=f.V.c;1==n?m=f.W.c:2==n&&(m=f.eb.c);n=m.length;p=m[0];p.K=Ug(this,p);p.U=f.U;s=m[n-1];s.K=Ug(this,s);s.U=f.U;s=Math.round(1E3*((s.K-p.K)/n))/1E3;for(t=t=1;t<n-1;t++)l=Math.round(1E3*(p.K+t*s))/1E3,m[t].K=l,m[t].U=f.U;m=!0}while(h--);g=this.Na.v;h=g.length-1;do f=g[h],!f.Oa||
1==f.U||f instanceof we||(f.K=Ug(this,f),m=!0);while(h--);m&&this.Na.sort()}else"ID"==this.u.ORDERING_COMPARATOR&&(this.Na.Od=fd,this.Na.sort());if(g=!a&&null!=b&&b&&this.u.STATISTICS_ENABLED)var w=0,x=0,C=0,u=0;var f=this.Nd,h=f.get("vertexPosition"),m=f.get("vertexNormal"),n=f.get("vertexColor"),p=f.get("vertexTexturePos"),s=f.get("vertexScalar"),t=e.get(Hg.uj),l=e.get("useObjectColor"),v=e.get("objectColor"),y=e.get("useScalars"),E=e.get("scalarsReplaceMode"),L=e.get("scalarsMin"),Y=e.get("scalarsMax"),
Q=e.get("scalarsMinColor"),R=e.get("scalarsMaxColor"),da=e.get("scalarsInterpolation"),Z=e.get("scalarsMinThreshold"),aa=e.get("scalarsMaxThreshold"),Ha=e.get("alpha"),sb=e.get(Hg.Ui),la=e.get(Hg.wj),Rf=e.get(Hg.sj),Yg=e.get(Hg.qj),Zg=e.get(Hg.rj),$g=e.get(Hg.Dj),ah=e.get(Hg.Jj),bh=e.get(Hg.Gj),ch=e.get(Hg.Ej),dh=e.get(Hg.Lj),eh=e.get(Hg.Kj),fh=e.get(Hg.Hj),gh=e.get(Hg.Fj),Sf=e.get(Hg.Ij),hh=e.get("objectTransform"),ih=e.get("pointsize"),jh=e.get("lighting"),f=d;do{var N=c[d-f];if(N){var U=null;N instanceof
we&&N.gb&&(U=N.gb);if(N.Oa&&(!U||U.Oa)){var ra=N.ma,Ra=N.Cc,Ba=this.Nc.get(ra),$a=this.ae.get(ra),se=this.$c.get(ra),Ob=this.jd.get(ra),te=this.kd.get(ra);this.a.bindBuffer(this.a.ARRAY_BUFFER,Ba.la);this.a.vertexAttribPointer(h,Ba.tb,this.a.FLOAT,!1,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,$a.la);this.a.vertexAttribPointer(m,$a.tb,this.a.FLOAT,!1,0,0);a?this.a.uniform1i(t,!0):this.a.uniform1i(t,!1);!se||a||Ra?($a=1,Ra&&!a&&($a=0),this.a.uniform1i(l,$a),$a=N.mb,a&&($a=[Math.floor(ra%65025%255)/
255,Math.floor(ra%65025/255)/255,Math.floor(ra/65025)/255]),this.a.uniform3f(v,parseFloat($a[0]),parseFloat($a[1]),parseFloat($a[2])),this.a.vertexAttribPointer(n,Ba.tb,this.a.FLOAT,!1,0,0)):(this.a.uniform1i(l,!1),this.a.bindBuffer(this.a.ARRAY_BUFFER,se.la),this.a.vertexAttribPointer(n,se.tb,this.a.FLOAT,!1,0,0));!Ob||a||Ra?(this.a.uniform1i(y,!1),this.a.vertexAttribPointer(s,Ba.tb,this.a.FLOAT,!1,0,0)):(this.a.uniform1i(y,!0),this.a.uniform1i(E,N.t.rf),ra=N.t.xb,Ra=N.t.vb,this.a.uniform3f(Q,parseFloat(ra[0]),
parseFloat(ra[1]),parseFloat(ra[2])),this.a.uniform3f(R,parseFloat(Ra[0]),parseFloat(Ra[1]),parseFloat(Ra[2])),this.a.uniform1f(Z,parseFloat(N.t.S)),this.a.uniform1f(aa,parseFloat(N.t.X)),this.a.uniform1f(L,parseFloat(N.t.Ma)),this.a.uniform1f(Y,parseFloat(N.t.Ia)),this.a.uniform1i(da,parseInt(N.t.Sd,10)),this.a.bindBuffer(this.a.ARRAY_BUFFER,Ob.la),this.a.vertexAttribPointer(s,Ob.tb,this.a.FLOAT,!1,0,0));this.a.uniform1f(Ha,parseFloat(N.U));N.w&&te&&!a?(this.a.uniform1i(la,!0),this.a.activeTexture(this.a.TEXTURE0),
this.a.bindTexture(this.a.TEXTURE_2D,this.ld.get(N.w.ma)),this.a.uniform1i(Yg,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,te.la),this.a.vertexAttribPointer(p,te.tb,this.a.FLOAT,!1,0,0),this.a.uniform1i(Sf,!1)):(this.a.uniform1i(la,!1),this.a.vertexAttribPointer(p,Ba.tb,this.a.FLOAT,!1,0,0));U&&(this.a.uniform1i(Sf,!0),this.a.uniform1f($g,U.S),this.a.uniform1f(ah,U.X),this.a.uniform1f(bh,U.Ma),this.a.uniform1f(ch,U.Ia),ra=U.xb,Ra=U.vb,this.a.uniform3f(fh,parseFloat(ra[0]),parseFloat(ra[1]),parseFloat(ra[2])),
this.a.uniform3f(gh,parseFloat(Ra[0]),parseFloat(Ra[1]),parseFloat(Ra[2])),this.a.uniform1f(dh,U.Z),this.a.uniform1f(eh,U.Y),Ob=U.o,this.a.uniform1i(Rf,!1),U.Pa?this.a.uniform1f(Ha,parseFloat(U.U)):Ob&&Ob.Oa&&(U=N.o.ma,this.a.uniform1i(Rf,!0),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.ld.get(U)),this.a.uniform1i(Zg,1),this.a.uniform1f(sb,Ob.U)));this.a.uniformMatrix4fv(hh,!1,N.Zb.ff);U=1;"POINTS"==N.ba&&(U=N.Jc);this.a.uniform1f(ih,U);this.a.uniform1i(jh,N.Bc);
this.a.uniform1i(e.get("highlight"),!1);this.a.uniform1i(e.get("picking"),!1);this.a.uniform1i(e.get("alphablend"),1);this.a.uniform1i(e.get("nlights"),3);this.a.uniform3f(e.get("ambicolor"),1,1,1);this.a.uniform3fv(e.get("diffcolor"),[0.6,0.6,0.6,0.6,0.6,0.6,0.4,0.4,0.4]);this.a.uniform3fv(e.get("speccolor"),[0.4,0.4,0.4,0.2,0.2,0.2,0.4,0.4,0.4]);this.a.uniform3fv(e.get("lightdir"),[1,1,2,0,1,2,0,0,1]);this.a.uniform1f(e.get("ambient"),0.6);this.a.uniform1f(e.get("diffuse"),0.4);this.a.uniform1f(e.get("specular"),
0.2);this.a.uniform1f(e.get("shininess"),2);U=-1;N.ba==ad?(U=this.a.TRIANGLES,g&&(x+=Ba.sb/3)):"LINES"==N.ba?(this.a.lineWidth(N.nc),U=this.a.LINES,g&&(C+=Ba.sb/2)):"POINTS"==N.ba?(U=this.a.POINTS,g&&(u+=Ba.sb)):"TRIANGLE_STRIPS"==N.ba?(U=this.a.TRIANGLE_STRIP,g&&(x+=Ba.sb/3)):"POLYGONS"==N.ba&&(U=0==Ba.sb%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,g&&(x+=Ba.sb/3));g&&(w+=Ba.sb);"front"==N.jc?(this.a.enable(this.a.CULL_FACE),this.a.cullFace(this.a.FRONT)):"back"==N.jc?(this.a.enable(this.a.CULL_FACE),
this.a.cullFace(this.a.BACK)):this.a.disable(this.a.CULL_FACE);this.a.drawArrays(U,0,Ba.sb)}}}while(--f);g&&(c="Objects: "+d+" | "+("Vertices: "+w+" | "),c+="Triangles: "+Math.round(x)+" | ",c+="Lines: "+C+" | ",c+="Points: "+u+" | ",c+="Textures: "+this.ld.hb(),window.console.log(c))}};q.rd=function(){this.fe=null;delete this.fe;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);Rg.r.rd.call(this)};A("X.renderer3D",Rg);A("X.renderer3D.prototype.init",Rg.prototype.ia);
A("X.renderer3D.prototype.add",Rg.prototype.add);A("X.renderer3D.prototype.onShowtime",Rg.prototype.$f);A("X.renderer3D.prototype.onRender",Rg.prototype.Yf);A("X.renderer3D.prototype.get",Rg.prototype.get);A("X.renderer3D.prototype.render",Rg.prototype.fc);A("X.renderer3D.prototype.destroy",Rg.prototype.rd);A("X.renderer3D.prototype.resetBoundingBox",Rg.prototype.ki);A("X.renderer3D.prototype.resetViewAndRender",Rg.prototype.uc);A("X.renderer3D.prototype.pick",Rg.prototype.dg);
A("X.renderer3D.prototype.setAlphablend",Rg.prototype.gg);A("X.renderer3D.prototype.toggleAlphablend",Rg.prototype.Gi);function W(){dg.call(this);this.b="renderer2D";this.gf=this.Td=this.ef=this.Rd=this.yb=null;this.hd=this.Vb=this.Wb=this.ge=this.he=0;this.Y=this.Z=this.X=this.S=this.cf=-1}B(W,dg);W.prototype.Oh=ba();W.prototype.Xh=ba();W.prototype.Me=function(a){W.r.Me.call(this,a);var b=this.Wa[0];if(b){var c=this.yb;b["index"+c]=a.I?b["index"+c]+1:b["index"+c]-1;eval("this.onScroll();")}};
W.prototype.Yh=function(a){var b=this.Wa[0];if(b){var c=b.Y-b.Z,d=c/2,e=parseInt(c+c/15*-a.le,10);a=parseInt(d+d/15*a.Yd,10);c==e&&e++;d==a&&a++;b.Z-=parseInt(d-a,10);b.Z-=parseInt(c-e,10);b.Z=Math.max(b.Z,b.Ma);b.Y-=parseInt(d-a,10);b.Y+=parseInt(c-e,10);b.Y=Math.min(b.Y,b.Ia);eval("this.onWindowLevel();")}};W.prototype.__defineGetter__("orientation",k("yb"));
W.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();if("X"!=a&&"Y"!=a&&"Z"!=a)throw Error("Invalid orientation.");this.yb=a});q=W.prototype;q.ia=function(){if(!this.yb)throw Error("No 2D orientation set.");W.r.ia.call(this,"2d");this.a.fillStyle="rgba(0,0,0,0)";this.a.fillRect(0,0,this.ka.width,this.ka.height);this.Rd=Od("canvas");this.Td=Od("canvas");G(this.s,pd,this.Yh.bind(this))};q.rotate=function(){this.hd++};q.li=function(){this.hd--};
q.uc=function(){W.r.uc.call(this);Vg(this);var a=this.Wa[0];a&&(a.Y=a.Ia,a.Z=a.Ma)};
q.ab=function(a){W.r.ab.call(this,a);var b=!1;this.get(a.ma)&&(b=!0);if(a instanceof I){var c=a.n,d=a.o,e=a.ea;if(null!=d&&null!=d.n&&d.n.d)this.ab(d);else if(null!=e&&null!=e.n&&e.n.d)this.C.load(e,a);else{if(null!=c&&r(c))if(null!=a.gc){if(a.gc.Bd!=c.length||b&&!a.d)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.C.load(c[b],a);return}else if(null!=c&&c.d){this.C.load(a,a);return}var d=c=0,e=a.fa,f=a.H;"X"==this.yb?(this.Xb=a.V.c,c=e[1],d=e[2],this.Wb=f[1],this.Vb=f[2]):"Y"==this.yb?(this.Xb=a.W.c,
c=e[0],d=e[2],this.Wb=f[0],this.Vb=f[2]):"Z"==this.yb&&(this.Xb=a.eb.c,c=e[0],d=e[1],this.Wb=f[0],this.Vb=f[1]);this.he=c;this.ge=d;e=this.Rd;e.width=c;e.height=d;f=this.Td;f.width=c;f.height=d;this.ef=e.getContext("2d");this.gf=f.getContext("2d");b||(this.Na.add(a),Vg(this))}}};function Vg(a){var b=Math.min(a.M/(a.he*a.Wb),a.G/(a.ge*a.Vb));a.s.m.i(2,3,b)}
q.Hb=function(a,b){W.r.Hb.call(this,a,b);if(0!=this.Na.v.length){var c=this.M,d=this.G,e=this.s.m;this.a.save();this.a.clearRect(-c,-d,2*c,2*d);this.a.restore();var f=1*e.aa(0,3),g=-1*e.aa(1,3),h=Math.max(e.aa(2,3),0.6);this.a.setTransform(h,0,0,h,f,g);var e=this.Wa[0],l=e["index"+this.yb],m=this.Xb[parseInt(l,10)],n=m.w.za,m=m.o,p=null;m&&(p=m.za);var s=this.he,t=this.ge,v=this.ef,w=this.gf,x=v.getImageData(0,0,s,t),C=w.getImageData(0,0,s,t),u=x.data,y=C.data,E=u.length,L=e.Ia,Y=e.S,Q=e.X,R=e.Z/
L,da=e.Y/L;if(this.cf!=l||this.S!=Y||this.X!=Q||this.Z!=R||this.Y!=da){var Z=0;do{var aa=[0,0,0,0],Ha=[0,0,0,0],sb=n[Z]/255*L,la=n[Z],la=(la/255-R)/(da-R),la=255*la;sb>=Y&&sb<=Q&&(aa=new J(e.xb[0],e.xb[1],e.xb[2]),aa=(new J(e.vb[0],e.vb[1],e.vb[2])).scale(la).add(aa.scale(255-la)),aa=[Math.floor(aa.x),Math.floor(aa.y),Math.floor(aa.z),255],m&&(Ha=[p[Z],p[Z+1],p[Z+2],p[Z+3]]));la=E-1-Z;u[la-3]=aa[0];u[la-2]=aa[1];u[la-1]=aa[2];u[la]=aa[3];y[la-3]=Ha[0];y[la-2]=Ha[1];y[la-1]=Ha[2];y[la]=Ha[3];Z+=4}while(Z<
E);v.putImageData(x,0,0);w.putImageData(C,0,0);this.cf=l;this.S=Y;this.X=Q;this.Z=R;this.Y=da}this.a.globalAlpha=1;this.a.translate(c/2/h,d/2/h);this.a.rotate(0.5*Math.PI*this.hd);switch(this.hd%4){case 1:c=f;f=g;g=-c;break;case 2:f*=-1;g*=-1;break;case 3:c=f,f=-g,g=c}f=-s*this.Wb/2+f;g=-t*this.Vb/2+g;this.a.drawImage(this.Rd,f,g,s*this.Wb,t*this.Vb);m&&e.o.Oa&&(this.a.globalAlpha=e.o.U,this.a.drawImage(this.Td,f,g,s*this.Wb,t*this.Vb))}};A("X.renderer2D",W);A("X.renderer2D.prototype.init",W.prototype.ia);
A("X.renderer2D.prototype.add",W.prototype.add);A("X.renderer2D.prototype.onShowtime",W.prototype.$f);A("X.renderer2D.prototype.onRender",W.prototype.Yf);A("X.renderer2D.prototype.onScroll",W.prototype.Oh);A("X.renderer2D.prototype.onWindowLevel",W.prototype.Xh);A("X.renderer2D.prototype.get",W.prototype.get);A("X.renderer2D.prototype.rotate",W.prototype.rotate);A("X.renderer2D.prototype.rotateCounter",W.prototype.li);A("X.renderer2D.prototype.resetViewAndRender",W.prototype.uc);
A("X.renderer2D.prototype.render",W.prototype.fc);A("X.renderer2D.prototype.destroy",W.prototype.rd);function Wg(){P.call(this);this.b="mesh";Fa(this,new xc)}B(Wg,P);A("X.mesh",Wg);function Xg(){P.call(this);this.b="fibers";Fa(this,new xc)}B(Xg,P);A("X.fibers",Xg);
