/*
 *
 * Copyright (c) 2013 FEops bvba <info@feops.com>
 *
 * Modification and redistribution of this software without written consent
 * of FEops bvba is prohibited, with the following exception:
 * this software can be distributed by web servers to allow the rendering
 * of WebGL models; with this purpose it may be copied in unaltered state
 * to an unlimited number of other computers.
 *
 * This software contains parts of the XTK toolkit (http://www.goXTK.com)
 *
 * Copyright (c) 2012 The X Toolkit Developers <dev@goXTK.com>
 *
 *    The X Toolkit (XTK) is licensed under the MIT License:
 *      http://www.opensource.org/licenses/mit-license.php
 *
 *      "Free software" is a matter of liberty, not price.
 *      "Free" as in "free speech", not as in "free beer".
 *                                         - Richard M. Stallman
 *
 * FUELED BY:
 *  - the wonderful Constructive Solid Geometry library by Evan Wallace (http://madebyevan.com)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/csg/LICENSE
 *
 *  - parts of the Google Closure Library (http://code.google.com/closure/library)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/closure-library/LICENSE
 *
 *  - the JSXCompressor library (http://jsxgraph.uni-bayreuth.de/wp/jsxcompressor/)
 *    LICENSE: https://raw.github.com/xtk/X/master/lib/JXG/LICENSE
 *
 * MORE CREDITS: https://raw.github.com/xtk/X/master/LICENSE
 *
 */
function j(a){throw a;}var l=void 0,p=!0,r=null,s=!1;function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function t(a){return function(){return this[a]}}var u,ga=ga||{},ha=this;function B(a,b,c){a=a.split(".");c=c||ha;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&b!==l?c[d]=b:c=c[d]?c[d]:c[d]={}}B("goog.LOCALE","en");B("goog.TRUSTED_SITE",p);B("goog.ENABLE_DEBUG_LOADER",p);function ia(){}
function ka(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function la(a){return a!==l}function D(a){return"array"==ka(a)}function ma(a){var b=ka(a);return"array"==b||"object"==b&&"number"==typeof a.length}function na(a){return"string"==typeof a}function E(a){return"number"==typeof a}function oa(a){var b=typeof a;return"object"==b&&a!=r||"function"==b}var pa="closure_uid_"+(1E9*Math.random()>>>0),qa=0;function sa(a,b,c){return a.call.apply(a.bind,arguments)}
function ta(a,b,c){a||j(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ua(a,b,c){ua=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sa:ta;return ua.apply(r,arguments)}
function va(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var wa=ga.Lg&&Date.now||function(){return+new Date};function F(a,b){B(a,b,l)}function H(a,b){function c(){}c.prototype=b.prototype;a.s=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Fk=function(a,c,f){var g=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,g)}};function ya(a,b,c){this.Fa=this.Ea=this.Da=0;3==arguments.length?(this.Da=Number(a),this.Ea=Number(b),this.Fa=Number(c)):a instanceof ya?(this.Da=Number(a.x()),this.Ea=Number(a.y()),this.Fa=Number(a.b())):(this.Da=Number(a[0]),this.Ea=Number(a[1]),this.Fa=Number(a[2]))}ya.prototype={f:function(){return new ya(this.Da,this.Ea,this.Fa)},length:function(){return Math.sqrt(za(this,this))},x:t("Da"),y:t("Ea"),b:t("Fa")};
function Aa(a,b){return new ya(a.Ea*b.b()-a.Fa*b.y(),a.Fa*b.x()-a.Da*b.b(),a.Da*b.y()-a.Ea*b.x())}function Ba(a){var b=a.length();return new ya(a.Da/b,a.Ea/b,a.Fa/b)}function za(a,b){return a.Da*b.x()+a.Ea*b.y()+a.Fa*b.b()}function Ca(a,b){return new ya(a.Da*b,a.Ea*b,a.Fa*b)}function Da(a,b){return new ya(a.Da-b.x(),a.Ea-b.y(),a.Fa-b.b())}function Ea(a,b){return new ya(a.Da+b.x(),a.Ea+b.y(),a.Fa+b.b())}function Fa(a){return new ya(-a.Da,-a.Ea,-a.Fa)};var I=I||{};I.zj=p;I.ta=function(a){eval("X.DEV === undefined")||window.console.time(a)};I.oa=function(a){eval("X.DEV === undefined")||window.console.timeEnd(a)};window["X.counter"]=new function(){this.Tg=0;this.nj=function(){return this.Tg++}};function Ha(a,b){for(var c in b){var d=b.__lookupGetter__(c),e=b.__lookupSetter__(c);d||e?(d&&a.__defineGetter__(c,d),e&&a.__defineSetter__(c,e)):a[c]=b[c]}}var Ia=window.yg;
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(this instanceof c?this:a||window,e.concat(d.call(arguments)))}function c(){}"function"!==typeof this&&j(new TypeError("Function.prototype.bind - what is trying to be bound is not callable"));var d=Array.prototype.slice,e=d.call(arguments,1),f=this;c.prototype=this.prototype;b.prototype=new c;return b});
for(var Ja=0,Ka=["ms","moz","webkit","o"],La=0;La<Ka.length&&!window.requestAnimationFrame;++La)window.requestAnimationFrame=window[Ka[La]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Ka[La]+"CancelAnimationFrame"]||window[Ka[La]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(0,16-(b-Ja)),d=window.setTimeout(function(){a(b+c)},c);Ja=b+c;return d});
window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});
"slice"in ArrayBuffer.prototype||(ArrayBuffer.prototype.slice=function(a,b){a===l&&j(Error("Not enough arguments."));var c=b||this.byteLength;0>a&&(a=this.byteLength+a);0>c&&(c=this.byteLength+c);c<a&&(c=a=0);0>a&&(a=0);0>c&&(c=0);a>this.byteLength&&(a=this.byteLength);c>this.byteLength&&(c=this.byteLength);for(var d=new ArrayBuffer(c-a),e=new Uint8Array(this),f=new Uint8Array(d),g=a,h=0;g<c;++g,++h)f[h]=e[g];return d});F("$",Ia);F("Function.prototype.bind",Function.prototype.bind);
F("window.requestAnimationFrame",window.requestAnimationFrame);F("window.cancelAnimationFrame",window.cancelAnimationFrame);var Ma={},Na;function Pa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Pa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}H(Pa,Error);Pa.prototype.name="CustomError";function Qa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Ra(a){if(!Sa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ta,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ua,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Va,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Xa,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ya,"&#39;"));return a}var Ta=/&/g,Ua=/</g,Va=/>/g,Xa=/"/g,Ya=/'/g,Sa=/[&<>"']/;var Za={};B("goog.asserts.ENABLE_ASSERTS",s);function $a(a,b){b.unshift(a);Pa.call(this,Qa.apply(r,b));b.shift();this.Mk=a}H($a,Pa);$a.prototype.name="AssertionError";function ab(a,b){Za.Cj&&j(new $a("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var bb={};var cb="closure_listenable_"+(1E6*Math.random()|0);function db(a){try{return!(!a||!a[cb])}catch(b){return s}}var eb=0;function gb(a,b,c,d,e,f){gb.Dj&&(this.kh=Error().stack);this.dc=a;this.Nd=b;this.src=c;this.type=d;this.capture=!!e;this.Gd=f;this.key=++eb;this.xc=this.wd=s}B("goog.events.Listener.ENABLE_MONITORING",s);function hb(a){a.xc=p;a.dc=r;a.Nd=r;a.src=r;a.Gd=r};function ib(a,b){for(var c in a)b.call(l,a[c],c,a)}function jb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function kb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var lb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<lb.length;f++)c=lb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};B("goog.NATIVE_ARRAY_PROTOTYPES",ga.Lg);
var nb=Array.prototype,ob=ga.Vd&&nb.indexOf?function(a,b,c){return nb.indexOf.call(a,b,c)}:function(a,b,c){c=c==r?0:0>c?Math.max(0,a.length+c):c;if(na(a))return!na(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},pb=ga.Vd&&nb.forEach?function(a,b,c){nb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=na(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},qb=ga.Vd&&nb.map?function(a,b,c){return nb.map.call(a,b,c)}:function(a,b,c){for(var d=
a.length,e=Array(d),f=na(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},rb=ga.Vd&&nb.every?function(a,b,c){return nb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=na(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return s;return p};function sb(a,b){var c=ob(a,b),d;(d=0<=c)&&nb.splice.call(a,c,1);return d}function tb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function ub(a,b,c){return 2>=arguments.length?nb.slice.call(a,b):nb.slice.call(a,b,c)};function vb(a){this.src=a;this.ia={};this.bd=0}u=vb.prototype;u.add=function(a,b,c,d,e){var f=this.ia[a];f||(f=this.ia[a]=[],this.bd++);var g=wb(f,b,d,e);-1<g?(a=f[g],c||(a.wd=s)):(a=new gb(b,r,this.src,a,!!d,e),a.wd=c,f.push(a));return a};u.remove=function(a,b,c,d){if(!(a in this.ia))return s;var e=this.ia[a];b=wb(e,b,c,d);return-1<b?(hb(e[b]),nb.splice.call(e,b,1),0==e.length&&(delete this.ia[a],this.bd--),p):s};
function xb(a,b){var c=b.type;if(!(c in a.ia))return s;var d=sb(a.ia[c],b);d&&(hb(b),0==a.ia[c].length&&(delete a.ia[c],a.bd--));return d}u.Od=function(a){var b=0,c;for(c in this.ia)if(!a||c==a){for(var d=this.ia[c],e=0;e<d.length;e++)++b,hb(d[e]);delete this.ia[c];this.bd--}return b};u.Wc=function(a,b,c,d){a=this.ia[a];var e=-1;a&&(e=wb(a,b,c,d));return-1<e?a[e]:r};
u.Hd=function(a,b){var c=la(a),d=la(b),e;a:{e=this.ia;var f=function(e){for(var f=0;f<e.length;++f)if((!c||e[f].type==a)&&(!d||e[f].capture==b))return p;return s},g;for(g in e)if(f.call(l,e[g])){e=p;break a}e=s}return e};function wb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.xc&&f.dc==b&&f.capture==!!c&&f.Gd==d)return e}return-1};var zb={},Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb;B("goog.userAgent.ASSUME_IE",s);B("goog.userAgent.ASSUME_GECKO",s);B("goog.userAgent.ASSUME_WEBKIT",s);B("goog.userAgent.ASSUME_MOBILE_WEBKIT",s);B("goog.userAgent.ASSUME_OPERA",s);B("goog.userAgent.ASSUME_ANY_VERSION",s);var Ib=zb.Ag||zb.zg||zb.Dg||zb.Gg||zb.Eg;function Jb(){return ha.navigator?ha.navigator.userAgent:r}function Kb(){return ha.navigator}
if(!Ib){Db=Cb=Bb=Ab=s;var Lb;if(!Ib&&(Lb=Jb())){var Mb=Kb();Ab=0==Lb.lastIndexOf("Opera",0);Bb=!Ab&&(-1!=Lb.indexOf("MSIE")||-1!=Lb.indexOf("Trident"));Cb=!Ab&&-1!=Lb.indexOf("WebKit");Db=!Ab&&!Cb&&!Bb&&"Gecko"==Mb.product}}var Nb=Ib?zb.Eg:Ab,K=Ib?zb.Ag:Bb,Ob=Ib?zb.zg:Db,Pb=Ib?zb.Gg||zb.Dg:Cb,Qb,Rb=Kb();Qb=Rb&&Rb.platform||"";B("goog.userAgent.ASSUME_MAC",s);B("goog.userAgent.ASSUME_WINDOWS",s);B("goog.userAgent.ASSUME_LINUX",s);B("goog.userAgent.ASSUME_X11",s);B("goog.userAgent.ASSUME_ANDROID",s);
B("goog.userAgent.ASSUME_IPHONE",s);B("goog.userAgent.ASSUME_IPAD",s);var Tb=zb.Cg||zb.Hg||zb.Bg||zb.Ig||zb.tj||zb.wj||zb.vj;Tb||(Eb=-1!=Qb.indexOf("Mac"),Fb=-1!=Qb.indexOf("Win"),Gb=-1!=Qb.indexOf("Linux"),Hb=!!Kb()&&-1!=(Kb().appVersion||"").indexOf("X11"));var Ub=Tb?zb.Cg:Eb,Vb=Tb?zb.Hg:Fb,Wb=Tb?zb.Bg:Gb,Xb=Tb?zb.Ig:Hb;function Yb(){var a=ha.document;return a?a.documentMode:l}var Zb;
a:{var $b="",ac;if(Nb&&ha.opera)var bc=ha.opera.version,$b="function"==typeof bc?bc():bc;else if(Ob?ac=/rv\:([^\);]+)(\)|;)/:K?ac=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Pb&&(ac=/WebKit\/(\S+)/),ac)var cc=ac.exec(Jb()),$b=cc?cc[1]:"";if(K){var dc=Yb();if(dc>parseFloat($b)){Zb=String(dc);break a}}Zb=$b}var ec={};
function fc(a){var b;if(!(b=zb.uj))if(!(b=ec[a])){b=0;for(var c=String(Zb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var n=m.exec(g)||["","",""],q=k.exec(h)||["","",""];if(0==n[0].length&&0==q[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==n[1].length?
0:parseInt(n[1],10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==n[2].length)<(0==q[2].length)?-1:(0==n[2].length)>(0==q[2].length)?1:0)||(n[2]<q[2]?-1:n[2]>q[2]?1:0)}while(0==b)}b=ec[a]=0<=b}return b}var gc=ha.document,hc=!gc||!K?l:Yb()||("CSS1Compat"==gc.compatMode?parseInt(Zb,10):5);var ic=!K||K&&9<=hc,jc=K&&!fc("9");!Pb||fc("528");Ob&&fc("1.9b")||K&&fc("8")||Nb&&fc("9.5")||Pb&&fc("528");Ob&&!fc("8")||K&&fc("9");function kc(){kc.Jj!=lc&&(kc.Fj&&(this.kh=Error().stack),this[pa]||(this[pa]=++qa))}var lc=0;B("goog.Disposable.MONITORING_MODE",0);B("goog.Disposable.INCLUDE_STACK_ON_CREATION",p);function mc(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.gc=s;this.rg=p}mc.prototype.stopPropagation=function(){this.gc=p};mc.prototype.preventDefault=function(){this.defaultPrevented=p;this.rg=s};function nc(a){nc[" "](a);return a}nc[" "]=ia;function oc(a,b){mc.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=r;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=s;this.state=r;this.Di=s;this.Gb=r;a&&this.Ia(a,b)}H(oc,mc);
oc.prototype.Ia=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Ob){var e;a:{try{nc(d.nodeName);e=p;break a}catch(f){}e=s}e||(d=r)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Pb||a.offsetX!==l?a.offsetX:a.layerX;this.offsetY=Pb||a.offsetY!==l?a.offsetY:a.layerY;this.clientX=a.clientX!==l?a.clientX:a.pageX;this.clientY=a.clientY!==l?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Di=Ub?a.metaKey:a.ctrlKey;this.state=a.state;this.Gb=a;a.defaultPrevented&&this.preventDefault()};oc.prototype.stopPropagation=function(){oc.s.stopPropagation.call(this);this.Gb.stopPropagation?this.Gb.stopPropagation():this.Gb.cancelBubble=p};
oc.prototype.preventDefault=function(){oc.s.preventDefault.call(this);var a=this.Gb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=s,jc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var pc="closure_lm_"+(1E6*Math.random()|0),qc={};B("goog.events.CAPTURE_SIMULATION_MODE",2);var rc=0;function L(a,b,c,d,e){if(D(b)){for(var f=0;f<b.length;f++)L(a,b[f],c,d,e);return r}c=sc(c);return db(a)?a.cc(b,c,d,e):tc(a,b,c,s,d,e)}
function tc(a,b,c,d,e,f){b||j(Error("Invalid event type"));var g=!!e;if(g&&!ic){if(0==bb.jf)return ab("Can not register capture listener in IE8-."),r;if(1==bb.jf)return r}var h=uc(a);h||(a[pc]=h=new vb(a));c=h.add(b,c,d,e,f);if(c.Nd)return c;var m=vc,k=ic?function(a){return m.call(k.src,k.dc,a)}:function(a){a=m.call(k.src,k.dc,a);if(!a)return a};d=k;c.Nd=d;d.src=a;d.dc=c;a.addEventListener?a.addEventListener(b,d,g):a.attachEvent(b in qc?qc[b]:qc[b]="on"+b,d);rc++;return c}
function wc(a,b,c,d,e){if(D(b)){for(var f=0;f<b.length;f++)wc(a,b[f],c,d,e);return r}c=sc(c);return db(a)?a.cg(b,c,d,e):tc(a,b,c,p,d,e)}function xc(a,b,c,d,e){if(D(b))for(var f=0;f<b.length;f++)xc(a,b[f],c,d,e);else if(c=sc(c),db(a))a.ff(b,c,d,e);else if(a&&(a=uc(a)))(b=a.Wc(b,c,!!d,e))&&yc(b)}
function yc(a){if(E(a)||!a||a.xc)return s;var b=a.src;if(db(b))return xb(b.Fb,a);var c=a.type,d=a.Nd;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(c in qc?qc[c]:qc[c]="on"+c,d);rc--;(c=uc(b))?(xb(c,a),0==c.bd&&(c.src=r,b[pc]=r)):hb(a);return p}function zc(a,b,c,d){var e=1;if(a=uc(a))if(b=a.ia[b]){b=tb(b);for(a=0;a<b.length;a++){var f=b[a];f&&(f.capture==c&&!f.xc)&&(e&=Ac(f,d)!==s)}}return Boolean(e)}
function Ac(a,b){var c=a.dc,d=a.Gd||a.src;a.wd&&yc(a);return c.call(d,b)}
function vc(a,b){if(a.xc)return p;if(!ic){var c;if(!(c=b))a:{c=["window","event"];for(var d=ha,e;e=c.shift();)if(d[e]!=r)d=d[e];else{c=r;break a}c=d}e=c;c=new oc(e,this);d=p;if(2==bb.jf){if(!(0>e.keyCode||e.returnValue!=l)){a:{var f=s;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(g){f=p}if(f||e.returnValue==l)e.returnValue=p}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,h=e.length-1;!c.gc&&0<=h;h--)c.currentTarget=e[h],d&=zc(e[h],f,p,c);for(h=0;!c.gc&&h<e.length;h++)c.currentTarget=
e[h],d&=zc(e[h],f,s,c)}}else d=Ac(a,c);return d}return Ac(a,new oc(b,this))}function uc(a){a=a[pc];return a instanceof vb?a:r}var Bc="__closure_events_fn_"+(1E9*Math.random()>>>0);function sc(a){return"function"==ka(a)?a:a[Bc]||(a[Bc]=function(b){return a.handleEvent(b)})};function Cc(){kc.call(this);this.Fb=new vb(this);this.$g=this}H(Cc,kc);Cc.prototype[cb]=p;u=Cc.prototype;u.Ue=r;u.Xe=ca("Ue");u.addEventListener=function(a,b,c,d){L(this,a,b,c,d)};u.removeEventListener=function(a,b,c,d){xc(this,a,b,c,d)};
u.dispatchEvent=function(a){var b,c=this.Ue;if(c)for(b=[];c;c=c.Ue)b.push(c);var c=this.$g,d=a.type||a;if(na(a))a=new mc(a,c);else if(a instanceof mc)a.target=a.target||c;else{var e=a;a=new mc(d,c);mb(a,e)}var e=p,f;if(b)for(var g=b.length-1;!a.gc&&0<=g;g--)f=a.currentTarget=b[g],e=Dc(f,d,p,a)&&e;a.gc||(f=a.currentTarget=c,e=Dc(f,d,p,a)&&e,a.gc||(e=Dc(f,d,s,a)&&e));if(b)for(g=0;!a.gc&&g<b.length;g++)f=a.currentTarget=b[g],e=Dc(f,d,s,a)&&e;return e};
u.cc=function(a,b,c,d){return this.Fb.add(String(a),b,s,c,d)};u.cg=function(a,b,c,d){return this.Fb.add(String(a),b,p,c,d)};u.ff=function(a,b,c,d){return this.Fb.remove(String(a),b,c,d)};function Dc(a,b,c,d){b=a.Fb.ia[String(b)];if(!b)return p;b=tb(b);for(var e=p,f=0;f<b.length;++f){var g=b[f];if(g&&!g.xc&&g.capture==c){var h=g.dc,m=g.Gd||g.src;g.wd&&xb(a.Fb,g);e=h.call(m,d)!==s&&e}}return e&&d.rg!=s}u.Wc=function(a,b,c,d){return this.Fb.Wc(String(a),b,c,d)};
u.Hd=function(a,b){return this.Fb.Hd(la(a)?String(a):l,b)};function M(){Cc.call(this);this.c="base";this.la=window["X.counter"].nj();this.e=s}H(M,Cc);M.prototype.__defineGetter__("classname",t("c"));M.prototype.__defineGetter__("id",t("la"));F("X.base",M);function Ec(a,b){this.sa=new ya(a);this.ca=new ya(b)}Ec.prototype={f:function(){return new Ec(this.sa.f(),this.ca.f())},bc:function(){this.ca=Fa(this.ca)}};function Fc(a,b){this.ca=a;this.cd=b}Fc.prototype={f:function(){return new Fc(this.ca.f(),this.cd)},bc:function(){this.ca=Fa(this.ca);this.cd=-this.cd}};function Gc(a,b){this.jb=a;this.Sd=b;var c=a[0].sa,d=a[2].sa,d=Ba(Aa(Da(a[1].sa,c),Da(d,c)));this.Ca=new Fc(d,za(d,c))}Gc.prototype={f:function(){var a=this.jb.map(function(a){return a.f()});return new Gc(a,this.Sd)},bc:function(){this.jb.reverse().map(function(a){a.bc()});this.Ca.bc()}};
function Hc(a,b,c,d,e,f){for(var g=0,h=[],m=0;m<a.jb.length;m++){var k=za(b.ca,a.jb[m].sa)-b.cd,k=-1E-5>k?2:1E-5<k?1:0,g=g|k;h.push(k)}switch(g){case 0:(0<za(b.ca,a.Ca.ca)?c:d).push(a);break;case 1:e.push(a);break;case 2:f.push(a);break;case 3:c=[];d=[];for(m=0;m<a.jb.length;m++){var n=(m+1)%a.jb.length,k=h[m],q=h[n],g=a.jb[m],n=a.jb[n];2!=k&&c.push(g);1!=k&&d.push(2!=k?g.f():g);3==(k|q)&&(k=(b.cd-za(b.ca,g.sa))/za(b.ca,Da(n.sa,g.sa)),k=new Ec(Ea(g.sa,Ca(Da(n.sa,g.sa),k)),Ea(g.ca,Ca(Da(n.ca,g.ca),
k))),c.push(k),d.push(k.f()))}3<=c.length&&e.push(new Gc(c,a.Sd));3<=d.length&&f.push(new Gc(d,a.Sd))}};function Ic(a){this.fa=this.ga=this.Ca=r;this.B=[];a&&Jc(this,a)}Ic.prototype={f:function(){var a=new Ic,b=this.Ca&&this.Ca.f();a.Ca=b;b=this.ga&&this.ga.f();a.ga=b;b=this.fa&&this.fa.f();a.fa=b;a.Qd(this.B.map(function(a){return a.f()}));return a},ba:function(){for(var a=0;a<this.B.length;a++)this.B[a].bc();this.Ca.bc();this.ga&&this.ga.ba();this.fa&&this.fa.ba();a=this.ga;this.ga=this.fa;this.fa=a},Qd:ca("B")};
function Jc(a,b){if(b.length){a.Ca||(a.Ca=b[0].Ca.f());for(var c=[],d=[],e=0;e<b.length;e++)Hc(b[e],a.Ca,a.B,a.B,c,d);c.length&&(a.ga||(a.ga=new Ic),Jc(a.ga,c));d.length&&(a.fa||(a.fa=new Ic),Jc(a.fa,d))}}function Kc(a){var b=a.B.slice();a.ga&&(b=b.concat(Kc(a.ga)));a.fa&&(b=b.concat(Kc(a.fa)));return b}function Lc(a,b){a.B=Mc(b,a.B);a.ga&&Lc(a.ga,b);a.fa&&Lc(a.fa,b)}
function Mc(a,b){if(!a.Ca)return b.slice();for(var c=[],d=[],e=0;e<b.length;e++)Hc(b[e],a.Ca,c,d,c,d);a.ga&&(c=Mc(a.ga,c));d=a.fa?Mc(a.fa,d):[];return c.concat(d)};function Nc(){this.B=[]}function Oc(a){var b=new Nc;b.Qd(a);return b}
Nc.prototype={f:function(){var a=new Nc;a.Qd(this.B.map(function(a){return a.f()}));return a},ef:function(a){var b=new Ic(this.f().B);a=new Ic(a.f().B);Lc(b,a);Lc(a,b);a.ba();Lc(a,b);a.ba();Jc(b,Kc(a));return Oc(Kc(b))},na:function(a){var b=new Ic(this.f().B);a=new Ic(a.f().B);b.ba();Lc(b,a);Lc(a,b);a.ba();Lc(a,b);a.ba();Jc(b,Kc(a));b.ba();return Oc(Kc(b))},Ke:function(a){var b=new Ic(this.f().B);a=new Ic(a.f().B);b.ba();Lc(a,b);a.ba();Lc(b,a);Lc(a,b);Jc(b,Kc(a));b.ba();return Oc(Kc(b))},inverse:function(){var a=
this.f();a.B.map(function(a){a.bc()});return a},Qd:ca("B")};function Pc(){M.call(this);this.c="indexer";this.se=[];this.Ak=[];this.sb={}}H(Pc,M);Pc.prototype.add=function(a){a==r&&j(Error("Invalid object."));var b=window.JSON.stringify(a);b in this.sb||(this.sb[b]=this.se.length,this.se.push(a));return this.sb[b]};Pc.prototype.unique=t("se");function Qc(a){M.call(this);this.c="file";this.nd=a;this.e=p}H(Qc,M);function Rc(){this.Kb=this.q=r}Rc.prototype.__defineSetter__("file",function(a){this.q=a==r||D(a)&&0==a.length?r:D(a)?1==a.length?new Qc(a[0]):qb(a,function(a){var c=new N;c.q=new Qc(a);return c}):new Qc(a)});Rc.prototype.__defineGetter__("file",function(){return!this.q?"":D(this.q)?this.q.map(function(a){return a.q.nd}):this.q.nd});Rc.prototype.__defineGetter__("filedata",t("Kb"));
Rc.prototype.__defineSetter__("filedata",function(a){if(a==r||D(a)&&0==a.length)this.Kb=r;if(D(a))if(1==a.length)this.Kb=a[0];else{var b=this.q.length,c;for(c=0;c<b;c++)this.q[c].Kb=a[c]}else this.Kb=a});B("goog.functions.CACHE_RETURN_VALUE",p);function Sc(a,b){this.Q={};this.z=[];this.hf=this.Db=0;var c=arguments.length;if(1<c){c%2&&j(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.ve(a)}u=Sc.prototype;u.gb=t("Db");u.Wa=function(){Tc(this);for(var a=[],b=0;b<this.z.length;b++)a.push(this.Q[this.z[b]]);return a};u.Ie=function(){Tc(this);return this.z.concat()};u.De=function(a){for(var b=0;b<this.z.length;b++){var c=this.z[b];if(Uc(this.Q,c)&&this.Q[c]==a)return p}return s};
u.Vc=function(a,b){if(this===a)return p;if(this.Db!=a.gb())return s;var c=b||Vc;Tc(this);for(var d,e=0;d=this.z[e];e++)if(!c(this.get(d),a.get(d)))return s;return p};function Vc(a,b){return a===b}u.clear=function(){this.Q={};this.hf=this.Db=this.z.length=0};u.remove=function(a){return Uc(this.Q,a)?(delete this.Q[a],this.Db--,this.hf++,this.z.length>2*this.Db&&Tc(this),p):s};
function Tc(a){if(a.Db!=a.z.length){for(var b=0,c=0;b<a.z.length;){var d=a.z[b];Uc(a.Q,d)&&(a.z[c++]=d);b++}a.z.length=c}if(a.Db!=a.z.length){for(var e={},c=b=0;b<a.z.length;)d=a.z[b],Uc(e,d)||(a.z[c++]=d,e[d]=1),b++;a.z.length=c}}u.get=function(a,b){return Uc(this.Q,a)?this.Q[a]:b};u.set=function(a,b){Uc(this.Q,a)||(this.Db++,this.z.push(a),this.hf++);this.Q[a]=b};u.ve=function(a){var b;a instanceof Sc?(b=a.Ie(),a=a.Wa()):(b=kb(a),a=jb(a));for(var c=0;c<b.length;c++)this.set(b[c],a[c])};u.f=function(){return new Sc(this)};
function Uc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Wc(){M.call(this);this.c="colortable";this.sb=new Sc;Ha(this,new Rc)}H(Wc,M);Wc.prototype.add=function(a,b,c,d,e,f){(!E(a)||!E(c)||!E(d)||!E(e)||!E(f))&&j(Error("Invalid color table entry."));this.sb.set(a,[b,c,d,e,f]);this.e=p};function Xc(a,b,c){this.x=la(a)?a:0;this.y=la(b)?b:0;this.b=la(c)?c:0}Xc.prototype.f=function(){return new Xc(this.x,this.y,this.b)};Xc.prototype.cf=function(){return[this.x,this.y,this.b]};function O(a,b,c){this.x=a;this.y=b;this.b=c}H(O,Xc);u=O.prototype;u.f=function(){return new O(this.x,this.y,this.b)};u.ec=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.b*this.b)};u.scale=function(a){this.x*=a;this.y*=a;this.b*=a;return this};u.ba=function(){this.x=-this.x;this.y=-this.y;this.b=-this.b;return this};u.normalize=function(){return this.scale(1/this.ec())};u.add=function(a){this.x+=a.x;this.y+=a.y;this.b+=a.b;return this};
u.na=function(a){this.x-=a.x;this.y-=a.y;this.b-=a.b;return this};u.Vc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y&&this.b==a.b};function Yc(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.b-b.b;return Math.sqrt(c*c+d*d+e*e)}function Zc(a,b){return new O(a.x+b.x,a.y+b.y,a.b+b.b)}function $c(a,b){return new O(a.y*b.b-a.b*b.y,a.b*b.x-a.x*b.b,a.x*b.y-a.y*b.x)};function R(a,b){this.x=la(a)?a:0;this.y=la(b)?b:0}u=R.prototype;u.f=function(){return new R(this.x,this.y)};function ad(a,b){return new R(a.x-b.x,a.y-b.y)}u.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};u.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};u.translate=function(a,b){a instanceof R?(this.x+=a.x,this.y+=a.y):(this.x+=a,E(b)&&(this.y+=b));return this};u.scale=function(a,b){var c=E(b)?b:a;this.x*=a;this.y*=c;return this};function bd(a,b){this.x=a;this.y=b}H(bd,R);u=bd.prototype;u.f=function(){return new bd(this.x,this.y)};u.ec=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};u.scale=R.prototype.scale;u.ba=function(){this.x=-this.x;this.y=-this.y;return this};u.normalize=function(){return this.scale(1/this.ec())};u.add=function(a){this.x+=a.x;this.y+=a.y;return this};u.na=function(a){this.x-=a.x;this.y-=a.y;return this};
u.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.y*b+this.x*a;this.x=this.x*b-this.y*a;this.y=c;return this};u.Vc=function(a){return this==a||!!a&&this.x==a.x&&this.y==a.y};function cd(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d};function dd(a,b){this.width=a;this.height=b}function ed(a,b){return a==b?p:!a||!b?s:a.width==b.width&&a.height==b.height}dd.prototype.f=function(){return new dd(this.width,this.height)};dd.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};dd.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};dd.prototype.scale=function(a,b){var c=E(b)?b:a;this.width*=a;this.height*=c;return this};function fd(a,b){if(a instanceof fd)this.Z=a.cf();else{var c;if(c=ma(a))a:{for(var d=c=0;d<a.length;d++){if(!ma(a[d])||0<c&&a[d].length!=c){c=s;break a}for(var e=0;e<a[d].length;e++)if(!E(a[d][e])){c=s;break a}0==c&&(c=a[d].length)}c=0!=c}c?this.Z=tb(a):a instanceof dd?this.Z=gd(a.height,a.width):E(a)&&E(b)&&0<a&&0<b?this.Z=gd(a,b):j(Error("Invalid argument(s) for Matrix contructor"))}this.F=new dd(this.Z[0].length,this.Z.length)}
function hd(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new fd(b)}function id(a,b,c){for(var d=0;d<a.Aa().height;d++)for(var e=0;e<a.Aa().width;e++)b.call(c,a.Z[d][e],d,e,a)}function jd(a,b){var c=new fd(a.Aa());id(a,function(d,e,f){c.Z[e][f]=b.call(l,d,e,f,a)});return c}function gd(a,b){for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=0}return c}u=fd.prototype;
u.add=function(a){ed(this.F,a.Aa())||j(Error("Matrix summation is only supported on arrays of equal size"));return jd(this,function(b,c,d){return b+a.Z[c][d]})};u.Vc=function(a,b){if(this.F.width!=a.F.width||this.F.height!=a.F.height)return s;for(var c=b||0,d=0;d<this.F.height;d++)for(var e=0;e<this.F.width;e++)if(!(Math.abs(this.Z[d][e]-a.Z[d][e])<=(c||1E-6)))return s;return p};u.Aa=t("F");u.$=function(a,b){return!(0<=a&&a<this.F.height&&0<=b&&b<this.F.width)?r:this.Z[a][b]};
u.j=function(a,b,c){0<=a&&a<this.F.height&&0<=b&&b<this.F.width||j(Error("Index out of bounds when setting matrix value, ("+a+","+b+") in size ("+this.F.height+","+this.F.width+")"));this.Z[a][b]=c};
u.multiply=function(a){if(a instanceof fd){this.F.width!=a.Aa().height&&j(Error("Invalid matrices for multiplication. Second matrix should have the same number of rows as the first has columns."));var b=new fd(this.F.height,a.Aa().width);id(b,function(c,d,e){for(var f=c=0;f<this.F.width;f++)c+=this.$(d,f)*a.$(f,e);b.j(d,e,c)},this);return b}if(E(a))return jd(this,function(b){return b*a});j(Error("A matrix can only be multiplied by a number or another matrix."))};
u.na=function(a){ed(this.F,a.Aa())||j(Error("Matrix subtraction is only supported on arrays of equal size."));return jd(this,function(b,c,d){return b-a.Z[c][d]})};u.cf=t("Z");function kd(a,b){fd.call(this,a,b);this.c="matrix"}H(kd,fd);function ld(a){for(var b=[],c=0;c<a;c++){b[c]=[];for(var d=0;d<a;d++)b[c][d]=c==d?1:0}return new kd(b)}u=kd.prototype;u.Ha=function(){var a=[],b=this.Aa(),c,d;for(d=0;d<b.height;d++)for(c=0;c<b.width;c++)a.push(this.$(c,d));return a};
u.translate=function(a){this.F.width!=this.F.height&&j(Error("Can not translate non-square matrix."));var b=this.Aa(),c=hd(b.height);a instanceof bd&&3==b.height?(c.j(0,2,a.x),c.j(1,2,a.y)):a instanceof O&&4==b.height?(c.j(0,3,a.x),c.j(1,3,a.y),c.j(2,3,a.b)):j(Error("Translation failed."));return new kd(this.multiply(c))};
u.rotate=function(a,b){(4!=this.Aa().height||this.F.width!=this.F.height)&&j(Error("Only 4x4 matrices can be rotated."));(b==r||!(b instanceof O))&&j(Error("Invalid axis vector."));E(a)||j(Error("Invalid angle."));var c=b.normalize(),d=Math.cos(a),e=Math.sin(a),f=hd(4);f.j(0,0,d+c.x*c.x*(1-d));f.j(0,1,c.x*c.y*(1-d)-c.b*e);f.j(0,2,c.x*c.b*(1-d)+c.y*e);f.j(1,0,c.y*c.x*(1-d)+c.b*e);f.j(1,1,d+c.y*c.y*(1-d));f.j(1,2,c.y*c.b*(1-d)-c.x*e);f.j(2,0,c.b*c.x*(1-d)-c.y*e);f.j(2,1,c.b*c.y*(1-d)+c.x*e);f.j(2,2,
d+c.b*c.b*(1-d));return new kd(this.multiply(f))};u.Ra=function(a){var b=this.Aa(),c=Array(b.width),d;for(d=0;d<c.length;d++)c[d]=Array(1),c[d][0]=1;a instanceof O&&3<=b.width?(c[0][0]=a.x,c[1][0]=a.y,c[2][0]=a.b):j(Error("Multiplication by vector failed."));a=new fd(c);a=this.multiply(a);return new O(parseFloat(a.$(0,0)),parseFloat(a.$(1,0)),parseFloat(a.$(2,0)))};u.hj=function(a,b){var c=this.Z[a];this.Z[a]=this.Z[b];this.Z[b]=c};
u.gj=function(a,b){for(var c=this.Aa(),d=0,d=0;d<c.height;d++){var e=this.$(d,a);e||(e=0);var f=this.$(d,b);f||(f=0);this.j(d,a,f);this.j(d,b,e)}};F("X.matrix",kd);F("X.matrix.createIdentityMatrix",ld);F("X.matrix.prototype.flatten",kd.prototype.Ha);F("X.matrix.prototype.translate",kd.prototype.translate);F("X.matrix.prototype.rotate",kd.prototype.rotate);F("X.matrix.prototype.toArray",kd.prototype.cf);F("X.matrix.prototype.getValueAt",kd.prototype.$);F("X.matrix.prototype.setValueAt",kd.prototype.j);
F("X.matrix.prototype.multiplyByVector",kd.prototype.Ra);F("X.matrix.prototype.swapRows",kd.prototype.hj);F("X.matrix.prototype.swapCols",kd.prototype.gj);function md(){M.call(this);this.c="transform";this.D=ld(4);this.rf=new Float32Array(this.D.Ha())}H(md,M);md.prototype.__defineGetter__("matrix",t("D"));md.prototype.__defineSetter__("matrix",function(a){(a==r||!(a instanceof kd))&&j(Error("Invalid matrix."));this.D=a;this.p()});u=md.prototype;u.Qi=function(a){(!E(a)||-360>a||360<a)&&j(Error("Invalid angle."));this.D=this.D.rotate(a*Math.PI/180,new O(0,1,0));this.p()};
u.Ri=function(a){(!E(a)||-360>a||360<a)&&j(Error("Invalid angle."));this.D=this.D.rotate(a*Math.PI/180,new O(1,0,0));this.p()};u.Si=function(a){(!E(a)||-360>a||360<a)&&j(Error("Invalid angle."));this.D=this.D.rotate(a*Math.PI/180,new O(0,0,1));this.p()};u.kj=function(a){E(a)||j(Error("Invalid distance."));this.D=this.D.translate(new O(a,0,0));this.p()};u.lj=function(a){E(a)||j(Error("Invalid distance."));this.D=this.D.translate(new O(0,a,0));this.p()};
u.mj=function(a){E(a)||j(Error("Invalid distance."));this.D=this.D.translate(new O(0,0,a));this.p()};function nd(a,b,c){var d=a.D.$(b,c);d||(d=0);a.D.j(b,c,-1*d);a.p()}u.vh=function(){nd(this,0,0)};u.wh=function(){nd(this,1,1)};u.xh=function(){nd(this,2,2)};u.p=function(){this.rf=new Float32Array(this.D.Ha());this.e=p};F("X.transform",md);F("X.transform.prototype.rotateX",md.prototype.Qi);F("X.transform.prototype.rotateY",md.prototype.Ri);F("X.transform.prototype.rotateZ",md.prototype.Si);
F("X.transform.prototype.translateX",md.prototype.kj);F("X.transform.prototype.translateY",md.prototype.lj);F("X.transform.prototype.translateZ",md.prototype.mj);F("X.transform.prototype.flipX",md.prototype.vh);F("X.transform.prototype.flipY",md.prototype.wh);F("X.transform.prototype.flipZ",md.prototype.xh);F("X.transform.prototype.modified",md.prototype.p);function od(){M.call(this);this.c="texture";this.xa=this.mb=this.q=r;this.zb=this.Ab=0;Ha(this,new Rc)}H(od,M);F("X.texture",od);function S(a,b){M.call(this);this.c="triplets";this.Rb=Infinity;this.Ob=-Infinity;this.Sb=Infinity;this.Pb=-Infinity;this.Tb=Infinity;this.Qb=-Infinity;this.ed=[0,0,0];this.qf=p;this.i=0;this.O=new Float32Array(a);b!=r&&(this.O=b.O.subarray(0,b.O.length),this.i=this.O.length,this.Rb=b.Rb,this.Ob=b.Ob,this.Sb=b.Sb,this.Pb=b.Pb,this.Tb=b.Tb,this.Qb=b.Qb,this.ed=b.ed.slice(),this.qf=s)}H(S,M);u=S.prototype;
u.add=function(a,b,c){this.Rb=Math.min(this.Rb,a);this.Ob=Math.max(this.Ob,a);this.Sb=Math.min(this.Sb,b);this.Pb=Math.max(this.Pb,b);this.Tb=Math.min(this.Tb,c);this.Qb=Math.max(this.Qb,c);this.ed=[(this.Rb+this.Ob)/2,(this.Sb+this.Pb)/2,(this.Tb+this.Qb)/2];this.qf=s;this.e=p;this.O[this.i++]=a;this.O[this.i++]=b;this.O[this.i++]=c;return this.i/3};u.hb=function(){if(this.i!=this.O.length){var a=new Float32Array(this.i);a.set(this.O.subarray(0,this.i));this.O=a}};
u.get=function(a){a*=3;return[this.O[a],this.O[a+1],this.O[a+2]]};u.remove=function(){j(Error("Not implemented."))};u.clear=function(){this.O=new Float32Array(this.O.length);this.e=p};S.prototype.__defineGetter__("count",function(){this.hb();return this.O.length/3});S.prototype.__defineGetter__("length",function(){this.hb();return this.O.length});F("X.triplets",S);F("X.triplets.prototype.add",S.prototype.add);F("X.triplets.prototype.resize",S.prototype.hb);F("X.triplets.prototype.get",S.prototype.get);
F("X.triplets.prototype.remove",S.prototype.remove);F("X.triplets.prototype.clear",S.prototype.clear);function T(){this.aa=pd;this.Zb=new md;this.kb=[0.5,0.5,0.5];this.Yb=this.A=this.K=this.h=this.g=r;this.qc=[];this.Na=p;this.pc=this.Nc=1;this.kc=r;this.Gc=s;this.N=1;this.M=0;this.Fc=p;this.lc=r}var pd="TRIANGLES";T.prototype.__defineSetter__("type",function(a){return this.aa=a});T.prototype.__defineGetter__("type",t("aa"));T.prototype.__defineGetter__("texture",function(){this.A||(this.A=new od);return this.A});T.prototype.__defineGetter__("transform",t("Zb"));
T.prototype.__defineGetter__("points",t("g"));T.prototype.__defineSetter__("points",ca("g"));T.prototype.__defineGetter__("normals",t("h"));T.prototype.__defineSetter__("normals",ca("h"));T.prototype.__defineGetter__("colors",t("K"));T.prototype.__defineSetter__("colors",ca("K"));T.prototype.__defineGetter__("color",t("kb"));
T.prototype.__defineSetter__("color",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid color."));for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].color=a;this.kb=a;this.e=p});T.prototype.__defineGetter__("opacity",t("N"));T.prototype.__defineSetter__("opacity",function(a){(!E(a)||1<a||0>a)&&j(Error("Invalid opacity."));for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].opacity=a;this.N=a;this.e=p});T.prototype.__defineGetter__("caption",t("kc"));
T.prototype.__defineSetter__("caption",function(a){this.kc=a;this.e=p});T.prototype.__defineGetter__("visible",t("Na"));T.prototype.__defineSetter__("visible",function(a){for(var b=this.d,c=b.length,d=0,d=0;d<c;d++)b[d].visible=a;this.Na=a;this.e=p});T.prototype.__defineGetter__("pointsize",t("Nc"));T.prototype.__defineSetter__("pointsize",function(a){E(a)||j(Error("Invalid point size."));this.Nc=a;this.e=p});T.prototype.__defineGetter__("magicmode",t("Gc"));
T.prototype.__defineSetter__("magicmode",function(a){"boolean"!=typeof a&&j(Error("Invalid magic mode setting."));this.Gc=a;this.e=p});T.prototype.__defineGetter__("linewidth",t("pc"));T.prototype.__defineSetter__("linewidth",function(a){E(a)||j(Error("Invalid line width."));this.pc=a;this.e=p});T.prototype.__defineGetter__("lighting",t("Fc"));T.prototype.__defineSetter__("lighting",function(a){this.Fc=a;this.e=p});T.prototype.__defineGetter__("cullface",t("lc"));
T.prototype.__defineSetter__("cullface",function(a){this.lc=a;this.e=p});function qd(){this.La=Infinity;this.S=this.Ga=-Infinity;this.W=Infinity;this.vb=[0,0,0];this.tb=[1,1,1]}qd.prototype.__defineGetter__("lowerThreshold",t("S"));qd.prototype.__defineSetter__("lowerThreshold",ca("S"));qd.prototype.__defineGetter__("upperThreshold",t("W"));qd.prototype.__defineSetter__("upperThreshold",ca("W"));qd.prototype.__defineGetter__("min",t("La"));qd.prototype.__defineGetter__("max",t("Ga"));qd.prototype.__defineGetter__("minColor",t("vb"));
qd.prototype.__defineSetter__("minColor",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid min. color."));this.vb=a});qd.prototype.__defineGetter__("maxColor",t("tb"));qd.prototype.__defineSetter__("maxColor",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid max. color."));this.tb=a});function rd(){M.call(this);this.c="scalars";this.Ac=this.w=r;this.Cf=p;this.ae=0;Ha(this,new Rc);Ha(this,new qd);this.vb=[0,1,0];this.tb=[1,0,0]}H(rd,M);rd.prototype.__defineGetter__("array",t("w"));rd.prototype.__defineSetter__("array",function(a){this.Ac=this.w=a;this.e=p});rd.prototype.__defineGetter__("interpolation",t("ae"));rd.prototype.__defineSetter__("interpolation",ca("ae"));F("X.scalars",rd);function U(a){M.call(this);this.c="object";this.d=[];this.u=this.da=r;Ha(this,new T);a!=r&&this.$b(a)}H(U,M);
U.prototype.$b=function(a){this.aa=a.aa;this.Zb=new md;this.Zb.D=new kd(a.Zb.D.Z);this.kb=a.kb.slice();a.g&&(this.g=new S(a.g.length,a.g));a.h&&(this.h=new S(a.h.length,a.h));a.K&&(this.K=new S(a.K.length,a.K));this.A=a.A;this.Yb=a.Yb;a.q&&(this.q=new Qc((new String(a.q.nd)).toString()));this.N=a.N;this.d.length=0;var b=a.d;if(b)for(var c=b.length,d=0,d=0;d<c;d++)this.d.push(new I[b[d].c](b[d]));this.Na=a.Na;this.Nc=a.Nc;this.pc=a.pc;a.kc&&(this.kc=(new String(a.kc)).toString());this.Gc=a.Gc;this.qc=
a.qc.slice();this.Fc=a.Fc;this.lc=a.lc;this.e=p};U.prototype.__defineGetter__("colortable",function(){this.da||(this.da=new Wc);return this.da});U.prototype.__defineGetter__("scalars",function(){this.u||(this.u=new rd);return this.u});U.prototype.__defineGetter__("children",t("d"));U.prototype.p=function(){var a=new sd;a.T=this;this.dispatchEvent(a)};
function td(a,b){(a==r||b==r||!(a instanceof U)||!(b instanceof U))&&j(Error("Fatal: Two valid X.objects are required for comparison."));return 1==a.N?-1:1==b.N?1:a.M!=r&&b.M!=r&&a.M>b.M?-1:1}function ud(a,b){(a==r||b==r||!(a instanceof U)||!(b instanceof U))&&j(Error("Fatal: Two valid X.objects are required for comparison."));return a.la<b.la?-1:1}F("X.object",U);F("X.object.prototype.modified",U.prototype.p);function vd(){}function wd(a){for(var b=a.g.count,c=[],d=0,d=0;d<b;d+=3){var e=a.g.get(d),f=a.g.get(d+1),g=a.g.get(d+2),h=a.h.get(d),m=a.h.get(d+1),k=a.h.get(d+2),n=a.kb;a.K&&0<a.K.length&&(n=a.K.get(d));var q=[];q.push(new Ec(e,h));q.push(new Ec(f,m));q.push(new Ec(g,k));c.push(new Gc(q,n))}return Oc(c)}
function xd(a,b){(b==r||!(b instanceof Nc))&&j(Error("Invalid CSG object."));var c=new Pc,d=[];qb(b.B,function(a){var b=[],g=a.Sd,b=qb(a.jb,function(a){a.color=g;return c.add(a)});for(a=a=2;a<b.length;a++)d.push([b[0],b[a-1],b[a]])}.bind(a));a.Sg=qb(c.unique(),function(a){return[a.sa.x(),a.sa.y(),a.sa.b()]});a.Rg=qb(c.unique(),function(a){return[a.ca.x(),a.ca.y(),a.ca.b()]});a.Qg=qb(c.unique(),function(a){return!a.color?r:[a.color[0],a.color[1],a.color[2]]});a.g=new S(9*d.length);a.h=new S(9*d.length);
a.K=new S(9*d.length);qb(d,function(a){var b=a[0],c=a[1];a=a[2];var d=this.Sg,m=this.Rg,k=this.Qg;this.g.add(d[b][0],d[b][1],d[b][2]);this.g.add(d[c][0],d[c][1],d[c][2]);this.g.add(d[a][0],d[a][1],d[a][2]);this.h.add(m[b][0],m[b][1],m[b][2]);this.h.add(m[c][0],m[c][1],m[c][2]);this.h.add(m[a][0],m[a][1],m[a][2]);k[b]&&this.K.add(k[b][0],k[b][1],k[b][2]);k[c]&&this.K.add(k[c][0],k[c][1],k[c][2]);k[a]&&this.K.add(k[a][0],k[a][1],k[a][2])}.bind(a));0==a.K.i&&(a.K=r);a.aa=pd}
vd.prototype.ef=function(a){(a==r||!(a instanceof Nc)&&!(a instanceof U))&&j(Error("Invalid object."));var b=a;a instanceof U&&(b=wd(b));a=new U;Ha(a,new vd);xd(a,wd(this).ef(b));return a};vd.prototype.na=function(a){(a==r||!(a instanceof Nc)&&!(a instanceof U))&&j(Error("Invalid object."));var b=a;a instanceof U&&(b=wd(b));a=new U;Ha(a,new vd);xd(a,wd(this).na(b));return a};
vd.prototype.Ke=function(a){(a==r||!(a instanceof Nc)&&!(a instanceof U))&&j(Error("Invalid object."));var b=a;a instanceof U&&(b=wd(b));a=new U;Ha(a,new vd);xd(a,wd(this).Ke(b));return a};vd.prototype.inverse=function(){var a=new U;Ha(a,new vd);xd(a,wd(this).inverse());return a};F("X.constructable",vd);F("X.constructable.prototype.intersect",vd.prototype.Ke);F("X.constructable.prototype.inverse",vd.prototype.inverse);F("X.constructable.prototype.subtract",vd.prototype.na);
F("X.constructable.prototype.union",vd.prototype.ef);function yd(a){mc.call(this,a);this.c="event"}H(yd,mc);function zd(){yd.call(this,"g");this.ge=this.ue=0}H(zd,yd);function Ad(){yd.call(this,"a");this.M=new bd(0,0)}H(Ad,yd);function Bd(){yd.call(this,"b");this.M=new bd(0,0)}H(Bd,yd);function Cd(){yd.call(this,"c");this.Ka=this.Ua=s}H(Cd,yd);function Dd(){yd.call(this,"d");this.I=s}H(Dd,yd);function Ed(){yd.call(this,"j");this.vd=this.ud=0}H(Ed,yd);function Fd(){yd.call(this,"k")}H(Fd,yd);function Gd(){yd.call(this,"f")}H(Gd,yd);
function sd(){yd.call(this,"h");this.m=this.T=r}H(sd,yd);function Hd(){yd.call(this,"i");this.Ff=0}H(Hd,yd);function Id(a,b,c){a==r&&j(Error("Invalid GL Buffer."));b==r&&j(Error("Invalid number of items."));c==r&&j(Error("Invalid item size."));M.call(this);this.c="buffer";this.ka=a;this.qb=b;this.rb=c}H(Id,M);function Jd(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}u=Jd.prototype;u.f=function(){return new Jd(this.top,this.right,this.bottom,this.left)};u.contains=function(a){return!this||!a?s:a instanceof Jd?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};
u.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};u.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};u.translate=function(a,b){a instanceof R?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,E(b)&&(this.top+=b,this.bottom+=b));return this};
u.scale=function(a,b){var c=E(b)?b:a;this.left*=a;this.right*=a;this.top*=c;this.bottom*=c;return this};function Kd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}u=Kd.prototype;u.f=function(){return new Kd(this.left,this.top,this.width,this.height)};u.Zf=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,p}return s};
u.contains=function(a){return a instanceof Kd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};u.Aa=function(){return new dd(this.width,this.height)};u.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
u.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};u.translate=function(a,b){a instanceof R?(this.left+=a.x,this.top+=a.y):(this.left+=a,E(b)&&(this.top+=b));return this};u.scale=function(a,b){var c=E(b)?b:a;this.left*=a;this.width*=a;this.top*=c;this.height*=c;return this};function Ld(a,b){var c;c=a.className;c=na(c)&&c.match(/\S+/g)||[];for(var d=ub(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=ob(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var Md=!K||K&&9<=hc;!Ob&&!K||K&&K&&9<=hc||Ob&&fc("1.9.1");K&&fc("9");B("goog.dom.ASSUME_QUIRKS_MODE",s);B("goog.dom.ASSUME_STANDARDS_MODE",s);var Nd=Ma.xj||Ma.Fg;function Od(a){return a?new Pd(Qd(a)):Na||(Na=new Pd)}function Rd(a,b){return na(b)?a.getElementById(b):b}var Sd={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Td(a,b,c){return Ud(document,arguments)}
function Ud(a,b){var c=b[0],d=b[1];if(!Md&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ra(d.name),'"');if(d.type){c.push(' type="',Ra(d.type),'"');var e={};mb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}var f=a.createElement(c);d&&(na(d)?f.className=d:D(d)?Ld.apply(r,[f].concat(d)):ib(d,function(a,b){"style"==b?f.style.cssText=a:"class"==b?f.className=a:"for"==b?f.htmlFor=a:b in Sd?f.setAttribute(Sd[b],a):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?f.setAttribute(b,a):
f[b]=a}));if(2<b.length){d=function(b){b&&f.appendChild(na(b)?a.createTextNode(b):b)};for(c=2;c<b.length;c++)if(e=b[c],ma(e)&&!(oa(e)&&0<e.nodeType)){var g=pb,h;a:{if((h=e)&&"number"==typeof h.length){if(oa(h)){h="function"==typeof h.item||"string"==typeof h.item;break a}if("function"==ka(h)){h="function"==typeof h.item;break a}}h=s}g(h?tb(e):e,d)}else d(e)}return f}function Vd(a){return Nd?Ma.Fg:"CSS1Compat"==a.compatMode}function Wd(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function Xd(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Yd(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Qd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Pd(a){this.J=a||ha.document||document}u=Pd.prototype;u.Cd=Od;u.l=function(a){return Rd(this.J,a)};u.yg=Pd.prototype.l;
u.rc=function(a,b,c){return Ud(this.J,arguments)};u.createElement=function(a){return this.J.createElement(a)};u.createTextNode=function(a){return this.J.createTextNode(String(a))};function Zd(a){return Vd(a.J)}function $d(a){var b=a.J;a=!Pb&&Vd(b)?b.documentElement:b.body||b.documentElement;b=b.parentWindow||b.defaultView;return K&&fc("10")&&b.pageYOffset!=a.scrollTop?new R(a.scrollLeft,a.scrollTop):new R(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}u.appendChild=function(a,b){a.appendChild(b)};
u.contains=Yd;var ae={};B("goog.style.GET_BOUNDING_CLIENT_RECT_ALWAYS_EXISTS",s);function be(a,b){var c=Qd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,r))?c[b]||c.getPropertyValue(b)||"":""}function ce(a,b){return be(a,b)||(a.currentStyle?a.currentStyle[b]:r)||a.style&&a.style[b]}function de(a){a=a?Qd(a):document;return K&&!(K&&9<=hc)&&!Zd(Od(a))?a.body:a.documentElement}
function ee(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}K&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function fe(a){if(K&&!(K&&8<=hc))return a.offsetParent;var b=Qd(a),c=ce(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=ce(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return r}
function ge(a){for(var b=new Jd(0,Infinity,Infinity,0),c=Od(a),d=c.J.body,e=c.J.documentElement,f=!Pb&&Vd(c.J)?c.J.documentElement:c.J.body||c.J.documentElement;a=fe(a);)if((!K||0!=a.clientWidth)&&(!Pb||0!=a.clientHeight||a!=d)&&a!=d&&a!=e&&"visible"!=ce(a,"overflow")){var g=he(a),h;h=a;if(Ob&&!fc("1.9")){var m=parseFloat(be(h,"borderLeftWidth"));if(ie(h))var k=h.offsetWidth-h.clientWidth-m-parseFloat(be(h,"borderRightWidth")),m=m+k;h=new R(m,parseFloat(be(h,"borderTopWidth")))}else h=new R(h.clientLeft,
h.clientTop);g.x+=h.x;g.y+=h.y;b.top=Math.max(b.top,g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=(c.J.parentWindow||c.J.defaultView||window).document;c=Vd(c)?c.documentElement:c.body;c=new dd(c.clientWidth,c.clientHeight);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&
b.right>b.left?b:r}
function he(a){var b,c=Qd(a),d=ce(a,"position"),e=!ae.kf&&Ob&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new R(0,0),g=de(c);if(a==g)return f;if(ae.kf||a.getBoundingClientRect)b=ee(a),a=$d(Od(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||
0);if(Pb&&"fixed"==ce(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Nb||Pb&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=fe(b))&&b!=c.body&&b!=g;)if(f.x-=b.scrollLeft,!Nb||"TR"!=b.tagName)f.y-=b.scrollTop}return f}function je(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function ke(a){var b=le;if("none"!=ce(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function le(a){var b=a.offsetWidth,c=a.offsetHeight,d=Pb&&!b&&!c;return(!la(b)||d)&&a.getBoundingClientRect?(a=ee(a),new dd(a.right-a.left,a.bottom-a.top)):new dd(b,c)}function me(a,b){a.style.display=b?"":"none"}function ie(a){return"rtl"==ce(a,"direction")}
function ne(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}function oe(a,b){var c=a.currentStyle?a.currentStyle[b]:r;return c?ne(a,c):0}var pe={thin:2,medium:4,thick:6};function qe(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:r))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:r;return c in pe?pe[c]:ne(a,c)}
var re=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function se(a,b){Cc.call(this);this.r=a;var c=oa(this.r)&&1==this.r.nodeType?this.r:this.r?this.r.body:r;this.Sh=!!c&&ie(c);this.Kk=L(this.r,Ob?"DOMMouseScroll":"mousewheel",this,b)}H(se,Cc);
se.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.Gb;if("mousewheel"==a.type){c=1;if(K||Pb&&(Vb||fc("532.0")))c=40;d=te(-a.wheelDelta,c);la(a.wheelDeltaX)?(b=te(-a.wheelDeltaX,c),c=te(-a.wheelDeltaY,c)):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),la(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;E(this.dg)&&(b=Math.min(Math.max(b,-this.dg),this.dg));E(this.eg)&&(c=Math.min(Math.max(c,-this.eg),this.eg));this.Sh&&(b=-b);b=new ue(d,a,b,c);this.dispatchEvent(b)};
function te(a,b){return Pb&&(Ub||Wb)&&0!=a%b?a:a/b}function ue(a,b,c,d){oc.call(this,b);this.type="mousewheel";this.detail=a;this.Hk=c;this.uc=d}H(ue,oc);K||Pb&&fc("525");function ve(a){(a==r||!(a instanceof Element))&&j(Error("Could not add interactor to the given element."));M.call(this);this.c="interactor";this.ua=a;this.ie=this.vf=this.uf=this.wf=this.tf=this.xf=r;this.he=p;this.Bb=this.ub=this.bb=s;this.md=[0,0];this.ce=new bd(0,0);this.Ec=new bd(0,0);this.$f=0;this.Df=this.hd=r;this.v={MOUSEWHEEL_ENABLED:p,MOUSECLICKS_ENABLED:p,LEFTMOUSECLICK_ENABLED:p,MIDDLEMOUSECLICK_ENABLED:p,RIGHTMOUSECLICK_ENABLED:p,KEYBOARD_ENABLED:p,HOVERING_ENABLED:p,CONTEXTMENU_ENABLED:s,
TOUCH_ENABLED:p,TOUCH_BOUNCING_ENABLED:s};this.Dk=1}H(ve,M);ve.prototype.__defineGetter__("config",t("v"));ve.prototype.__defineGetter__("leftButtonDown",t("bb"));ve.prototype.__defineGetter__("middleButtonDown",t("ub"));ve.prototype.__defineGetter__("rightButtonDown",t("Bb"));
ve.prototype.Ia=function(){this.v.MOUSEWHEEL_ENABLED?(this.ie=new se(this.ua),this.xf=L(this.ie,"mousewheel",this.Zc.bind(this))):(yc(this.xf),this.ie=r);this.v.MOUSECLICKS_ENABLED?(this.tf=L(this.ua,"mousedown",this.ei.bind(this)),this.wf=L(this.ua,"mouseup",this.ji.bind(this))):(yc(this.tf),yc(this.wf));this.ua.oncontextmenu=this.v.CONTEXTMENU_ENABLED?r:function(){return s};window.onkeydown=this.v.KEYBOARD_ENABLED?this.ig.bind(this):r;this.v.TOUCH_ENABLED?(this.v.TOUCH_BOUNCING_ENABLED||document.body.addEventListener("touchmove",
function(a){a.preventDefault()},s),this.Zg=L(this.ua,"touchstart",this.xi.bind(this)),this.Yg=L(this.ua,"touchmove",this.vi.bind(this)),this.Xg=L(this.ua,"touchend",this.ri.bind(this))):(yc(this.Zg),yc(this.Yg),yc(this.Xg));yc(this.uf);yc(this.vf);this.uf=L(this.ua,"mousemove",this.gi.bind(this));this.vf=L(this.ua,"mouseout",this.hi.bind(this))};
ve.prototype.ei=function(a){this.v.LEFTMOUSECLICK_ENABLED&&0==a.button?this.bb=p:this.v.MIDDLEMOUSECLICK_ENABLED&&1==a.button?this.ub=p:this.v.RIGHTMOUSECLICK_ENABLED&&2==a.button&&(this.Bb=p);eval("this.onMouseDown("+this.bb+","+this.ub+","+this.Bb+")");we(this);a.preventDefault()};ve.prototype.di=aa();ve.prototype.ji=function(a){0==a.button?this.bb=s:1==a.button?this.ub=s:2==a.button&&(this.Bb=s);eval("this.onMouseUp("+this.bb+","+this.ub+","+this.Bb+")");we(this);a.preventDefault()};
ve.prototype.__defineGetter__("mousePosition",t("md"));u=ve.prototype;u.ii=aa();u.hi=function(a){this.he=s;this.v.KEYBOARD_ENABLED&&(window.onkeydown=r);this.Bb=this.ub=this.bb=s;we(this);this.ce=new bd(0,0);a.preventDefault()};u.fi=aa();u.xi=function(a){a.preventDefault();a.Ia(a.Gb.targetTouches[0],a.currentTarget);eval("this.onTouchStart("+a.clientX+","+a.clientY+")");this.Ec=new bd(a.clientX,a.clientY);this.Df=setTimeout(this.ti.bind(this,a),500)};u.wi=aa();
u.ti=function(a){eval("this.onTouchHover("+a.clientX+","+a.clientY+")");a=new Cd;a.Ua=p;a.Ka=this instanceof xe;this.dispatchEvent(a);this.sd=p};u.si=aa();function ye(a){clearTimeout(a.Df);if(a.sd){var b=new Cd;b.Ua=s;b.Ka=a instanceof xe;a.dispatchEvent(b)}a.sd=s}u.ri=function(a){a.preventDefault();eval("this.onTouchEnd()");ye(this)};u.qi=aa();
u.vi=function(a){a.preventDefault();this.sd||ye(this);this.touchmoveEvent=a=a.Gb;eval("this.onTouchMove(this['touchmoveEvent'])");var b=a.targetTouches;if(1==b.length){a=b[0];var c=[a.clientX,a.clientY];a=new bd(c[0],c[1]);var b=c[0]>3*this.ua.clientWidth/4,d=c[0]<this.ua.clientWidth/4,e=c[1]<this.ua.clientHeight/4,c=c[1]>3*this.ua.clientHeight/4,c=!b&&!d&&!e&&!c,e=this.Ec.na(a);this.Ec=a.f();if(this.sd)a=new Ad,5<e.x?e.x=1:-5>e.x&&(e.x=-1),5<e.y?e.y=1:-5>e.y&&(e.y=-1),a.M=e,this.dispatchEvent(a);
else if(this instanceof ze&&(b||d))a=new Dd,a.I=0>e.y,this.dispatchEvent(a);else if(this instanceof xe||c)e.scale(0.1*this.Qk),a=new Bd,a.M=e,this.dispatchEvent(a)}else 2==b.length&&(a=b[0],b=b[1],a=[a.clientX,a.clientY],b=[b.clientX,b.clientY],a=new bd(a[0],a[1]),e=cd(a,new bd(b[0],b[1])),b=e-this.$f,this.$f=e,this.Ec.na(a),this.Ec=a.f(),10<Math.abs(b)&&(a=new Cd,a.Ua=0<b,a.Ka=this instanceof xe,this.dispatchEvent(a)))};u.ui=aa();
u.gi=function(a){this.mousemoveEvent=a;eval("this.onMouseMove(this['mousemoveEvent'])");this.he=p;this.v.KEYBOARD_ENABLED&&window.onkeydown==r&&(window.onkeydown=this.ig.bind(this));a.preventDefault();var b=a.shiftKey;this.md=[a.offsetX,a.offsetY];var c=new bd(this.md[0],this.md[1]);a=this.ce.na(c);this.ce=c.f();this.v.HOVERING_ENABLED&&((0<Math.abs(a.x)||0<Math.abs(a.y)||this.ub||this.bb||this.Bb)&&we(this),this.hd=setTimeout(function(){we(this);var a=new Ed;a.ud=c.x;a.vd=c.y;this.dispatchEvent(a);
this.hd=r}.bind(this),300));2>Math.abs(a.x)&&(a.x=0);2>Math.abs(a.y)&&(a.y=0);0!=a.ec()&&(this.bb&&!b?(b=new Bd,a.scale(1),b.M=a,this.dispatchEvent(b)):this.ub||this.bb&&b?(b=new Ad,5<a.x?a.x=5:-5>a.x&&(a.x=-5),5<a.y?a.y=5:-5>a.y&&(a.y=-5),b.M=a,this.dispatchEvent(b)):this.Bb&&(b=new Cd,b.Ua=0<a.y,b.Ka=s,this.dispatchEvent(b)))};function we(a){a.hd&&clearTimeout(a.hd);a.dispatchEvent(new Fd)}u.ki=aa();
u.Zc=function(a){this.mouseWheelEvent=a;eval("this.onMouseWheel(this['mouseWheelEvent'])");we(this);a.preventDefault()};u.bi=aa();
u.ig=function(a){if(this.he){this.keyEvent=a;eval("this.onKey(this['keyEvent'])");we(this);var b=a.altKey,c=a.ctrlKey,d=a.metaKey,e=a.shiftKey,f=a.keyCode;82==f&&!b&&!c&&!d&&!e?(a.preventDefault(),a=new Gd,this.dispatchEvent(a)):37<=f&&40>=f&&(a.preventDefault(),e?a=new Ad:b?a=new Cd:(a=new Bd,this instanceof ze&&(a=new Dd)),a&&(c=new bd(0,0),37==f?(c.x=5,a.I=s,b&&(a.I=p,a.Ua=p,a.Ka=s)):39==f?(c.x=-5,a.I=p,b&&(a.Ua=s,a.Ka=s)):38==f?(c.y=5,a.I=p,b&&(a.Ua=p,a.Ka=p)):40==f&&(c.y=-5,a.I=s,b&&(a.Ua=s,
a.Ka=p)),a.M=c,this.dispatchEvent(a)))}};F("X.interactor",ve);F("X.interactor.prototype.init",ve.prototype.Ia);F("X.interactor.prototype.onMouseDown",ve.prototype.di);F("X.interactor.prototype.onMouseUp",ve.prototype.ii);F("X.interactor.prototype.onMouseMove",ve.prototype.fi);F("X.interactor.prototype.onMouseWheel",ve.prototype.ki);F("X.interactor.prototype.onKey",ve.prototype.bi);F("X.interactor.prototype.onTouchStart",ve.prototype.wi);F("X.interactor.prototype.onTouchMove",ve.prototype.ui);
F("X.interactor.prototype.onTouchEnd",ve.prototype.qi);F("X.interactor.prototype.onTouchHover",ve.prototype.si);function ze(a){ve.call(this,a);this.c="interactor2D"}H(ze,ve);ze.prototype.Zc=function(a){ze.s.Zc.call(this,a);var b=new Dd;a.uc==r&&(a.uc=0);b.I=0>a.uc;this.dispatchEvent(b)};function Ae(a){U.call(this);this.c="slice";this.k=[0,0,0];this.nc=[0,0,1];this.I=[0,1,0];this.G=this.P=10;this.Yb=[0,1,0,0,1,1,1,1,1,0,0,0];this.o=this.fb=r;this.Ta=p;this.jc=[1,1,1];a!=r&&this.$b(a)}H(Ae,U);Ae.prototype.$b=function(a){this.k=a.k.slice();this.nc=a.nc.slice();this.I=a.I.slice();this.P=a.P;this.G=a.G;this.fb=a.fb;this.o=a.o;this.Ta=a.Ta;this.jc=a.jc;this.Ug=a.Ug;Ae.s.$b.call(this,a)};
Ae.prototype.sc=function(){var a=new O(this.nc[0],this.nc[1],this.nc[2]),b=new O(this.I[0],this.I[1],this.I[2]),c=$c(b,a),d=new O(this.k[0],this.k[1],this.k[2]),e=new O(1,1,1);1==a.x?(e=new O(this.k[0],this.G/2,this.P/2),this.Yb=[0,0,1,0,0,1,0,1,1,1,1,0]):1==a.y?(e=new O(this.P/2,this.k[1],this.G/2),this.Yb=[0,0,0,1,1,0,1,0,1,1,0,1]):1==a.b&&(e=new O(this.P/2,this.G/2,this.k[2]));var f=Zc(c.f().ba(),b.f().ba()),f=new O(f.x*e.x,f.y*e.y,f.b*e.b);f.add(d);var g=Zc(c.f().ba(),b),g=new O(g.x*e.x,g.y*e.y,
g.b*e.b);g.add(d);var h=Zc(c,b.f().ba()),h=new O(h.x*e.x,h.y*e.y,h.b*e.b);h.add(d);var m=h,b=Zc(c,b),b=new O(b.x*e.x,b.y*e.y,b.b*e.b);b.add(d);d=g;this.g=new S(18);this.h=new S(18);this.g.add(f.x,f.y,f.b);this.g.add(g.x,g.y,g.b);this.g.add(h.x,h.y,h.b);this.g.add(m.x,m.y,m.b);this.g.add(b.x,b.y,b.b);this.g.add(d.x,d.y,d.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.h.add(a.x,a.y,a.b);this.Ta&&(a=new U,a.g=new S(24),
a.h=new S(24),a.g.add(f.x,f.y,f.b),a.g.add(g.x,g.y,g.b),a.g.add(g.x,g.y,g.b),a.g.add(b.x,b.y,b.b),a.g.add(b.x,b.y,b.b),a.g.add(h.x,h.y,h.b),a.g.add(h.x,h.y,h.b),a.g.add(f.x,f.y,f.b),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.h.add(0,0,0),a.kb=[this.jc[0],this.jc[1],this.jc[2]],a.aa="LINES",a.pc=2,this.d.push(a))};F("X.slice",Ae);function N(a){U.call(this);this.c="volume";this.k=[0,0,0];this.ea=[10,10,10];this.H=[1,1,1];this.mb=[];this.Dc=this.pb=this.Cc=this.ob=this.Bc=this.nb=0;this.U=new U;this.V=new U;this.cb=new U;this.td=this.Oa=s;this.Cb=0;this.o=r;this.Ta=p;this.Y=Infinity;this.X=-Infinity;this.me=p;Ha(this,new Rc);Ha(this,new qd);a!=r&&this.$b(a)}H(N,U);
N.prototype.$b=function(a){window.console.log(a);this.k=a.k.slice();this.ea=a.ea.slice();this.H=a.H.slice();this.nb=a.nb;this.Bc=a.Bc;this.ob=a.ob;this.Cc=a.Cc;this.pb=a.pb;this.Dc=a.Dc;this.U=new U(a.U);this.V=new U(a.V);this.cb=new U(a.cb);this.Oa=a.Oa;this.td=a.td;this.Cb=a.Cb;this.o=a.o;this.Ta=a.Ta;N.s.$b.call(this,a)};
N.prototype.sc=function(){this.d.length=0;this.U.d.length=0;this.V.d.length=0;this.cb.d.length=0;this.d.push(this.U);this.d.push(this.V);this.d.push(this.cb);for(var a=0,a=0;3>a;a++){for(var b=(this.ea[a]-1)/2,c=b,d=0,d=0;d<this.ea[a];d++){var e=-b*this.H[a]+d*this.H[a],f=[[this.k[0]+e,this.k[1],this.k[2]],[this.k[0],this.k[1]+e,this.k[2]],[this.k[0],this.k[1],this.k[2]+e]],e=this.d[a].d,g=0,h=0,m=[1,1,1],k=this.Ta;0==a?(g=this.ea[2]*this.H[2]-this.H[2],h=this.ea[1]*this.H[1]-this.H[1],m=[1,1,0]):
1==a?(g=this.ea[0]*this.H[0]-this.H[0],h=this.ea[2]*this.H[2]-this.H[2],m=[1,0,0]):2==a&&(g=this.ea[0]*this.H[0]-this.H[0],h=this.ea[1]*this.H[1]-this.H[1],m=[0,1,0]);this.fb!=r&&(k=s);var n=new Ae,q=n,f=f[a],w=[[1,0,0],[0,1,0],[0,0,1]][a],v=[[0,1,0],[0,0,-1],[0,1,0]][a];(f==r||!D(f)||3!=f.length)&&j(Error("Invalid center."));(w==r||!D(w)||3!=w.length)&&j(Error("Invalid front direction."));(v==r||!D(v)||3!=v.length)&&j(Error("Invalid up direction."));E(g)||j(Error("Invalid width."));E(h)||j(Error("Invalid height."));
var y=s;k!=r&&(y=k);k=[1,1,1];m!=r&&(k=m);q.k=f;q.nc=w;q.I=v;q.P=g;q.G=h;q.Ta=y;q.jc=k;q.sc();n.fb=this;n.visible=d==Math.floor(c);e.push(n)}0==a?this.Bc=this.nb=c:1==a?this.Cc=this.ob=c:2==a&&(this.Dc=this.pb=c)}this.e=p};
N.prototype.p=function(a){a="undefined"!==typeof a?a:p;if(0<this.d.length)if(this.Oa!=this.td&&(this.Oa?(this.d[0].d[parseInt(this.nb,10)].visible=s,this.d[1].d[parseInt(this.ob,10)].visible=s,this.d[2].d[parseInt(this.pb,10)].visible=s):this.d[this.Cb].visible=s,this.e=p,this.td=this.Oa),this.Oa)Be(this,this.Cb);else for(var b=0,b=0;3>b;b++){var c=this.d[b],d=0,e=0;0==b?(d=this.nb,e=this.Bc,this.Bc=this.nb):1==b?(d=this.ob,e=this.Cc,this.Cc=this.ob):2==b&&(d=this.pb,e=this.Dc,this.Dc=this.pb);c.d[parseInt(e,
10)].visible=s;c=c.d[parseInt(d,10)];c.visible=p;c.N=1}a&&N.s.p.call(this)};N.prototype.__defineGetter__("dimensions",t("ea"));N.prototype.__defineGetter__("volumeRendering",t("Oa"));N.prototype.__defineSetter__("volumeRendering",function(a){this.Oa=a;this.p(s)});N.prototype.__defineSetter__("visible",ca("Na"));N.prototype.__defineGetter__("center",t("k"));N.prototype.__defineSetter__("center",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid center."));this.k=a});
N.prototype.__defineGetter__("image",t("mb"));N.prototype.__defineGetter__("labelmap",function(){this.o||(this.o=new Ce(this));return this.o});N.prototype.__defineGetter__("indexX",t("nb"));N.prototype.__defineSetter__("indexX",function(a){E(a)&&(0<=a&&a<this.U.d.length)&&(this.nb=a,this.p(s))});N.prototype.__defineGetter__("indexY",t("ob"));N.prototype.__defineSetter__("indexY",function(a){E(a)&&(0<=a&&a<this.V.d.length)&&(this.ob=a,this.p(s))});N.prototype.__defineGetter__("indexZ",t("pb"));
N.prototype.__defineSetter__("indexZ",function(a){E(a)&&(0<=a&&a<this.cb.d.length)&&(this.pb=a,this.p(s))});N.prototype.__defineGetter__("windowLow",t("Y"));N.prototype.__defineSetter__("windowLow",ca("Y"));N.prototype.__defineGetter__("windowHigh",t("X"));N.prototype.__defineSetter__("windowHigh",ca("X"));N.prototype.__defineGetter__("borders",t("Ta"));N.prototype.__defineSetter__("borders",ca("Ta"));N.prototype.__defineGetter__("reslicing",t("me"));N.prototype.__defineSetter__("reslicing",ca("me"));
function Be(a,b){if(a.Oa&&(a.e||b!=a.Cb)){var c=a.d[a.Cb];c.visible=s;var c=a.d[b],d=c.d.length,e;for(e=0;e<d;e++)c.d[e].Na=p;a.Cb=b;a.e=s}}F("X.volume",N);F("X.volume.prototype.modified",N.prototype.p);var De={Ae:function(a,b,c){return De.update(a,0,b,c)},update:function(a,b,c,d){var e=De.Mg,f="number"===typeof c?c:c=0;d="number"===typeof d?d:a.length;b^=4294967295;for(f=d&7;f--;++c)b=b>>>8^e[(b^a[c])&255];for(f=d>>3;f--;c+=8)b=b>>>8^e[(b^a[c])&255],b=b>>>8^e[(b^a[c+1])&255],b=b>>>8^e[(b^a[c+2])&255],b=b>>>8^e[(b^a[c+3])&255],b=b>>>8^e[(b^a[c+4])&255],b=b>>>8^e[(b^a[c+5])&255],b=b>>>8^e[(b^a[c+6])&255],b=b>>>8^e[(b^a[c+7])&255];return(b^4294967295)>>>0}};
De.Mg=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,
3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,
366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,
3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,
1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,
1088359270,936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Ee(a){var b=a.length,c=0,d=Number.POSITIVE_INFINITY,e,f,g,h,m,k,n,q,w;for(q=0;q<b;++q)a[q]>c&&(c=a[q]),a[q]<d&&(d=a[q]);e=1<<c;f=new Uint32Array(e);g=1;h=0;for(m=2;g<=c;){for(q=0;q<b;++q)if(a[q]===g){k=0;n=h;for(w=0;w<g;++w)k=k<<1|n&1,n>>=1;for(w=k;w<e;w+=m)f[w]=g<<16|q;++h}++g;h<<=1;m<<=1}return[f,c,d]};function Fe(a,b){this.xe=[];this.ye=32768;this.Pa=this.Sc=this.ha=this.df=0;this.input=new Uint8Array(a);this.Hf=s;this.ze=Ge;this.hb=s;if(b||!(b={}))b.index&&(this.ha=b.index),b.bufferSize&&(this.ye=b.bufferSize),b.bufferType&&(this.ze=b.bufferType),b.resize&&(this.hb=b.resize);switch(this.ze){case He:this.R=32768;this.Ba=new Uint8Array(32768+this.ye+258);break;case Ge:this.R=0;this.Ba=new Uint8Array(this.ye);this.ac=this.sh;this.Kf=this.ih;this.He=this.nh;break;default:j(Error("invalid inflate mode"))}}
var He=0,Ge=1;
Fe.prototype.tc=function(){for(;!this.Hf;){var a=Ie(this,3);a&1&&(this.Hf=p);a>>>=1;switch(a){case 0:var a=this.input,b=this.ha,c=this.Ba,d=this.R,e=l,f=l,g=l,h=c.length,e=l;this.Pa=this.Sc=0;e=a[b++];e===l&&j(Error("invalid uncompressed block header: LEN (first byte)"));f=e;e=a[b++];e===l&&j(Error("invalid uncompressed block header: LEN (second byte)"));f|=e<<8;e=a[b++];e===l&&j(Error("invalid uncompressed block header: NLEN (first byte)"));g=e;e=a[b++];e===l&&j(Error("invalid uncompressed block header: NLEN (second byte)"));g|=
e<<8;f===~g&&j(Error("invalid uncompressed block header: length verify"));b+f>a.length&&j(Error("input buffer is broken"));switch(this.ze){case He:for(;d+f>c.length;)e=h-d,f-=e,c.set(a.subarray(b,b+e),d),d+=e,b+=e,this.R=d,c=this.ac(),d=this.R;break;case Ge:for(;d+f>c.length;)c=this.ac({Qf:2});break;default:j(Error("invalid inflate mode"))}c.set(a.subarray(b,b+f),d);d+=f;this.ha=b+=f;this.R=d;this.Ba=c;break;case 1:this.He(Je,Ke);break;case 2:Le(this);break;default:j(Error("unknown BTYPE: "+a))}}return this.Kf()};
var Me=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ne=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),Oe=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),Pe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),Se=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Te=new Uint8Array(288),
Ue,Ve;Ue=0;for(Ve=Te.length;Ue<Ve;++Ue)Te[Ue]=143>=Ue?8:255>=Ue?9:279>=Ue?7:8;var Je=Ee(Te),We=new Uint8Array(30),Xe,Ye;Xe=0;for(Ye=We.length;Xe<Ye;++Xe)We[Xe]=5;var Ke=Ee(We);function Ie(a,b){for(var c=a.Sc,d=a.Pa,e=a.input,f=a.ha,g;d<b;)g=e[f++],g===l&&j(Error("input buffer is broken")),c|=g<<d,d+=8;g=c&(1<<b)-1;a.Sc=c>>>b;a.Pa=d-b;a.ha=f;return g}
function Ze(a,b){for(var c=a.Sc,d=a.Pa,e=a.input,f=a.ha,g=b[0],h=b[1],m;d<h;)m=e[f++],m===l&&j(Error("input buffer is broken")),c|=m<<d,d+=8;e=g[c&(1<<h)-1];g=e>>>16;a.Sc=c>>g;a.Pa=d-g;a.ha=f;return e&65535}
function Le(a){function b(a,b,c){var d,e,f;for(f=0;f<a;)switch(d=Ze(this,b),d){case 16:for(d=3+Ie(this,2);d--;)c[f++]=e;break;case 17:for(d=3+Ie(this,3);d--;)c[f++]=0;e=0;break;case 18:for(d=11+Ie(this,7);d--;)c[f++]=0;e=0;break;default:e=c[f++]=d}return c}var c=Ie(a,5)+257,d=Ie(a,5)+1,e=Ie(a,4)+4,f=new Uint8Array(Me.length),g;for(g=0;g<e;++g)f[Me[g]]=Ie(a,3);e=Ee(f);f=new Uint8Array(c);g=new Uint8Array(d);a.He(Ee(b.call(a,c,e,f)),Ee(b.call(a,d,e,g)))}u=Fe.prototype;
u.He=function(a,b){var c=this.Ba,d=this.R;this.Nf=a;for(var e=c.length-258,f,g,h;256!==(f=Ze(this,a));)if(256>f)d>=e&&(this.R=d,c=this.ac(),d=this.R),c[d++]=f;else{f-=257;h=Ne[f];0<Oe[f]&&(h+=Ie(this,Oe[f]));f=Ze(this,b);g=Pe[f];0<Se[f]&&(g+=Ie(this,Se[f]));d>=e&&(this.R=d,c=this.ac(),d=this.R);for(;h--;)c[d]=c[d++-g]}for(;8<=this.Pa;)this.Pa-=8,this.ha--;this.R=d};
u.nh=function(a,b){var c=this.Ba,d=this.R;this.Nf=a;for(var e=c.length,f,g,h;256!==(f=Ze(this,a));)if(256>f)d>=e&&(c=this.ac(),e=c.length),c[d++]=f;else{f-=257;h=Ne[f];0<Oe[f]&&(h+=Ie(this,Oe[f]));f=Ze(this,b);g=Pe[f];0<Se[f]&&(g+=Ie(this,Se[f]));d+h>e&&(c=this.ac(),e=c.length);for(;h--;)c[d]=c[d++-g]}for(;8<=this.Pa;)this.Pa-=8,this.ha--;this.R=d};
u.ac=function(){var a=new Uint8Array(this.R-32768),b=this.R-32768,c=this.Ba;a.set(c.subarray(32768,a.length));this.xe.push(a);this.df+=a.length;c.set(c.subarray(b,b+32768));this.R=32768;return c};u.sh=function(a){var b=this.input.length/this.ha+1|0,c=this.input,d=this.Ba;a&&("number"===typeof a.Qf&&(b=a.Qf),"number"===typeof a.ah&&(b+=a.ah));2>b?(a=(c.length-this.ha)/this.Nf[2],a=258*(a/2)|0,a=a<d.length?d.length+a:d.length<<1):a=d.length*b;a=new Uint8Array(a);a.set(d);return this.Ba=a};
u.Kf=function(){var a=0,b=this.Ba,c=this.xe,d,e=new Uint8Array(this.df+(this.R-32768)),f,g,h,m;if(0===c.length)return this.Ba.subarray(32768,this.R);f=0;for(g=c.length;f<g;++f){d=c[f];h=0;for(m=d.length;h<m;++h)e[a++]=d[h]}f=32768;for(g=this.R;f<g;++f)e[a++]=b[f];this.xe=[];return this.buffer=e};u.ih=function(){var a,b=this.R;this.hb?(a=new Uint8Array(b),a.set(this.Ba.subarray(0,b))):a=this.Ba.subarray(0,b);return this.buffer=a};new Uint8Array(256);var $e;for($e=0;256>$e;++$e)for(var af=$e,bf=7,af=af>>>1;af;af>>>=1)--bf;var cf=[],df;for(df=0;288>df;df++)switch(p){case 143>=df:cf.push([df+48,8]);break;case 255>=df:cf.push([df-144+400,9]);break;case 279>=df:cf.push([df-256+0,7]);break;case 287>=df:cf.push([df-280+192,8]);break;default:j("invalid literal: "+df)}
function ef(){var a=ff;switch(p){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,a-
31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:j("invalid length: "+a)}}var gf=[],ff,hf;
for(ff=3;258>=ff;ff++)hf=ef(),gf[ff]=hf[2]<<24|hf[1]<<16|hf[0];new Uint32Array(gf);function jf(){};function kf(a){this.input=a;this.ha=0;this.member=[]}
kf.prototype.tc=function(){for(var a=this.input.length;this.ha<a;){var b=new jf,c=l,d=l,e=l,f=c=e=l,g=l,c=c=l,h=this.input,d=this.ha;b.Vf=h[d++];b.Wf=h[d++];(31!==b.Vf||139!==b.Wf)&&j(Error("invalid file signature:",b.Vf,b.Wf));b.Jf=h[d++];switch(b.Jf){case 8:break;default:j(Error("unknown compression method: "+b.Jf))}b.Bd=h[d++];c=h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24;b.Nk=new Date(1E3*c);b.Rk=h[d++];b.Ok=h[d++];0<(b.Bd&4)&&(b.oj=h[d++]|h[d++]<<8,d+=b.oj);if(0<(b.Bd&8)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=
String.fromCharCode(c);b.name=g.join("")}if(0<(b.Bd&16)){g=[];for(f=0;0<(c=h[d++]);)g[f++]=String.fromCharCode(c);b.comment=g.join("")}0<(b.Bd&2)&&(b.jh=De.Ae(h,0,d)&65535,b.jh!==(h[d++]|h[d++]<<8)&&j(Error("invalid header crc16")));c=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-d-4-4<512*c&&(e=c);d=new Fe(h,{index:d,bufferSize:e});b.data=e=d.tc();d=d.ha;b.Gk=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;De.Ae(e)!==c&&j(Error("invalid CRC-32 checksum: 0x"+De.Ae(e).toString(16)+
" / 0x"+c.toString(16)));b.Jk=c=(h[d++]|h[d++]<<8|h[d++]<<16|h[d++]<<24)>>>0;(e.length&4294967295)!==c&&j(Error("invalid input size: "+(e.length&4294967295)+" / "+c));this.member.push(b);this.ha=d}a=this.member;b=e=d=0;for(h=a.length;b<h;++b)e+=a[b].data.length;e=new Uint8Array(e);for(b=0;b<h;++b)e.set(a[b].data,d),d+=a[b].data.length;return e};function V(){M.call(this);this.c="parser";this.L=r;this.i=0;this.Vg=0<(new Int8Array((new Int16Array([1])).buffer))[0];this.jd=p;this.Ck=-Infinity;this.Bk=Infinity}H(V,M);V.prototype.parse=function(){j(Error("The function parse() should be overloaded."))};function lf(a){for(var b=Infinity,c=-Infinity,d=a.length,e=0,e=0;e<d;e++)var f=a[e],b=Math.min(b,f),c=Math.max(c,f);return[b,c]}
function mf(a,b,c){b===l&&(b=0);c===l&&(c=a.length);for(var d="",e=0,e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}
function Z(a,b,c){c!=r||(c=1);var d=1,e=Uint8Array;switch(b){case "schar":e=Int8Array;break;case "ushort":e=Uint16Array;d=2;break;case "sshort":e=Int16Array;d=2;break;case "uint":e=Uint32Array;d=4;break;case "sint":e=Int32Array;d=4;break;case "float":e=Float32Array,d=4}b=new e(a.L.slice(a.i,a.i+=c*d));if(a.Vg!=a.jd){a=b;b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(e=0;e<a.byteLength;e+=d)for(var f=e+d-1,g=e;f>g;f--,g++){var h=b[g];b[g]=b[f];b[f]=h}b=a}return 1==c?b[0]:b}
function nf(a,b,c){I.ta(a.c+".reslice");var d=b.ea,e=c.max,f=c.data,g=d[2],h=d[1],d=d[0],m=b.o!=r,k=h*d,n=Array(g),q=Array(g),w=0,v=r;b.da&&(v=b.da.sb);for(var y=0,z=0,A=0,G=0,x=4*k,y=0;y<g;y++){n[y]=Array(h);q[y]=Array(h);for(var C=f.subarray(y*k,(y+1)*k),J=new Uint8Array(x),z=G=0;z<h;z++){n[y][z]=new c.data.constructor(d);q[y][z]=new c.data.constructor(d);for(A=0;A<d;A++){var w=C[G],P=0,da=0,W=0,Y=0;v?(Y=v.get(Math.floor(w)),Y||(P=v.Wa(),Y=P[P.length-1]),P=255*Y[1],da=255*Y[2],W=255*Y[3],Y=255*
Y[4]):(P=da=W=255*(w/e),Y=255);var ja=4*G;J[ja]=P;J[++ja]=da;J[++ja]=W;J[++ja]=Y;n[y][z][A]=255*(w/e);q[y][z][A]=w;G++}}w=new od;w.xa=J;w.Ab=d;w.zb=h;C=b.cb.d[y];C.A=w;m&&(C.o=b.o.cb.d[y].A)}b.me&&(d!=h?m?b.da?(of(g,d,h,q,b.da,b.V,b.o.V,p),of(g,h,d,q,b.da,b.U,b.o.U,s)):(pf(g,d,h,n,b.V,b.o.V,p),pf(g,h,d,n,b.U,b.o.U,s)):b.da?(of(g,d,h,q,b.da,b.V,r,p),of(g,h,d,q,b.da,b.U,r,s)):(pf(g,d,h,n,b.V,r,p),pf(g,h,d,n,b.U,r,s)):m?b.da?qf(g,d,h,n,b.da,b.U,b.o.U,b.V,b.o.V):rf(g,d,h,n,b.U,b.o.U,b.V,b.o.V):b.da?qf(g,
d,h,q,b.da,b.U,r,b.V,r):rf(g,d,h,n,b.U,r,b.V,r));I.oa(a.c+".reslice");return q}function pf(a,b,c,d,e,f,g){for(var h=4*a*b,m=0,m=0;m<c;m++){for(var k=new Uint8Array(h),n=0,q=0,n=0;n<a;n++)for(var w=0,v=d[n],w=0;w<b;w++){var y,z=y=g?v[m][w]:v[w][m],A=y,G=4*q;k[G]=y;k[++G]=z;k[++G]=A;k[++G]=255;q++}n=new od;n.xa=k;n.Ab=b;n.zb=a;k=e.d[m];k.A=n;f&&(k.o=f.d[m].A)}}
function of(a,b,c,d,e,f,g,h){e=e.sb;for(var m=4*a*b,k=0,k=0;k<c;k++){for(var n=new Uint8Array(m),q=0,w=0,q=0;q<a;q++)for(var v=d[q],y=0,y=0;y<b;y++){var z=e.get(Math.floor(h?v[k][y]:v[y][k]));z||(z=e.Wa(),z=z[z.length-1]);var A=255*z[2],G=255*z[3],x=255*z[4],C=4*w;n[C]=255*z[1];n[++C]=A;n[++C]=G;n[++C]=x;w++}q=new od;q.xa=n;q.Ab=b;q.zb=a;n=f.d[k];n.A=q;g&&(n.o=g.d[k].A)}}
function rf(a,b,c,d,e,f,g,h){for(var m=4*a*b,k=0,k=0;k<c;k++){for(var n=new Uint8Array(m),q=new Uint8Array(m),w=0,v=0,v=0;v<a;v++)for(var y=d[v],z=0,z=0;z<b;z++){var A=y[z][k],G=A,x=A,C=4*w;n[C]=A;n[++C]=G;n[++C]=x;n[++C]=255;x=G=A=C=y[k][z];C=4*w;q[C]=A;q[++C]=G;q[++C]=x;q[++C]=255;w++}w=new od;w.xa=n;w.Ab=b;w.zb=a;n=e.d[k];n.A=w;f&&(n.o=f.d[k].A);n=new od;n.xa=q;n.Ab=b;n.zb=a;q=g.d[k];q.A=n;h&&(q.o=h.d[k].A)}}
function qf(a,b,c,d,e,f,g,h,m){e=e.sb;for(var k=4*a*b,n=0,n=0;n<c;n++){for(var q=new Uint8Array(k),w=new Uint8Array(k),v=0,y=0,y=0;y<a;y++)for(var z=d[y],A=0,A=0;A<b;A++){var G=e.get(Math.floor(z[A][n]));if(!G)var x=e.Wa(),G=x[x.length-1];var C=255*G[2],J=255*G[3],P=255*G[4],x=4*v;q[x]=255*G[1];q[++x]=C;q[++x]=J;q[++x]=P;x=e.get(Math.floor(z[n][A]));x||(x=e.Wa(),x=x[x.length-1]);G=255*x[1];C=255*x[2];J=255*x[3];P=255*x[4];x=4*v;w[x]=G;w[++x]=C;w[++x]=J;w[++x]=P;v++}v=new od;v.xa=q;v.Ab=b;v.zb=a;q=
f.d[n];q.A=v;g&&(q.o=g.d[n].A);q=new od;q.xa=w;q.Ab=b;q.zb=a;w=h.d[n];w.A=q;m&&(w.o=m.d[n].A)}};function sf(){V.call(this);this.c="parserPGF"}H(sf,V);sf.prototype.parse=function(a,b,c,d){I.ta(this.c+".parse");window.console.log("PGF flag: ",d);d&&(c=(new kf(new Uint8Array(c))).tc(),c=c.buffer);this.fc(c,b);I.oa(this.c+".parse");d=new sd;d.T=b;d.m=a;this.dispatchEvent(d)};
sf.prototype.fc=function(a,b){this.L=this.L=a;for(var c=Z(this,"uchar",a.byteLength),d=c.length,e=0;e<d;e++)if(10==c[e]&&35!=c[e+1]){for(var c=mf(c,0,e),c=c.replace("\n",";").replace(/#/g,""),c=c.split(";"),f=0;f<c.length;f++)if(d=c[f].trim().split("="),"ncoords"==d[0])var g=parseInt(d[1]);else if("nelems"==d[0])var h=parseInt(d[1]);else if("nplex"==d[0])var m=parseInt(d[1]);else if("normals"==d[0])var k="True"==d[1];else if("color"==d[0])var n=d[1];this.i=e+1;break}1==m?b.aa="POINTS":2==m?b.aa="LINES":
3==m&&(b.aa=pd);b.g=new S(3*h*m);b.h=new S(3*h*m);c=b.g;d=b.h;g=Z(this,"float",3*g);this.i+=1;var q=Z(this,"uint",h*m);this.i+=1;for(e=0;e<h*m;e++)f=3*q[e],c.add(g[f],g[f+1],g[f+2]);if(k){g=Z(this,"float",3*h*m);this.i+=1;for(e=0;e<3*h*m;e+=3)d.add(g[e],g[e+1],g[e+2])}else if(!k&&3==m)for(e=0;e<h*m;e+=3)k=new O(c.get(e)[0],c.get(e)[1],c.get(e)[2]),f=new O(c.get(e+1)[0],c.get(e+1)[1],c.get(e+1)[2]),g=new O(c.get(e+2)[0],c.get(e+2)[1],c.get(e+2)[2]),k=$c(f.na(k),g.na(k)),k.normalize(),d.add(k.x,k.y,
k.b),d.add(k.x,k.y,k.b),d.add(k.x,k.y,k.b);if("'vertex'"==n){n=Z(this,"float",3*h*m);this.i+=1;b.K=new S(3*h*m);k=b.K;for(e=0;e<3*h*m;e+=3)k.add(n[e],n[e+1],n[e+2])}};F("X.parserPGF",sf);F("X.parserPGF.prototype.parse",sf.prototype.parse);function tf(){V.call(this);this.c="parserDCM"}H(tf,V);tf.prototype.parse=function(a,b,c){c=this.fc(c,b);if(c.Kd==c.Xa){var d=c.$e.length,e,f=0;for(e=0;e<d;e++){var g=c.$e[e];g!==l&&(g*=c.ab,c.data.set(c.Uc.subarray(g,g+c.ab),f*c.ab),f++)}b.ea=[c.za[0],c.za[1],c.za[2]];Infinity==c.ma[2]&&(c.ma[2]=1);b.H=[c.ma[0],c.ma[1],c.ma[2]];e=lf(c.data);d=e[0];e=e[1];c.min=b.La=b.Y=d;c.max=b.Ga=b.X=e;-Infinity==b.S&&(b.S=d);Infinity==b.W&&(b.W=e);b.sc();b.mb=nf(this,b,c)}c=new sd;c.T=b;c.m=a;this.dispatchEvent(c)};
tf.prototype.fc=function(a,b){this.L=a;var c=0;if(b.ic!=r){g=b.ic;h=Z(this,"ushort",this.L.byteLength-2*g.ab);m=0;for(k=2;0<k;)if(d=h[m++],32==d)if(f=h[m++],19==f){m++;d=h[m++];for(f=0;f<d/2;f++)n=h[m++],q=n&255,n=(n&65280)>>8,c+=String.fromCharCode(q),c+=String.fromCharCode(n),c=parseInt(c,10);k--}else if(4161==f){m++;for(var d=h[m++],e="",f=0;f<d/2;f++)n=h[m++],q=n&255,n=(n&65280)>>8,e+=String.fromCharCode(q),e+=String.fromCharCode(n);g.ma=[g.ma[0],g.ma[1],Math.min(Math.abs(g.bg-e),g.ma[2])];g.bg=
e;k--}g.za[2]++}else{var g={rows:0,cols:0,ma:r,we:0,fh:0,Xa:1,$h:1,bg:r,Kd:0,ab:0,Uc:r,Ve:0,$e:[],data:r,min:Infinity,max:-Infinity};g.Xa=b.q.length;g.Xa==r&&(g.Xa=1);for(var h=Z(this,"ushort",this.L.byteLength),m=66,d=r,f=r,d=r,k=7;0<k;)if(d=h[m++],40==d)switch(f=h[m++],m++,d=h[m++],f){case 16:g.rows=h[m++];k--;break;case 17:g.cols=h[m++];k--;break;case 256:g.we=h[m++];k--;break;case 257:g.fh=h[m++];k--;break;case 2:g.$h=h[m++];k--;break;case 48:e="";for(f=f=0;f<d/2;f++)var n=h[m++],q=n&255,n=(n&
65280)>>8,e=e+String.fromCharCode(q),e=e+String.fromCharCode(n);e=e.split("\\");g.ma=[+e[0],+e[1],Infinity];k--}else if(32==d&&(f=h[m++],19==f)){m++;d=h[m++];for(f=0;f<d/2;f++)n=h[m++],q=n&255,n=(n&65280)>>8,c+=String.fromCharCode(q),c+=String.fromCharCode(n),c=parseInt(c,10);k--}b.ic=g;g.za=[g.cols,g.rows,1];g.ab=g.rows*g.cols;switch(g.we){case 8:g.Uc=new Uint8Array(g.cols*g.rows*g.Xa);g.data=new Uint8Array(g.cols*g.rows*g.Xa);break;case 16:g.Uc=new Uint16Array(g.cols*g.rows*g.Xa);g.data=new Uint16Array(g.cols*
g.rows*g.Xa);break;case 32:g.Uc=new Uint32Array(g.cols*g.rows*g.Xa),g.data=new Uint32Array(g.cols*g.rows*g.Xa)}}this.i=this.L.byteLength-2*g.ab;h=r;switch(g.we){case 8:h=Z(this,"uchar",g.ab);break;case 16:h=Z(this,"ushort",g.ab);break;case 32:h=Z(this,"uint",g.ab)}g.$e[c]=g.Ve;g.Uc.set(h,g.Ve*g.ab);g.Ve++;++g.Kd;return g};F("X.parserDCM",tf);F("X.parserDCM.prototype.parse",tf.prototype.parse);function uf(){V.call(this);this.c="parserVTK"}H(uf,V);
uf.prototype.parse=function(a,b,c){I.ta(this.c+".parse");var d=b.g,e=b.h,f=new Uint8Array(c),g="";b.g=d=new S(c.byteLength);b.h=e=new S(c.byteLength);c=0;for(var h=f.length;c<h;c+=32768)g+=mf(f,c,Math.min(c+32768,h));f=g.split("\n");g=f.length;this.Pc=this.Qc=r;this.Lb=[];this.va=pd;this.ke=this.xb=this.lb=this.yb=s;c=0;for(h=g%8;h--;)vf(this,f[c]),c++;for(h=0.125*g^0;h--;)vf(this,f[c]),c++,vf(this,f[c]),c++,vf(this,f[c]),c++,vf(this,f[c]),c++,vf(this,f[c]),c++,vf(this,f[c]),c++,vf(this,f[c]),c++,
vf(this,f[c]),c++;c=this.Qc;var f=this.Pc,g=f.length,m=h=this.Lb.length;do{var k=this.Lb[h-m],n=k.length,q;for(q=0;q<n&&!("LINES"==this.va&&q+1>=n);q++){var w=parseInt(k[q],10),v=c.get(w);d.add(v[0],v[1],v[2]);var y=w,z=v;"LINES"==this.va?(y=parseInt(k[q+1],10),z=c.get(y),d.add(z[0],z[1],z[2])):"TRIANGLE_STRIPS"==this.va&&(0==q||q==n-1)&&d.add(v[0],v[1],v[2]);w<g?(z=f.get(w),e.add(z[0],z[1],z[2]),"LINES"==this.va?(y=f.get(y),e.add(y[0],y[1],y[2])):"TRIANGLE_STRIPS"==this.va&&(0==q||q==n-1)&&e.add(z[0],
z[1],z[2])):(y=new O(v[0],v[1],v[2]),y.normalize(),e.add(y.x,y.y,y.b),"LINES"==this.va?(y=new O(z[0],z[1],z[2]),y.normalize(),e.add(y.x,y.y,y.b)):"TRIANGLE_STRIPS"==this.va&&(0==q||q==n-1)&&e.add(y.x,y.y,y.b))}m--}while(0<m);b.aa=this.va;I.oa(this.c+".parse");d=new sd;d.T=b;d.m=a;this.dispatchEvent(d)};
function vf(a,b){b=b.replace(/^\s+|\s+$/g,"");var c=b.split(" "),d=c.length,e=c[0];switch(e){case "POINTS":a.yb=p;a.lb=s;a.xb=s;c=parseInt(c[1],10);a.Qc=new S(3*c);a.Pc=new S(3*c);return;case "VERTICES":a.lb=p;a.yb=s;a.xb=s;c=parseInt(c[1],10);3<=c?a.va=pd:1==c?a.va="POINTS":j(Error("This VTK file is not supported!"));a.Lb=[];return;case "TRIANGLE_STRIPS":a.lb=p;a.yb=s;a.xb=s;a.va="TRIANGLE_STRIPS";a.Lb=[];return;case "LINES":a.lb=p;a.yb=s;a.xb=s;a.va="LINES";a.Lb=[];return;case "POLYGONS":a.lb=p;
a.yb=s;a.xb=s;a.va="POLYGONS";a.Lb=[];return;case "POINT_DATA":a.xb=p;a.yb=s;a.lb=s;return}if(a.yb)if(1==d||isNaN(parseFloat(e)))a.yb=s;else{if(3<=d){var e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]);a.Qc.add(e,f,g)}6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Qc.add(e,f,g));9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Qc.add(d,e,c))}else a.lb?1==d||isNaN(parseFloat(e))?a.lb=s:(c=c.slice(1),a.Lb.push(c)):a.xb&&("NORMALS"==e?a.ke=p:1==d||isNaN(parseFloat(e))?
(a.xb=s,a.ke=s):a.ke&&(3<=d&&(e=parseFloat(c[0]),f=parseFloat(c[1]),g=parseFloat(c[2]),a.Pc.add(e,f,g)),6<=d&&(e=parseFloat(c[3]),f=parseFloat(c[4]),g=parseFloat(c[5]),a.Pc.add(e,f,g)),9<=d&&(d=parseFloat(c[6]),e=parseFloat(c[7]),c=parseFloat(c[8]),a.Pc.add(d,e,c))))}F("X.parserVTK",uf);F("X.parserVTK.prototype.parse",uf.prototype.parse);function wf(){V.call(this);this.c="parserFSM";this.jd=s}H(wf,V);
wf.prototype.parse=function(a,b,c){I.ta(this.c+".parse");this.L=c;var d=b.g,e=b.h;b.qc=[];var f=b.qc;c=0;var g;do g=Z(this,"uchar"),c++;while(200>c&&10!=g);Z(this,"uchar");e=Z(this,"uint");c=Z(this,"uint");var h=Z(this,"float",3*e);g=Z(this,"uint",3*c);var m=new Uint32Array(e),k=new Float32Array(9*c);b.g=d=new S(9*c);b.h=e=new S(9*c);var n;for(n=0;n<c;n++){var q=3*n,w=g[q],v=g[q+1],y=g[q+2];f.push(w);f.push(v);f.push(y);m[w]+=1;m[v]+=1;m[y]+=1;var q=3*w,z=3*v,A=3*y,G=h[q],x=h[q+1],C=h[q+2],v=h[z],
y=h[z+1],w=h[z+2],J=h[A],P=h[A+1],da=h[A+2];d.add(G,x,C);d.add(v,y,w);d.add(J,P,da);G=new O(G,x,C);J=new O(J,P,da);v=(new O(v,y,w)).f().na(G);y=J.f().na(G);v=$c(v,y).normalize();k[q]+=v.x;k[q+1]+=v.y;k[q+2]+=v.b;k[z]+=v.x;k[z+1]+=v.y;k[z+2]+=v.b;k[A]+=v.x;k[A+1]+=v.y;k[A+2]+=v.b}for(n=0;n<c;n++)q=3*n,w=g[q],v=g[q+1],y=g[q+2],q=3*w,z=3*v,A=3*y,f=new O(k[z],k[z+1],k[z+2]),h=new O(k[A],k[A+1],k[A+2]),q=(new O(k[q],k[q+1],k[q+2])).scale(1/m[w]).normalize(),f=f.scale(1/m[v]).normalize(),h=h.scale(1/m[y]).normalize(),
e.add(q.x,q.y,q.b),e.add(f.x,f.y,f.b),e.add(h.x,h.y,h.b);b.aa=pd;I.oa(this.c+".parse");c=new sd;c.T=b;c.m=a;this.dispatchEvent(c)};F("X.parserFSM",wf);F("X.parserFSM.prototype.parse",wf.prototype.parse);function xf(){V.call(this);this.c="parserMGZ";this.jd=s}H(xf,V);xf.prototype.parse=function(a,b,c,d){I.ta(this.c+".parse");d&&(c=(new kf(new Uint8Array(c))).tc(),c=c.buffer);d=this.fc(c);b.ea=[d.Ne,d.Oe,d.Pe];b.H=d.ug;c=d.min;var e=d.max;b.La=b.Y=c;b.Ga=b.X=e;-Infinity==b.S&&(b.S=c);Infinity==b.W&&(b.W=e);b.sc();I.oa(this.c+".parse");b.mb=nf(this,b,d);d=new sd;d.T=b;d.m=a;this.dispatchEvent(d)};
xf.prototype.fc=function(a){this.L=a;a={version:0,Pg:0,Ng:0,yh:0,Og:0,Ne:0,Oe:0,Pe:0,Yh:0,type:0,qh:0,qg:0,Kj:r,Kg:r,ug:r,data:r,min:Infinity,max:-Infinity};a.version=Z(this,"uint");a.Ne=Z(this,"uint");a.Oe=Z(this,"uint");a.Pe=Z(this,"uint");a.Yh=Z(this,"uint");a.type=Z(this,"uint");a.qh=Z(this,"uint");a.qg=Z(this,"ushort");if(0<a.qg){a.ug=Z(this,"float",3);var b=[];b.push(Z(this,"float",3));b.push(Z(this,"float",3));b.push(Z(this,"float",3));b.push(Z(this,"float",3));a.Kg=b}this.i=284;b=a.Ne*a.Oe*
a.Pe;switch(a.type){case 0:a.data=Z(this,"uchar",b);break;case 1:a.data=Z(this,"uint",b);break;case 3:a.data=Z(this,"float",b);break;case 4:a.data=Z(this,"ushort",b);break;default:j(Error("Unsupported MGH/MGZ data type: "+a.type))}b=lf(a.data);a.min=b[0];a.max=b[1];this.i+16<this.L.byteLength&&(a.Pg=Z(this,"float"),a.yh=Z(this,"float"),a.Ng=Z(this,"float"),a.Og=Z(this,"float"));return a};F("X.parserMGZ",xf);F("X.parserMGZ.prototype.parse",xf.prototype.parse);function yf(){V.call(this);this.c="parserLBL"}H(yf,V);
yf.prototype.parse=function(a,b,c){I.ta(this.c+".parse");var d=b.qc,e=d.length;0==e&&j(Error("No _pointIndices defined on the X.object."));this.L=c;var f=[],g=Z(this,"uchar",c.byteLength),h=g.length,m=s,k=0;for(c=1;c<h;c++)10==g[c-1]?(k=c,m=p):m&&32==g[c]&&(f.push(parseInt(mf(g,k,c),10)),m=s);g=b.u.w?b.u.w:new Float32Array(e);h=f.length;for(c=0;c<h;c++)g[f[c]]=1;f=new Float32Array(3*e);for(c=h=0;c<e;c++)m=d[c],m>e&&j(Error("Could not find scalar for vertex.")),m=g[m],f[h++]=m,f[h++]=m,f[h++]=m;b.u.w=
g;b.u.Ac=f;b.u.e=p;I.oa(this.c+".parse");d=new sd;d.T=b;d.m=a;this.dispatchEvent(d)};F("X.parserLBL",yf);F("X.parserLBL.prototype.parse",yf.prototype.parse);function zf(){V.call(this);this.c="parserCRV";this.jd=s}H(zf,V);
zf.prototype.parse=function(a,b,c){I.ta(this.c+".parse");var d=b.qc;0==d.length&&j(Error("No _pointIndices defined on the X.object."));this.L=c;this.i=3;var e=Z(this,"uint");Z(this,"uint");Z(this,"uint");var f=0,g=0,h=0,m=0,k=0,n=0,q=0,w=0,v=0,y=0,z=0;c=Array(2);var A=Array(2),G=Z(this,"float",e),x;for(x=0;x<e;x++){var C=G[x];0==x&&(c[0]=A[0]=C);0<=C?(f++,m+=C):(g++,h+=C);v+=C;z++;A[0]=Math.max(C,A[0]);c[0]=Math.min(C,c[0]);G[x]=C}0!=f&&(k=m/f);0!=g&&(n=h/g);0!=z&&(y=v/z);for(z=v=h=m=0;z<e;z++)C=
G[z],x=0,0<=C?(x=Math.pow(C-k,2),m+=x):(x=Math.pow(C-n,2),h+=x),x=Math.pow(C-y,2),v+=x;1<f&&(q=Math.sqrt(m/(f-1)));1<g&&(w=Math.sqrt(h/(g-1)));c[1]=n-2.5*w;A[1]=k+2.5*q;e=d.length;f=new Float32Array(3*e);for(z=0;z<e;z++)g=G[d[z]],h=3*z,f[h]=g,f[h+1]=g,f[h+2]=g;b.u.La=c[1];b.u.Ga=A[1];-Infinity==b.u.S&&(b.u.S=c[1]);Infinity==b.u.W&&(b.u.W=A[1]);b.u.w=G;b.u.Ac=f;b.u.e=p;I.oa(this.c+".parse");d=new sd;d.T=b;d.m=a;this.dispatchEvent(d)};F("X.parserCRV",zf);F("X.parserCRV.prototype.parse",zf.prototype.parse);function Af(){V.call(this);this.c="parserTRK"}H(Af,V);
Af.prototype.parse=function(a,b,c){I.ta(this.c+".parse");var d=b.g,e=b.h,f=b.K;this.L=c;Z(this,"uchar",6);Z(this,"ushort",3);var g=Z(this,"float",3);Z(this,"float",3);var h=Z(this,"ushort");Z(this,"uchar",200);Z(this,"ushort");Z(this,"uchar",200);Z(this,"float",16);Z(this,"uchar",444);Z(this,"uchar",4);Z(this,"uchar",4);Z(this,"float",6);Z(this,"uchar",2);Z(this,"uchar");Z(this,"uchar");Z(this,"uchar");Z(this,"uchar");Z(this,"uchar");Z(this,"uchar");var m=Z(this,"uint");Z(this,"uint");var k=Z(this,
"uint"),n=[],q=[];c=Infinity;var w=-Infinity,v=r,y=r,z=r,A=r,e=d=r,G=Z(this,"uint",(this.L.byteLength-1E3)/4);this.i=k;for(var x=Z(this,"float",(this.L.byteLength-1E3)/4),C=0,k=f=0;k<m;k++){for(var J=G[C],P=new S(3*J),da=0,W=0;W<J;W++){var Y=x[C+3*W+W*h+1],ja=x[C+3*W+W*h+2],ea=x[C+3*W+W*h+3],Y=Y/g[0],ja=ja/g[1],ea=ea/g[2];P.add(Y,ja,ea);if(0<W)var fa=P.get(W-1),da=da+Math.sqrt(Math.pow(Y-fa[0],2)+Math.pow(ja-fa[1],2)+Math.pow(ea-fa[2],2));W<J-1&&(f+=6)}C+=3*J+J*h+1;W=P.Rb;J=P.Ob;Y=P.Sb;ja=P.Pb;ea=
P.Tb;fa=P.Qb;if(!v||W<v)v=W;if(!y||J>y)y=J;if(!z||Y<z)z=Y;if(!A||ja>A)A=ja;if(!d||ea<d)d=ea;if(!e||fa>e)e=fa;n.push(P);q.push(da)}g=(v+y)/2;z=(z+A)/2;h=(d+e)/2;A=new Float32Array(f);b.g=d=new S(f);b.h=e=new S(f);b.K=f=new S(f);for(k=v=0;k<m;k++){y=n[k];G=y.count;da=q[k];c=Math.min(c,da);w=Math.max(w,da);for(W=0;W<G-1;W++){C=y.get(W);x=y.get(W+1);d.add(C[0],C[1],C[2]);d.add(x[0],x[1],x[2]);var P=C[0]-g,J=C[1]-z,Y=C[2]-h,ja=Math.sqrt(P*P+J*J+Y*Y),ea=x[0]-g,fa=x[1]-z,Oa=x[2]-h,yb=Math.sqrt(ea*ea+fa*
fa+Oa*Oa);e.add(P/ja,J/ja,Y/ja);e.add(ea/yb,fa/yb,Oa/yb);x=[Math.abs(x[0]-C[0]),Math.abs(x[1]-C[1]),Math.abs(x[2]-C[2])];C=Math.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2]);x[0]/=C;x[1]/=C;x[2]/=C;f.add(x[0],x[1],x[2]);f.add(x[0],x[1],x[2]);A[v++]=da;A[v++]=da;A[v++]=da;A[v++]=da;A[v++]=da;A[v++]=da}}b.aa="LINES";m=new rd;m.La=c;m.Ga=w;m.S=c;m.W=w;m.Ac=A;m.Cf=s;m.e=p;b.u=m;I.oa(this.c+".parse");c=new sd;c.T=b;c.m=a;this.dispatchEvent(c)};F("X.parserTRK",Af);F("X.parserTRK.prototype.parse",Af.prototype.parse);function Bf(){V.call(this);this.c="parserIMAGE"}H(Bf,V);Bf.prototype.parse=function(a,b,c,d){c instanceof ArrayBuffer||j(Error());for(var e=new Uint8Array(c),f=e.length,g=Array(f);f--;)g[f]=String.fromCharCode(e[f]);e=window.btoa(g.join(""));f=new Image;wc(f,"load",this.Ci.bind(this,f,a,b,c,d));f.src="data:image/"+d+";base64,"+e};Bf.prototype.Ci=function(a,b,c){b.mb=a;b.xa=r;a=new sd;a.T=c;a.m=b;this.dispatchEvent(a)};F("X.parserIMAGE",Bf);F("X.parserIMAGE.prototype.parse",Bf.prototype.parse);function Cf(){V.call(this);this.c="parserLUT"}H(Cf,V);
Cf.prototype.parse=function(a,b,c){I.ta(this.c+".parse");this.L=c;c=Z(this,"uchar",c.byteLength);var d=c.length,e=0,f;for(f=0;f<d;f++)if(10==c[f]){var g=mf(c,e,f),e=f+1,g=g.replace(/^\s+|\s+$/g,"");"#"!=g[0]&&(g=g.split(" "),g=g.filter(function(a){return""!=a}),6==g.length&&(g[2]=parseInt(g[2],10)/255,g[3]=parseInt(g[3],10)/255,g[4]=parseInt(g[4],10)/255,g[5]=parseInt(g[5],10)/255,a.add(parseInt(g[0],10),g[1],g[2],g[3],g[4],g[5],10)))}I.oa(this.c+".parse");c=new sd;c.T=b;c.m=a;this.dispatchEvent(c)};
F("X.parserLUT",Cf);F("X.parserLUT.prototype.parse",Cf.prototype.parse);function Df(){V.call(this);this.c="parserNRRD"}H(Df,V);
Df.prototype.parse=function(a,b,c){I.ta(this.c+".parse");this.L=c;c=Z(this,"uchar",c.byteLength);var d=c.length,e=r,f=0,g;for(g=1;g<d;g++)if(10==c[g-1]&&10==c[g]){e=mf(c,0,g-2);f=g+1;break}var h,m,k,n,d=e.split(/\r?\n/),e=0;for(g=d.length;e<g;e++)if(h=d[e],h.match(/NRRD\d+/))this.Rh=p;else if(!h.match(/^#/)&&(n=h.match(/(.*):(.*)/)))m=n[1].trim(),h=n[2].trim(),(k=this.uh[m])?k.call(this,h):this[m]=h;this.Rh||j(Error("Not an NRRD file"));"raw"!==this.encoding&&("gzip"!==this.encoding&&"gz"!==this.encoding)&&
j(Error("Only raw or gz/gzip encoding is allowed"));if(!this.Ja&&(this.Ja=[new O(1,0,0),new O(0,1,0),new O(0,0,1)],this.af)){d=[];for(n=0;2>=n;n++)d.push(!isNaN(this.af[n])?this.Ja[n].scale(this.af[n]):l)}f=c.subarray(f);if("gzip"==this.encoding||"gz"==this.encoding)f=(new kf(new Uint8Array(f))).tc();f=f.buffer;c={data:r,min:Infinity,max:-Infinity};c.data=new this.Ib(f);n=lf(c.data);f=c.min=n[0];n=c.max=n[1];b.ea=[this.Ye[0],this.Ye[1],this.Ye[2]];b.H=[(new O(this.Ja[0][0],this.Ja[0][1],this.Ja[0][2])).ec(),
(new O(this.Ja[1][0],this.Ja[1][1],this.Ja[1][2])).ec(),(new O(this.Ja[2][0],this.Ja[2][1],this.Ja[2][2])).ec()];b.La=b.Y=f;b.Ga=b.X=n;-Infinity==b.S&&(b.S=f);Infinity==b.W&&(b.W=n);b.sc();I.oa(this.c+".parse");b.mb=nf(this,b,c);c=new sd;c.T=b;c.m=a;this.dispatchEvent(c)};
Df.prototype.uh={type:function(a){switch(a){case "uchar":case "unsigned char":case "uint8":case "uint8_t":this.Ib=Uint8Array;break;case "signed char":case "int8":case "int8_t":this.Ib=Int8Array;break;case "short":case "short int":case "signed short":case "signed short int":case "int16":case "int16_t":this.Ib=Int16Array;break;case "ushort":case "unsigned short":case "unsigned short int":case "uint16":case "uint16_t":this.Ib=Uint16Array;break;case "int":case "signed int":case "int32":case "int32_t":this.Ib=
Int32Array;break;case "uint":case "unsigned int":case "uint32":case "uint32_t":this.Ib=Uint32Array;break;case "float":this.Ib=Float32Array;break;default:j(Error("Unsupported NRRD data type: "+a))}return this.type=a},endian:function(a){return this.Ik=a},encoding:function(a){return this.encoding=a},dimension:function(a){return this.za=parseInt(a,10)},sizes:function(a){var b,c,d,e;d=a.split(/\s+/);e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(parseInt(a,10));return this.Ye=e},"space directions":function(a){var b,
c;a=a.match(/\(.*?\)/g);var d,e,f;f=[];d=0;for(e=a.length;d<e;d++)c=a[d],f.push(function(){var a,d,e,f;e=c.slice(1,-1).split(/,/);f=[];a=0;for(d=e.length;a<d;a++)b=e[a],f.push(parseFloat(b));return f}());return this.Ja=f},spacings:function(a){var b;b=a.split(/\s+/);var c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=b[c],e.push(parseFloat(a));return this.af=e}};F("X.parserNRRD",Df);F("X.parserNRRD.prototype.parse",Df.prototype.parse);function Ef(){V.call(this);this.c="parserSTL"}H(Ef,V);
Ef.prototype.parse=function(a,b,c){I.ta(this.c+".parse");this.L=c;var d=b.g,e=b.h;if("solid"==mf(Z(this,"uchar",5))){b.g=d=new S(c.byteLength);b.h=e=new S(c.byteLength);var f=d,d=e,e=Z(this,"uchar",c.byteLength-5);c=e.length;var g=s,h=s,m=0,k;for(k=0;k<c;k++)if(10==e[k]){if(g||h){var n=mf(e,m,k).split(" "),h=parseFloat(n[0]),q=parseFloat(n[1]),n=parseFloat(n[2]);g?(d.add(h,q,n),d.add(h,q,n),d.add(h,q,n)):f.add(h,q,n);h=g=s}}else 32==e[k-1]&&(102==e[k]?(m=k+=13,g=p):118==e[k]&&(m=k+=7,h=p))}else{this.i=
0;c=mf(Z(this,"uchar",80)).search("COLOR=");0<=c&&(this.i=c+6,f=Z(this,"uint8")/255,this.i=c+7,d=Z(this,"uint8")/255,this.i=c+8,e=Z(this,"uint8")/255,this.i=c+9,c=Z(this,"uint8")/255,b.kb=[f,d,e],b.N=c);this.i=80;f=Z(this,"uint");b.g=d=new S(9*f);b.h=e=new S(9*f);for(c=c=0;c<f;c++)g=Z(this,"float",12),m=g[0],k=g[1],h=g[2],e.add(m,k,h),e.add(m,k,h),e.add(m,k,h),d.add(g[3],g[4],g[5]),d.add(g[6],g[7],g[8]),d.add(g[9],g[10],g[11]),this.i+=2}I.oa(this.c+".parse");f=new sd;f.T=b;f.m=a;this.dispatchEvent(f)};
F("X.parserSTL",Ef);F("X.parserSTL.prototype.parse",Ef.prototype.parse);function Ff(){V.call(this);this.c="parserNII"}H(Ff,V);Ff.prototype.parse=function(a,b,c){I.ta(this.c+".parse");var d=c,e=-1,e="undefined"==typeof DataView?(new Int32Array(c,0,1))[0]:(new DataView(c,0)).getInt32(0,p);348!=e&&(d=(new kf(new Uint8Array(d))).tc(),d=d.buffer);c=this.fc(d);b.ea=[c.za[1],c.za[2],c.za[3]];b.H=[c.ma[1],c.ma[2],c.ma[3]];d=c.min;e=c.max;b.La=b.Y=d;b.Ga=b.X=e;-Infinity==b.S&&(b.S=d);Infinity==b.W&&(b.W=e);b.sc();I.oa(this.c+".parse");b.mb=nf(this,b,c);c=new sd;c.T=b;c.m=a;this.dispatchEvent(c)};
Ff.prototype.fc=function(a){this.L=a;a={Yi:0,lh:r,mh:r,th:0,Vi:0,Mi:0,ph:r,za:r,Nh:0,Oh:0,Ph:0,Lh:0,Ge:0,eh:0,bj:0,ma:r,vg:0,Ui:0,Ti:0,aj:0,Zi:r,pj:r,gh:0,hh:0,$i:0,ij:0,Ah:0,Bh:0,oh:r,dh:r,Fi:0,Wi:0,Ji:0,Ki:0,Li:0,Gi:0,Hi:0,Ii:0,cj:r,dj:r,ej:r,Mh:r,Uh:r,data:r,min:Infinity,max:-Infinity};a.Yi=Z(this,"uint");a.lh=Z(this,"uchar",10);a.mh=Z(this,"uchar",18);a.th=Z(this,"uint");a.Vi=Z(this,"ushort");a.Mi=Z(this,"uchar");a.ph=Z(this,"uchar");a.za=Z(this,"ushort",8);a.Nh=Z(this,"float");a.Oh=Z(this,"float");
a.Ph=Z(this,"float");a.Lh=Z(this,"ushort");a.Ge=Z(this,"ushort");a.eh=Z(this,"ushort");a.bj=Z(this,"ushort");a.ma=Z(this,"float",8);a.vg=Z(this,"float");a.Ui=Z(this,"float");a.Ti=Z(this,"float");a.aj=Z(this,"ushort");a.Zi=Z(this,"uchar");a.pj=Z(this,"uchar");a.gh=Z(this,"float");a.hh=Z(this,"float");a.$i=Z(this,"float");a.ij=Z(this,"float");a.Ah=Z(this,"uint",1);a.Bh=Z(this,"uint",1);a.oh=Z(this,"uchar",80);a.dh=Z(this,"uchar",24);a.Fi=Z(this,"ushort");a.Wi=Z(this,"ushort");a.Ji=Z(this,"float");a.Ki=
Z(this,"float");a.Li=Z(this,"float");a.Gi=Z(this,"float");a.Hi=Z(this,"float");a.Ii=Z(this,"float");a.cj=Z(this,"float",4);a.dj=Z(this,"float",4);a.ej=Z(this,"float",4);a.Mh=Z(this,"uchar",16);a.Uh=Z(this,"uchar",4);this.i=parseInt(a.vg,10);var b=a.za[1]*a.za[2]*a.za[3];switch(a.Ge){case 2:a.data=Z(this,"uchar",b);break;case 4:a.data=Z(this,"sshort",b);break;case 8:a.data=Z(this,"sint",b);break;case 16:a.data=Z(this,"float",b);break;case 256:a.data=Z(this,"schar",b);break;case 512:a.data=Z(this,"ushort",
b);break;case 768:a.data=Z(this,"uint",b);break;default:j(Error("Unsupported NII data type: "+a.Ge))}b=lf(a.data);a.min=b[0];a.max=b[1];return a};F("X.parserNII",Ff);F("X.parserNII.prototype.parse",Ff.prototype.parse);function Gf(){V.call(this);this.c="parserOBJ"}H(Gf,V);
Gf.prototype.parse=function(a,b,c){I.ta(this.c+".parse");this.L=c;c=c.byteLength;var d=Z(this,"uchar",c),e=[];b.g=new S(c);b.h=new S(c);var f=b.g,g=b.h,h=0,m;for(m=0;m<c;++m)if(10==d[m]){var k=mf(d,h,m).replace(/\s{2,}/g," ").split(" ");if("v"==k[0])e.push([parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])]);else if("f"==k[0]){var n=e[parseInt(k[1],10)-1],h=e[parseInt(k[2],10)-1],k=e[parseInt(k[3],10)-1];f.add(n[0],n[1],n[2]);f.add(h[0],h[1],h[2]);f.add(k[0],k[1],k[2]);n=new O(n[0],n[1],n[2]);k=
new O(k[0],k[1],k[2]);h=$c((new O(h[0],h[1],h[2])).na(n),k.na(n));h.normalize();g.add(h.x,h.y,h.b);g.add(h.x,h.y,h.b);g.add(h.x,h.y,h.b)}h=m+1}I.oa(this.c+".parse");c=new sd;c.T=b;c.m=a;this.dispatchEvent(c)};F("X.parserOBJ",Gf);F("X.parserOBJ.prototype.parse",Gf.prototype.parse);function Hf(){M.call(this);this.c="loader";this.oc=new Sc;this.Oc=0}H(Hf,M);function If(a,b){a.Oc+=b/a.oc.gb()/3;a.Oc=Math.min(1,a.Oc);var c=new Hd;c.Ff=a.Oc;a.dispatchEvent(c)}function Jf(a){a=a.q.nd;var b=a.split(".").pop().toUpperCase();b==a.toUpperCase()&&(b="");b in Kf||j(Error("The "+b+" file format is not supported."));return[a,b,Kf[b][0],Kf[b][1],Kf[b][2]]}
Hf.prototype.load=function(a,b){(!a||!b)&&j(Error("No container or object to load."));if(!Uc(this.oc.Q,a.la)||this.oc.get(a.la)){this.oc.set(a.la,s);var c=Jf(a)[0];if(a.Kb!=r)this.parse(r,a,b);else{var d=new XMLHttpRequest;L(d,"abort",this.Pf.bind(this,d,a,b));L(d,"error",this.Pf.bind(this,d,a,b));L(d,"load",this.parse.bind(this,d,a,b));d.open("GET",c,p);d.responseType="arraybuffer";d.send(r)}}};
Hf.prototype.parse=function(a,b,c){If(this,1);setTimeout(function(){var d=Jf(b),e=d[3],d=new d[2];wc(d,"h",this.complete.bind(this));var f=b.Kb;f==r&&(f=a.response);d.parse(b,c,f,e)}.bind(this),100)};Hf.prototype.complete=function(a){If(this,1);setTimeout(function(){var b=a.m,c=a.T;b.q.e=s;b.e=p;c.p();this.oc.set(b.la,p)}.bind(this),100)};Hf.prototype.Pf=function(a,b,c){j(Error("Loading failed: ",b,c))};
var Kf={PGF:[sf,s],GZ:[sf,p],OBJ:[Gf,r],STL:[Ef,r],VTK:[uf,r],TRK:[Af,r],FSM:[wf,r],INFLATED:[wf,r],SMOOTHWM:[wf,r],SPHERE:[wf,r],PIAL:[wf,r],ORIG:[wf,r],NRRD:[Df,r],NII:[Ff,r],DCM:[tf,r],DICOM:[tf,r],"":[tf,r],CRV:[zf,r],LABEL:[yf,r],MGH:[xf,s],MGZ:[xf,p],TXT:[Cf,r],LUT:[Cf,r],PNG:[Bf,"png"],JPG:[Bf,"jpeg"],JPEG:[Bf,"jpeg"],GIF:[Bf,"gif"]};function Lf(a,b){(!E(a)||!E(b))&&j(Error("A camera needs valid width and height values."));M.call(this);this.c="camera";this.wa=new O(0,0,100);this.mc=new O(0,0,0);this.I=new O(0,1,0);this.n=this.Ld(this.wa,this.mc);this.Mb=new Float32Array(this.n.Ha())}H(Lf,M);Lf.prototype.observe=function(a){(a==r||!(a instanceof ve))&&j(Error("Could not observe the interactor."));L(a,"b",this.oi.bind(this));L(a,"a",this.li.bind(this));L(a,"c",this.Ai.bind(this))};
Lf.prototype.oi=function(a){a instanceof Bd||j(Error("Received no valid rotate event."));this.rotate(a.M)};Lf.prototype.Ai=function(a){a instanceof Cd||j(Error("Received no valid zoom event."));a.Ua?this.wg(a.Ka):this.xg(a.Ka)};Lf.prototype.li=function(a){a instanceof Ad||j(Error("Received no valid pan event."));this.ng(a.M)};Lf.prototype.__defineGetter__("view",t("n"));Lf.prototype.__defineSetter__("view",function(a){(a==r||!(a instanceof kd))&&j(Error("Invalid view matrix."));this.n=a;this.Mb=new Float32Array(this.n.Ha())});
Lf.prototype.__defineGetter__("position",function(){return[this.wa.x,this.wa.y,this.wa.b]});Lf.prototype.__defineSetter__("position",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid position."));this.wa=new O(a[0],a[1],a[2]);this.reset()});Lf.prototype.__defineGetter__("focus",function(){return[this.mc.x,this.mc.y,this.mc.b]});Lf.prototype.__defineSetter__("focus",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid focus"));this.mc=new O(a[0],a[1],a[2]);this.reset()});
Lf.prototype.__defineGetter__("up",function(){return[this.I.x,this.I.y,this.I.b]});Lf.prototype.__defineSetter__("up",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid up vector."));this.I=new O(a[0],a[1],a[2]);this.reset()});u=Lf.prototype;u.reset=function(){this.n=this.Ld(this.wa,this.mc);this.Mb=new Float32Array(this.n.Ha())};u.rotate=function(a){D(a)&&2==a.length?a=new bd(a[0],a[1]):a instanceof bd||j(Error("Invalid distance vector for rotate operation."));return a};
u.ng=function(a){D(a)&&2==a.length?a=new bd(a[0],a[1]):a instanceof bd||j(Error("Invalid distance vector for pan operation."));a=new O(-a.x,a.y,0);a=ld(4).translate(a);this.n=new kd(a.multiply(this.n));this.Mb=new Float32Array(this.n.Ha())};u.wg=function(a){var b=20;a!=r&&!a&&(b=1);a=new O(0,0,b);a=ld(4).translate(a);this.n=new kd(a.multiply(this.n));this.Mb=new Float32Array(this.n.Ha())};
u.xg=function(a){var b=30;a!=r&&!a&&(b=1);a=new O(0,0,-b);a=ld(4).translate(a);this.n=new kd(a.multiply(this.n));this.Mb=new Float32Array(this.n.Ha())};u.Ld=function(a,b){(!(a instanceof O)||!(b instanceof O))&&j(Error("3D vectors required for calculating the view."));return ld(4)};F("X.camera",Lf);F("X.camera.prototype.pan",Lf.prototype.ng);F("X.camera.prototype.rotate",Lf.prototype.rotate);F("X.camera.prototype.zoomIn",Lf.prototype.wg);F("X.camera.prototype.zoomOut",Lf.prototype.xg);function Mf(a){function b(a,b,d){b=2*b*Math.PI;b=Ea(Ca(m,Math.cos(b)),Ca(k,Math.sin(b)));a=Ea(Ea(c,Ca(e,a)),Ca(b,f));d=Ea(Ca(b,1-Math.abs(d)),Ca(g,d));return new Ec(a,d)}this.B=[];a=a||{};var c=new ya(a.start||[0,-1,0]),d=new ya(a.end||[0,1,0]),e=Da(d,c),f=a.Ya||1;a=a.Ze||16;for(var g=Ba(e),h=0.5<Math.abs(g.y()),m=Ba(Aa(new ya(h,!h,0),g)),k=Ba(Aa(m,g)),h=new Ec(c,Fa(g)),d=new Ec(d,Ba(g)),n=[],q=0;q<a;q++){var w=q/a,v=(q+1)/a;n.push(new Gc([h,b(0,w,-1),b(0,v,-1)]));n.push(new Gc([b(0,v,0),b(0,w,0),
b(1,w,0),b(1,v,0)]));n.push(new Gc([d,b(1,v,1),b(1,w,1)]))}return Oc(n)}H(Mf,Nc);function Nf(){U.call(this);this.c="cylinder";this.re=[-10,-10,-10];this.Yd=[10,10,10];this.Ub=10;this.Xb=32;Ha(this,new vd)}H(Nf,U);Nf.prototype.__defineGetter__("start",t("re"));Nf.prototype.__defineSetter__("start",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid start"));this.re=a});Nf.prototype.__defineGetter__("end",t("Yd"));Nf.prototype.__defineSetter__("end",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid end"));this.Yd=a});Nf.prototype.__defineGetter__("radius",t("Ub"));
Nf.prototype.__defineSetter__("radius",function(a){E(a)||j(Error("Invalid radius."));this.Ub=a});Nf.prototype.p=function(){xd(this,new Mf({start:this.re,end:this.Yd,Ya:this.Ub,Ze:this.Xb}));Nf.s.p.call(this)};F("X.cylinder",Nf);F("X.cylinder.prototype.modified",Nf.prototype.p);function Of(a){function b(a,b){a*=2*Math.PI;b*=Math.PI;var e=new ya(Math.cos(a)*Math.sin(b),Math.cos(b),Math.sin(a)*Math.sin(b));g.push(new Ec(Ea(c,Ca(e,d)),e))}this.B=[];a=a||{};var c=new ya(a.Be||[0,0,0]),d=a.Ya||1,e=a.Ze||16;a=a.fj||8;for(var f=[],g=[],h=0;h<e;h++)for(var m=0;m<a;m++)g=[],b(h/e,m/a),0<m&&b((h+1)/e,m/a),m<a-1&&b((h+1)/e,(m+1)/a),b(h/e,(m+1)/a),f.push(new Gc(g));return Oc(f)}H(Of,Nc);function Pf(){U.call(this);this.c="sphere";this.k=[0,0,0];this.Ub=5;this.Xb=32;this.Wg=16;Ha(this,new vd)}H(Pf,U);Pf.prototype.__defineGetter__("center",t("k"));Pf.prototype.__defineSetter__("center",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid center"));this.k=a});Pf.prototype.__defineGetter__("radius",t("Ub"));Pf.prototype.__defineSetter__("radius",function(a){E(a)||j(Error("Invalid radius."));this.Ub=a});
Pf.prototype.p=function(){xd(this,new Of({Be:this.k,Ya:this.Ub,Ze:this.Xb,fj:this.Wg}));Pf.s.p.call(this)};F("X.sphere",Pf);F("X.sphere.prototype.modified",Pf.prototype.p);function Ce(a){N.call(this);this.c="labelmap";this.fb=a}H(Ce,N);Ce.prototype.p=function(){var a=new sd;a.T=this;this.dispatchEvent(a);this.fb.p()};F("X.labelmap",Ce);function Qf(a){this.B=[];a=a||{};var b=new ya(a.Be||[0,0,0]),c=!a.Ya?[1,1,1]:a.Ya.length?a.Ya:[a.Ya,a.Ya,a.Ya];return Oc([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(function(a){return new Gc(a[0].map(function(e){e=new ya(b.x()+c[0]*(2*!!(e&1)-1),b.y()+c[1]*(2*!!(e&2)-1),b.b()+c[2]*(2*!!(e&4)-1));return new Ec(e,new ya(a[1]))}))}))}H(Qf,Nc);function Rf(){U.call(this);this.c="cube";this.k=[0,0,0];this.fe=this.ee=this.de=20;this.Yb=[0,1,1,1,1,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,1,1,1,0,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,0];Ha(this,new vd)}H(Rf,U);Rf.prototype.__defineGetter__("center",t("k"));Rf.prototype.__defineSetter__("center",function(a){(a==r||!D(a)||3!=a.length)&&j(Error("Invalid center"));this.k=a});Rf.prototype.__defineGetter__("lengthX",t("de"));
Rf.prototype.__defineSetter__("lengthX",function(a){E(a)||j(Error("Invalid lengthX."));this.de=a});Rf.prototype.__defineGetter__("lengthY",t("ee"));Rf.prototype.__defineSetter__("lengthY",function(a){E(a)||j(Error("Invalid lengthY."));this.ee=a});Rf.prototype.__defineGetter__("lengthZ",t("fe"));Rf.prototype.__defineSetter__("lengthZ",function(a){E(a)||j(Error("Invalid lengthZ."));this.fe=a});Rf.prototype.p=function(){xd(this,new Qf({Be:this.k,Ya:[this.de/2,this.ee/2,this.fe/2]}));Rf.s.p.call(this)};
F("X.cube",Rf);F("X.cube.prototype.modified",Rf.prototype.p);function xe(a){ve.call(this,a);this.c="interactor3D";this.zk=s}H(xe,ve);xe.prototype.Zc=function(a){xe.s.Zc.call(this,a);var b=new Cd;a.uc==r&&(a.uc=0);b.Ua=0<a.uc;b.Ka=s;this.dispatchEvent(b)};function Sf(a){M.call(this);this.c="array";this.w=[];this.Xd=a}H(Sf,M);Sf.prototype.add=function(a){this.w.push(a);return p};Sf.prototype.clear=function(){this.w.length=0};function Tf(a,b,c){var d=c-b;if(!(2>d)){d=b+Math.floor(d/2);Tf(a,b,d);for(Tf(a,d,c);b<d;++b)if(0<a.Xd(a.w[b],a.w[d])){var e=a.w[b];a.w[b]=a.w[d];for(var f=a,g=d,h=c;g+1<h&&0>f.Xd(f.w[g+1],e);){var m=f,k=g+1,n=m.w[g];m.w[g]=m.w[k];m.w[k]=n;++g}f.w[g]=e}}}Sf.prototype.sort=function(){Tf(this,0,this.w.length)};function Uf(a,b){Lf.call(this,a,b);this.c="camera2D"}H(Uf,Lf);Uf.prototype.rotate=function(a){a=Uf.s.rotate.call(this,a);var b=new zd;0<a.x?b.ue--:0>a.x&&b.ue++;0<a.y?b.ge++:0>a.y&&b.ge--;this.dispatchEvent(b)};function Vf(a,b){Lf.call(this,a,b);this.c="camera3D";this.of=45;this.zf=new Float32Array(Wf(this.of,a/b).Ha())}H(Vf,Lf);function Wf(a,b){var c=1*Math.tan(a*Math.PI/360),d=-c;return new kd([[2/(c*b-d*b),0,(c*b+d*b)/(c*b-d*b),0],[0,2/(c-d),(c+d)/(c-d),0],[0,0,-10001/9999,-2.000200020002],[0,0,-1,0]])}
Vf.prototype.rotate=function(a){a=Vf.s.rotate.call(this,a);var b=-a.x/5*Math.PI/180;a=-a.y/5*Math.PI/180;var c=ld(4),d=new O(parseFloat(this.n.$(0,0)),parseFloat(this.n.$(0,1)),parseFloat(this.n.$(0,2))),b=c.rotate(b,new O(parseFloat(this.n.$(1,0)),parseFloat(this.n.$(1,1)),parseFloat(this.n.$(1,2))));a=c.rotate(a,d);this.n=new kd(this.n.multiply(a.multiply(b)));this.Mb=new Float32Array(this.n.Ha())};
Vf.prototype.Ld=function(a,b){Vf.s.Ld.call(this,a,b);var c=ld(4),d=new O(a.x-b.x,a.y-b.y,a.b-b.b),d=d.normalize(),e=this.I.f();e.Vc(d)&&(e.b+=1E-6);var f=$c(e,d),e=$c(d,f),f=f.normalize(),e=e.normalize();c.j(0,0,f.x);c.j(0,1,f.y);c.j(0,2,f.b);c.j(0,3,0);c.j(1,0,e.x);c.j(1,1,e.y);c.j(1,2,e.b);c.j(1,3,0);c.j(2,0,d.x);c.j(2,1,d.y);c.j(2,2,d.b);c.j(2,3,0);c.j(3,0,0);c.j(3,1,0);c.j(3,2,0);c.j(3,3,1);d=a.f();return c.translate(d.ba())};F("X.camera3D",Vf);function Xf(a){kc.call(this);this.Qa=a;this.z={}}H(Xf,kc);var Yf=[];u=Xf.prototype;u.cc=function(a,b,c,d){D(b)||(Yf[0]=b,b=Yf);for(var e=0;e<b.length;e++){var f=L(a,b[e],c||this.handleEvent,d||s,this.Qa||this);if(!f)break;this.z[f.key]=f}return this};u.cg=function(a,b,c,d){return Zf(this,a,b,c,d)};function Zf(a,b,c,d,e,f){if(D(c))for(var g=0;g<c.length;g++)Zf(a,b,c[g],d,e,f);else{b=wc(b,c,d||a.handleEvent,e,f||a.Qa||a);if(!b)return a;a.z[b.key]=b}return a}
u.ff=function(a,b,c,d,e){if(D(b))for(var f=0;f<b.length;f++)this.ff(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.Qa||this,c=sc(c),d=!!d,b=db(a)?a.Wc(b,c,d,e):a?(a=uc(a))?a.Wc(b,c,d,e):r:r,b&&(yc(b),delete this.z[b.key]);return this};u.Od=function(){ib(this.z,yc);this.z={}};u.handleEvent=function(){j(Error("EventHandler.handleEvent not implemented"))};function $f(){}$f.zh=function(){return $f.Yf?$f.Yf:$f.Yf=new $f};$f.prototype.Xh=0;function ag(a){Cc.call(this);this.Eb=a||Od();this.Oi=bg}H(ag,Cc);B("goog.ui.Component.ALLOW_DETACHED_DECORATION",s);ag.prototype.Jh=$f.zh();B("goog.ui.Component.DEFAULT_BIDI_DIR",0);var bg=1==ag.Jg?s:-1==ag.Jg?p:r;u=ag.prototype;u.Xf=r;u.wc=s;u.r=r;u.Oi=r;u.$c=r;u.Tc=r;u.Ce=r;u.l=t("r");u.Xe=function(a){this.$c&&this.$c!=a&&j(Error("Method not supported"));ag.s.Xe.call(this,a)};u.Cd=t("Eb");u.rc=function(){this.r=this.Eb.createElement("div")};u.hc=function(a){this.Hb(a)};
u.Hb=function(a,b){this.wc&&j(Error("Component already rendered"));this.r||this.rc();a?a.insertBefore(this.r,b||r):this.Eb.J.body.appendChild(this.r);(!this.$c||this.$c.wc)&&this.zd()};u.zd=function(){function a(a){!a.wc&&a.l()&&a.zd()}this.wc=p;this.Tc&&pb(this.Tc,a,l)};u.Ad=function(){function a(a){a.wc&&a.Ad()}this.Tc&&pb(this.Tc,a,l);this.Ch&&this.Ch.Od();this.wc=s};
u.removeChild=function(a,b){if(a){var c=na(a)?a:a.Xf||(a.Xf=":"+(a.Jh.Xh++).toString(36)),d;this.Ce&&c?(d=this.Ce,d=(c in d?d[c]:l)||r):d=r;a=d;c&&a&&(d=this.Ce,c in d&&delete d[c],sb(this.Tc,a),b&&(a.Ad(),a.r&&Wd(a.r)),c=a,c==r&&j(Error("Unable to set parent component")),c.$c=r,ag.s.Xe.call(c,r))}a||j(Error("Child is not in parent component"));return a};var cg;function dg(a,b,c){ma(c)&&(c=c.join(" "));var d="aria-"+b;""===c||c==l?(cg||(cg={atomic:s,autocomplete:"none",dropeffect:"none",haspopup:s,live:"off",multiline:s,multiselectable:s,orientation:"vertical",readonly:s,relevant:"additions text",required:s,sort:"none",busy:s,disabled:s,hidden:s,invalid:"false"}),c=cg,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};B("goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST",s);function eg(){Cc.call(this)}H(eg,Cc);u=eg.prototype;u.gf=0;u.Yc=0;u.Me=100;u.Of=0;u.bf=1;u.Qh=s;u.Wh=s;u.Rd=function(a){a=fg(this,a);this.gf!=a&&(this.gf=a+this.Of>this.Me?this.Me-this.Of:a<this.Yc?this.Yc:a,!this.Qh&&!this.Wh&&this.dispatchEvent("change"))};u.Fd=function(){return fg(this,this.gf)};u.Ed=function(){return fg(this,this.Yc)};u.Dd=function(){return fg(this,this.Me)};function fg(a,b){return a.bf==r?b:a.Yc+Math.round((b-a.Yc)/a.bf)*a.bf};function gg(a){ag.call(this,a);this.ad=new eg;L(this.ad,"change",this.Dh,s,this)}H(gg,ag);var hg={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};u=gg.prototype;u.rc=function(){this.Za=this.Cd().rc("div","progress-bar-thumb");var a=hg[this.mg];this.r=this.Cd().rc("div",a,this.Za);ig(this);dg(this.l(),"valuemin",this.Ed());dg(this.l(),"valuemax",this.Dd())};
u.zd=function(){gg.s.zd.call(this);K&&7>Zb&&L(this.l(),"resize",this.Ud,s,this);this.Ud();var a=this.l();a.setAttribute("role","progressbar");dg(a,"live","polite")};u.Ad=function(){gg.s.Ad.call(this);K&&7>Zb&&xc(this.l(),"resize",this.Ud,s,this)};u.Fd=function(){return this.ad.Fd()};u.Rd=function(a){this.ad.Rd(a);this.l()&&ig(this)};function ig(a){dg(a.l(),"valuenow",a.Fd())}u.Ed=function(){return this.ad.Ed()};u.Dd=function(){return this.ad.Dd()};u.mg="horizontal";u.Dh=function(){this.Ud();this.dispatchEvent("change")};
u.Ud=function(){if(this.Za){var a=this.Ed(),b=this.Dd(),a=(this.Fd()-a)/(b-a),b=Math.round(100*a);"vertical"==this.mg?K&&7>Zb?(this.Za.style.top=0,this.Za.style.height="100%",b=this.Za.offsetHeight,a=Math.round(a*b),this.Za.style.top=b-a+"px",this.Za.style.height=a+"px"):(this.Za.style.top=100-b+"%",this.Za.style.height=b+"%"):this.Za.style.width=b+"%"}};function jg(a,b){a==r&&j(Error("No valid parent element."));b==r&&j(Error("Invalid initial value."));gg.call(this);this.c="progressbar";this.pa=a;this.yf="";this.gd=this.eb=r;this.Jb=[];var c;c=".progress-bar-horizontal {\n  position: relative;\n  border: 1px solid #949dad;\n";c+="  background: white;\n";c+="  padding: 1px;\n";c+="  overflow: hidden;\n";c+="  margin: 2px;\n";c+="  width: 100px;\n";c+="  height: 5px;\n";c+="}";var d;d=".progress-bar-thumb {\n  position: relative;\n  background: #F62217;\n";
d+="  overflow: hidden;\n";d+="  width: 0%;\n";d+="  height: 100%;\n";d+="}";var e;e=".progress-bar-thumb-done {\n  background: #57E964;\n}";this.Jb=[c,d,e];this.Rd(b);this.Je()}H(jg,gg);
jg.prototype.Je=function(){if("static"==this.pa.style.position||""==this.pa.style.position)this.yf=this.pa.style.position,this.pa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Td("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Jb[0])),d=document.createTextNode(String(this.Jb[1])),e=document.createTextNode(String(this.Jb[2]));a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(e);this.eb=b;this.hc(this.pa);a=this.l();a.style.position=
"absolute";a.style.top=(this.pa.clientHeight-5)/2+"px";a.style.left=(this.pa.clientWidth-100)/2+"px";a.classList.add("xtk-progress-bar")};function mg(a){var b=a.l().style.top,c=a.l().style.left;Wd(a.l());var d=new jg(a.pa,100),e=d.l();e.style.position="absolute";e.style.top=b;e.style.left=c;e.classList.add("xtk-progress-bar");(e.firstElementChild!=l?e.firstElementChild:Xd(e.firstChild)).classList.add("progress-bar-thumb-done");a.gd=d}
jg.prototype.Jd=function(){this.eb&&Wd(this.eb);this.l()&&Wd(this.l());this.gd&&Wd(this.gd.l());this.gd=this.eb=r;this.pa.style.position=this.yf};function ng(a,b,c){"function"==ka(a)?c&&(a=ua(a,c)):a&&"function"==typeof a.handleEvent?a=ua(a.handleEvent,a):j(Error("Invalid listener argument"));return 2147483647<b?-1:ha.setTimeout(a,b||0)};function og(){M.call(this);this.c="renderer";this.m=window.document.body;this.P=this.m.clientWidth;this.G=this.m.clientHeight;this.Nb=this.t=this.ja=r;this.Ma=new Sf(td);this.Va=[];this.C=r;this.le=this.kd=this.ld=s;this.a=this.qa=r;this.v={PROGRESSBAR_ENABLED:p,INTERMEDIATE_RENDERING:s};this.lf=-1;window.console.log("XTK release 9 -- 2014-01-23 15:24:27 -- http://www.goXTK.com -- @goXTK")}H(og,M);u=og.prototype;u.mi=function(a){this.qa&&this.qa.Rd(100*a.Ff)};
u.ci=function(a){a!=r&&a instanceof sd&&a.T&&this.$a(a.T)};u.Se=function(a){(a==r||!(a instanceof Ed))&&j(Error("Invalid hover event."))};u.ni=function(){var a=Rd(document,this.m);this.P=a.clientWidth;this.G=a.clientHeight;a=Rd(document,this.ja);a.width=this.P;a.height=this.G;"renderer3D"==this.c&&(this.a.viewport(0,0,this.P,this.G),this.t.zf=new Float32Array(Wf(this.t.of,this.ja.width/this.ja.height).Ha()));this.yc()};u.Te=function(a){(a==r||!(a instanceof Dd))&&j(Error("Invalid scroll event."))};
og.prototype.__defineGetter__("config",t("v"));og.prototype.__defineGetter__("interactor",t("Nb"));og.prototype.__defineGetter__("camera",t("t"));og.prototype.__defineGetter__("loadingCompleted",t("kd"));og.prototype.__defineGetter__("container",t("m"));og.prototype.__defineSetter__("container",function(a){a==r&&j(Error("An ID to a valid container (<div>..) is required."));var b=a;na(b)&&(b=Rd(document,a));oa(b)&&1==b.nodeType||j(Error("Could not find the given container."));this.m=b});u=og.prototype;
u.yc=function(){this.t.reset()};
u.Ia=function(a){var b=Td("canvas");this.m.appendChild(b);this.P=this.m.clientWidth;this.G=this.m.clientHeight;b.width=this.P;b.height=this.G;try{var c=b.getContext(a,{alpha:s});c||j(Error())}catch(d){var e="Sorry, "+a+' context is <strong>not supported</strong> on this machine! See <a href="http://crash.goXTK.com" target="_blank">http://crash.goXTK.com</a> for requirements..';this.m.innerHTML='<h3 style="color:red;font-family:sans-serif;">Oooops..</h3><p style="color:red;font-family:sans-serif;">'+e+
"</p>";j(Error(e))}this.C=new Hf;L(this.C,"i",this.mi.bind(this));this.ja=b;this.a=c;b=new xe(this.ja);"2d"==a&&(b=new ze(this.ja));b.Ia();L(b,"f",this.yc.bind(this));L(b,"j",this.Se.bind(this));L(b,"d",this.Te.bind(this));this.Nb=b;b=new Vf(this.P,this.G);"2d"==a&&(b=new Uf(this.P,this.G));b.observe(this.Nb);this.t=b;L(window,"resize",this.ni,s,this)};u.add=function(a){(a instanceof Rf||a instanceof Pf||a instanceof Nf)&&a.p();this.Va.push(a);this.$a(a)};
u.$a=function(a){(!this.ja||!this.a)&&j(Error("The renderer was not initialized properly."));a==r&&(window.console.log(a),j(Error("Illegal object.")));var b;db(a)?b=a.Hd("h",l):(b=uc(a),b=!!b&&b.Hd("h",l));b||L(a,"h",this.ci.bind(this))};u.get=function(a){a==r&&j(Error("Invalid object id."));for(var b=this.Ma.w,c=b.length,d=0,d=0;d<c;d++)if(b[d].la==a)return b[d];return r};
u.hc=function(){(!this.ja||!this.a)&&j(Error("The renderer was not initialized properly."));if(this.Bf==r){if(this.C.oc.De(s)){if(this.v.PROGRESSBAR_ENABLED&&!this.qa&&(this.qa=new jg(this.m,3)),this.le=this.kd=s,this.Bf=ng(function(){this.Bf=r;this.hc()}.bind(this),100),!this.v.INTERMEDIATE_RENDERING)return}else if(!this.kd&&!this.le&&(this.le=p,eval("this.onShowtime()"),this.kd=p),this.qa){this.v.PROGRESSBAR_ENABLED&&(this.qa&&!this.mf)&&(mg(this.qa),this.mf=ng(function(){this.mf=r;this.qa&&(this.qa.Jd(),
this.qa=r);this.hc()}.bind(this),700));return}this.lf=window.requestAnimationFrame(this.hc.bind(this),this.ja);eval("this.onRender()");this.Hb(s,p)}};u.lg=aa();u.jg=aa();u.Hb=aa();
u.xd=function(){window.cancelAnimationFrame(this.lf);this.C&&(delete this.C,this.C=r);this.qa&&(this.qa.Jd(),delete this.qa,this.qa=r);this.Ma.clear();delete this.Ma;this.Va.length=0;delete this.Va;delete this.C;this.C=r;delete this.t;this.t=r;delete this.Nb;this.Nb=r;delete this.a;this.a=r;Wd(this.ja);delete this.ja;this.ja=r};function pg(a,b,c,d,e,f,g,h){var m,k;if(m=c.offsetParent){var n="HTML"==m.tagName||"BODY"==m.tagName;if(!n||"static"!=ce(m,"position"))k=he(m),n||(n=(n=ie(m))&&Ob?-m.scrollLeft:n&&(!K||!fc("8"))&&"visible"!=ce(m,"overflowX")?m.scrollWidth-m.clientWidth-m.scrollLeft:m.scrollLeft,k=ad(k,new R(n,m.scrollTop)))}m=k||new R;k=he(a);n=ke(a);k=new Kd(k.x,k.y,n.width,n.height);(n=ge(a))&&k.Zf(new Kd(n.left,n.top,n.right-n.left,n.bottom-n.top));var n=Od(a),q=Od(c);if(n.J!=q.J){var w=n.J.body,q=q.J.parentWindow||
q.J.defaultView,v=new R(0,0),y=Qd(w)?Qd(w).parentWindow||Qd(w).defaultView:window,z=w;do{var A;if(y==q)A=he(z);else{A=z;var G=l;if(ae.kf||A.getBoundingClientRect)G=ee(A),G=new R(G.left,G.top);else var G=$d(Od(A)),x=he(A),G=new R(x.x-G.x,x.y-G.y);x=l;if(Ob&&!fc(12)){x=l;x=l;K?x="-ms-transform":Pb?x="-webkit-transform":Nb?x="-o-transform":Ob&&(x="-moz-transform");var C=l;x&&(C=ce(A,x));C||(C=ce(A,"transform"));C?(A=C.match(re),x=!A?new R(0,0):new R(parseFloat(A[1]),parseFloat(A[2]))):x=new R(0,0);x=
new R(G.x+x.x,G.y+x.y)}else x=G;A=x}v.x+=A.x;v.y+=A.y}while(y&&y!=q&&(z=y.frameElement)&&(y=y.parent));w=ad(v,he(w));K&&!Zd(n)&&(w=ad(w,$d(n)));k.left+=w.x;k.top+=w.y}a=(b&4&&ie(a)?b^2:b)&-5;b=new R(a&2?k.left+k.width:k.left,a&1?k.top+k.height:k.top);b=ad(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var J;if(g&&(J=ge(c)))J.top-=m.y,J.right-=m.x,J.bottom-=m.y,J.left-=m.x;return qg(b,c,d,f,J,g,h)}
function qg(a,b,c,d,e,f,g){a=a.f();var h=0,m=(c&4&&ie(b)?c^2:c)&-5;c=ke(b);g=g?g.f():c.f();if(d||0!=m)m&2?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),m&1?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){h=a;d=0;if(65==(f&65)&&(h.x<e.left||h.x>=e.right))f&=-2;if(132==(f&132)&&(h.y<e.top||h.y>=e.bottom))f&=-5;h.x<e.left&&f&1&&(h.x=e.left,d|=1);h.x<e.left&&(h.x+g.width>e.right&&f&16)&&(g.width=Math.max(g.width-(h.x+g.width-e.right),0),d|=4);h.x+g.width>e.right&&f&1&&(h.x=Math.max(e.right-g.width,
e.left),d|=1);f&2&&(d|=(h.x<e.left?16:0)|(h.x+g.width>e.right?32:0));h.y<e.top&&f&4&&(h.y=e.top,d|=2);h.y<=e.top&&(h.y+g.height<e.bottom&&f&32)&&(g.height=Math.max(g.height-(e.top-h.y),0),h.y=e.top,d|=8);h.y>=e.top&&(h.y+g.height>e.bottom&&f&32)&&(g.height=Math.max(g.height-(h.y+g.height-e.bottom),0),d|=8);h.y+g.height>e.bottom&&f&4&&(h.y=Math.max(e.bottom-g.height,e.top),d|=2);f&8&&(d|=(h.y<e.top?64:0)|(h.y+g.height>e.bottom?128:0));h=d}else h=256;if(h&496)return h}f=a;e=Ob&&(Ub||Xb)&&fc("1.9");
f instanceof R?(a=f.x,f=f.y):(a=f,f=l);b.style.left=je(a,e);b.style.top=je(f,e);ed(c,g)||(a=Zd(Od(Qd(b))),K&&(!a||!fc("8"))?(c=b.style,a?(K?(a=oe(b,"paddingLeft"),e=oe(b,"paddingRight"),f=oe(b,"paddingTop"),d=oe(b,"paddingBottom"),a=new Jd(f,e,d,a)):(a=be(b,"paddingLeft"),e=be(b,"paddingRight"),f=be(b,"paddingTop"),d=be(b,"paddingBottom"),a=new Jd(parseFloat(f),parseFloat(e),parseFloat(d),parseFloat(a))),K&&!(K&&9<=hc)?(e=qe(b,"borderLeft"),f=qe(b,"borderRight"),d=qe(b,"borderTop"),b=qe(b,"borderBottom"),
b=new Jd(d,f,b,e)):(e=be(b,"borderLeftWidth"),f=be(b,"borderRightWidth"),d=be(b,"borderTopWidth"),b=be(b,"borderBottomWidth"),b=new Jd(parseFloat(d),parseFloat(f),parseFloat(b),parseFloat(e))),c.pixelWidth=g.width-b.left-a.left-a.right-b.right,c.pixelHeight=g.height-b.top-a.top-a.bottom-b.bottom):(c.pixelWidth=g.width,c.pixelHeight=g.height)):(b=b.style,Ob?b.MozBoxSizing="border-box":Pb?b.WebkitBoxSizing="border-box":b.boxSizing="border-box",b.width=Math.max(g.width,0)+"px",b.height=Math.max(g.height,
0)+"px"));return h};function rg(){}rg.prototype.Sa=aa();function sg(a,b,c){this.element=a;this.Mf=b;this.Bi=c}H(sg,rg);sg.prototype.Sa=function(a,b,c){pg(this.element,this.Mf,a,b,l,c,this.Bi)};function tg(a,b){Cc.call(this);this.Qa=new Xf(this);this.We(a||r);b&&(this.zc=b)}H(tg,Cc);u=tg.prototype;u.r=r;u.bh=p;u.Gf=r;u.ra=s;u.Xi=s;u.Le=-1;u.ag=-1;u.Ih=s;u.rh=p;u.zc="toggle_display";u.l=t("r");u.We=function(a){this.ra&&j(Error("Can not change this state of the popup while showing."));this.r=a};
function ug(a,b){a.Td&&a.Td.stop();a.Id&&a.Id.stop();if(b){if(!a.ra&&a.Qe()){a.r||j(Error("Caller must call setElement before trying to show the popup"));a.Sa();var c=Qd(a.r);a.Ih&&a.Qa.cc(c,"keydown",a.ai,p);if(a.bh)if(a.Qa.cc(c,"mousedown",a.hg,p),K){var d;try{d=c.activeElement}catch(e){}for(;d&&"IFRAME"==d.nodeName;){try{var f=d.contentDocument||d.contentWindow.document}catch(g){break}c=f;d=c.activeElement}a.Qa.cc(c,"mousedown",a.hg,p);a.Qa.cc(c,"deactivate",a.gg)}else a.Qa.cc(c,"blur",a.gg);"toggle_display"==
a.zc?(a.r.style.visibility="visible",me(a.r,p)):"move_offscreen"==a.zc&&a.Sa();a.ra=p;a.Le=wa();a.ag=-1;a.Td?(wc(a.Td,"end",a.kg,s,a),a.Td.play()):a.kg()}}else vg(a)}u.Sa=ia;function vg(a,b){if(!a.ra||!a.dispatchEvent({type:"beforehide",target:b}))return s;a.Qa&&a.Qa.Od();a.ra=s;a.ag=wa();a.Id?(wc(a.Id,"end",va(a.Lf,b),s,a),a.Id.play()):a.Lf(b);return p}u.Lf=function(a){"toggle_display"==this.zc?this.Xi?ng(this.Uf,0,this):this.Uf():"move_offscreen"==this.zc&&(this.r.style.top="-10000px");this.Re(a)};
u.Uf=function(){this.r.style.visibility="hidden";me(this.r,s)};u.Qe=function(){return this.dispatchEvent("beforeshow")};u.kg=function(){this.dispatchEvent("show")};u.Re=function(a){this.dispatchEvent({type:"hide",target:a})};u.hg=function(a){a=a.target;!Yd(this.r,a)&&((!this.Gf||Yd(this.Gf,a))&&!(150>wa()-this.Le))&&vg(this,a)};u.ai=function(a){27==a.keyCode&&vg(this,a.target)&&(a.preventDefault(),a.stopPropagation())};
u.gg=function(a){if(this.rh){var b=Qd(this.r);if("undefined"!=typeof document.activeElement){if(a=b.activeElement,!a||Yd(this.r,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;150>wa()-this.Le||vg(this)}};function wg(a,b){this.Ee=a instanceof R?a:new R(a,b)}H(wg,rg);wg.prototype.Sa=function(a,b,c,d){pg(de(a),0,a,b,this.Ee,c,r,d)};function xg(a,b){this.Ei=4;this.Md=b||l;tg.call(this,a)}H(xg,tg);xg.prototype.Sa=function(){if(this.Md){var a=!this.ra&&"move_offscreen"!=this.zc,b=this.l();a&&(b.style.visibility="hidden",me(b,p));this.Md.Sa(b,this.Ei,this.Lk);a&&me(b,s)}};function zg(a){if("function"==typeof a.gb)a=a.gb();else if(ma(a)||na(a))a=a.length;else{var b=0,c;for(c in a)b++;a=b}return a}function Ag(a){if("function"==typeof a.Wa)return a.Wa();if(na(a))return a.split("");if(ma(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return jb(a)}
function Bg(a,b){if("function"==typeof a.every)return a.every(b,l);if(ma(a)||na(a))return rb(a,b,l);var c;if("function"==typeof a.Ie)c=a.Ie();else if("function"!=typeof a.Wa)if(ma(a)||na(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=kb(a);else c=l;for(var d=Ag(a),e=d.length,f=0;f<e;f++)if(!b.call(l,d[f],c&&c[f],a))return s;return p};function Cg(a){this.Q=new Sc;a&&this.ve(a)}function Dg(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[pa]||(a[pa]=++qa)):b.substr(0,1)+a}u=Cg.prototype;u.gb=function(){return this.Q.gb()};u.add=function(a){this.Q.set(Dg(a),a)};u.ve=function(a){a=Ag(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};u.Od=function(a){a=Ag(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};u.remove=function(a){return this.Q.remove(Dg(a))};u.clear=function(){this.Q.clear()};
u.contains=function(a){a=Dg(a);return Uc(this.Q.Q,a)};u.Zf=function(a){var b=new Cg;a=Ag(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};u.Wa=function(){return this.Q.Wa()};u.f=function(){return new Cg(this)};
u.Vc=function(a){var b;if(b=this.gb()==zg(a)){var c=a;a=zg(c);this.gb()>a?b=s:(!(c instanceof Cg)&&5<a&&(c=new Cg(c)),b=Bg(this,function(a){if("function"==typeof c.contains)a=c.contains(a);else if("function"==typeof c.De)a=c.De(a);else if(ma(c)||na(c))a=0<=ob(c,a);else a:{for(var b in c)if(c[b]==a){a=p;break a}a=s}return a}))}return b};function Eg(a,b,c){this.Eb=c||(a?Od(Rd(document,a)):Od());xg.call(this,this.Eb.rc("div",{style:"position:absolute;display:none;"}));this.Fe=new R(1,1);this.yd=new Cg;a&&Fg(this,a);if(b!=r)if(a=this.l(),"textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(;c=a.firstChild;)a.removeChild(c);a.appendChild(Qd(a).createTextNode(String(b)))}}H(Eg,xg);
var Gg=[];u=Eg.prototype;u.ya=r;u.className="goog-tooltip";u.tg=500;u.Hh=0;u.Cd=t("Eb");function Fg(a,b){b=Rd(document,b);a.yd.add(b);L(b,"mouseover",a.Gh,s,a);L(b,"mouseout",a.Rf,s,a);L(b,"mousemove",a.Fh,s,a);L(b,"focus",a.Eh,s,a);L(b,"blur",a.Rf,s,a)}u.We=function(a){var b=this.l();b&&Wd(b);Eg.s.We.call(this,a);a&&(b=this.Eb.J.body,b.insertBefore(a,b.lastChild))};
u.Qe=function(){if(!tg.prototype.Qe.call(this))return s;if(this.anchor)for(var a,b=0;a=Gg[b];b++)Yd(a.l(),this.anchor)||ug(a,s);0<=ob(Gg,this)||Gg.push(this);a=this.l();a.className=this.className;Hg(this);L(a,"mouseover",this.Tf,s,this);L(a,"mouseout",this.Sf,s,this);Ig(this);return p};
u.Re=function(){sb(Gg,this);for(var a=this.l(),b,c=0;b=Gg[c];c++)b.anchor&&Yd(a,b.anchor)&&ug(b,s);this.og&&Jg(this.og);xc(a,"mouseover",this.Tf,s,this);xc(a,"mouseout",this.Sf,s,this);this.anchor=l;if(0==(this.ib?this.ra?4:1:this.vc?3:this.ra?2:0))this.Pd=s;tg.prototype.Re.call(this)};u.fg=function(a,b){this.anchor==a&&this.yd.contains(this.anchor)&&(this.Pd||!this.Pk?(ug(this,s),this.ra||(this.anchor=a,this.Md=b||Kg(this,0)||l,this.ra&&this.Sa(),ug(this,p))):this.anchor=l);this.ib=l};
u.Vh=function(a){this.vc=l;a==this.anchor&&(this.ya==r||this.ya!=this.l()&&!this.yd.contains(this.ya))&&(!this.If||!this.If.ya)&&ug(this,s)};function Lg(a,b){var c=$d(a.Eb);a.Fe.x=b.clientX+c.x;a.Fe.y=b.clientY+c.y}u.Gh=function(a){var b=Mg(this,a.target);this.ya=b;Hg(this);b!=this.anchor&&(this.anchor=b,this.ib||(this.ib=ng(ua(this.fg,this,b,l),this.tg)),Ng(this),Lg(this,a))};function Mg(a,b){try{for(;b&&!a.yd.contains(b);)b=b.parentNode;return b}catch(c){return r}}
u.Fh=function(a){Lg(this,a);this.Pd=p};u.Eh=function(a){this.ya=a=Mg(this,a.target);this.Pd=p;if(this.anchor!=a){this.anchor=a;var b=Kg(this,1);Hg(this);this.ib||(this.ib=ng(ua(this.fg,this,a,b),this.tg));Ng(this)}};function Kg(a,b){if(0==b){var c=a.Fe.f();return new Og(c)}return new Pg(a.ya)}function Ng(a){if(a.anchor)for(var b,c=0;b=Gg[c];c++)Yd(b.l(),a.anchor)&&(b.If=a,a.og=b)}
u.Rf=function(a){var b=Mg(this,a.target),c=Mg(this,a.relatedTarget);b!=c&&(b==this.ya&&(this.ya=r),Ig(this),this.Pd=s,this.ra&&(!a.relatedTarget||!Yd(this.l(),a.relatedTarget))?Jg(this):this.anchor=l)};u.Tf=function(){var a=this.l();this.ya!=a&&(Hg(this),this.ya=a)};u.Sf=function(a){var b=this.l();if(this.ya==b&&(!a.relatedTarget||!Yd(b,a.relatedTarget)))this.ya=r,Jg(this)};function Ig(a){a.ib&&(ha.clearTimeout(a.ib),a.ib=l)}
function Jg(a){if(2==(a.ib?a.ra?4:1:a.vc?3:a.ra?2:0))a.vc=ng(ua(a.Vh,a,a.anchor),a.Hh)}function Hg(a){a.vc&&(ha.clearTimeout(a.vc),a.vc=l)}function Og(a,b){wg.call(this,a,b)}H(Og,wg);Og.prototype.Sa=function(a,b,c){b=de(a);b=ge(b);c=c?new Jd(c.top+10,c.right,c.bottom,c.left+10):new Jd(10,0,0,10);qg(this.Ee,a,4,c,b,9)&496&&qg(this.Ee,a,4,c,b,5)};function Pg(a){sg.call(this,a,3)}H(Pg,sg);
Pg.prototype.Sa=function(a,b,c){var d=new R(10,0);pg(this.element,this.Mf,a,b,d,c,9)&496&&pg(this.element,2,a,1,d,c,5)};function Qg(a,b,c,d){a==r&&j(Error("No valid parent element."));(!E(b)||!E(c))&&j(Error("Invalid coordinates."));(d==r||!(d instanceof ve))&&j(Error("Invalid interactor."));Eg.call(this);this.c="caption";this.pa=a;this.ud=b;this.vd=c;this.Nb=d;this.eb=r;this.Jb=[];a=".x-tooltip {\n  background: #C0C0FF;\n  color: #000000;\n";a+="  border: 1px solid infotext;\n";a+="  padding: 1px;\n";a+="  font-family: sans-serif;\n";a+="}";this.Jb=[a];wc(d,"k",this.Jd.bind(this));this.Je()}H(Qg,Eg);
Qg.prototype.Je=function(){if("static"==this.pa.style.position||""==this.pa.style.position)this.pa.style.position="relative";var a=document.getElementsByTagName("head")[0],b=Td("style");b.type="text/css";b.media="screen";var c=document.createTextNode(String(this.Jb[0]));a.appendChild(b);b.appendChild(c);this.eb=b;this.Md=new wg(this.ud,this.vd)||l;this.ra&&this.Sa();ug(this,p);Fg(this,this.pa);this.l().classList.add("x-tooltip")};
Qg.prototype.Jd=function(){ug(this,s);this.eb&&Wd(this.eb);this.l()&&Wd(this.l());this.eb=r};function Rg(){M.call(this);this.c="shaders";this.te=" precision mediump float;attribute vec3 vertexPosition;attribute vec3 vertexNormal;attribute vec3 vertexColor;attribute vec2 vertexTexturePos;attribute float vertexScalar;uniform bool pyformex;uniform mat4 modelview;uniform mat4 projection;uniform mat4 pickmat;uniform bool useObjectColor;uniform bool highlight;uniform mat4 objectTransform;uniform bool useScalars;uniform bool scalarsReplaceMode;uniform float scalarsMin;uniform float scalarsMax;uniform vec3 scalarsMinColor;uniform vec3 scalarsMaxColor;uniform float scalarsMinThreshold;uniform float scalarsMaxThreshold;uniform int scalarsInterpolation;uniform vec3 objectColor;uniform float pointsize;uniform bool picking;uniform bool alphablend;uniform int drawface;uniform bool lighting;uniform int nlights;uniform vec3 ambicolor;uniform vec3 diffcolor[4];uniform vec3 speccolor[4];uniform vec3 lightdir[4];uniform float ambient;uniform float diffuse;uniform float specular;uniform float shininess;uniform float alpha;varying float fDiscardNow;varying vec4 fvertexPosition;varying vec3 fvertexNormal;varying vec4 fragColor;varying vec3 fragmentColor;varying vec2 fragmentTexturePos;varying vec3 fTransformedVertexNormal;void main(){  if (picking) {    fragmentColor = vec3(0.,0.,0.);  } else {    if (highlight) {      fragmentColor = vec3(1.,1.,0.);    } else if (useObjectColor) {      fragmentColor = objectColor;    } else {      fragmentColor = vertexColor;    }    if (highlight) {      fragColor = vec4(fragmentColor,1.);    } else {      if (lighting) { fvertexNormal = vertexNormal; fTransformedVertexNormal = mat3(modelview[0].xyz,modelview[1].xyz,modelview[2].xyz) * fvertexNormal; vec3 nNormal = normalize(fTransformedVertexNormal);        if (drawface == 0 && nNormal[2] < 0.0) {   nNormal = -nNormal; } vec3 fcolor = fragmentColor; fragmentColor = fcolor * ambicolor * ambient; for (int i=0; i<4; ++i) {   if (i < nlights) {     vec3 nlight = normalize(lightdir[i]);     vec3 eyeDirection = normalize(vec3(0.,0.,1.));     vec3 reflectionDirection = reflect(-nlight, nNormal);     float nspecular = specular*pow(max(dot(reflectionDirection,eyeDirection), 0.0), shininess);     float ndiffuse = diffuse * max(dot(nNormal,nlight),0.0);     vec3 diffcol = vec3(1.,1.,0.);     fragmentColor += (fcolor + diffcolor[i])/2. * ndiffuse;     fragmentColor += (fcolor + speccolor[i])/2. * nspecular;   } }      }      if (alphablend) {       fragColor = vec4(fragmentColor,alpha);      } else {       fragColor = vec4(fragmentColor,1.);      }    }    gl_PointSize = pointsize;  }  fvertexPosition = vec4(vertexPosition,1.0);  if (picking) {    gl_Position = pickmat * projection * modelview * fvertexPosition;  } else {    gl_Position = projection * modelview * fvertexPosition;  }}";
this.Zd=" precision mediump float;varying vec3 fragmentColor;varying vec4 fragColor;uniform float alpha;void main(void) {  gl_FragColor = fragColor;}"}H(Rg,M);
var Sg={mk:"vertexPosition",lk:"vertexNormal",kk:"vertexColor",ok:"vertexTexturePos",nk:"vertexScalar"},Tg={pk:"modelview",Pj:"projection",Rj:"pickmat",gk:"useObjectColor",Ej:"highlight",Oj:"objectTransform",ik:"useScalars",$j:"scalarsReplaceMode",Xj:"scalarsMin",Uj:"scalarsMax",Yj:"scalarsMinColor",Vj:"scalarsMaxColor",Zj:"scalarsMinThreshold",Wj:"scalarsMaxThreshold",Tj:"scalarsInterpolation",Mj:"objectColor",Sj:"pointsize",Qj:"picking",qj:"alphablend",Ij:"lighting",Lj:"nlights",rj:"ambicolor",
Aj:"diffcolor",bk:"speccolor",Hj:"lightdir",sj:"ambient",Bj:"diffuse",ck:"specular",ak:"shininess",Nj:"alpha"};var Ug={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Vg(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Wg.test(c))return b.Xc=Xg(c),b.type="hex",b;a:{var d=a.match(Yg);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return e=c[0],a=c[1],c=c[2],e=Number(e),a=Number(a),c=Number(c),(isNaN(e)||0>e||255<e||isNaN(a)||0>a||255<a||isNaN(c)||0>c||255<c)&&j(Error('"('+e+","+a+","+c+'") is not a valid RGB color')),e=Zg(e.toString(16)),a=Zg(a.toString(16)),
c=Zg(c.toString(16)),b.Xc="#"+e+a+c,b.type="rgb",b;if(Ug&&(c=Ug[a.toLowerCase()]))return b.Xc=c,b.type="named",b;j(Error(a+" is not a valid color string"))}var $g=/#(.)(.)(.)/;function Xg(a){Wg.test(a)||j(Error("'"+a+"' is not a valid hex color"));4==a.length&&(a=a.replace($g,"#$1$1$2$2$3$3"));return a.toLowerCase()}function ah(a){a=Xg(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}var Wg=/^#(?:[0-9a-f]{3}){1,2}$/i,Yg=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;
function Zg(a){return 1==a.length?"0"+a:a};function bh(){og.call(this);this.c="renderer3D";this.Jc=this.Mc=this.Ic=this.Lc=this.Hc=this.Kc=this.ne=this.oe=r;this.k=[0,0,0];this.Af=r;this.Wd=new Sc;this.Ef=new Sc;this.Rc=new Sc;this.je=new Sc;this.fd=new Sc;this.pd=new Sc;this.qd=new Sc;this.rd=new Sc;this.v={PROGRESSBAR_ENABLED:p,PICKING_ENABLED:p,ORDERING_ENABLED:p,ORDERING_COMPARATOR:"OPACITY",STATISTICS_ENABLED:s,INTERMEDIATE_RENDERING:s};this.dd=0;this.Th=1;this.Zh=3}H(bh,og);bh.prototype.__defineGetter__("config",t("v"));u=bh.prototype;
u.Ni=function(){this.Jc=this.Mc=this.Ic=this.Lc=this.Hc=this.Kc=r;this.k=[0,0,0]};u.sg=function(a){this.dd=a;ch(this)};u.jj=function(){this.sg(!this.dd)};function ch(a){a.dd?(window.console.log("Transparency enabled"),a.a.enable(a.a.BLEND),a.a.blendEquation(a.a.FUNC_ADD),a.a.blendFunc(a.a.SRC_ALPHA,a.a.ONE_MINUS_SRC_ALPHA)):(window.console.log("Transparency disabled"),a.a.disable(a.a.BLEND))}
u.Se=function(a){bh.s.Se.call(this,a);var b=a.ud;a=a.vd;var c=this.pg(b,a);if(c=this.get(c))if(c=c.kc)(new Qg(this.m,this.m.offsetLeft+b+10,this.m.offsetTop+a+10,this.Nb)).l().innerHTML=c};
u.Ia=function(){bh.s.Ia.call(this,"experimental-webgl");try{this.a.viewport(0,0,this.P,this.G);var a=this.m.style.backgroundColor?ah(Vg(this.m.style.backgroundColor).Xc):this.m.bgColor?ah(Vg(this.m.bgColor).Xc):ah(Vg("white").Xc);this.a.clearColor(a[0]/255,a[1]/255,a[2]/255,1);ch(this);this.a.enable(this.a.DEPTH_TEST);this.a.depthMask(p);this.a.depthFunc(this.a.LESS);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);if(this.v.PICKING_ENABLED){var b=this.a.createFramebuffer(),c=this.a.createRenderbuffer(),
d=this.a.createTexture();this.a.bindTexture(this.a.TEXTURE_2D,d);this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGB,this.P,this.G,0,this.a.RGB,this.a.UNSIGNED_BYTE,r);this.a.bindFramebuffer(this.a.FRAMEBUFFER,b);this.a.bindRenderbuffer(this.a.RENDERBUFFER,c);this.a.renderbufferStorage(this.a.RENDERBUFFER,this.a.DEPTH_COMPONENT16,this.P,this.G);this.a.bindRenderbuffer(this.a.RENDERBUFFER,r);this.a.framebufferTexture2D(this.a.FRAMEBUFFER,this.a.COLOR_ATTACHMENT0,this.a.TEXTURE_2D,d,0);this.a.framebufferRenderbuffer(this.a.FRAMEBUFFER,
this.a.DEPTH_ATTACHMENT,this.a.RENDERBUFFER,c);this.a.bindFramebuffer(this.a.FRAMEBUFFER,r);this.Af=b}}catch(e){j(Error("Exception while accessing GL Context!\n"+e))}a=new Rg;(this.ja==r||this.a==r||this.t==r)&&j(Error("Renderer was not initialized properly."));(a==r||!(a instanceof Rg))&&j(Error("Could not add shaders."));b=Object.keys(Tg);Object.keys(Sg).every(function(a){a=Sg[a];return-1!=this.te.search(a)||-1!=this.Zd.search(a)}.bind(a))||j(Error("Could not find all attributes in the shader sources."));
b.every(function(a){a=Tg[a];return-1!=this.te.search(a)||-1!=this.Zd.search(a)}.bind(a))||j(Error("Could not find all uniforms in the shader sources."));b=this.a.createShader(this.a.FRAGMENT_SHADER);c=this.a.createShader(this.a.VERTEX_SHADER);this.a.shaderSource(b,a.Zd);this.a.shaderSource(c,a.te);this.a.compileShader(b);this.a.compileShader(c);this.a.getShaderParameter(b,this.a.COMPILE_STATUS)||j(Error("Fragement Shader compilation failed!\n"+this.a.getShaderInfoLog(b)));this.a.getShaderParameter(c,
this.a.COMPILE_STATUS)||j(Error("Vertex Shader compilation failed!\n"+this.a.getShaderInfoLog(c)));d=this.a.createProgram();this.a.attachShader(d,c);this.a.attachShader(d,b);this.a.linkProgram(d);this.a.getProgramParameter(d,this.a.LINK_STATUS)||j(Error("Could not create shader program!\n"+this.a.getShaderInfoLog(b)+"\n"+this.a.getShaderInfoLog(c)+"\n"+this.a.getProgramInfoLog(d)));this.a.useProgram(d);this.ne=d;Object.keys(Sg).forEach(function(a){a=Sg[a];this.Wd.set(a,this.a.getAttribLocation(this.ne,
a));this.a.enableVertexAttribArray(this.Wd.get(a))}.bind(this));Object.keys(Tg).forEach(function(a){a=Tg[a];this.Ef.set(a,this.a.getUniformLocation(this.ne,a))}.bind(this));this.oe=a};
u.$a=function(a){bh.s.$a.call(this,a);var b=s;this.get(a.la)&&(b=p);var c=a.la,d=a.g,e=a.h,f=a.K,g=a.A,h=a.q,m=a.Zb,k=a.da,n=a.o,q=a.u;if(n!=r&&n.q!=r&&n.q.e)this.$a(n);else if(n!=r&&n.e&&this.$a(n),k!=r&&k.q!=r&&k.q.e)this.C.load(k,a);else if(g!=r&&g.q!=r&&g.q.e)this.C.load(g,a);else{if(h!=r&&D(h))if(a.ic!=r){if(a.ic.Kd!=h.length||!a.e)return}else{b=0;c=h.length;for(b=0;b<c;b++)this.C.load(h[b],a);return}else{if(h!=r&&h.e){this.C.load(a,a);return}if(q!=r&&q.q!=r&&q.q.e){this.C.load(q,a);return}}if(0<
a.d.length){h=a.d;k=h.length;for(n=n=0;n<k;n++)this.$a(h[n])}if(d){for(h=0;this.ld;)h++,window.console.log("Possible thread lock avoided: "+h);this.ld=p;k=a instanceof Ae&&a.fb instanceof Ce;b&&(g!=r&&g.e)&&(h=this.qd.get(c),h!=r&&this.a.isBuffer(h.ka)&&this.a.deleteBuffer(h.ka));h=r;g!=r&&(!b||g.e?(h=a.Yb,h==r&&j(Error("Can not add an object and texture without valid coordinate mapping! Set the textureCoordinateMap!")),n=s,g.xa&&(n=p),this.a.pixelStorei(this.a.UNPACK_FLIP_Y_WEBGL,n),n=this.a.createTexture(),
n.Kh=g.mb,this.rd.set(g.la,n),this.a.bindTexture(this.a.TEXTURE_2D,n),g.xa?this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,g.Ab,g.zb,0,this.a.RGBA,this.a.UNSIGNED_BYTE,g.xa):this.a.texImage2D(this.a.TEXTURE_2D,0,this.a.RGBA,this.a.RGBA,this.a.UNSIGNED_BYTE,n.Kh),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_S,this.a.CLAMP_TO_EDGE),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_WRAP_T,this.a.CLAMP_TO_EDGE),k?(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.NEAREST),
this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.NEAREST)):(this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MAG_FILTER,this.a.LINEAR),this.a.texParameteri(this.a.TEXTURE_2D,this.a.TEXTURE_MIN_FILTER,this.a.LINEAR)),this.a.bindTexture(this.a.TEXTURE_2D,r),n=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,n),this.a.bufferData(this.a.ARRAY_BUFFER,new Float32Array(h),this.a.STATIC_DRAW),h=new Id(n,h.length,2),g.e=s):h=this.qd.get(c));If(this.C,0.1);if(k)this.ld=
s,I.oa(this.c+".update"),If(this.C,0.9);else{if(!b||d.e||m.e){k=m.D;g=k.Ra(new O(d.Rb,d.Sb,d.Tb));k=k.Ra(new O(d.Ob,d.Pb,d.Qb));if(this.Kc===r||g.x<this.Kc)this.Kc=g.x;if(this.Hc===r||k.x>this.Hc)this.Hc=k.x;if(this.Lc===r||g.y<this.Lc)this.Lc=g.y;if(this.Ic===r||k.y>this.Ic)this.Ic=k.y;if(this.Mc===r||g.b<this.Mc)this.Mc=g.b;if(this.Jc===r||k.b>this.Jc)this.Jc=k.b;this.k=[(this.Kc+this.Hc)/2,(this.Lc+this.Ic)/2,(this.Mc+this.Jc)/2];m.e=s}b&&d.e&&(m=this.Rc.get(c),m!=r&&this.a.isBuffer(m.ka)&&this.a.deleteBuffer(m.ka));
m=r;!b||d.e?(m=this.a.createBuffer(),d.hb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,m),this.a.bufferData(this.a.ARRAY_BUFFER,d.O,this.a.STATIC_DRAW),m=new Id(m,d.count,3),d.e=s):m=this.Rc.get(c);If(this.C,0.3);b&&e.e&&(g=this.Rc.get(c),g!=r&&this.a.isBuffer(g.ka)&&this.a.deleteBuffer(g.ka));g=r;!b||e.e?(g=this.a.createBuffer(),e.hb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,g),this.a.bufferData(this.a.ARRAY_BUFFER,e.O,this.a.STATIC_DRAW),g=new Id(g,e.count,3),e.e=s):g=this.je.get(c);If(this.C,0.3);b&&
(f&&f.e)&&(e=this.fd.get(c),e!=r&&this.a.isBuffer(e.ka)&&this.a.deleteBuffer(e.ka));e=r;f&&(!b||f.e?(f.length!=d.length&&j(Error("Mismatch between points and point colors.")),e=this.a.createBuffer(),f.hb(),this.a.bindBuffer(this.a.ARRAY_BUFFER,e),this.a.bufferData(this.a.ARRAY_BUFFER,f.O,this.a.STATIC_DRAW),e=new Id(e,f.count,3),f.e=s):e=this.fd.get(c));If(this.C,0.2);b&&(q&&q.e)&&(f=this.pd.get(c),f!=r&&this.a.isBuffer(f.ka)&&this.a.deleteBuffer(f.ka));f=r;q&&(f=q.Ac,!b||q.e?(f.length!=d.length&&
j(Error("Mismatch between points and scalars.")),d=this.a.createBuffer(),this.a.bindBuffer(this.a.ARRAY_BUFFER,d),this.a.bufferData(this.a.ARRAY_BUFFER,f,this.a.STATIC_DRAW),f=new Id(d,f.length,3),q.e=s):f=this.pd.get(c));If(this.C,0.1);b||this.Ma.add(a);this.Rc.set(c,m);this.je.set(c,g);this.fd.set(c,e);this.qd.set(c,h);this.pd.set(c,f);this.ld=a.e=s}}else a.e=s}};function dh(a,b){var c=b.g.ed,c=b.Zb.D.Ra(new O(c[0],c[1],c[2])),c=a.t.n.Ra(c),c=Yc(a.t.wa,c);return Math.round(1E3*c)/1E3}
u.pg=function(a,b){if(this.v.PICKING_ENABLED){this.Hb(p,s);var c=new Uint8Array(4);this.a.readPixels(a,this.G-b,1,1,this.a.RGBA,this.a.UNSIGNED_BYTE,c);return c[0]+255*c[1]+65025*c[2]}return-1};
u.Hb=function(a,b){bh.s.Hb.call(this,a,b);var c=this.Ma.w,d=c.length;if(0!=d){a?this.a.bindFramebuffer(this.a.FRAMEBUFFER,this.Af):this.a.bindFramebuffer(this.a.FRAMEBUFFER,r);var e=this.Ef;this.a.viewport(0,0,this.P,this.G);this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);var f=this.t.zf,g=this.t.Mb;this.a.uniformMatrix4fv(e.get("projection"),s,f);this.a.uniformMatrix4fv(e.get("modelview"),s,g);f=this.k;this.a.uniform3f(e.get(Tg.yj),parseFloat(f[0]),parseFloat(f[1]),parseFloat(f[2]));
this.a.uniform1i(e.get("alphablend"),this.Ek);this.a.uniform1i(e.get("lighting"),this.Th);this.a.uniform1i(e.get("nlights"),this.Zh);g=this.Va.length;for(f=0;f<g;++f){var h=this.Va[f];if(h instanceof N){var m=new O(1,0,0),m=this.t.n.Ra(m),k=Yc(this.t.wa,m),m=new O(-1,0,0),m=this.t.n.Ra(m),n=Yc(this.t.wa,m),m=new O(0,1,0),m=this.t.n.Ra(m),q=Yc(this.t.wa,m),m=new O(0,-1,0),m=this.t.n.Ra(m),w=Yc(this.t.wa,m),m=new O(0,0,1),m=this.t.n.Ra(m),v=Yc(this.t.wa,m),m=new O(0,0,-1),m=this.t.n.Ra(m),m=Yc(this.t.wa,
m),y=Math.max(k,q,v,n,w,m);y==k||y==n?Be(h,0):y==q||y==w?Be(h,1):(y==v||y==m)&&Be(h,2)}}if(this.v.ORDERING_ENABLED)if("OPACITY"==this.v.ORDERING_COMPARATOR){k=s;g=this.Va;h=g.length-1;do if(f=g[h],f instanceof N&&f.Oa){n=f.Cb;k=f.U.d;1==n?k=f.V.d:2==n&&(k=f.cb.d);n=k.length;q=k[0];q.M=dh(this,q);q.N=f.N;w=k[n-1];w.M=dh(this,w);w.N=f.N;w=Math.round(1E3*((w.M-q.M)/n))/1E3;for(v=v=1;v<n-1;v++)m=Math.round(1E3*(q.M+v*w))/1E3,k[v].M=m,k[v].N=f.N;k=p}while(h--);g=this.Ma.w;h=g.length-1;do if(f=g[h],f.Na&&
!(1==f.N||f instanceof Ae))f.M=dh(this,f),k=p;while(h--);k&&this.Ma.sort()}else"ID"==this.v.ORDERING_COMPARATOR&&(this.Ma.Xd=ud,this.Ma.sort());if(g=!a&&b!=r&&b&&this.v.STATISTICS_ENABLED)var z=0,A=0,G=0,x=0;var f=this.Wd,h=f.get("vertexPosition"),k=f.get("vertexNormal"),n=f.get("vertexColor"),q=f.get("vertexTexturePos"),w=f.get("vertexScalar"),v=e.get(Tg.hk),m=e.get("useObjectColor"),y=e.get("objectColor"),C=e.get("useScalars"),J=e.get("scalarsReplaceMode"),P=e.get("scalarsMin"),da=e.get("scalarsMax"),
W=e.get("scalarsMinColor"),Y=e.get("scalarsMaxColor"),ja=e.get("scalarsInterpolation"),ea=e.get("scalarsMinThreshold"),fa=e.get("scalarsMaxThreshold"),Oa=e.get("alpha"),yb=e.get(Tg.Gj),ra=e.get(Tg.jk),kg=e.get(Tg.fk),ih=e.get(Tg.dk),jh=e.get(Tg.ek),kh=e.get(Tg.qk),lh=e.get(Tg.wk),mh=e.get(Tg.tk),nh=e.get(Tg.rk),oh=e.get(Tg.yk),ph=e.get(Tg.xk),qh=e.get(Tg.uk),rh=e.get(Tg.sk),lg=e.get(Tg.vk),sh=e.get("objectTransform"),th=e.get("pointsize"),uh=e.get("lighting"),f=d;do{var Q=c[d-f];if(Q){var ba=r;Q instanceof
Ae&&Q.fb&&(ba=Q.fb);if(Q.Na&&(!ba||ba.Na)){this.dd&&1>Q.N?this.a.depthMask(s):this.a.depthMask(p);var xa=Q.la,Wa=Q.Gc,Ga=this.Rc.get(xa),fb=this.je.get(xa),Qe=this.fd.get(xa),Sb=this.pd.get(xa),Re=this.qd.get(xa);this.a.bindBuffer(this.a.ARRAY_BUFFER,Ga.ka);this.a.vertexAttribPointer(h,Ga.rb,this.a.FLOAT,s,0,0);this.a.bindBuffer(this.a.ARRAY_BUFFER,fb.ka);this.a.vertexAttribPointer(k,fb.rb,this.a.FLOAT,s,0,0);a?this.a.uniform1i(v,p):this.a.uniform1i(v,s);Qe&&!a&&!Wa?(this.a.uniform1i(m,s),this.a.bindBuffer(this.a.ARRAY_BUFFER,
Qe.ka),this.a.vertexAttribPointer(n,Qe.rb,this.a.FLOAT,s,0,0)):(fb=1,Wa&&!a&&(fb=0),this.a.uniform1i(m,fb),fb=Q.kb,a&&(fb=[Math.floor(xa%65025%255)/255,Math.floor(xa%65025/255)/255,Math.floor(xa/65025)/255]),this.a.uniform3f(y,parseFloat(fb[0]),parseFloat(fb[1]),parseFloat(fb[2])),this.a.vertexAttribPointer(n,Ga.rb,this.a.FLOAT,s,0,0));Sb&&!a&&!Wa?(this.a.uniform1i(C,p),this.a.uniform1i(J,Q.u.Cf),xa=Q.u.vb,Wa=Q.u.tb,this.a.uniform3f(W,parseFloat(xa[0]),parseFloat(xa[1]),parseFloat(xa[2])),this.a.uniform3f(Y,
parseFloat(Wa[0]),parseFloat(Wa[1]),parseFloat(Wa[2])),this.a.uniform1f(ea,parseFloat(Q.u.S)),this.a.uniform1f(fa,parseFloat(Q.u.W)),this.a.uniform1f(P,parseFloat(Q.u.La)),this.a.uniform1f(da,parseFloat(Q.u.Ga)),this.a.uniform1i(ja,parseInt(Q.u.ae,10)),this.a.bindBuffer(this.a.ARRAY_BUFFER,Sb.ka),this.a.vertexAttribPointer(w,Sb.rb,this.a.FLOAT,s,0,0)):(this.a.uniform1i(C,s),this.a.vertexAttribPointer(w,Ga.rb,this.a.FLOAT,s,0,0));this.a.uniform1f(Oa,parseFloat(Q.N));Q.A&&Re&&!a?(this.a.uniform1i(ra,
p),this.a.activeTexture(this.a.TEXTURE0),this.a.bindTexture(this.a.TEXTURE_2D,this.rd.get(Q.A.la)),this.a.uniform1i(ih,0),this.a.bindBuffer(this.a.ARRAY_BUFFER,Re.ka),this.a.vertexAttribPointer(q,Re.rb,this.a.FLOAT,s,0,0),this.a.uniform1i(lg,s)):(this.a.uniform1i(ra,s),this.a.vertexAttribPointer(q,Ga.rb,this.a.FLOAT,s,0,0));ba&&(this.a.uniform1i(lg,p),this.a.uniform1f(kh,ba.S),this.a.uniform1f(lh,ba.W),this.a.uniform1f(mh,ba.La),this.a.uniform1f(nh,ba.Ga),xa=ba.vb,Wa=ba.tb,this.a.uniform3f(qh,parseFloat(xa[0]),
parseFloat(xa[1]),parseFloat(xa[2])),this.a.uniform3f(rh,parseFloat(Wa[0]),parseFloat(Wa[1]),parseFloat(Wa[2])),this.a.uniform1f(oh,ba.Y),this.a.uniform1f(ph,ba.X),Sb=ba.o,this.a.uniform1i(kg,s),ba.Oa?this.a.uniform1f(Oa,parseFloat(ba.N)):Sb&&Sb.Na&&(ba=Q.o.la,this.a.uniform1i(kg,p),this.a.activeTexture(this.a.TEXTURE1),this.a.bindTexture(this.a.TEXTURE_2D,this.rd.get(ba)),this.a.uniform1i(jh,1),this.a.uniform1f(yb,Sb.N)));this.a.uniformMatrix4fv(sh,s,Q.Zb.rf);ba=1;"POINTS"==Q.aa&&(ba=Q.Nc);this.a.uniform1f(th,
ba);this.a.uniform1i(uh,Q.Fc);this.a.uniform1i(e.get("highlight"),s);this.a.uniform1i(e.get("picking"),s);this.a.uniform1i(e.get("alphablend"),1);this.a.uniform1i(e.get("nlights"),3);this.a.uniform3f(e.get("ambicolor"),1,1,1);this.a.uniform3fv(e.get("diffcolor"),[0.6,0.6,0.6,0.6,0.6,0.6,0.4,0.4,0.4]);this.a.uniform3fv(e.get("speccolor"),[0.4,0.4,0.4,0.2,0.2,0.2,0.4,0.4,0.4]);this.a.uniform3fv(e.get("lightdir"),[1,1,2,0,1,2,0,0,1]);this.a.uniform1f(e.get("ambient"),0.6);this.a.uniform1f(e.get("diffuse"),
0.4);this.a.uniform1f(e.get("specular"),0.2);this.a.uniform1f(e.get("shininess"),2);ba=-1;Q.aa==pd?(ba=this.a.TRIANGLES,g&&(A+=Ga.qb/3)):"LINES"==Q.aa?(this.a.lineWidth(Q.pc),ba=this.a.LINES,g&&(G+=Ga.qb/2)):"POINTS"==Q.aa?(ba=this.a.POINTS,g&&(x+=Ga.qb)):"TRIANGLE_STRIPS"==Q.aa?(ba=this.a.TRIANGLE_STRIP,g&&(A+=Ga.qb/3)):"POLYGONS"==Q.aa&&(ba=0==Ga.qb%3?this.a.TRIANGLES:this.a.TRIANGLE_FAN,g&&(A+=Ga.qb/3));g&&(z+=Ga.qb);"front"==Q.lc?(this.a.enable(this.a.CULL_FACE),this.a.cullFace(this.a.FRONT)):
"back"==Q.lc?(this.a.enable(this.a.CULL_FACE),this.a.cullFace(this.a.BACK)):this.a.disable(this.a.CULL_FACE);this.a.drawArrays(ba,0,Ga.qb)}}}while(--f);g&&(c="Objects: "+d+" | "+("Vertices: "+z+" | "),c+="Triangles: "+Math.round(A)+" | ",c+="Lines: "+G+" | ",c+="Points: "+x+" | ",c+="Textures: "+this.rd.gb(),window.console.log(c))}};u.xd=function(){this.oe=r;delete this.oe;this.a.clear(this.a.COLOR_BUFFER_BIT|this.a.DEPTH_BUFFER_BIT);bh.s.xd.call(this)};F("X.renderer3D",bh);
F("X.renderer3D.prototype.init",bh.prototype.Ia);F("X.renderer3D.prototype.add",bh.prototype.add);F("X.renderer3D.prototype.onShowtime",bh.prototype.lg);F("X.renderer3D.prototype.onRender",bh.prototype.jg);F("X.renderer3D.prototype.get",bh.prototype.get);F("X.renderer3D.prototype.render",bh.prototype.hc);F("X.renderer3D.prototype.destroy",bh.prototype.xd);F("X.renderer3D.prototype.resetBoundingBox",bh.prototype.Ni);F("X.renderer3D.prototype.resetViewAndRender",bh.prototype.yc);
F("X.renderer3D.prototype.pick",bh.prototype.pg);F("X.renderer3D.prototype.setAlphablend",bh.prototype.sg);F("X.renderer3D.prototype.toggleAlphablend",bh.prototype.jj);function eh(){og.call(this);this.c="renderer2D";this.sf=this.be=this.pf=this.$d=this.wb=r;this.od=this.Vb=this.Wb=this.pe=this.qe=0;this.X=this.Y=this.W=this.S=this.nf=-1}H(eh,og);eh.prototype.pi=aa();eh.prototype.yi=aa();eh.prototype.Te=function(a){eh.s.Te.call(this,a);var b=this.Va[0];if(b){var c=this.wb;b["index"+c]=a.I?b["index"+c]+1:b["index"+c]-1;eval("this.onScroll();")}};
eh.prototype.zi=function(a){var b=this.Va[0];if(b){var c=b.X-b.Y,d=c/2,e=parseInt(c+c/15*-a.ue,10);a=parseInt(d+d/15*a.ge,10);c==e&&e++;d==a&&a++;b.Y-=parseInt(d-a,10);b.Y-=parseInt(c-e,10);b.Y=Math.max(b.Y,b.La);b.X-=parseInt(d-a,10);b.X+=parseInt(c-e,10);b.X=Math.min(b.X,b.Ga);eval("this.onWindowLevel();")}};eh.prototype.__defineGetter__("orientation",t("wb"));
eh.prototype.__defineSetter__("orientation",function(a){a=a.toUpperCase();"X"!=a&&("Y"!=a&&"Z"!=a)&&j(Error("Invalid orientation."));this.wb=a});u=eh.prototype;u.Ia=function(){this.wb||j(Error("No 2D orientation set."));eh.s.Ia.call(this,"2d");this.a.fillStyle="rgba(0,0,0,0)";this.a.fillRect(0,0,this.ja.width,this.ja.height);this.$d=Td("canvas");this.be=Td("canvas");L(this.t,"g",this.zi.bind(this))};u.rotate=function(){this.od++};u.Pi=function(){this.od--};
u.yc=function(){eh.s.yc.call(this);fh(this);var a=this.Va[0];a&&(a.X=a.Ga,a.Y=a.La)};
u.$a=function(a){eh.s.$a.call(this,a);var b=s;this.get(a.la)&&(b=p);if(a instanceof N){var c=a.q,d=a.o,e=a.da;if(d!=r&&d.q!=r&&d.q.e)this.$a(d);else if(e!=r&&e.q!=r&&e.q.e)this.C.load(e,a);else{if(c!=r&&D(c))if(a.ic!=r){if(a.ic.Kd!=c.length||b&&!a.e)return}else{b=0;d=c.length;for(b=0;b<d;b++)this.C.load(c[b],a);return}else if(c!=r&&c.e){this.C.load(a,a);return}var d=c=0,e=a.ea,f=a.H;"X"==this.wb?(this.Xb=a.U.d,c=e[1],d=e[2],this.Wb=f[1],this.Vb=f[2]):"Y"==this.wb?(this.Xb=a.V.d,c=e[0],d=e[2],this.Wb=
f[0],this.Vb=f[2]):"Z"==this.wb&&(this.Xb=a.cb.d,c=e[0],d=e[1],this.Wb=f[0],this.Vb=f[1]);this.qe=c;this.pe=d;e=this.$d;e.width=c;e.height=d;f=this.be;f.width=c;f.height=d;this.pf=e.getContext("2d");this.sf=f.getContext("2d");b||(this.Ma.add(a),fh(this))}}};function fh(a){var b=Math.min(a.P/(a.qe*a.Wb),a.G/(a.pe*a.Vb));a.t.n.j(2,3,b)}
u.Hb=function(a,b){eh.s.Hb.call(this,a,b);if(0!=this.Ma.w.length){var c=this.P,d=this.G,e=this.t.n;this.a.save();this.a.clearRect(-c,-d,2*c,2*d);this.a.restore();var f=1*e.$(0,3),g=-1*e.$(1,3),h=Math.max(e.$(2,3),0.6);this.a.setTransform(h,0,0,h,f,g);var e=this.Va[0],m=e["index"+this.wb],k=this.Xb[parseInt(m,10)],n=k.A.xa,k=k.o,q=r;k&&(q=k.xa);var w=this.qe,v=this.pe,y=this.pf,z=this.sf,A=y.getImageData(0,0,w,v),G=z.getImageData(0,0,w,v),x=A.data,C=G.data,J=x.length,P=e.Ga,da=e.S,W=e.W,Y=e.Y/P,ja=
e.X/P;if(this.nf!=m||this.S!=da||this.W!=W||this.Y!=Y||this.X!=ja){var ea=0;do{var fa=[0,0,0,0],Oa=[0,0,0,0],yb=n[ea]/255*P,ra=n[ea],ra=(ra/255-Y)/(ja-Y),ra=255*ra;yb>=da&&yb<=W&&(fa=new O(e.vb[0],e.vb[1],e.vb[2]),fa=(new O(e.tb[0],e.tb[1],e.tb[2])).scale(ra).add(fa.scale(255-ra)),fa=[Math.floor(fa.x),Math.floor(fa.y),Math.floor(fa.b),255],k&&(Oa=[q[ea],q[ea+1],q[ea+2],q[ea+3]]));ra=J-1-ea;x[ra-3]=fa[0];x[ra-2]=fa[1];x[ra-1]=fa[2];x[ra]=fa[3];C[ra-3]=Oa[0];C[ra-2]=Oa[1];C[ra-1]=Oa[2];C[ra]=Oa[3];
ea+=4}while(ea<J);y.putImageData(A,0,0);z.putImageData(G,0,0);this.nf=m;this.S=da;this.W=W;this.Y=Y;this.X=ja}this.a.globalAlpha=1;this.a.translate(c/2/h,d/2/h);this.a.rotate(0.5*Math.PI*this.od);switch(this.od%4){case 1:c=f;f=g;g=-c;break;case 2:f*=-1;g*=-1;break;case 3:c=f,f=-g,g=c}f=-w*this.Wb/2+f;g=-v*this.Vb/2+g;this.a.drawImage(this.$d,f,g,w*this.Wb,v*this.Vb);k&&e.o.Na&&(this.a.globalAlpha=e.o.N,this.a.drawImage(this.be,f,g,w*this.Wb,v*this.Vb))}};F("X.renderer2D",eh);
F("X.renderer2D.prototype.init",eh.prototype.Ia);F("X.renderer2D.prototype.add",eh.prototype.add);F("X.renderer2D.prototype.onShowtime",eh.prototype.lg);F("X.renderer2D.prototype.onRender",eh.prototype.jg);F("X.renderer2D.prototype.onScroll",eh.prototype.pi);F("X.renderer2D.prototype.onWindowLevel",eh.prototype.yi);F("X.renderer2D.prototype.get",eh.prototype.get);F("X.renderer2D.prototype.rotate",eh.prototype.rotate);F("X.renderer2D.prototype.rotateCounter",eh.prototype.Pi);
F("X.renderer2D.prototype.resetViewAndRender",eh.prototype.yc);F("X.renderer2D.prototype.render",eh.prototype.hc);F("X.renderer2D.prototype.destroy",eh.prototype.xd);function gh(){U.call(this);this.c="mesh";Ha(this,new Rc)}H(gh,U);F("X.mesh",gh);function hh(){U.call(this);this.c="fibers";Ha(this,new Rc)}H(hh,U);F("X.fibers",hh);
