

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- 
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be) 
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>30. gui.image — Saving OpenGL renderings to image files. &mdash; pyFormex 1.0.2-a5 documentation</title>

    
    <link rel="stylesheet" href="../_static/pyformex.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.2-a5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="pyFormex 1.0.2-a5 documentation" href="../index.html" />
    <link rel="up" title="pyFormex reference manual" href="../refman.html" />
    <link rel="next" title="31. gui.imageViewer — A general image viewer" href="gui.imageViewer.html" />
    <link rel="prev" title="29. gui.viewport — Interactive OpenGL Canvas embedded in a Qt4 widget." href="gui.viewport.html" />
<link rel="icon" type="image/png" href="_static/pyformex_fav.png" />

  </head>
  <body>

<div class="header">
  <a href="http://pyformex.org">
  <img src="http://www.nongnu.org/pyformex/_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="http://www.nongnu.org/pyformex/_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gui.imageViewer.html" title="31. gui.imageViewer — A general image viewer"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="gui.viewport.html" title="29. gui.viewport — Interactive OpenGL Canvas embedded in a Qt4 widget."
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">pyFormex 1.0.2-a5 documentation</a> &gt;</li>
          <li><a href="../refman.html" accesskey="U">pyFormex reference manual</a> &gt;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div align="center">

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick"/>
<input type="hidden" name="hosted_button_id" value="P7J4AM4QULB4Q"/>
<input type="image" src="https://www.paypal.com/en_US/BE/i/btn/btn_donateCC_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!"/>
<img alt="" border="0" src="https://www.paypal.com/nl_NL/i/scr/pixel.gif" width="1" height="1"/>
</form>

</div>
   
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">30. <tt class="docutils literal"><span class="pre">gui.image</span></tt> &#8212; Saving OpenGL renderings to image files.</a><ul>
<li><a class="reference internal" href="#classes-defined-in-module-gui-image">30.1. Classes defined in module gui.image</a></li>
<li><a class="reference internal" href="#functions-defined-in-module-gui-image">30.2. Functions defined in module gui.image</a></li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="gui.viewport.html"
                        title="previous chapter">29. <tt class="docutils literal"><span class="pre">gui.viewport</span></tt> &#8212; Interactive OpenGL Canvas embedded in a Qt4 widget.</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="gui.imageViewer.html"
                        title="next chapter">31. <tt class="docutils literal"><span class="pre">gui.imageViewer</span></tt> &#8212; A general image viewer</a></p>
  
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

<div align="center">
  <p>
  <a href="http://www.fsf.org/register_form?referrer=8491"><img src="http://www.nongnu.org/pyformex/_static/fsf-member8491.png" alt="[FSF Associate Member]" width="89" height="31"  /></a>
  </p>
  <p>
    <a href="http://validator.w3.org/check?uri=referer"><img
      src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>
  </p>
</div>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-gui.image">
<span id="gui-image-saving-opengl-renderings-to-image-files"></span><span id="sec-ref-gui-image"></span><h1>30. <a class="reference internal" href="#module-gui.image" title="gui.image: Saving OpenGL renderings to image files."><tt class="xref py py-mod docutils literal"><span class="pre">gui.image</span></tt></a> &#8212; Saving OpenGL renderings to image files.<a class="headerlink" href="#module-gui.image" title="Permalink to this headline">¶</a></h1>
<p>This module defines some functions that can be used to save the
OpenGL rendering and the pyFormex GUI to image files. There are even
provisions for automatic saving to a series of files and creating
a movie from these images.</p>
<div class="section" id="classes-defined-in-module-gui-image">
<h2>30.1. Classes defined in module gui.image<a class="headerlink" href="#classes-defined-in-module-gui-image" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="functions-defined-in-module-gui-image">
<h2>30.2. Functions defined in module gui.image<a class="headerlink" href="#functions-defined-in-module-gui-image" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="gui.image.imageFormats">
<tt class="descclassname">gui.image.</tt><tt class="descname">imageFormats</tt><big>(</big><em>mode='w'</em><big>)</big><a class="headerlink" href="#gui.image.imageFormats" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of the valid image formats.</p>
<p>image formats are lower case strings as &#8216;png&#8217;, &#8216;gif&#8217;, &#8216;ppm&#8217;, &#8216;eps&#8217;, etc.
The available image formats are derived from the installed software.</p>
<p>Parameters:</p>
<ul class="simple">
<li><cite>mode</cite>: &#8216;w&#8217; or &#8216;r&#8217;, for formats that can be written or read.</li>
</ul>
</dd></dl>

<dl class="function">
<dt id="gui.image.initialize">
<tt class="descclassname">gui.image.</tt><tt class="descname">initialize</tt><big>(</big><big>)</big><a class="headerlink" href="#gui.image.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the image module.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.checkImageFormat">
<tt class="descclassname">gui.image.</tt><tt class="descname">checkImageFormat</tt><big>(</big><em>fmt</em>, <em>verbose=True</em><big>)</big><a class="headerlink" href="#gui.image.checkImageFormat" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks image format; if verbose, warn if it is not.</p>
<p>Returns the image format, or None if it is not OK.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.imageFormatFromExt">
<tt class="descclassname">gui.image.</tt><tt class="descname">imageFormatFromExt</tt><big>(</big><em>ext</em><big>)</big><a class="headerlink" href="#gui.image.imageFormatFromExt" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the image format from an extension.</p>
<p>The extension may or may not have an initial dot and may be in upper or
lower case. The format is equal to the extension characters in lower case.
If the supplied extension is empty, the default format &#8216;png&#8217; is returned.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.save_canvas">
<tt class="descclassname">gui.image.</tt><tt class="descname">save_canvas</tt><big>(</big><em>canvas</em>, <em>fn</em>, <em>fmt='png'</em>, <em>quality=-1</em>, <em>size=None</em>, <em>alpha=False</em><big>)</big><a class="headerlink" href="#gui.image.save_canvas" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the rendering on canvas as an image file.</p>
<p>canvas specifies the qtcanvas rendering window.
fn is the name of the file
fmt is the image file format</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.save_window">
<tt class="descclassname">gui.image.</tt><tt class="descname">save_window</tt><big>(</big><em>filename</em>, <em>format</em>, <em>quality=-1</em>, <em>windowname=None</em>, <em>crop=None</em><big>)</big><a class="headerlink" href="#gui.image.save_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a window as an image file.</p>
<p>This function needs a filename AND format.
If a window is specified, the named window is saved.
Else, the main pyFormex window is saved.</p>
<p>If crop is given, the specified rectangle is cropped.
If crop=&#8217;canvas&#8217;, windowname is set to main pyFormex window
and crop to canvas rectangle.</p>
<p>In all cases, the GUI and current canvas are raised.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.save_window_rect">
<tt class="descclassname">gui.image.</tt><tt class="descname">save_window_rect</tt><big>(</big><em>filename</em>, <em>format</em>, <em>quality=-1</em>, <em>window='root'</em>, <em>crop=None</em><big>)</big><a class="headerlink" href="#gui.image.save_window_rect" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a rectangular part of the screen to a an image file.</p>
<p>crop: (x,y,w,h)</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.save">
<tt class="descclassname">gui.image.</tt><tt class="descname">save</tt><big>(</big><em>filename=None</em>, <em>window=False</em>, <em>multi=False</em>, <em>hotkey=True</em>, <em>autosave=False</em>, <em>border=False</em>, <em>grab=False</em>, <em>format=None</em>, <em>quality=-1</em>, <em>size=None</em>, <em>verbose=False</em>, <em>alpha=True</em>, <em>rootcrop=None</em><big>)</big><a class="headerlink" href="#gui.image.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves an image to file or Starts/stops multisave mode.</p>
<p>With a filename and multi==False (default), the current viewport rendering
is saved to the named file.</p>
<p>With a filename and multi==True, multisave mode is started.
Without a filename, multisave mode is turned off.
Two subsequent calls starting multisave mode without an intermediate call
to turn it off, do not cause an error. The first multisave mode will
implicitely be ended before starting the second.</p>
<p>In multisave mode, each call to saveNext() will save an image to the
next generated file name.
Filenames are generated by incrementing a numeric part of the name.
If the supplied filename (after removing the extension) has a trailing
numeric part, subsequent images will be numbered continuing from this
number. Otherwise a numeric part &#8216;-000&#8217; will be added to the filename.</p>
<p>If window is True, the full pyFormex window is saved.
If window and border are True, the window decorations will be included.
If window is False, only the current canvas viewport is saved.</p>
<p>If grab is True, the external &#8216;import&#8217; program is used to grab the
window from the screen buffers. This is required by the border and
window options.</p>
<p>If hotkey is True, a new image will be saved by hitting the &#8216;S&#8217; key.
If autosave is True, a new image will be saved on each execution of
the &#8216;draw&#8217; function.
If neither hotkey nor autosave are True, images can only be saved by
executing the saveNext() function from a script.</p>
<p>If no format is specified, it is derived from the filename extension.
fmt should be one of the valid formats as returned by imageFormats()</p>
<p>If verbose=True, error/warnings are activated. This is usually done when
this function is called from the GUI.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.saveImage">
<tt class="descclassname">gui.image.</tt><tt class="descname">saveImage</tt><big>(</big><em>filename=None</em>, <em>window=False</em>, <em>multi=False</em>, <em>hotkey=True</em>, <em>autosave=False</em>, <em>border=False</em>, <em>grab=False</em>, <em>format=None</em>, <em>quality=-1</em>, <em>size=None</em>, <em>verbose=False</em>, <em>alpha=True</em>, <em>rootcrop=None</em><big>)</big><a class="headerlink" href="#gui.image.saveImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves an image to file or Starts/stops multisave mode.</p>
<p>With a filename and multi==False (default), the current viewport rendering
is saved to the named file.</p>
<p>With a filename and multi==True, multisave mode is started.
Without a filename, multisave mode is turned off.
Two subsequent calls starting multisave mode without an intermediate call
to turn it off, do not cause an error. The first multisave mode will
implicitely be ended before starting the second.</p>
<p>In multisave mode, each call to saveNext() will save an image to the
next generated file name.
Filenames are generated by incrementing a numeric part of the name.
If the supplied filename (after removing the extension) has a trailing
numeric part, subsequent images will be numbered continuing from this
number. Otherwise a numeric part &#8216;-000&#8217; will be added to the filename.</p>
<p>If window is True, the full pyFormex window is saved.
If window and border are True, the window decorations will be included.
If window is False, only the current canvas viewport is saved.</p>
<p>If grab is True, the external &#8216;import&#8217; program is used to grab the
window from the screen buffers. This is required by the border and
window options.</p>
<p>If hotkey is True, a new image will be saved by hitting the &#8216;S&#8217; key.
If autosave is True, a new image will be saved on each execution of
the &#8216;draw&#8217; function.
If neither hotkey nor autosave are True, images can only be saved by
executing the saveNext() function from a script.</p>
<p>If no format is specified, it is derived from the filename extension.
fmt should be one of the valid formats as returned by imageFormats()</p>
<p>If verbose=True, error/warnings are activated. This is usually done when
this function is called from the GUI.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.saveNext">
<tt class="descclassname">gui.image.</tt><tt class="descname">saveNext</tt><big>(</big><big>)</big><a class="headerlink" href="#gui.image.saveNext" title="Permalink to this definition">¶</a></dt>
<dd><p>In multisave mode, saves the next image.</p>
<p>This is a quiet function that does nothing if multisave was not activated.
It can thus safely be called on regular places in scripts where one would
like to have a saved image and then either activate the multisave mode
or not.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.changeBackgroundColorXPM">
<tt class="descclassname">gui.image.</tt><tt class="descname">changeBackgroundColorXPM</tt><big>(</big><em>fn</em>, <em>color</em><big>)</big><a class="headerlink" href="#gui.image.changeBackgroundColorXPM" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the background color of an .xpm image.</p>
<p>This changes the background color of an .xpm image to the given value.
fn is the filename of an .xpm image.
color is a string with the new background color, e.g. in web format
(&#8216;#FFF&#8217; or &#8216;#FFFFFF&#8217; is white). A special value &#8216;None&#8217; may be used
to set a transparent background.
The current background color is selected from the lower left pixel.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.saveIcon">
<tt class="descclassname">gui.image.</tt><tt class="descname">saveIcon</tt><big>(</big><em>fn</em>, <em>size=32</em>, <em>transparent=True</em><big>)</big><a class="headerlink" href="#gui.image.saveIcon" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the current rendering as an icon.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.autoSaveOn">
<tt class="descclassname">gui.image.</tt><tt class="descname">autoSaveOn</tt><big>(</big><big>)</big><a class="headerlink" href="#gui.image.autoSaveOn" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if autosave multisave mode is currently on.</p>
<p>Use this function instead of directly accessing the autosave variable.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.createMovie">
<tt class="descclassname">gui.image.</tt><tt class="descname">createMovie</tt><big>(</big><em>files</em>, <em>encoder='convert'</em>, <em>outfn='output'</em>, <em>**kargs</em><big>)</big><a class="headerlink" href="#gui.image.createMovie" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a movie from a saved sequence of images.</p>
<p>Parameters:</p>
<ul class="simple">
<li><cite>files</cite>: a list of filenames, or a string with one or more filenames
separated by whitespace. The filenames can also contain wildcards
interpreted by the shell.</li>
<li><cite>encoder</cite>: string: the external program to be used to create the movie.
This will also define the type of output file, and the extra parameters
that can be passed. The external program has to be installed on the
computer. The default is <cite>convert</cite>, which will create animated gif.
Other possible values are &#8216;mencoder&#8217; and &#8216;ffmeg&#8217;, creating meg4
encode movies from jpeg input files.</li>
<li><cite>outfn</cite>: string: output file name (not including the extension).
Default is output.</li>
</ul>
<p>Other parameters may be passed and may be needed, depending on the
converter program used. Thus, for the default &#8216;convert&#8217; program,
each extra keyword parameter will be translated to an option
&#8216;-keyword value&#8217; for the command.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">createMovie</span><span class="p">(</span><span class="s">&#39;images*.png&#39;</span><span class="p">,</span><span class="n">delay</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">colors</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span>
</pre></div>
</div>
<p>will create an animated gif &#8216;output.gif&#8217;.</p>
</dd></dl>

<dl class="function">
<dt id="gui.image.saveMovie">
<tt class="descclassname">gui.image.</tt><tt class="descname">saveMovie</tt><big>(</big><em>filename</em>, <em>format</em>, <em>windowname=None</em><big>)</big><a class="headerlink" href="#gui.image.saveMovie" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a movie from the pyFormex window.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gui.imageViewer.html" title="31. gui.imageViewer — A general image viewer"
             >next</a> |</li>
        <li class="right" >
          <a href="gui.viewport.html" title="29. gui.viewport — Interactive OpenGL Canvas embedded in a Qt4 widget."
             >previous</a> |</li>
        <li><a href="../index.html">pyFormex 1.0.2-a5 documentation</a> &gt;</li>
          <li><a href="../refman.html" >pyFormex reference manual</a> &gt;</li> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2015, Benedict Verhegghe.
    </span>
      Last updated on Jun 18, 2016.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.
    </span>
    </div>
  </body>
</html>