
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!--
##
##  This file is part of the pyFormex project.
##  pyFormex is a tool for generating, manipulating and transforming 3D
##  geometrical models by sequences of mathematical operations.
##  Home page: http://pyformex.org
##  Project page:  http://savannah.nongnu.org/projects/pyformex/
##  Copyright (C) Benedict Verhegghe (benedict.verhegghe@ugent.be)
##  Distributed under the GNU General Public License version 3 or later.
##
##
##  This program is free software: you can redistribute it and/or modify
##  it under the terms of the GNU General Public License as published by
##  the Free Software Foundation, either version 3 of the License, or
##  (at your option) any later version.
##
##  This program is distributed in the hope that it will be useful,
##  but WITHOUT ANY WARRANTY; without even the implied warranty of
##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##  GNU General Public License for more details.
##
##  You should have received a copy of the GNU General Public License
##  along with this program.  If not, see http://www.gnu.org/licenses/.
##
-->
    <title>pyFormex tutorial &mdash; pyFormex 1.0.3-a2 documentation</title>

    
    <link rel="stylesheet" href="_static/pyformex.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.3-a2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyFormex 1.0.3-a2 documentation" href="index.html" />
    <link rel="next" title="pyFormex user guide" href="user-guide.html" />
    <link rel="prev" title="Installing pyFormex" href="install.html" />
<link rel="icon" type="image/png" href="_static/pyformex_fav.png" />

  </head>
  <body role="document">

<div class="header">
  <a href="http://pyformex.org">
  <img src="http://www.nongnu.org/pyformex/_static/scallop_dome_small.png" alt="scallop dome" border="0" hspace="20" vspace="12" align="left" />
  <img src="http://www.nongnu.org/pyformex/_static/pyformex-logo-2.png" alt="pyformex logo" border="0" hspace="10" vspace="8" align="left" />
  </a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="user-guide.html" title="pyFormex user guide"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installing pyFormex"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyFormex 1.0.3-a2 documentation</a> &gt;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<!-- PYFORMEX_WEBSITE_SIDEBAR_TOP -->
   
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pyFormex tutorial</a><ul>
<li><a class="reference internal" href="#the-philosophy">The philosophy</a></li>
<li><a class="reference internal" href="#getting-started">Getting started</a></li>
<li><a class="reference internal" href="#some-basic-python-concepts">Some basic Python concepts</a></li>
<li><a class="reference internal" href="#some-basic-numpy-concepts">Some basic NumPy concepts</a></li>
<li><a class="reference internal" href="#the-formex-data-model">The Formex data model</a></li>
<li><a class="reference internal" href="#creating-a-formex">Creating a Formex</a><ul>
<li><a class="reference internal" href="#direct-input-of-structured-coordinate-data">Direct input of structured coordinate data</a></li>
<li><a class="reference internal" href="#using-the-pattern-function">Using the <code class="docutils literal"><span class="pre">pattern()</span></code> function</a></li>
<li><a class="reference internal" href="#reading-coordinates-from-a-file-or-a-string">Reading coordinates from a file or a string</a></li>
</ul>
</li>
<li><a class="reference internal" href="#concatenation-and-lists-of-formices">Concatenation and lists of Formices</a></li>
<li><a class="reference internal" href="#formex-property-numbers">Formex property numbers</a></li>
<li><a class="reference internal" href="#getting-information-about-a-formex">Getting information about a Formex</a></li>
<li><a class="reference internal" href="#saving-geometry">Saving geometry</a></li>
<li><a class="reference internal" href="#saving-images">Saving images</a></li>
<li><a class="reference internal" href="#transforming-a-formex">Transforming a Formex</a></li>
<li><a class="reference internal" href="#converting-a-formex-to-a-mesh-model">Converting a Formex to a Mesh model</a></li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Installing pyFormex</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="user-guide.html"
                        title="next chapter">pyFormex user guide</a></p>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<!-- PYFORMEX_WEBSITE_SIDEBAR_BOTTOM -->

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pyformex-tutorial">
<span id="cha-tutorial"></span><h1>pyFormex tutorial<a class="headerlink" href="#pyformex-tutorial" title="Permalink to this headline">¶</a></h1>
<div class="topic">
<p class="topic-title first">Abstract</p>
<p>This tutorial will guide you step by step through the most important
concepts of the pyFormex scripting language and the pyFormex Graphical
User Interface (GUI). It is intended for first time users, giving explicit
details of what to do and what to expect as result.</p>
</div>
<div class="section" id="the-philosophy">
<span id="sec-intro-tut"></span><h2>The philosophy<a class="headerlink" href="#the-philosophy" title="Permalink to this headline">¶</a></h2>
<p>pyFormex is a Python implementation of Formex algebra. Using
pyFormex, it is very easy to generate large geometrical models of 3D
structures by a sequence of mathematical transformations.  It is
especially suited for the automated design of spatial structures. But
it can also be used for other tasks, like operating on 3D geometry
obtained from other sources, or for finite element pre- and
postprocessing, or just for creating some nice pictures.</p>
<p>By writing a simple script, a large and complex geometry can be created by
copying, translating, rotating, or otherwise transforming geometrical entities.
pyFormex will interpret the script and draw what you have created.
This is clearly very different from the traditional (mostly interactive) way
of creating a geometrical model, like is done in most CAD packages.
There are some huge advantages in using pyFormex:</p>
<ul class="simple">
<li>It is especially suited for the automated design of spatial frame structures.
A dome, an arc, a hypar shell, ..., when constructed as a space frame, can be
rather difficult and tedious to draw with a general CAD program;
using scripted mathematical transformations however, it may become a
trivial task.</li>
<li>Using a script makes it very easy to apply changes in the geometry:
you simply modify the script and re-execute it. You can easily
change the value of a geometrical parameter in any way you want:
set it directly, interactively ask it from the user, calculate it from some
formula, read it from a file, etcetera.
Using CAD, you would have often have to
completely redo your drawing work. The power of scripted geometry
building is illustrated in figure <a class="reference internal" href="#fig-scallopdomes"><span class="std std-ref">Same script, different domes</span></a>: all these
domes were created with the same script, but with different values
of some parameters.</li>
</ul>
<div class="figure align-center" id="id1">
<span id="fig-scallopdomes"></span><img alt="Three scallop domes" src="_images/scallopdomes.png" />
<p class="caption"><span class="caption-text">Same script, different domes</span></p>
</div>
<ul class="simple">
<li>At times there will be operations that are easier to perform through
an interactive Graphical User Interface (GUI). The GUI gives access
to many such functions. Especially occasional and untrained users
will benefit from it. As everything else in pyFormex, the GUI is completely
open and can be modified at will by the user&#8217;s application scripts,
to provide an interface with either extended or restricted
functionality.</li>
<li>pyformex scripts are written in the <a class="reference external" href="http://www.python.org">Python</a> programming language.
This implies that the scripts are also Python-based. It is a very
easy language to learn, and if you are interested in reading more
about it, there are good tutorials and beginner&#8217;s guides available
on the Python website (<a class="reference external" href="http://www.python.org/doc">http://www.python.org/doc</a>). However, if
you&#8217;re only using Python to write pyFormex scripts, the tutorial
you&#8217;re reading right now should be enough.</li>
</ul>
</div>
<div class="section" id="getting-started">
<span id="sec-getting-started"></span><h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Start the pyFormex GUI by entering the command <code class="docutils literal"><span class="pre">pyformex</span></code> in a
terminal. Depending on your instalation, there may also be a menu
item in the application menu to start pyFormex, or even a quickstart button
in the panel. Using the terminal however can still be useful,
especially in the case of errors, because otherwise the GUI might
suppress some of the error messages that normally are sent to the
terminal.</p>
</li>
<li><p class="first">Create a new pyFormex script using the
<span class="menuselection">File‣Create new script</span> option. This will open a file
dialog: enter a filename <code class="docutils literal"><span class="pre">example0.py</span></code> (be sure to be in a directory
where you have write permissions). Pressing the <code class="docutils literal"><span class="pre">Save</span></code> button will open
up your favorite editor with a pyFormex script template like the one below.</p>
<div class="highlight-default"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1">##</span>
<span class="c1">##  Copyright (C) 2011 John Doe (j.doe@somewhere.org)</span>
<span class="c1">##  Distributed under the GNU General Public License version 3 or later.</span>
<span class="c1">##</span>
<span class="c1">##  This program is free software: you can redistribute it and/or modify</span>
<span class="c1">##  it under the terms of the GNU General Public License as published by</span>
<span class="c1">##  the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">##  (at your option) any later version.</span>
<span class="c1">##</span>
<span class="c1">##  This program is distributed in the hope that it will be useful,</span>
<span class="c1">##  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">##  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">##  GNU General Public License for more details.</span>
<span class="c1">##</span>
<span class="c1">##  You should have received a copy of the GNU General Public License</span>
<span class="c1">##  along with this program.  If not, see http://www.gnu.org/licenses/.</span>
<span class="c1">##</span>

<span class="sd">&quot;&quot;&quot;pyFormex Script/App Template</span>

<span class="sd">This is a template file to show the general layout of a pyFormex</span>
<span class="sd">script or app.</span>

<span class="sd">A pyFormex script is just any simple Python source code file with</span>
<span class="sd">extension &#39;.py&#39; and is fully read and execution at once.</span>

<span class="sd">A pyFormex app can be a &#39;.py&#39; of &#39;.pyc&#39; file, and should define a function</span>
<span class="sd">&#39;run()&#39; to be executed by pyFormex. Also, the app should import anything that</span>
<span class="sd">it needs.</span>

<span class="sd">This template is a common structure that allows the file to be used both as</span>
<span class="sd">a script or as an app, with almost identical behavior.</span>

<span class="sd">For more details, see the user guide under the `Scripting` section.</span>

<span class="sd">The script starts by preference with a docstring (like this),</span>
<span class="sd">composed of a short first line, then a blank line and</span>
<span class="sd">one or more lines explaining the intention of the script.</span>

<span class="sd">If you distribute your script/app, you should set the copyright holder</span>
<span class="sd">at the start of the file and make sure that you (the copyright holder) has</span>
<span class="sd">the intention/right to distribute the software under the specified</span>
<span class="sd">copyright license (GPL3 or later).</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># This helps in getting same code working with both Python2 and Python3</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>

<span class="c1"># The pyFormex modeling language is defined by everything in</span>
<span class="c1"># the gui.draw module (if you use the GUI). For execution without</span>
<span class="c1"># the GUI, you should import from pyformex.script instead.</span>
<span class="kn">from</span> <span class="nn">pyformex.gui.draw</span> <span class="k">import</span> <span class="o">*</span>

<span class="c1"># Definitions</span>
<span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Main function.</span>

<span class="sd">    This is automatically executed on each run of an app.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is the pyFormex template script/app&quot;</span><span class="p">)</span>


<span class="c1"># Code in the outer scope:</span>
<span class="c1"># - for an app, this is only executed on loading (module initialization).</span>
<span class="c1"># - for a script, this is executed on each run.</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is the initialization code of the pyFormex template script/app&quot;</span><span class="p">)</span>

<span class="c1"># The following is to make script and app behavior alike</span>
<span class="c1"># When executing a script in GUI mode, the global variable __name__ is set</span>
<span class="c1"># to &#39;draw&#39;, thus the run method defined above will be executed.</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__draw__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running as a script&quot;</span><span class="p">)</span>
    <span class="n">run</span><span class="p">()</span>


<span class="c1"># End</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If the editor does not open, you may need to configure
the editor command:  see <a class="reference internal" href="gui.html#settings-commands"><span class="std std-ref">Settings &#8211;&gt; Commands</span></a>.</p>
<p class="last">Make sure you are using an editor that understands Python code. Most modern
editors will give you syntax highlighting and help with indentation.</p>
</div>
<ul>
<li><p class="first">The template script shows the typical layout of a pyFormex script:</p>
<ul class="simple">
<li>The script starts with some comment lines (all lines starting with a &#8216;#&#8217;).
For the sake of this tutorial, you can just disregard the comments. But
this section typical displays a file identification, the copyright notice
and the license conditions.</li>
<li>Then comes a multiline documentation string, contained between two <code class="docutils literal"><span class="pre">&quot;&quot;&quot;</span></code>
delimiters. By preference, this docstring is composed of a short first
line, then a blank line and finally one or more lines explaining the
intention of the script.</li>
<li>Next are the pyFormex instructions.</li>
<li>The script ends with a comment line <code class="docutils literal"><span class="pre">#</span> <span class="pre">End</span></code>. We recommend you to do this
also. It serves as a warning for inadvertent truncation of your file.</li>
</ul>
</li>
<li><p class="first">In the status bar at the bottom of the pyFormex GUI, you will now
see the name of the script, together with a green dot. This tells
you that the script has been recognized by the system as a
pyFormex script, and is ready to run.</p>
</li>
<li><p class="first">Read the docstring of the template script: it gives some basic information
on the two application models in pyFormex. For this tutorial we will however
stick to the simpler <em>script</em> model. Therefore, replace the whole code section  between
the <code class="docutils literal"><span class="pre">from</span> <span class="pre">__future__</span></code> line and <code class="docutils literal"><span class="pre">#</span> <span class="pre">End</span></code> with just this single line:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is a pyFormex script&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">print_function</span></code> line makes Python
import a feature from the future Python3 language, turning the <code class="docutils literal"><span class="pre">print</span></code>
statement into a function. This means that you have to write
<code class="docutils literal"><span class="pre">print(something)</span></code> instead of <code class="docutils literal"><span class="pre">print</span> <span class="pre">something</span></code>. If you are
acquainted with Python and it hinders you, remove that line (but
remember that you will have to learn the newer syntax sooner or later).
If you are a starting Python user, leave it there and learn to use
the future syntax right from the start.</p>
</div>
<ul>
<li><p class="first">Save your changes to the script (in your editor), and execute it in
pyFormex by selecting the <span class="menuselection">File ‣ Play</span> menu option,
or by just pushing the <img alt="button-play" src="_images/next.png" /> button in the
toolbar. In the message area (just above the bottom status bar), a line is
printed announcing the start and end of execution. Any output created
by the script during execution is displayed in between this two
lines. As expected, the template script just prints the text from the
print statement.</p>
</li>
<li><p class="first">Now change the text of the string in the print statement, but do not save
your changes yet.
Execute the script again, and notice that the printed text has not changed!
This is because the editor is an external program to pyFormex, and <em>the
executed script is always the text as read from file</em>, not necessarily equal
to what is displayed in your editor.</p>
<p>Save the script, run it again, and you will see the output has changed.</p>
</li>
<li><p class="first">Next, change the text of the script to look like the one below, and save it as
<code class="docutils literal"><span class="pre">example1.py</span></code>. Again, note that the editor and pyFormex are separate
programs, and saving the script does not change the name of the current
script in pyFormex.</p>
<div class="highlight-default"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># example1.py</span>

<span class="sd">&quot;&quot;&quot;Example 1&quot;&quot;&quot;</span>

<span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">([[[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]],[[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">]]])</span>

<span class="c1"># End</span>
</pre></div>
</td></tr></table></div>
<p>Selecting an existing script file for execution in pyFormex is done with
the <span class="menuselection">File ‣ Open</span> option. Open the <code class="docutils literal"><span class="pre">example1.py</span></code> file
you just saved and check that its name is indeed displayed in the status bar.
You can now execute the script if you want, but it will not produce anything
visible. We&#8217;ll learn you how to visualize geometry later on.</p>
</li>
<li><p class="first">Exit pyFormex (using the <span class="menuselection">File ‣ Exit</span>) and then restart
it. You should again see the <code class="docutils literal"><span class="pre">example1.py</span></code> displayed as the current script.
On exit, pyFormex stores your last script name, and on restart it prepares
to run it again. You can also easily select one the most recent scripts you
used from the <span class="menuselection">File ‣ History</span> option. Select the oldest
(bottom) one. Then close all your editor windows.</p>
</li>
<li><p class="first">Open the <code class="docutils literal"><span class="pre">example1.py</span></code> again, either using <span class="menuselection">File ‣ Open</span>
or <span class="menuselection">File ‣ History</span>. The script will not be loaded into your
editor. That is becaused often you will just want to <em>run</em> the script, not
<em>change</em> it. Use the <span class="menuselection">File ‣ Edit</span> option to load the
current script into the editor.</p>
</li>
</ul>
<p>Now that you know how to load, change and execute scripts in pyFormex, we&#8217;re
all set for exploring its power. But first, let&#8217;s introduce you to
some basic Python and NumPy concepts. If you are already familiar with
them, you can just skip these sections.</p>
</div>
<div class="section" id="some-basic-python-concepts">
<span id="sec-intro-python"></span><h2>Some basic Python concepts<a class="headerlink" href="#some-basic-python-concepts" title="Permalink to this headline">¶</a></h2>
<p>pyFormex is written in the Python language, and Python is also the
scripting language used by pyFormex. Since the whole intent of pyFormex
is to generate geometrical structures from scripts, you will at least
need to have some basic knowledge of Python before you can use it for
your own projects.</p>
<p>The <a class="reference external" href="http://www.python.org/doc">Python documentation</a> website contains a variety of good
documents to introduce you. If you are new to Python, but have already
some programming experience, the <a class="reference external" href="http://docs.python.org/tutorial">Python tutorial</a> may be a good
starting point. Or else, you can take a look at one of the other beginners&#8217;
guides. Stick with the Python 2.x documentation for now. Though
pyFormex might one day use Python 3.x, we are still far off that
day, because all the underlying packages need to be converted to
Python 3 first.</p>
<p>Do not be afraid of having to learn a new programming language. Python is
known as own of the easiest languages to get started with: just a few basic
concepts suffice to produce quite powerful scripts. Most developers and users of
pyFormex have started without any knowledge of Python.</p>
<p>For the really impatient who do not want to go through the <a class="reference external" href="http://docs.python.org/tutorial">Python
tutorial</a> before diving into pyFormex, we have gathered hereafter
some of the most important Python concepts, hopefully enabling you to
continue with this tutorial.</p>
<p>Here is a small example Python script.</p>
<div class="highlight-default"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;Python intro</span>

<span class="sd">A short introduction to some aspects of the Python programming language</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>

<span class="k">for</span> <span class="n">light</span> <span class="ow">in</span> <span class="p">[</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="s1">&#39;black&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">light</span> <span class="o">==</span> <span class="s1">&#39;red&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;stop&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">light</span> <span class="o">==</span> <span class="s1">&#39;yellow&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;brake&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">light</span> <span class="o">==</span> <span class="s1">&#39;green&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;drive&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;THE LIGHT IS BROKEN!&#39;</span><span class="p">)</span>

<span class="n">appreciation</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;not driving&#39;</span><span class="p">,</span>
    <span class="mi">30</span><span class="p">:</span><span class="s1">&#39;slow&#39;</span><span class="p">,</span>
    <span class="mi">60</span><span class="p">:</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span>
    <span class="mi">90</span><span class="p">:</span><span class="s1">&#39;dangerous&#39;</span><span class="p">,</span>
    <span class="mi">120</span><span class="p">:</span><span class="s1">&#39;suicidal&#39;</span>
    <span class="p">}</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">speed</span> <span class="o">=</span> <span class="mi">30</span><span class="o">*</span><span class="n">i</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">. Driving at speed </span><span class="si">%s</span><span class="s2"> is </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">speed</span><span class="p">,</span><span class="n">appreciation</span><span class="p">[</span><span class="n">speed</span><span class="p">]))</span>

<span class="c1"># End</span>
</pre></div>
</td></tr></table></div>
<ul>
<li><p class="first">A &#8216;#&#8217; starts a comment: the &#8216;#&#8217;, and anything following it on the same line,
is disregarded. A Python script typically starts with a comment line like
line 1 of the above script.</p>
</li>
<li><p class="first">Strings in Python can be delimited either by single quotes (&#8216;),
double quotes (&#8221;) or by triple double quotes (&#8220;&#8221;&#8221;). The starting and
ending delimiters have to be equal though. Strings in triple quotes
can span several lines, like the string on lines 2-5.</p>
</li>
<li><p class="first">Indentation is essential. Indentation is Python&#8217;s way of
grouping statements. In small, sequential scripts,
indentation is not needed and you should make sure that you start
each new line in the first column.
An <code class="docutils literal"><span class="pre">if</span></code> test or a <code class="docutils literal"><span class="pre">for</span></code> loop will however need indentation to
mark the statement(s) inside the condition or loop.
Thus, in the example, lines 8-15 are the block of statements that are
executed repeatedly under the <code class="docutils literal"><span class="pre">for</span></code> loop construct in line 7.
Notice that the condition and loop statements end with a &#8216;:&#8217;.</p>
<p>You should make sure that statements belonging to the same block are
indented consistently.
We advice you not to use tabs for indenting. A good practice
commonly followed by most Python programmers is to indent with 4
spaces.</p>
<p>The indentation makes Python code easy to read for humans. Most modern
editors will recognize Python code and help you with the indentation.</p>
</li>
<li><p class="first">Variables in Python do not need to be declared before using them. In
fact, Python has no variables, only typed objects. An assignment is
just the binding of a name to an object. That binding can be changed
at each moment by a new assignment to the same name.</p>
</li>
<li><p class="first">Sequences of objects can be grouped in tuples or lists, and
individual items of them are accessed by an index starting from 0.</p>
</li>
<li><p class="first">Function definitions can use both positional arguments and keyword arguments,
but the keyword arguments must follow the positional arguments.
The order in which keyword arguments are specified is not important.</p>
</li>
<li><p class="first">You can use names defined in other modules, but you need to import
those first. This can be done by importing the whole module and then
using a name relative to that module:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mymodule</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mymodule</span><span class="o">.</span><span class="n">some_variable</span><span class="p">)</span>
</pre></div>
</div>
<p>or you can import specific names from a module:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mymodule</span> <span class="k">import</span> <span class="n">some_variable</span>
<span class="nb">print</span><span class="p">(</span><span class="n">some_variable</span><span class="p">)</span>
</pre></div>
</div>
<p>or you can import everything from a module (not recommended, because
you can easily clutter your name space):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mymodule</span> <span class="k">import</span> <span class="o">*</span>
<span class="nb">print</span><span class="p">(</span><span class="n">some_variable</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="some-basic-numpy-concepts">
<span id="sec-intro-numpy"></span><h2>Some basic NumPy concepts<a class="headerlink" href="#some-basic-numpy-concepts" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This section still needs to be written!</p>
</div>
<p>Numerical Python (or NumPy for short) is an extension to the Python language
providing efficient operations on large (numerical) arrays. relies heavily on
NumPy, and most likely you will need to use some NumPy functions in your
scripts. As NumPy is still quite young, the available documentation is not so
extensive yet. Still, the tentative NumPy
tutorial <a class="reference external" href="http://www.scipy.org/Tentative_NumPy_Tutorial">http://www.scipy.org/Tentative_NumPy_Tutorial</a> already provides the
basics.</p>
<p>If you have ever used some other matrix language, you will find a lot of similar
concepts in NumPy.</p>
<p>To do: Introduce the (for users) most important NumPy concepts.</p>
<p id="index-0">pyFormex uses the NumPy <code class="xref py py-class docutils literal"><span class="pre">ndarray</span></code> as implementation of fast
numerical arrays in Python.</p>
</div>
<div class="section" id="the-formex-data-model">
<span id="sec-formex"></span><h2>The Formex data model<a class="headerlink" href="#the-formex-data-model" title="Permalink to this headline">¶</a></h2>
<p id="index-1">The most important geometrical object in pyFormex is the
<code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> class. A <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> (plural:Formices) can
describe a variety of geometrical objects: points, lines, surfaces,
volumes. The most simple geometrical object is the point, which in
three dimensions is only determined by its coordinates <code class="docutils literal"><span class="pre">(x,y,z)</span></code>,
which are numbered <code class="docutils literal"><span class="pre">(0,1,2)</span></code> in pyFormex to be consistent with
Python and NumPy indexing.  Higher order geometrical objects are
defined as a collection of points.  The number of points of an object
is called the <em>plexitude</em> of the object.</p>
<p id="index-2">A Formex is a collection of geometrical objects of the same plexitude. The
objects in the collection are called the <em>elements</em> of the <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code>. A
<code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> whose elements have plexitude <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/> is also called an
<img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/>-plex <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code>. Internally, the coordinates of the points are
stored in a NumPy <code class="xref py py-class docutils literal"><span class="pre">ndarray</span></code>  with three dimensions. The coordinates of a
single point are stored along the last axis (2) of the <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code>; all the
points of an element are stored along the second axis (1); different elements
are stored along the first axis (0) of the <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code>. The figure
<a class="reference internal" href="#fig-formex"><span class="std std-ref">The structure of a Formex</span></a> schematizes the structure of a <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code>.</p>
<div class="figure align-center" id="id2">
<span id="fig-formex"></span><img alt="The structure of a Formex" src="_images/Formex.png" />
<p class="caption"><span class="caption-text">The structure of a Formex</span></p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The beginning user should be aware not to confuse the three axes of
a <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> with the axes of the 3D space. Both are numbered
0..2. The three coordinate axes form the components of the last
axis of a Formex.</p>
</div>
<p>For simplicity of the implemented algorithms, internally pyFormex
only deals with 3D geometry. This means that the third axis of a
<code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> always has length 3. You can however import 2D
geometry: all points will be given a third coordinate
<img class="math" src="_images/math/aec852a1ae502fd5feb94eb958d734acd596338d.png" alt="z=0.0"/>. If you restrict your operations to transformations in
the <img class="math" src="_images/math/497184a5e83d0159a4bf15b0bb89dc5aa40cce7d.png" alt="(x,y)"/>-plane, it suffices to extract just the first two
coordinates to get the transformed 2D geometry.</p>
<p>The <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> object <code class="docutils literal"><span class="pre">F</span></code> can be indexed just like a <img class="math" src="_images/math/721956835829f3a969bdd2b300d56f247a3ef292.png" alt="NumPy"/>
numerical array: <code class="docutils literal"><span class="pre">F[i]</span></code> returns the element with index <img class="math" src="_images/math/df0deb143e5ac127f00bd248ee8001ecae572adc.png" alt="i"/> (counting
from <img class="math" src="_images/math/532f3248d6552e7ac6b785bd935f404ad593e6a9.png" alt="0"/>). For a <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> with plexitude <img class="math" src="_images/math/e11f2701c4a39c7fe543a6c4150b421d50f1c159.png" alt="n"/>, the result will
be an array with shape <img class="math" src="_images/math/6b3259e2fe52714398f72a45759b0c5b40619427.png" alt="(n,3)"/>, containing all the points of the element.
Further, <code class="docutils literal"><span class="pre">F[i][j]</span></code> will be a <img class="math" src="_images/math/21db36a1f6033ebb43178732705edf62b747f8bd.png" alt="(3,)"/>-shaped array containing the
coordinates of point <img class="math" src="_images/math/6b21e0b0899a0d2879d3b8019087fa630bab4ea2.png" alt="j"/> of element <img class="math" src="_images/math/df0deb143e5ac127f00bd248ee8001ecae572adc.png" alt="i"/>. Finally, <code class="docutils literal"><span class="pre">F[i][j][k]</span></code> is
a single floating point value representing one coordinate of that point.</p>
<p>In the following sections of this tutorial, we will first learn you
how to create simple geometry using the Formex data model and how to
use the basic pyFormex interface functions. The real power of the
<code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> class will then be established starting from the section <a class="reference internal" href="#sec-transform"><span class="std std-ref">Transforming a Formex</span></a>.</p>
</div>
<div class="section" id="creating-a-formex">
<span id="sec-create-formex"></span><h2>Creating a Formex<a class="headerlink" href="#creating-a-formex" title="Permalink to this headline">¶</a></h2>
<p>There are many, many ways to create <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> instances in your
scripts.  Most of the geometrical operations and transformations in
pyFormex return geometry as a <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code>. But how do you create
a new geometric structure from simple coordinate data? Well, there are
several ways to do that too, and we&#8217;ll introduce them one by one.</p>
<div class="section" id="direct-input-of-structured-coordinate-data">
<span id="subsec-direct-input"></span><h3>Direct input of structured coordinate data<a class="headerlink" href="#direct-input-of-structured-coordinate-data" title="Permalink to this headline">¶</a></h3>
<p>The most straightforward way to create a Formex is by directly
specifying the coordinates of the points of all its elements in a way
compatible to creating a 3D <code class="xref py py-class docutils literal"><span class="pre">ndarray</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">([[[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]],[[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">]]])</span>
</pre></div>
</div>
<p>The data form a nested list of three levels deep. Each innermost level list
holds the coordinates of a single point. There are four of them: [0.,0.], [1.,0.], [1.,1.] and [0.,1.]. Remark that we left out the third (z) coordinate and it will be set equal to zero. Also, though the values are integer, we added a dot
to force floating point values.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Python by default uses integer math on integer arguments!
We advice you to always write the decimal point in values that initialize
variables that can have floating point values, such as lengths, angles,
thicknesses. Use integer values only to initialize variables that can
only have an integer value, such as the number of elements.</p>
</div>
<p>The second list level groups the points into elements. In this case
there are two elements, each containing two points. The outermost list
level then is the <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code>: it has plexitude 2 and contains 2
elements.  But what geometrical entities does this represent? The
plexitude alone does not specify what kind of geometric objects we are
dealing about. A 2-plex element would presumably represent a straight
line segment between two points in space, but it could just as well be
used to represent a sphere (by its center and a point on the surface)
or a plane (by a point in the plane and the direction of the normal).</p>
<p>By default, pyFormex will interprete the plexitude as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Plexitude</th>
<th class="head">Geometrical interpretation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>Points</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>Straight line segments</td>
</tr>
<tr class="row-even"><td>3</td>
<td>Triangles</td>
</tr>
<tr class="row-odd"><td>4 or higher</td>
<td>Polygons (possibly nonplanar)</td>
</tr>
</tbody>
</table>
<p>We will see later how to override this default. For now, let&#8217;s draw Formices
with the default. Go back to the <code class="docutils literal"><span class="pre">example1.py</span></code> script in your editor, containing the line above, and add the <code class="docutils literal"><span class="pre">draw(F)</span></code> instruction to make it look like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">([[[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]],[[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">]]])</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</pre></div>
</div>
<p>Save the script and execute it in pyFormex. You will see the following picture
appear in the canvas.</p>
<div class="figure align-center" id="id3">
<span id="fig-parallel"></span><img alt="Two parallel lines" src="_images/parallel.png" />
<p class="caption"><span class="caption-text">Two parallel lines</span></p>
</div>
<p>Now let&#8217;s remove the two central &#8216;]&#8217; and &#8216;[&#8216; brackets in the first line:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">([[[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">]]])</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">blue</span><span class="p">)</span>
</pre></div>
</div>
<p>With the same data we have now created a 4-plex Formex with only one element.
Execute the script again (do not forget to save it first) and you will see
a square. Note that the draw command allows you to specify a color.</p>
<div class="figure align-center" id="id4">
<span id="fig-square"></span><img alt="A square" src="_images/square.png" />
<p class="caption"><span class="caption-text">A square.</span></p>
</div>
<p>But wait a minute! Does this represent a square surface, or just the four lines constituting the circumference of the square? Actually, it is a square surface, but since the pyFormex GUI by default displays in wireframe mode, unless you have changed it, you will only see the border of the square. You can make surfaces and solids get fully rendered by selecting the <span class="menuselection">Viewport ‣ Render Mode ‣ Flat</span> option or using the shortcut <img alt="button-flat" src="_images/flat.png" /> button in the toolbar.
You will then see</p>
<div class="figure align-center" id="id5">
<span id="fig-square-filled"></span><img alt="A filled square" src="_images/square_filled.png" />
<p class="caption"><span class="caption-text">The square in smooth rendering.</span></p>
</div>
<p>pyFormex by default uses wireframe rendering, because in a fully
rendered mode many details are obscured. Switch back to wireframe
mode using the <span class="menuselection">Viewport ‣ Render Mode ‣
Wireframe</span> menu option or <img alt="button-wireframe" src="_images/wireframe.png" /> toolbar button.</p>
<p>Now suppose you want to define a Formex representing the four border
lines of the square, and not the surface inside that
border. Obviously, you need a 4 element 2-plex Formex, using data
structured like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">([[[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]]])</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">blue</span><span class="p">,</span><span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Try it, and you will see an image identical to the earlier figure
<a class="reference internal" href="#fig-square"><span class="std std-ref">A square.</span></a>.
But now this image represents four straight lines, while the same
image formerly represented a square plane surface.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When modeling geometry, always be aware that what you
think you see is not necessarily what it really is!</p>
</div>
<p>The <code class="docutils literal"><span class="pre">clear=True</span></code> option in the draw statement makes sure the screen
is cleared before drawing. By default the pyFormex draw
statement does not clear the screen but just adds to what was already
drawn. You can make the <code class="docutils literal"><span class="pre">clear=True</span></code> option the default from the
<span class="menuselection">Viewport ‣ Drawing Options</span> menu.  Do this now before continuing.</p>
<p>Changing the rendering mode, the perspective and the viewpoint can
often help you to find out what the image is really representing.
But interrogating the Formex data itself is the definite way to make sure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">([[[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">]]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">([[[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">]],[[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">]]])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<p>This will print the length of the three axes of the coordinate array. In
the first case you get <code class="docutils literal"><span class="pre">(1,</span> <span class="pre">4,</span> <span class="pre">3)</span></code> (1 element of plexitude 4),
while the second one gives <code class="docutils literal"><span class="pre">(2,</span> <span class="pre">2,</span> <span class="pre">3)</span></code> (2 elements of plexitude 2).</p>
<p>You can also print the whole Formex, using <code class="docutils literal"><span class="pre">print(F)</span></code>, giving you the
coordinate data in a more readable fashion than the list input. The
last example above will yield:
<code class="docutils literal"><span class="pre">{[0.0,0.0,0.0;</span> <span class="pre">1.0,0.0,0.0],</span> <span class="pre">[1.0,1.0,0.0;</span> <span class="pre">0.0,1.0,0.0]}</span></code>.
In the output, coordinates are separated by commas and points by
semicolons. Elements are contained between brackets and the full
Formex is placed inside braces.</p>
<p>Until now we have only dealt with plane structures, but 3D structures
are as easy to create from the coordinate data. The following Formex
represents a pyramid defined by four points (a tetrahedron):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">([[[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">]]],</span><span class="n">eltype</span><span class="o">=</span><span class="s1">&#39;tet4&#39;</span><span class="p">)</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</pre></div>
</div>
<p>Depending on your current rendering mode, this will produce an image
like one of the following:</p>
<div class="figure align-center" id="id6">
<span id="fig-tetraeder"></span><img alt="The tetrahedron in wireframe and smoothwire rendering" src="_images/tetraeder.png" />
<p class="caption"><span class="caption-text">The tetrahedron in wireframe and smoothwire (transparent) rendering</span></p>
</div>
<p>The smoothwire mode can be set from the <span class="menuselection">Viewport ‣
Render Mode ‣ Smoothwire</span> option or the <img alt="button-smoothwire" src="_images/smoothwire.png" />
button. The transparent mode can be toggled using the <img alt="button-transparent" src="_images/transparent.png" />
button.</p>
<p>Hold down the left mouse button and move the mouse: the pyramid will
rotate. In the same way, holding down the rigth button will zoomin and
out. Holding down the middle button (possibly the mouse wheel, or the
left and right button together) will move the pyramid over the canvas.
Practice a bit with these mouse manipulations, until you get a feeling of what
they do.
All these mouse operations do not change the coordinates of the
structure: they just change the way you&#8217;re looking at it. You can
restore the default view with the <span class="menuselection">Views ‣ Front</span>
menu or the <img alt="button-front" src="_images/front.png" /> button.</p>
<p>The default installation of pyFormex provides seven default views:
<code class="docutils literal"><span class="pre">Front</span></code>, <code class="docutils literal"><span class="pre">Back</span></code>, <code class="docutils literal"><span class="pre">Left</span></code>, <code class="docutils literal"><span class="pre">Right</span></code>, <code class="docutils literal"><span class="pre">Top</span></code>, <code class="docutils literal"><span class="pre">Bottom</span></code> and
<code class="docutils literal"><span class="pre">Iso</span></code>. They can be set from the <span class="menuselection">Views</span> menu items or
the corresponding view buttons in the toolbar.  The default <code class="docutils literal"><span class="pre">Front</span></code>
corresponds to the camera looking in the <img class="math" src="_images/math/814e386f4be87435ac754e2ba5c8fc9146c34bae.png" alt="-z"/> direction, with
the <img class="math" src="_images/math/a59f68a4202623bb859a7093f0316bf466e6f75d.png" alt="x"/> axis oriented to the right and the <img class="math" src="_images/math/276f7e256cbddeb81eee42e1efc348f3cb4ab5f8.png" alt="y"/> axis
upward.</p>
<p>We explicitely added the element type <code class="docutils literal"><span class="pre">tet4</span></code> when creating the
pyramid. Without it, pyFormex would have interpreted the 4-plex Formex
as a quadrilateral (though in this case a non-planar one).</p>
</div>
<div class="section" id="using-the-pattern-function">
<span id="subsec-using-patterns"></span><h3>Using the <code class="xref py py-func docutils literal"><span class="pre">pattern()</span></code> function<a class="headerlink" href="#using-the-pattern-function" title="Permalink to this headline">¶</a></h3>
<p>In the previous examples the Formices were created by directly
specifying the coordinate data. That is fine for small structures, but
quickly becomes cumbersome when the structures get larger.
The <code class="xref py py-func docutils literal"><span class="pre">pattern()</span></code> function can reduce the amount of
input needed to create a Formex from scratch.</p>
<p>This function creates a series of points that lie on a regular grid
with unit step. These points can then be used to create some
geometry. Do not worry about the regularity of the grid: pyFormex has
many ways to transform it afterwards.</p>
<p>The points are created from a string input, interpreting each character
as a code specifying how to move from the previous point to the new point.
The start position on entry is the origin [0.,0.,0.].</p>
<p>Currently the following codes are defined:</p>
<ul class="simple">
<li>0: goto origin (0.,0.,0.)</li>
<li>1..8: move in the x,y plane, as specified below</li>
<li>9 or .: remain at the same place (i.e. duplicate the last point)</li>
<li>A..I: same as 1..9 plus step +1. in z-direction</li>
<li>a..i: same as 1..9 plus step -1. in z-direction</li>
<li>/: do not insert the next point</li>
</ul>
<p>When looking at the x,y-plane with the x-axis to the right and the
y-axis up, we have the following basic moves:
1 = East, 2 = North, 3 = West, 4 = South, 5 = NE, 6 = NW, 7 = SW, 8 = SE.</p>
<p>Adding 16 to the ordinal of the character causes an extra move of +1. in
the z-direction. Adding 48 causes an extra move of -1. This means that
&#8216;ABCDEFGHI&#8217;, resp. &#8216;abcdefghi&#8217;, correspond with &#8216;123456789&#8217; with an extra
z +/-= 1. This gives the following schema:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>    <span class="n">z</span><span class="o">+=</span><span class="mi">1</span>             <span class="n">z</span> <span class="n">unchanged</span>            <span class="n">z</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="n">F</span>    <span class="n">B</span>    <span class="n">E</span>          <span class="mi">6</span>    <span class="mi">2</span>    <span class="mi">5</span>         <span class="n">f</span>    <span class="n">b</span>    <span class="n">e</span>
     <span class="o">|</span>                    <span class="o">|</span>                   <span class="o">|</span>
     <span class="o">|</span>                    <span class="o">|</span>                   <span class="o">|</span>
<span class="n">C</span><span class="o">----</span><span class="n">I</span><span class="o">----</span><span class="n">A</span>          <span class="mi">3</span><span class="o">----</span><span class="mi">9</span><span class="o">----</span><span class="mi">1</span>         <span class="n">c</span><span class="o">----</span><span class="n">i</span><span class="o">----</span><span class="n">a</span>
     <span class="o">|</span>                    <span class="o">|</span>                   <span class="o">|</span>
     <span class="o">|</span>                    <span class="o">|</span>                   <span class="o">|</span>
<span class="n">G</span>    <span class="n">D</span>    <span class="n">H</span>          <span class="mi">7</span>    <span class="mi">4</span>    <span class="mi">8</span>         <span class="n">g</span>    <span class="n">d</span>    <span class="n">h</span>
</pre></div>
</div>
<p>The special character &#8216;/&#8217; can be put before any character to make the
move without inserting the new point. You need to start
the string with a &#8216;0&#8217; or &#8216;9&#8217; to include the origin in the output.</p>
<p>For example, the string &#8216;0123&#8217; will result in the following four points,
on the corners of a unit square:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[[</span> <span class="mf">0.</span>  <span class="mf">0.</span>  <span class="mf">0.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">1.</span>  <span class="mf">0.</span>  <span class="mf">0.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">0.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">0.</span>  <span class="mf">1.</span>  <span class="mf">0.</span><span class="p">]]</span>
</pre></div>
</div>
<p>Run the following simple script to check it:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">P</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">(</span><span class="s1">&#39;0123&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
</pre></div>
</div>
<p>Now you can use these points to initialize a Formex</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="n">pattern</span><span class="p">(</span><span class="s1">&#39;0123&#39;</span><span class="p">))</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</pre></div>
</div>
<p>This draws the four points. But the Formex class allows a lot more.
You can directly initialize a Formex with the pattern input string,
preceded by a modifier field. The modifier specifies how the list
of points should be grouped into multipoint elements. It normally consists
of a number specifying the plexitude of the elements, followed by a &#8216;:&#8217;
character. Thus, after the following definitions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;1:0123&#39;</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;2:0123&#39;</span><span class="p">)</span>
<span class="n">H</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;4:0123&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>F will be a set of 4 points (plexitude 1), G will be 2 line segments
(plexitude 2) and H will a single square (plexitude 4).</p>
<p>Furthermore, the special modifier &#8216;l:&#8217; can be used to create line elements
between each point and the previous one. Note that this in effect doubles
the number of points in the Formex and always results in a 2-plex Formex.
Here&#8217;s an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;l:1234&#39;</span><span class="p">)</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</pre></div>
</div>
<p>It creates the same circumference of a unit square as above (see
figure <a class="reference internal" href="#fig-square"><span class="std std-ref">A square.</span></a>), but is much simpler than the explicit
specification of the coordinates we used before. Notice that we have
used here &#8216;1234&#8217; instead of &#8216;0123&#8217; to get the four corners of the unit
square. Check what happens if you use &#8216;0123&#8217;, and try to explain why.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Because the creation
of line segments between subsequent points is such a common task,
the Formex class even allows you to drop the &#8216;l:&#8217; modifier. If a
Formex is initialized by a string without modifier field, the &#8216;l:&#8217;
is silently added.</p>
</div>
<p>Figure <a class="reference internal" href="#fig-patterns"><span class="std std-ref">Images generated from the patterns &#8216;127&#8217;, &#8216;11722&#8217; and &#8216;22584433553388&#8217;</span></a> shows some more examples.</p>
<div class="figure align-center" id="id7">
<span id="fig-patterns"></span><img alt="Images generated from patterns" src="_images/patterns.png" />
<p class="caption"><span class="caption-text">Images generated from the patterns &#8216;127&#8217;, &#8216;11722&#8217; and &#8216;22584433553388&#8217;</span></p>
</div>
<p>Some simple wireframe patterns are defined in <code class="xref py py-mod docutils literal"><span class="pre">simple.py</span></code> and are
ready for use.  These pattern strings are stacked in a dictionary called
&#8216;Pattern&#8217;. Items of this dictionary can be accessed like
<code class="docutils literal"><span class="pre">Pattern['cube']</span></code>.</p>
<blockquote>
<div>from simple import Pattern
F = Formex(Pattern[&#8216;cube&#8217;])
print(F.shape)
draw(F,color=blue,view=&#8217;iso&#8217;)</div></blockquote>
<div class="figure align-center" id="id8">
<span id="fig-cube"></span><img alt="A wireframe cube" src="_images/cube.png" />
<p class="caption"><span class="caption-text">A wireframe cube</span></p>
</div>
<p>The printed out shape of the Formex is <code class="docutils literal"><span class="pre">(12,2,3)</span></code>, confirming that
what we have created here is not a 3D solid cube, nor the planes bounding
that cube, but merely twelve straight line segments forming the edges
of a cube.</p>
<p>The <code class="docutils literal"><span class="pre">view='iso'</span></code> option in the draw statement rotates the camera so
that it looks in the [-1,-1,-1] direction. This is one of the
predefined viewing directions and can also be set from the
<span class="menuselection">Views</span> menu or using the <img alt="button-iso" src="_images/iso.png" /> button.</p>
<p>While the <code class="xref py py-func docutils literal"><span class="pre">pattern()</span></code> function can
only generate points lying on a regular cartesian grid, pyFormex provides
a wealth of transformation functions to move the points to other
locations after they were created.
Also, the <code class="xref py py-mod docutils literal"><span class="pre">Turtle</span></code> plugin module provides a more general mechanism to
create planar wireframe structures.</p>
</div>
<div class="section" id="reading-coordinates-from-a-file-or-a-string">
<span id="subsec-reading-from-file-or-string"></span><h3>Reading coordinates from a file or a string<a class="headerlink" href="#reading-coordinates-from-a-file-or-a-string" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you want to read the coordinates from a file, rather
than specifying them directly in your script.
This is especially handy
if you want to import geometry from some other program that can not
export data in a format that is understood by pyFormex. There usually is a
way to write the bare coordinates to a file, and the pyFormex
scripting language provides all the necessary tools to read them back.</p>
<p>As an example, create (in the same folder where you store your
scripts) the text file <code class="docutils literal"><span class="pre">square.txt</span></code> with the following contents:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
<span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
<span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Then create and execute the following script.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">chdir</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="s1">&#39;square.txt&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">nplex</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</pre></div>
</div>
<p>It will generate two squares, as shown in the figure <a class="reference internal" href="#fig-twosquares"><span class="std std-ref">Two squares with coordinates read from a file</span></a>.</p>
<div class="figure align-center" id="id9">
<span id="fig-twosquares"></span><img alt="Two squares read from file" src="_images/twosquares.png" />
<p class="caption"><span class="caption-text">Two squares with coordinates read from a file</span></p>
</div>
<p>The <code class="docutils literal"><span class="pre">chdir(__file__)</span></code> statement sets your working
directory to the directory where the script is located, so that the filename
can be specified without adding the full pathname.
The <code class="xref py py-meth docutils literal"><span class="pre">Formex.fromfile()</span></code> call reads the coordinates (as specified,
separated by &#8216;,&#8217;) from the file and groups them into elements of the specified
plexitude (4). The grouping of coordinates on a line is irrelevant:
all data could just as well be given on a single line, or with just one value
per line. The separator character can be accompanied by extra
whitespace. Use a space character if your data are only separated by
whitespace.</p>
<p>There is a similar <code class="xref py py-meth docutils literal"><span class="pre">Formex.fromstring()</span></code> method, which reads
coordinates directly from a string in the script.
If you have a lot of coordinates to specify, this may be far more easy
than using the list formatting.
The following script yields the same result as the above one:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">0 0 0  0 1 0  1 1 0  1 0 0</span>
<span class="s2">1 1 0  2 1 0  2 2 0  1 2 0</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span><span class="n">nplex</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we used the default separator, which is a space.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure to use <code class="xref py py-meth docutils literal"><span class="pre">Formex.fromfile()</span></code>, to distinguish it
from <code class="xref py py-meth docutils literal"><span class="pre">Coords.fromfile()</span></code> and <code class="xref py py-meth docutils literal"><span class="pre">numpy.fromfile()</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="concatenation-and-lists-of-formices">
<span id="sec-concatenation-and-lists"></span><h2>Concatenation and lists of Formices<a class="headerlink" href="#concatenation-and-lists-of-formices" title="Permalink to this headline">¶</a></h2>
<p>Multiple Formices can be concatenated to form one new Formex. There
are many ways to do this, but the simplest is to use the <code class="docutils literal"><span class="pre">+</span></code> or
<code class="docutils literal"><span class="pre">+=</span></code> operator. Notice the diffference: the <code class="docutils literal"><span class="pre">+</span></code> operator does not
changing any of the arguments, but the <code class="docutils literal"><span class="pre">+=</span></code> operator adds the second
argument to the first, changing its definition:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;1234&#39;</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">)</span>
<span class="n">H</span> <span class="o">=</span> <span class="n">F</span> <span class="o">+</span> <span class="n">G</span>
<span class="n">draw</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
</pre></div>
</div>
<p>displays the same Formex as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">+=</span> <span class="n">G</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</pre></div>
</div>
<p>but in the latter case, the original definition of <code class="docutils literal"><span class="pre">F</span></code> is lost.</p>
<p>The <code class="docutils literal"><span class="pre">+=</span></code> operator is one of the very few operations that
change an existing Formex. Nearly all other operations return a
resulting Formex without changing the original ones.</p>
<p>Because a Formex has a single plexitude and element type,
concatenation is restricted to Formices of the same plexitude and with
the same <code class="xref py py-attr docutils literal"><span class="pre">eltype</span></code>. If you want to handle structures with
elements of different plexitude as a single object, you have to group
them in a list:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;1234&#39;</span><span class="p">)</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>
<span class="n">H</span> <span class="o">=</span> <span class="p">[</span><span class="n">F</span><span class="p">,</span><span class="n">G</span><span class="p">]</span>
<span class="n">draw</span><span class="p">(</span><span class="n">H</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">red</span><span class="p">)</span>
</pre></div>
</div>
<p>This draws the circumference of a unit square (F: plexitude 2) and the
center point of the square (G: plexitude 1), both in red.</p>
<div class="figure align-center" id="id10">
<span id="fig-square-center"></span><img alt="A square and its center point" src="_images/square_center.png" />
<p class="caption"><span class="caption-text">A square and its center point.</span></p>
</div>
</div>
<div class="section" id="formex-property-numbers">
<span id="sec-propnr"></span><h2>Formex property numbers<a class="headerlink" href="#formex-property-numbers" title="Permalink to this headline">¶</a></h2>
<p>Apart from the coordinates of its points, a <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> object can
also store a set of property numbers. This is a set of integers, one
for every element of the Formex. The property numbers are stored in an
attribute <code class="xref py py-attr docutils literal"><span class="pre">prop</span></code> of the Formex.  They can be set, changed or
deleted, and be used for any purpose the user wants, e.g. to number
the elements in a different order than their appearence in the
coordinate array. Or they can be used as pointers into a large
database that stores all kind of properties for that element. Just
remember that a Formex either has no property numbers, or a complete
set of numbers: one for every element.</p>
<p>Property numbers can play an important role in the modeling process, because
they present some means of tracking how the resulting Formex was created.
Indeed, each transformation of a Formex that preserves its structure, will also
preserve the property numbers. Concatenation of Formices with property numbers
will also concatenate the property numbers. If any of the concatenated Formices
does not have property numbers, it will receive value 0 for all its elements. If
all concatenated Formices are without properties, so will be the resulting
Formex.</p>
<p>On transformations that change the structure of the Formex, such as
replication, each element of the created Formex will get the property
number of the Formex element it was generated from.</p>
<p>To add properties to a Formex, use the
<code class="xref py py-meth docutils literal"><span class="pre">setProp()</span></code> method. It ensures that the property array is generated with
the correct type and shape. If needed, the supplied values are repeated to
match the number of elements in the Formex.
The following script creates four triangles, the first and third get
property number 1, the second and fourth get property 3.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;3:.12.34.14.32&#39;</span><span class="p">)</span>
<span class="n">F</span><span class="o">.</span><span class="n">setProp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">prop</span><span class="p">)</span>   <span class="c1"># --&gt; [1 3 1 3]</span>
</pre></div>
</div>
<p>As a convenience, you can also specify the property numbers as a
second argument to the Formex constructor.
Once the properties have been created, you can safely change
individual values by directly accessing the <code class="xref py py-attr docutils literal"><span class="pre">prop</span></code> attribute.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;3:.12.34.14.32&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">F</span><span class="o">.</span><span class="n">prop</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">prop</span><span class="p">)</span>   <span class="c1"># --&gt; [1 3 1 4]</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
<span class="n">drawNumbers</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</pre></div>
</div>
<p>When you draw a Formex with property numbers using the default draw
options (i.e. no color specified), pyFormex will use the property
numbers as indices in a color table, so different properties are shown
in different colors. The default color table has eight colors:
<code class="docutils literal"><span class="pre">[black,</span> <span class="pre">red,</span> <span class="pre">green,</span> <span class="pre">blue,</span> <span class="pre">cyan,</span> <span class="pre">magenta,</span> <span class="pre">yellow,</span> <span class="pre">white]</span></code> and will wrap
around if a property value larger than 7 is used. You can however
specify any other and larger colorset to be used for drawing the
property colors. The following figure shows different renderings
of the structure created by the above script. The <code class="xref py py-func docutils literal"><span class="pre">drawNumbers()</span></code>
function draws the element numbers (starting from 0).</p>
<div class="figure align-center" id="id11">
<span id="fig-props"></span><img alt="A Formex with properties drawn as colors" src="_images/props.png" />
<p class="caption"><span class="caption-text">A Formex with property numbers drawn as colors. From left to right:
wireframe, flat, flat (transparent), flatwire (transparent).</span></p>
</div>
<p>In flat rendering mode, the element numbers may be obscured by the
faces. In such case, you can make the numbers visible by using the
transparent mode, which can be toggled
with the <img alt="button-transparent" src="_images/transparent.png" /> button.</p>
<p>Adding properties to a Formex is often done with the sole purpose of
drawing with multiple colors. But remember you are free to use the properties
for any purpose you want. You can even save, change and restore them
throughout the lifetime of a Formex object, thus you can attibrute
multiple property sets to a Formex.</p>
</div>
<div class="section" id="getting-information-about-a-formex">
<span id="sec-formex-info"></span><h2>Getting information about a Formex<a class="headerlink" href="#getting-information-about-a-formex" title="Permalink to this headline">¶</a></h2>
<p>While the visual feedback on the canvas usually gives a good
impression of the structure you created, at times the view will not
provide enough information or not precise enough. Viewing a 3D
geometry on a 2D screen can at times even be very misleading. The most
reliable source for checking your geometry will always be the Formex
data itself. We have already seen that you can print the coordinates
of the Formex <code class="docutils literal"><span class="pre">F</span></code>
just by printing the Formex itself: <code class="docutils literal"><span class="pre">print(F)</span></code>.
Likewise you can see the property numbers from a <code class="docutils literal"><span class="pre">print(F.prop)</span></code> instruction.</p>
<p>But once you start using large data structures, this information may become difficult to handle.
You are usually better off with some generalized information about the Formex object.
The <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> class provides a number of methods that return such information.
The following table lists the most interesting ones.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Function</th>
<th class="head">Return value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="xref py py-meth docutils literal"><span class="pre">F.nelems()</span></code></td>
<td>The number of elements in the Formex</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-meth docutils literal"><span class="pre">F.nplex()</span></code></td>
<td>The plexitude of the Formex (the number
of points in each element of the Formex)</td>
</tr>
<tr class="row-even"><td><code class="xref py py-meth docutils literal"><span class="pre">F.bbox()</span></code></td>
<td>The bounding box of the Formex</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-meth docutils literal"><span class="pre">F.center()</span></code></td>
<td>The center of the bbox of the Formex</td>
</tr>
<tr class="row-even"><td><code class="xref py py-meth docutils literal"><span class="pre">F.sizes()</span></code></td>
<td>The size of the bbox of the Formex</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="saving-geometry">
<span id="sec-saving-geometry"></span><h2>Saving geometry<a class="headerlink" href="#saving-geometry" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you want to save the created geometry to a file, e.g. to reread
it in a next session without having to create it again, or to pass it to
someone else. While pyFormex can export geometry in a large number of
formats, the best and easiest way is to use the <code class="xref py py-func docutils literal"><span class="pre">writeGeomFile()</span></code>
function. This ensures a fast and problem free saving and read back of
the geometry. The geometry is saved in pyFormex&#8217;s own file format, in a
file with extension &#8216;.pgf&#8217;. This format is well documented (see
<a class="reference internal" href="file_format.html"><span class="doc">pyFormex file formats</span></a>) and thus accessible
for other programs.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;3:012/1416&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setProp</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">B</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;4:0123&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">translate</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>
<span class="n">draw</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<span class="n">writeGeomFile</span><span class="p">(</span><span class="s1">&#39;saved.pgf&#39;</span><span class="p">,[</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">])</span>
</pre></div>
</div>
<p>When reading back such a file, the objects end up in a dictionary.
Quit pyFormex, restart it and read back the just saved file.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">D</span> <span class="o">=</span> <span class="n">readGeomFile</span><span class="p">(</span><span class="s1">&#39;saved.pgf&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">draw</span><span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</pre></div>
</div>
<p>In this case the keys were auto-generated. We could however specified the
keys when creating the file, by specifying a dictionary instead of a list
of the objects to save.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">writeGeomFile</span><span class="p">(</span><span class="s1">&#39;saved.pgf&#39;</span><span class="p">,{</span><span class="s1">&#39;two_triangles&#39;</span><span class="p">:</span><span class="n">A</span><span class="p">,</span><span class="s1">&#39;a_square&#39;</span><span class="p">:</span><span class="n">B</span><span class="p">})</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">readGeomFile</span><span class="p">(</span><span class="s1">&#39;saved.pgf&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="saving-images">
<span id="sec-saving-images"></span><h2>Saving images<a class="headerlink" href="#saving-images" title="Permalink to this headline">¶</a></h2>
<p>Often you will want to save an image of the created geometry to a
file, e.g. to include it in some document. This can readily be done
from the <span class="menuselection">File ‣ Save Image</span> menu. You just have to
fill in the file name and click the <span class="guilabel">Save</span> buttton.
You can specify the file format by using the appropriate extension in
the file name. The default and recommended format is <code class="docutils literal"><span class="pre">png</span></code>, but
pyFormex can save in commonly used bitmap formats like <code class="docutils literal"><span class="pre">jpg</span></code> or
<code class="docutils literal"><span class="pre">gif</span></code> as well.</p>
<p>But you can also create the images from inside your script. Just
import the <code class="docutils literal"><span class="pre">image</span></code> module and call the <code class="docutils literal"><span class="pre">image.save()</span></code> function:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gui.image</span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;my_image.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Often you will want to change some settings, like rendering mode or
background color, to get a better looking picture.
Since the main goal of pyFormex is to automate the creation and
transformation of geometrical models, all these settings can be
changed from inside your script as well.
The following code was used to create the four images in
figure <a class="reference internal" href="#fig-props"><span class="std std-ref">A Formex with property numbers drawn as colors. From left to right:
wireframe, flat, flat (transparent), flatwire (transparent).</span></a> above.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gui.image</span>
<span class="n">chdir</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
<span class="n">reset</span><span class="p">()</span>
<span class="n">bgcolor</span><span class="p">(</span><span class="n">white</span><span class="p">)</span>
<span class="n">linewidth</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">canvasSize</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">300</span><span class="p">)</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;3:.12.34.14.32&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">F</span><span class="o">.</span><span class="n">prop</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">clear</span><span class="p">()</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
<span class="n">drawNumbers</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
<span class="n">wireframe</span><span class="p">()</span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;props-000.png&#39;</span><span class="p">)</span>
<span class="n">flat</span><span class="p">()</span>
<span class="n">transparent</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;props-001.png&#39;</span><span class="p">)</span>
<span class="n">transparent</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;props-002.png&#39;</span><span class="p">)</span>
<span class="n">flatwire</span><span class="p">()</span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;props-003.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The following table lists the interactive menu
option and the correspondant programmable function to be used to
change some of the most common rendering settings.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="26%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Purpose</th>
<th class="head">Function(s)</th>
<th class="head">Menu item</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Background color</td>
<td>bgcolor()</td>
<td><span class="menuselection">Viewport ‣ Background Color</span></td>
</tr>
<tr class="row-odd"><td>Line width</td>
<td>linewidth()</td>
<td><span class="menuselection">Viewport ‣ LineWidth</span></td>
</tr>
<tr class="row-even"><td>Canvas Size</td>
<td>canvasSize()</td>
<td><span class="menuselection">Viewport ‣ Canvas Size</span></td>
</tr>
<tr class="row-odd"><td>Render Mode</td>
<td>wireframe(),
flat(), flatwire(),
smooth(), smoothwire()</td>
<td><span class="menuselection">Viewport ‣ Render Mode</span></td>
</tr>
<tr class="row-even"><td>Transparency</td>
<td>transparent()</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="transforming-a-formex">
<span id="sec-transform"></span><h2>Transforming a Formex<a class="headerlink" href="#transforming-a-formex" title="Permalink to this headline">¶</a></h2>
<p>Until now, we&#8217;ve only created simple Formices. The strength of
pyFormex however is the ease to generate large geometrical models by a sequence of
mathematical transformations. After creating a initial Formex, you can
transform it by creating copies, translations, rotations, projections,...</p>
<p>The <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> class has an wide range of powerful transformation methods
available, and this is not the place to treat them all. The reference manual
<a class="reference internal" href="refman.html"><span class="doc">pyFormex reference manual</span></a> describes them in detail.</p>
<p>We will illustrate the power of the <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code> transformations by
studying one of the examples included with pyFormex. The
examples can be accessed from the <span class="menuselection">Examples</span> menu
option.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have installed multiple script directories, the
examples may be found in a submenu <span class="menuselection">Scripts ‣
Examples</span>.</p>
</div>
<p>When a script is selected from this menu, it will be executed
automatically. Select the <span class="menuselection">Examples ‣ Level ‣
Beginner ‣ Helix</span> example. You will see an image of a complex
helical frame structure:</p>
<div class="figure align-center" id="id12">
<span id="fig-helix"></span><img alt="A helical frame structure" src="_images/helix.png" />
<p class="caption"><span class="caption-text">A helical frame structure (Helix example)</span></p>
</div>
<p>Yet the geometry of this complex structure was built from the very
simple pyFormex script shown below (Use <span class="menuselection">File ‣ Edit
script</span> to load it in your editor. Leaving out the comments and docstring,
the relevant part of the script looks like this:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="sd">&quot;&quot;&quot;Helix example from pyFormex&quot;&quot;&quot;</span>
 <span class="n">m</span> <span class="o">=</span> <span class="mi">36</span> <span class="c1"># number of cells along helix</span>
 <span class="n">n</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># number of cells along circular cross section</span>
 <span class="n">reset</span><span class="p">()</span>
 <span class="n">setDrawOptions</span><span class="p">({</span><span class="s1">&#39;clear&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">})</span>
 <span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;l:164&#39;</span><span class="p">),[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span><span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
 <span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">replic</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span> <span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
 <span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">replic</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span> <span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
 <span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mf">1.</span><span class="p">);</span> <span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="s1">&#39;iso&#39;</span><span class="p">)</span>
 <span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">cylindrical</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">360.</span><span class="o">/</span><span class="n">n</span><span class="p">,</span><span class="mf">1.</span><span class="p">]);</span> <span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
 <span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">replic</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="n">m</span><span class="o">*</span><span class="mf">1.</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span> <span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
 <span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">-</span><span class="mf">10.</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span> <span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
 <span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">5.</span><span class="p">);</span> <span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
 <span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">cylindrical</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">360.</span><span class="o">/</span><span class="n">m</span><span class="p">,</span><span class="mf">1.</span><span class="p">]);</span> <span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
 <span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The script shows all steps in the building of the helical structure.
We will explain and illustrate them one by one.
If you want to see the intermediate results in pyFormex during
execution of the script, you can set a wait time between
subsequent drawing operations with <span class="menuselection">Settings ‣ Draw
Wait Time</span>. Or alternatively, you can start the script with the
<img alt="button-step" src="_images/step.png" /> button: pyFormex will then halt before each <code class="docutils literal"><span class="pre">draw</span></code>
function and wait until you push the <img alt="button-step" src="_images/step.png" /> again.</p>
<p>The script starts with setting the two parameters <code class="docutils literal"><span class="pre">m</span></code> and <code class="docutils literal"><span class="pre">n</span></code>. It is
always a good idea to put constants in a variable. That makes it easy to
change the values in a single place when you want to create another
structure:
<cite>your model has become a parametric model.</cite></p>
<p>Lines 3 resets the drawing options to the defaults. It is not essential in this script but it is often a good idea to restore the defaults, in case they would have been changed by a script that was run previously.
Setting the <code class="docutils literal"><span class="pre">clear=True</span></code> option in line 4 makes sure the subsequent drawing instructions will remove the previous step from the canvas.</p>
<p>In line 5 we create the basic geometrical entity for this structure: a triangle consisting of three lines, which we give the properties 1, 2 and 3, so that the three lines are shown in a different color:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="s1">&#39;l:164&#39;</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<div class="figure align-center" id="id13">
<span id="fig-helix-000"></span><img alt="The basic Formex" src="_images/helix-000.png" />
<p class="caption"><span class="caption-text">The basic Formex</span></p>
</div>
<p>This basic Formex is copied <code class="docutils literal"><span class="pre">m</span></code> times with a translation step 1.0 (this is precisely the length
of the horizontal edge of the triangle) in the 0 direction:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">replic</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center" id="id14">
<span id="fig-helix-001"></span><img alt="Replicated in x-direction" src="_images/helix-001.png" />
<p class="caption"><span class="caption-text">Replicated in x-direction</span></p>
</div>
<p>Then, the new  Formex
is copied <code class="docutils literal"><span class="pre">n</span></code> times  with the same step size in the direction 1.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">replic</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-center" id="id15">
<span id="fig-helix-002"></span><img alt="Replicated in y-direction" src="_images/helix-002.png" />
<p class="caption"><span class="caption-text">Replicated in y-direction</span></p>
</div>
<p>Now a copy of this last Formex is translated in direction &#8216;2&#8217; with a
translation step of &#8216;1&#8217;. This necessary for the transformation into a cylinder.
The result of all previous steps is a rectangular pattern with the desired
dimensions, in a plane z=1.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span> <span class="n">drawit</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;iso&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This pattern is rolled up into a cylinder around the 2-axis.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">cylindrical</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">360.</span><span class="o">/</span><span class="n">n</span><span class="p">,</span><span class="mf">1.</span><span class="p">]);</span> <span class="n">drawit</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;iso&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This cylinder is copied 5 times in the 2-direction with a translation step of
&#8216;m&#8217; (the lenght of the cylinder).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">replic</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span> <span class="n">drawit</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;iso&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The next step is to rotate this cylinder -10 degrees around the 0-axis.  This
will determine the pitch angle of the spiral.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span> <span class="n">drawit</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;iso&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This last Formex is now translated in direction &#8216;0&#8217; with a translation step of
&#8216;5&#8217;.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span> <span class="n">drawit</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;iso&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, the Formex is rolled up, but around a different axis then before.  Due
to the pitch angle, a spiral is created. If the pitch angle would be 0  (no
rotation of -10 degrees around the 0-axis), the resulting Formex  would be a
torus.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">F</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">cylindrical</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mf">1.</span><span class="p">,</span><span class="mf">360.</span><span class="o">/</span><span class="n">m</span><span class="p">,</span><span class="mf">1.</span><span class="p">]);</span> <span class="n">drawit</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;iso&#39;</span><span class="p">)</span>
<span class="n">drawit</span><span class="p">(</span><span class="n">F</span><span class="p">,</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="converting-a-formex-to-a-mesh-model">
<span id="sec-femodel"></span><h2>Converting a Formex to a Mesh model<a class="headerlink" href="#converting-a-formex-to-a-mesh-model" title="Permalink to this headline">¶</a></h2>
<p>pyFormex contains other geometry models besides the Formex. The
<code class="xref py py-class docutils literal"><span class="pre">Mesh</span></code> model e.g. is important in exporting the geometry to finite
element (FE) programs. A Formex often contains many points with (nearly) the
same coordinates. In a Finite Element model, these points have to be merged
into a single node, to express the continuity of the material.
The <code class="xref py py-meth docutils literal"><span class="pre">toMesh()</span></code> method of a <code class="xref py py-class docutils literal"><span class="pre">Formex</span></code>
performs exactly that. It returns a  <code class="xref py py-class docutils literal"><span class="pre">Mesh</span></code> instance, which has
two import array attributes &#8216;coords&#8217; and &#8216;elems&#8217;:</p>
<ul class="simple">
<li>coords is a float array with shape (ncoords,3), containing the
coordinates of the merged points (nodes),</li>
<li>elems is an integer array with shape (F.nelems(),F.nplex()), describing each
element by a list of node numbers. These can be used as indices in
the coords array to find the coordinates of the node.
The elements and their nodes are in the same order as in F.</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">simple</span> <span class="k">import</span> <span class="o">*</span>
<span class="n">F</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="n">Pattern</span><span class="p">[</span><span class="s1">&#39;cube&#39;</span><span class="p">])</span>
<span class="n">draw</span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
<span class="n">M</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">toMesh</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Coords&#39;</span><span class="p">,</span><span class="n">M</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Elements&#39;</span><span class="p">,</span><span class="n">M</span><span class="o">.</span><span class="n">elems</span><span class="p">)</span>
</pre></div>
</div>
<p>The output of this script are the coordinates of the unique nodes of
the Mesh, and the connectivity of the elements. The connectivity is an
integer array with the same shape as the first two dimensions of the
Formex: (F.nelems(),F.nplex()):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Nodes</span>
<span class="p">[[</span> <span class="mf">0.</span>  <span class="mf">0.</span>  <span class="mf">0.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">1.</span>  <span class="mf">0.</span>  <span class="mf">0.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">0.</span>  <span class="mf">1.</span>  <span class="mf">0.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">0.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">0.</span>  <span class="mf">0.</span>  <span class="mf">1.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">1.</span>  <span class="mf">0.</span>  <span class="mf">1.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">0.</span>  <span class="mf">1.</span>  <span class="mf">1.</span><span class="p">]</span>
 <span class="p">[</span> <span class="mf">1.</span>  <span class="mf">1.</span>  <span class="mf">1.</span><span class="p">]]</span>
<span class="n">Elements</span>
<span class="p">[[</span><span class="mi">0</span> <span class="mi">1</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">3</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">3</span> <span class="mi">2</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">2</span> <span class="mi">0</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">0</span> <span class="mi">4</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">1</span> <span class="mi">5</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">3</span> <span class="mi">7</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">2</span> <span class="mi">6</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">4</span> <span class="mi">5</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">5</span> <span class="mi">7</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">7</span> <span class="mi">6</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">6</span> <span class="mi">4</span><span class="p">]]</span>
</pre></div>
</div>
<p>The inverse operation of transforming a Mesh model back into a Formex
is also quite simple: <code class="docutils literal"><span class="pre">Formex(nodes[elems])</span></code> will indeed be identical to the
original F (within the tolerance used in merging of the nodes).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">G</span> <span class="o">=</span> <span class="n">Formex</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">elems</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">allclose</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">f</span><span class="p">,</span><span class="n">G</span><span class="o">.</span><span class="n">f</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">allclose</span></code> function in the second line tests that all coordinates in both
arrays are the same, within a small tolerance.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="user-guide.html" title="pyFormex user guide"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Installing pyFormex"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pyFormex 1.0.3-a2 documentation</a> &gt;</li> 
      </ul>
    </div>
    <div class="footer">
    <span class="left">
        &copy; Copyright 2004-2015, Benedict Verhegghe.
    </span>
      Last updated on Sep 29, 2016.
    <span class="right">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.4.5.
    </span>
    </div>
  </body>
</html>
